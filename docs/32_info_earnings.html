<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>25&nbsp; Information Content of Earnings Announcements – Applying Tidy Finance with Python to Vietnam</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./33_accruals.html" rel="next">
<link href="./31_discounted_cash_flow.html" rel="prev">
<link href="./favicon.ico" rel="icon">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-b758ccaa5987ceb1b75504551e579abf.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-50a4fa9e9ef121803c2355a2deb1af4d.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark-d8431037eefe704a1e7a103aa5b75ea7.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="site_libs/bootstrap/bootstrap-50a4fa9e9ef121803c2355a2deb1af4d.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js" integrity="sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="25&nbsp; Information Content of Earnings Announcements – Applying Tidy Finance with Python to Vietnam">
<meta property="og:description" content="">
<meta property="og:image" content="https://github.com/mikenguyen13/tidy_finance_vn/32_info_earnings_files/figure-html/fig-single-volume-output-1.png">
<meta property="og:site_name" content="Applying Tidy Finance with Python to Vietnam">
<meta property="og:image:height" content="1458">
<meta property="og:image:width" content="2060">
<meta name="twitter:title" content="25&nbsp; Information Content of Earnings Announcements – Applying Tidy Finance with Python to Vietnam">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="https://github.com/mikenguyen13/tidy_finance_vn/32_info_earnings_files/figure-html/fig-single-volume-output-1.png">
<meta name="twitter:image-height" content="1458">
<meta name="twitter:image-width" content="2060">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar floating quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./30_financial_statement_analysis.html">Firm Fundamentals, Valuation, and Corporate Signals</a></li><li class="breadcrumb-item"><a href="./32_info_earnings.html"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Information Content of Earnings Announcements</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Applying Tidy Finance with Python to Vietnam</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/mikenguyen13/tidy_finance_vn" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Vietnam Financial Markets, Institutions, and Data</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00_institutional_background.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Institutional Background and Market Structure of Vietnam’s Equity Market</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01_accessing_and_managing_financial_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Accessing and Managing VN Financial Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02_datacore_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Datacore Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_market_microstructure.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Market Microstructure in Vietnam</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04_risk_free_rate_construction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Risk-Free Rate Construction in Vietnam</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05_working_with_stock_returns.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Constructing and Analyzing Equity Return Series</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06_compound_return.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Compound Returns</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Portfolio Construction, Risk, and Empirical Mechanics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10_modern_portfolio_theory.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Modern Portfolio Theory</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11_univariate_portfolio_sort.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Univariate Portfolio Sorts</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12_size_sorts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Size Sorts</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13_value_bivariate.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Value and Bivariate Sorts</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14_portfolio_weighting_and_rebalancing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Portfolio Weighting and Rebalancing</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15_missing_data_and_survivorship.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Missing Data and Survivorship Bias</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16_liquidity_and_turnover_measures.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Liquidity and Turnover Measures</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17_beta_estimation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Beta Estimation</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Asset Pricing Models and Cross-Sectional Tests</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./20_capm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">The Capital Asset Pricing Model</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./21_fama_french.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Fama-French Factors</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./22_momentum.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Momentum Strategies</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./23_factor_construction_principles.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Factor Construction Principles</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./24_fama_macbeth.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Fama-MacBeth Regressions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./25_factor_zoo_and_multiple_testing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Factor Zoo and Multiple Testing</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./26_time_series_vs_cross_section.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Time-Series vs.&nbsp;Cross-Sectional Factor Tests</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Firm Fundamentals, Valuation, and Corporate Signals</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./30_financial_statement_analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Financial Statement Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./31_discounted_cash_flow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Discounted Cash Flow Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./32_info_earnings.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Information Content of Earnings Announcements</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./33_accruals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Accruals, Earnings Persistence, and Market Efficiency</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./34_earning_management.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Earnings Management: Detection and Measurement</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./35_pe_ratio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">P/E Ratio</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./36_valuation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Firm Valuation, Financial Distress, and Company Maturity</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./37_disclosure_quality_and_timing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Disclosure Quality and Timing</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./38_sue.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Standardized Earnings Surprises (SUE)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./39_divop.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Measuring Divergence of Investor Opinion</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Ownership, Market Frictions, and International Exposure</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./50_institutional_ownership.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Institutional Ownership Analytics in Vietnam</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./52_institutional_trade_flow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Institutional Trades, Flows, and Turnover Ratios</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./53_governance.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">Corporate Governance</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./54_return_gaps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">36</span>&nbsp; <span class="chapter-title">Return Gap: Measuring Unobserved Actions of Fund Managers</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./55_price_limits_and_volatility.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">37</span>&nbsp; <span class="chapter-title">Price Limits and Volatility</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./56_market_integration_and_segmentation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">38</span>&nbsp; <span class="chapter-title">Market Integration and Segmentation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./57_exchange_rate.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">39</span>&nbsp; <span class="chapter-title">Exchange Rate Dynamics</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Advanced Data, Research Design, and Frontiers</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./60_textual.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">40</span>&nbsp; <span class="chapter-title">Textual Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./65_event_studies.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">41</span>&nbsp; <span class="chapter-title">Event Studies in Finance</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./66_tail_risk_extreme_events.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">42</span>&nbsp; <span class="chapter-title">Tail Risk and Extreme Events</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./67_corporate_finance_estimators.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">43</span>&nbsp; <span class="chapter-title">Corporate Finance Estimators and Identification</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./99_conclusion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">44</span>&nbsp; <span class="chapter-title">Conclusion</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="-1">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#two-distinct-signals-volume-vs.-volatility" id="toc-two-distinct-signals-volume-vs.-volatility" class="nav-link active" data-scroll-target="#two-distinct-signals-volume-vs.-volatility"><span class="header-section-number">25.0.1</span> Two Distinct Signals: Volume vs.&nbsp;Volatility</a></li>
  <li><a href="#why-vietnam" id="toc-why-vietnam" class="nav-link" data-scroll-target="#why-vietnam"><span class="header-section-number">25.0.2</span> Why Vietnam?</a></li>
  <li><a href="#sec-info-earnings-theory" id="toc-sec-info-earnings-theory" class="nav-link" data-scroll-target="#sec-info-earnings-theory"><span class="header-section-number">25.1</span> Theoretical Framework</a>
  <ul class="collapse">
  <li><a href="#the-information-content-hypothesis" id="toc-the-information-content-hypothesis" class="nav-link" data-scroll-target="#the-information-content-hypothesis"><span class="header-section-number">25.1.1</span> The Information Content Hypothesis</a></li>
  <li><a href="#volume-as-a-signal-of-heterogeneous-beliefs" id="toc-volume-as-a-signal-of-heterogeneous-beliefs" class="nav-link" data-scroll-target="#volume-as-a-signal-of-heterogeneous-beliefs"><span class="header-section-number">25.1.2</span> Volume as a Signal of Heterogeneous Beliefs</a></li>
  <li><a href="#measuring-information-content" id="toc-measuring-information-content" class="nav-link" data-scroll-target="#measuring-information-content"><span class="header-section-number">25.1.3</span> Measuring Information Content</a></li>
  </ul></li>
  <li><a href="#sec-info-earnings-measures" id="toc-sec-info-earnings-measures" class="nav-link" data-scroll-target="#sec-info-earnings-measures"><span class="header-section-number">25.2</span> Data and Variable Construction</a>
  <ul class="collapse">
  <li><a href="#data-requirements" id="toc-data-requirements" class="nav-link" data-scroll-target="#data-requirements"><span class="header-section-number">25.2.1</span> Data Requirements</a></li>
  <li><a href="#trading-day-calendar" id="toc-trading-day-calendar" class="nav-link" data-scroll-target="#trading-day-calendar"><span class="header-section-number">25.2.2</span> Trading Day Calendar</a></li>
  <li><a href="#announcement-date-alignment" id="toc-announcement-date-alignment" class="nav-link" data-scroll-target="#announcement-date-alignment"><span class="header-section-number">25.2.3</span> Announcement Date Alignment</a></li>
  <li><a href="#generating-synthetic-vietnamese-data" id="toc-generating-synthetic-vietnamese-data" class="nav-link" data-scroll-target="#generating-synthetic-vietnamese-data"><span class="header-section-number">25.2.4</span> Generating Synthetic Vietnamese Data</a></li>
  </ul></li>
  <li><a href="#sec-info-earnings-single" id="toc-sec-info-earnings-single" class="nav-link" data-scroll-target="#sec-info-earnings-single"><span class="header-section-number">25.3</span> Single-Event Walkthrough</a>
  <ul class="collapse">
  <li><a href="#selecting-the-event" id="toc-selecting-the-event" class="nav-link" data-scroll-target="#selecting-the-event"><span class="header-section-number">25.3.1</span> Selecting the Event</a></li>
  <li><a href="#event-window-data" id="toc-event-window-data" class="nav-link" data-scroll-target="#event-window-data"><span class="header-section-number">25.3.2</span> Event Window Data</a></li>
  <li><a href="#visualizing-the-single-event" id="toc-visualizing-the-single-event" class="nav-link" data-scroll-target="#visualizing-the-single-event"><span class="header-section-number">25.3.3</span> Visualizing the Single Event</a></li>
  </ul></li>
  <li><a href="#sec-info-earnings-full-sample" id="toc-sec-info-earnings-full-sample" class="nav-link" data-scroll-target="#sec-info-earnings-full-sample"><span class="header-section-number">25.4</span> Full-Sample Analysis</a>
  <ul class="collapse">
  <li><a href="#computing-event-time-aggregates" id="toc-computing-event-time-aggregates" class="nav-link" data-scroll-target="#computing-event-time-aggregates"><span class="header-section-number">25.4.1</span> Computing Event-Time Aggregates</a></li>
  <li><a href="#return-volatility-around-announcements" id="toc-return-volatility-around-announcements" class="nav-link" data-scroll-target="#return-volatility-around-announcements"><span class="header-section-number">25.4.2</span> Return Volatility Around Announcements</a></li>
  <li><a href="#trading-volume-around-announcements" id="toc-trading-volume-around-announcements" class="nav-link" data-scroll-target="#trading-volume-around-announcements"><span class="header-section-number">25.4.3</span> Trading Volume Around Announcements</a></li>
  <li><a href="#formal-statistical-tests" id="toc-formal-statistical-tests" class="nav-link" data-scroll-target="#formal-statistical-tests"><span class="header-section-number">25.4.4</span> Formal Statistical Tests</a></li>
  <li><a href="#standardized-volatility-ratio" id="toc-standardized-volatility-ratio" class="nav-link" data-scroll-target="#standardized-volatility-ratio"><span class="header-section-number">25.4.5</span> Standardized Volatility Ratio</a></li>
  </ul></li>
  <li><a href="#sec-info-earnings-cross" id="toc-sec-info-earnings-cross" class="nav-link" data-scroll-target="#sec-info-earnings-cross"><span class="header-section-number">25.5</span> Cross-Sectional Variation</a>
  <ul class="collapse">
  <li><a href="#by-firm-size" id="toc-by-firm-size" class="nav-link" data-scroll-target="#by-firm-size"><span class="header-section-number">25.5.1</span> By Firm Size</a></li>
  <li><a href="#by-exchange-hose-vs.-hnx" id="toc-by-exchange-hose-vs.-hnx" class="nav-link" data-scroll-target="#by-exchange-hose-vs.-hnx"><span class="header-section-number">25.5.2</span> By Exchange (HOSE vs.&nbsp;HNX)</a></li>
  <li><a href="#regression-analysis" id="toc-regression-analysis" class="nav-link" data-scroll-target="#regression-analysis"><span class="header-section-number">25.5.3</span> Regression Analysis</a></li>
  </ul></li>
  <li><a href="#sec-info-earnings-discussion" id="toc-sec-info-earnings-discussion" class="nav-link" data-scroll-target="#sec-info-earnings-discussion"><span class="header-section-number">25.6</span> Discussion and Contemporary Perspectives</a>
  <ul class="collapse">
  <li><a href="#the-bamber-et-al.-2000-critique" id="toc-the-bamber-et-al.-2000-critique" class="nav-link" data-scroll-target="#the-bamber-et-al.-2000-critique"><span class="header-section-number">25.6.1</span> The Bamber et al.&nbsp;(2000) Critique</a></li>
  <li><a href="#how-much-information-do-earnings-announcements-convey" id="toc-how-much-information-do-earnings-announcements-convey" class="nav-link" data-scroll-target="#how-much-information-do-earnings-announcements-convey"><span class="header-section-number">25.6.2</span> How Much Information Do Earnings Announcements Convey?</a></li>
  <li><a href="#price-limits-and-multi-day-adjustment" id="toc-price-limits-and-multi-day-adjustment" class="nav-link" data-scroll-target="#price-limits-and-multi-day-adjustment"><span class="header-section-number">25.6.3</span> Price Limits and Multi-Day Adjustment</a></li>
  <li><a href="#international-context" id="toc-international-context" class="nav-link" data-scroll-target="#international-context"><span class="header-section-number">25.6.4</span> International Context</a></li>
  </ul></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary"><span class="header-section-number">25.7</span> Summary</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/mikenguyen13/tidy_finance_vn/edit/main/32_info_earnings.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/mikenguyen13/tidy_finance_vn/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">


<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./30_financial_statement_analysis.html">Firm Fundamentals, Valuation, and Corporate Signals</a></li><li class="breadcrumb-item"><a href="./32_info_earnings.html"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Information Content of Earnings Announcements</span></a></li></ol></nav>
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Information Content of Earnings Announcements</span></h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div id="setup" class="cell" data-message="false" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.ticker <span class="im">as</span> mticker</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.dates <span class="im">as</span> mdates</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.formula.api <span class="im">as</span> smf</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy <span class="im">import</span> stats</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> warnings</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>warnings.filterwarnings(<span class="st">"ignore"</span>)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>plt.rcParams.update({</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"figure.dpi"</span>: <span class="dv">150</span>,</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">"axes.spines.top"</span>: <span class="va">False</span>,</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"axes.spines.right"</span>: <span class="va">False</span>,</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">"font.size"</span>: <span class="dv">11</span>,</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>A foundational question in capital markets research is whether accounting information matters to investors. If financial statements merely repackage what the market already knows from other sources, such as press coverage, analyst reports, management guidance, macroeconomic data, then the elaborate apparatus of financial reporting is largely redundant for price discovery. Conversely, if earnings announcements trigger measurable changes in trading behavior, we have evidence that the accounting system produces information the market did not previously possess.</p>
<p><span class="citation" data-cites="beaver1968information">Beaver (<a href="references.html#ref-beaver1968information" role="doc-biblioref">1968</a>)</span> addressed this question by examining whether trading volume and return volatility increase around the dates when firms announce annual earnings. The logic is direct: if an earnings announcement contains new information, it should alter investors’ beliefs. Altered beliefs lead some investors to trade, increasing volume. And to the extent that the announcement resolves uncertainty, the stock price should adjust, generating abnormal return volatility. Both channels (i.e., volume and volatility) provide distinct windows into the information content of earnings.</p>
<p>The empirical design compares a firm’s trading activity during a narrow <strong>announcement window</strong> (the days immediately around the earnings release) with its own trading activity during a <strong>non-announcement window</strong> (otherwise comparable days away from the event). If the announcement conveys information, the announcement window should show elevated volume and volatility relative to the non-announcement period.</p>
<section id="two-distinct-signals-volume-vs.-volatility" class="level3" data-number="25.0.1">
<h3 data-number="25.0.1" class="anchored" data-anchor-id="two-distinct-signals-volume-vs.-volatility"><span class="header-section-number">25.0.1</span> Two Distinct Signals: Volume vs.&nbsp;Volatility</h3>
<p>While volume and return volatility are both used to measure investor reaction, they capture different economic phenomena. This distinction, formalized in subsequent theoretical work, is important for interpreting results:</p>
<ul>
<li><p><strong>Return volatility</strong> reflects the <em>average</em> revision in investor beliefs. When the market as a whole is surprised by an earnings number, prices move sharply. The magnitude of the squared (or absolute) return residual measures how far the announcement moved the consensus. This is a measure of the <em>aggregate information content</em> of the announcement <span class="citation" data-cites="kim1991market">(<a href="references.html#ref-kim1991market" role="doc-biblioref">Kim and Verrecchia 1991</a>)</span>.</p></li>
<li><p><strong>Trading volume</strong> reflects <em>disagreement</em> among investors about the implications of the announcement. Even an announcement that moves prices very little can generate heavy trading if investors interpret the same signal differently. For example, if some view an earnings beat as sustainable while others view it as temporary <span class="citation" data-cites="kandel1995differential">(<a href="references.html#ref-kandel1995differential" role="doc-biblioref">Kandel and Pearson 1995</a>)</span>. Volume thus captures the <em>differential information content</em> of the announcement.</p></li>
</ul>
<p><span class="citation" data-cites="karpoff1987relation">Karpoff (<a href="references.html#ref-karpoff1987relation" role="doc-biblioref">1987</a>)</span> surveys the theoretical and empirical relationship between these two variables. The key insight is that volume is not simply a noisier version of volatility; it provides independent information about how the market processes accounting data.</p>
</section>
<section id="why-vietnam" class="level3" data-number="25.0.2">
<h3 data-number="25.0.2" class="anchored" data-anchor-id="why-vietnam"><span class="header-section-number">25.0.2</span> Why Vietnam?</h3>
<p>Vietnam’s equity markets provide a distinctive setting for studying announcement reactions for several reasons:</p>
<ol type="1">
<li><p><strong>Information environment.</strong> Vietnamese listed firms face less intense pre-announcement scrutiny than their U.S. counterparts. Analyst coverage is sparse (most firms outside the VN30 index receive no institutional coverage). Management earnings guidance is rare. This creates a thicker “information gap” for the earnings announcement to fill, potentially amplifying both volume and volatility reactions.</p></li>
<li><p><strong>Retail investor dominance.</strong> Over 80% of daily trading volume on HOSE is attributed to retail investors. Retail traders may process earnings information differently from institutions, with greater behavioral biases, less capacity for fundamental analysis, and different trading horizons. This affects both the timing and magnitude of market reactions.</p></li>
<li><p><strong>Price limits.</strong> HOSE imposes daily price limits of <span class="math inline">\(\pm\)</span> 7% and HNX of <span class="math inline">\(\pm\)</span> 10%. When an earnings announcement is sufficiently surprising, the stock may hit its price limit, preventing the market from fully incorporating the information within a single trading session. This creates a distinctive pattern of <em>multi-day adjustment</em> that has no analogue in the original U.S. studies.</p></li>
<li><p><strong>Disclosure timing.</strong> Vietnamese regulations require audited annual financial statements to be published within 90 days of fiscal year-end. Quarterly financial data (unaudited) must be released within 20 days. The overlap between quarterly and annual announcements, and the variable lag between fiscal year-end and announcement date, creates heterogeneity in the information content of annual earnings releases.</p></li>
<li><p><strong>Market structure.</strong> Vietnam operates continuous order-matching during trading hours (9:00–11:30 and 13:00–14:30 on HOSE; 9:00–11:30 and 13:00–15:00 on HNX), with periodic call auctions at open and close. This microstructure affects intraday patterns of price discovery around announcements.</p></li>
</ol>
</section>
<section id="sec-info-earnings-theory" class="level2" data-number="25.1">
<h2 data-number="25.1" class="anchored" data-anchor-id="sec-info-earnings-theory"><span class="header-section-number">25.1</span> Theoretical Framework</h2>
<section id="the-information-content-hypothesis" class="level3" data-number="25.1.1">
<h3 data-number="25.1.1" class="anchored" data-anchor-id="the-information-content-hypothesis"><span class="header-section-number">25.1.1</span> The Information Content Hypothesis</h3>
<p>Let <span class="math inline">\(P_{i,t}\)</span> denote the price of stock <span class="math inline">\(i\)</span> on date <span class="math inline">\(t\)</span>. Under the efficient markets hypothesis, the price reflects all publicly available information:</p>
<p><span id="eq-emh"><span class="math display">\[
P_{i,t} = E\left[\sum_{s=1}^{\infty} \frac{D_{i,t+s}}{(1+r)^s} \;\bigg|\; \Omega_t \right]
\tag{25.1}\]</span></span></p>
<p>where <span class="math inline">\(D_{i,t+s}\)</span> represents future dividends, <span class="math inline">\(r\)</span> is the discount rate, and <span class="math inline">\(\Omega_t\)</span> is the information set at time <span class="math inline">\(t\)</span>.</p>
<p>When firm <span class="math inline">\(i\)</span> announces earnings <span class="math inline">\(X_i\)</span> at time <span class="math inline">\(\tau\)</span>, the information set expands: <span class="math inline">\(\Omega_{\tau^+} = \Omega_{\tau^-} \cup \{X_i\}\)</span>. If the announcement contains new information, meaning <span class="math inline">\(X_i \notin \Omega_{\tau^-}\)</span>, then in general:</p>
<p><span id="eq-price-revision"><span class="math display">\[
P_{i,\tau^+} \neq P_{i,\tau^-}
\tag{25.2}\]</span></span></p>
<p>The magnitude of the price change reflects the <em>surprise</em> component of the announcement:</p>
<p><span id="eq-surprise"><span class="math display">\[
|P_{i,\tau^+} - P_{i,\tau^-}| \propto |X_i - E[X_i | \Omega_{\tau^-}]|
\tag{25.3}\]</span></span></p>
</section>
<section id="volume-as-a-signal-of-heterogeneous-beliefs" class="level3" data-number="25.1.2">
<h3 data-number="25.1.2" class="anchored" data-anchor-id="volume-as-a-signal-of-heterogeneous-beliefs"><span class="header-section-number">25.1.2</span> Volume as a Signal of Heterogeneous Beliefs</h3>
<p><span class="citation" data-cites="kim1991market">Kim and Verrecchia (<a href="references.html#ref-kim1991market" role="doc-biblioref">1991</a>)</span> develop a model where trading volume is driven by the precision of investors’ private information relative to the precision of the public signal. Define <span class="math inline">\(V_{i,\tau}\)</span> as the trading volume for stock <span class="math inline">\(i\)</span> at time <span class="math inline">\(\tau\)</span>. In their framework:</p>
<p><span id="eq-volume-model"><span class="math display">\[
V_{i,\tau} = f\left(\frac{\text{Var}[X_i | \Omega^{(j)}_{\tau^-}]}{\text{Var}[\varepsilon_i]}\right)
\tag{25.4}\]</span></span></p>
<p>where <span class="math inline">\(\Omega^{(j)}_{\tau^-}\)</span> is investor <span class="math inline">\(j\)</span>’s private information set and <span class="math inline">\(\varepsilon_i\)</span> is noise. Volume increases when investors disagree about what the announcement means, a condition that <span class="citation" data-cites="kandel1995differential">Kandel and Pearson (<a href="references.html#ref-kandel1995differential" role="doc-biblioref">1995</a>)</span> term <strong>differential interpretation</strong>.</p>
<p>This distinction matters for Vietnam. In a market dominated by retail investors with heterogeneous information and analytical capacity, we might expect the volume reaction to be <em>disproportionately large</em> relative to the price reaction, because disagreement is high even when the aggregate price revision is modest.</p>
</section>
<section id="measuring-information-content" class="level3" data-number="25.1.3">
<h3 data-number="25.1.3" class="anchored" data-anchor-id="measuring-information-content"><span class="header-section-number">25.1.3</span> Measuring Information Content</h3>
<p>We use two complementary measures:</p>
<p><strong>Abnormal return volatility.</strong> For each firm-day, compute the squared market-adjusted return:</p>
<p><span id="eq-squared-residual"><span class="math display">\[
U^2_{i,t} = (R_{i,t} - R_{m,t})^2
\tag{25.5}\]</span></span></p>
<p>where <span class="math inline">\(R_{i,t}\)</span> is the return on stock <span class="math inline">\(i\)</span> and <span class="math inline">\(R_{m,t}\)</span> is the market return. Under the null of no information content, <span class="math inline">\(E[U^2_{i,t}]\)</span> should be the same in the announcement and non-announcement windows. <span class="citation" data-cites="beaver1968information">Beaver (<a href="references.html#ref-beaver1968information" role="doc-biblioref">1968</a>)</span> standardized this measure by dividing by the firm’s average <span class="math inline">\(U^2\)</span> during non-announcement weeks.</p>
<p><strong>Relative volume.</strong> For each firm-day, compute:</p>
<p><span id="eq-relative-volume"><span class="math display">\[
RV_{i,t} = \frac{Vol_{i,t}}{\overline{Vol}_i}
\tag{25.6}\]</span></span></p>
<p>where <span class="math inline">\(\overline{Vol}_i\)</span> is the firm’s average daily volume over the event window. A value of <span class="math inline">\(RV &gt; 1\)</span> indicates above-average trading. <span class="citation" data-cites="beaver1968information">Beaver (<a href="references.html#ref-beaver1968information" role="doc-biblioref">1968</a>)</span> used a similar approach, computing a “volume ratio” relative to non-report-period averages.</p>
</section>
</section>
<section id="sec-info-earnings-measures" class="level2" data-number="25.2">
<h2 data-number="25.2" class="anchored" data-anchor-id="sec-info-earnings-measures"><span class="header-section-number">25.2</span> Data and Variable Construction</h2>
<section id="data-requirements" class="level3" data-number="25.2.1">
<h3 data-number="25.2.1" class="anchored" data-anchor-id="data-requirements"><span class="header-section-number">25.2.1</span> Data Requirements</h3>
<p>The analysis requires three data elements:</p>
<div id="tbl-info-earnings-data-sources" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-info-earnings-data-sources-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;25.1: Data sources for the information content analysis
</figcaption>
<div aria-describedby="tbl-info-earnings-data-sources-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 26%">
<col style="width: 31%">
<col style="width: 41%">
</colgroup>
<thead>
<tr class="header">
<th>Data</th>
<th>Source</th>
<th>Key Fields</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Earnings announcement dates</td>
<td>Financial statements/filings</td>
<td>Ticker, fiscal year-end, announcement date</td>
</tr>
<tr class="even">
<td>Daily stock returns</td>
<td>Exchange data (HOSE/HNX)</td>
<td>Ticker, date, closing price, return</td>
</tr>
<tr class="odd">
<td>Daily trading volume</td>
<td>Exchange data (HOSE/HNX)</td>
<td>Ticker, date, volume (shares or VND)</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</section>
<section id="trading-day-calendar" class="level3" data-number="25.2.2">
<h3 data-number="25.2.2" class="anchored" data-anchor-id="trading-day-calendar"><span class="header-section-number">25.2.2</span> Trading Day Calendar</h3>
<p>A critical infrastructure element is a <strong>trading day calendar</strong> that maps calendar dates to sequential trading day indices. This allows us to count “20 trading days before the announcement” correctly, skipping weekends and holidays.</p>
<div id="trading-calendar" class="cell" data-execution_count="2">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> build_trading_calendar(</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    start_date: <span class="bu">str</span> <span class="op">=</span> <span class="st">"2008-01-01"</span>,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    end_date: <span class="bu">str</span> <span class="op">=</span> <span class="st">"2024-12-31"</span>,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> pd.DataFrame:</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co">    Build a trading day calendar for Vietnamese stock exchanges.</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co">    Vietnamese exchanges trade Monday–Friday, with closures for:</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co">    - Tết Nguyên Đán (Lunar New Year, ~5 days)</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co">    - Ngày Giỗ Tổ Hùng Vương (Hung Kings' Commemoration)</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co">    - Ngày Giải phóng miền Nam (Reunification Day, Apr 30)</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co">    - Ngày Quốc tế Lao động (Labour Day, May 1)</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="co">    - Quốc khánh (National Day, Sep 2)</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="co">    - Tết Dương lịch (New Year, Jan 1)</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="co">    For simulation, we approximate by removing weekends and ~10 holidays/year.</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>    all_dates <span class="op">=</span> pd.date_range(start_date, end_date, freq<span class="op">=</span><span class="st">"B"</span>)  <span class="co"># business days</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove approximate Vietnamese public holidays</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># (In practice, use the exact holiday calendar from SSC/HOSE)</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>    rng <span class="op">=</span> np.random.default_rng(<span class="dv">42</span>)</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>    n_holidays_per_year <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>    years <span class="op">=</span> all_dates.year.unique()</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    holidays <span class="op">=</span> []</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> yr <span class="kw">in</span> years:</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>        yr_dates <span class="op">=</span> all_dates[all_dates.year <span class="op">==</span> yr]</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">len</span>(yr_dates) <span class="op">&gt;</span> n_holidays_per_year:</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>            idx <span class="op">=</span> rng.choice(<span class="bu">len</span>(yr_dates), n_holidays_per_year, replace<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>            holidays.extend(yr_dates[idx])</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>    trading_dates <span class="op">=</span> all_dates.difference(pd.DatetimeIndex(holidays))</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>    cal <span class="op">=</span> pd.DataFrame({</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>        <span class="st">"date"</span>: trading_dates,</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>        <span class="st">"td"</span>: np.arange(<span class="dv">1</span>, <span class="bu">len</span>(trading_dates) <span class="op">+</span> <span class="dv">1</span>),</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> cal</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>trading_cal <span class="op">=</span> build_trading_calendar()</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Trading calendar: </span><span class="sc">{</span><span class="bu">len</span>(trading_cal)<span class="sc">:,}</span><span class="ss"> trading days, "</span></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>      <span class="ss">f"</span><span class="sc">{</span>trading_cal[<span class="st">'date'</span>]<span class="sc">.</span><span class="bu">min</span>()<span class="sc">.</span>date()<span class="sc">}</span><span class="ss"> to </span><span class="sc">{</span>trading_cal[<span class="st">'date'</span>]<span class="sc">.</span><span class="bu">max</span>()<span class="sc">.</span>date()<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Trading calendar: 4,266 trading days, 2008-01-01 to 2024-12-31</code></pre>
</div>
</div>
</section>
<section id="announcement-date-alignment" class="level3" data-number="25.2.3">
<h3 data-number="25.2.3" class="anchored" data-anchor-id="announcement-date-alignment"><span class="header-section-number">25.2.3</span> Announcement Date Alignment</h3>
<p>Earnings announcements may occur on non-trading days (weekends, holidays). When this happens, we assign the announcement to the <em>next available</em> trading day, since that is the first opportunity for the market to react. We also need to handle the case where announcements occur after market close. Ideally, these would be assigned to the following trading day. Without intraday timing data (common in Vietnamese disclosures), we use the announcement date as reported.</p>
<div id="annc-date-alignment" class="cell" data-execution_count="3">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> build_announcement_mapper(trading_cal: pd.DataFrame) <span class="op">-&gt;</span> pd.DataFrame:</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Create a mapping from every calendar date to the next available</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co">    trading day index. This handles announcements on weekends/holidays.</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    min_date <span class="op">=</span> trading_cal[<span class="st">"date"</span>].<span class="bu">min</span>()</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    max_date <span class="op">=</span> trading_cal[<span class="st">"date"</span>].<span class="bu">max</span>()</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    all_dates <span class="op">=</span> pd.date_range(min_date, max_date, freq<span class="op">=</span><span class="st">"D"</span>)</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    mapper <span class="op">=</span> pd.DataFrame({<span class="st">"annc_date"</span>: all_dates})</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    mapper <span class="op">=</span> mapper.merge(</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>        trading_cal.rename(columns<span class="op">=</span>{<span class="st">"date"</span>: <span class="st">"annc_date"</span>}),</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>        on<span class="op">=</span><span class="st">"annc_date"</span>,</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>        how<span class="op">=</span><span class="st">"left"</span>,</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Forward-fill: assign non-trading dates to next trading day</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>    mapper[<span class="st">"td"</span>] <span class="op">=</span> mapper[<span class="st">"td"</span>].bfill()</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>    mapper[<span class="st">"td"</span>] <span class="op">=</span> mapper[<span class="st">"td"</span>].astype(<span class="st">"Int64"</span>)</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> mapper</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>annc_mapper <span class="op">=</span> build_announcement_mapper(trading_cal)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="generating-synthetic-vietnamese-data" class="level3" data-number="25.2.4">
<h3 data-number="25.2.4" class="anchored" data-anchor-id="generating-synthetic-vietnamese-data"><span class="header-section-number">25.2.4</span> Generating Synthetic Vietnamese Data</h3>
<p>We generate a synthetic panel of Vietnamese listed firms with realistic properties to demonstrate the methodology. The simulation embeds an earnings announcement effect—elevated volume and volatility on days 0 and +1, that we then seek to detect using the <span class="citation" data-cites="beaver1968information">Beaver (<a href="references.html#ref-beaver1968information" role="doc-biblioref">1968</a>)</span> framework.</p>
<div id="gen-data" class="cell" data-execution_count="4">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> generate_beaver_data(</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    n_firms: <span class="bu">int</span> <span class="op">=</span> <span class="dv">300</span>,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    years: <span class="bu">list</span>[<span class="bu">int</span>] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    seed: <span class="bu">int</span> <span class="op">=</span> <span class="dv">2024</span>,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    days_window: <span class="bu">int</span> <span class="op">=</span> <span class="dv">20</span>,</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">tuple</span>[pd.DataFrame, pd.DataFrame]:</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co">    Generate:</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="co">    1. earn_annc: DataFrame of earnings announcement dates</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co">    2. daily_data: DataFrame of daily returns and volume</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="co">    The DGP embeds:</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="co">    - An announcement-day return volatility spike (2-3x normal)</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="co">    - An announcement-day volume spike (1.5-2.5x normal)</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="co">    - Price limit truncation at ±7% (HOSE)</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="co">    - Cross-sectional variation by firm size and exchange</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> years <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>        years <span class="op">=</span> <span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">2012</span>, <span class="dv">2024</span>))</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>    rng <span class="op">=</span> np.random.default_rng(seed)</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>    tc <span class="op">=</span> build_trading_calendar()</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>    am <span class="op">=</span> build_announcement_mapper(tc)</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>    exchanges <span class="op">=</span> [<span class="st">"HOSE"</span>, <span class="st">"HNX"</span>]</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>    price_limits <span class="op">=</span> {<span class="st">"HOSE"</span>: <span class="fl">0.07</span>, <span class="st">"HNX"</span>: <span class="fl">0.10</span>}</span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ── Generate announcement dates ──</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>    annc_records <span class="op">=</span> []</span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n_firms):</span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>        ticker <span class="op">=</span> <span class="ss">f"VN</span><span class="sc">{</span>i<span class="sc">:04d}</span><span class="ss">"</span></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>        exchange <span class="op">=</span> rng.choice(exchanges, p<span class="op">=</span>[<span class="fl">0.6</span>, <span class="fl">0.4</span>])</span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Firm size (log market cap in VND billions)</span></span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>        log_mcap <span class="op">=</span> rng.normal(<span class="fl">6.5</span>, <span class="fl">1.5</span>)</span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> yr <span class="kw">in</span> years:</span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Fiscal year ends Dec 31; announcement 60-90 days later</span></span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>            fy_end <span class="op">=</span> pd.Timestamp(<span class="ss">f"</span><span class="sc">{</span>yr<span class="sc">}</span><span class="ss">-12-31"</span>)</span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>            annc_lag <span class="op">=</span> rng.integers(<span class="dv">45</span>, <span class="dv">90</span>)</span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>            annc_date <span class="op">=</span> fy_end <span class="op">+</span> pd.Timedelta(days<span class="op">=</span><span class="bu">int</span>(annc_lag))</span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a>            annc_records.append({</span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a>                <span class="st">"ticker"</span>: ticker,</span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a>                <span class="st">"fiscal_year"</span>: yr,</span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a>                <span class="st">"datadate"</span>: fy_end,</span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a>                <span class="st">"annc_date"</span>: annc_date,</span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a>                <span class="st">"exchange"</span>: exchange,</span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a>                <span class="st">"log_mcap"</span>: log_mcap,</span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a>            })</span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a>    earn_annc <span class="op">=</span> pd.DataFrame(annc_records)</span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-53"><a href="#cb5-53" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Map to trading day index</span></span>
<span id="cb5-54"><a href="#cb5-54" aria-hidden="true" tabindex="-1"></a>    earn_annc[<span class="st">"annc_date_dt"</span>] <span class="op">=</span> pd.to_datetime(earn_annc[<span class="st">"annc_date"</span>])</span>
<span id="cb5-55"><a href="#cb5-55" aria-hidden="true" tabindex="-1"></a>    earn_annc <span class="op">=</span> earn_annc.merge(</span>
<span id="cb5-56"><a href="#cb5-56" aria-hidden="true" tabindex="-1"></a>        am[[<span class="st">"annc_date"</span>, <span class="st">"td"</span>]].rename(columns<span class="op">=</span>{<span class="st">"td"</span>: <span class="st">"event_td"</span>}),</span>
<span id="cb5-57"><a href="#cb5-57" aria-hidden="true" tabindex="-1"></a>        left_on<span class="op">=</span><span class="st">"annc_date_dt"</span>,</span>
<span id="cb5-58"><a href="#cb5-58" aria-hidden="true" tabindex="-1"></a>        right_on<span class="op">=</span><span class="st">"annc_date"</span>,</span>
<span id="cb5-59"><a href="#cb5-59" aria-hidden="true" tabindex="-1"></a>        how<span class="op">=</span><span class="st">"left"</span>,</span>
<span id="cb5-60"><a href="#cb5-60" aria-hidden="true" tabindex="-1"></a>        suffixes<span class="op">=</span>(<span class="st">""</span>, <span class="st">"_map"</span>),</span>
<span id="cb5-61"><a href="#cb5-61" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb5-62"><a href="#cb5-62" aria-hidden="true" tabindex="-1"></a>    earn_annc <span class="op">=</span> earn_annc.dropna(subset<span class="op">=</span>[<span class="st">"event_td"</span>])</span>
<span id="cb5-63"><a href="#cb5-63" aria-hidden="true" tabindex="-1"></a>    earn_annc[<span class="st">"event_td"</span>] <span class="op">=</span> earn_annc[<span class="st">"event_td"</span>].astype(<span class="bu">int</span>)</span>
<span id="cb5-64"><a href="#cb5-64" aria-hidden="true" tabindex="-1"></a>    earn_annc[<span class="st">"start_td"</span>] <span class="op">=</span> earn_annc[<span class="st">"event_td"</span>] <span class="op">-</span> days_window</span>
<span id="cb5-65"><a href="#cb5-65" aria-hidden="true" tabindex="-1"></a>    earn_annc[<span class="st">"end_td"</span>] <span class="op">=</span> earn_annc[<span class="st">"event_td"</span>] <span class="op">+</span> days_window</span>
<span id="cb5-66"><a href="#cb5-66" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-67"><a href="#cb5-67" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Map start/end td back to dates</span></span>
<span id="cb5-68"><a href="#cb5-68" aria-hidden="true" tabindex="-1"></a>    td_to_date <span class="op">=</span> tc.set_index(<span class="st">"td"</span>)[<span class="st">"date"</span>]</span>
<span id="cb5-69"><a href="#cb5-69" aria-hidden="true" tabindex="-1"></a>    earn_annc[<span class="st">"start_date"</span>] <span class="op">=</span> earn_annc[<span class="st">"start_td"</span>].<span class="bu">map</span>(td_to_date)</span>
<span id="cb5-70"><a href="#cb5-70" aria-hidden="true" tabindex="-1"></a>    earn_annc[<span class="st">"end_date"</span>] <span class="op">=</span> earn_annc[<span class="st">"end_td"</span>].<span class="bu">map</span>(td_to_date)</span>
<span id="cb5-71"><a href="#cb5-71" aria-hidden="true" tabindex="-1"></a>    earn_annc <span class="op">=</span> earn_annc.dropna(subset<span class="op">=</span>[<span class="st">"start_date"</span>, <span class="st">"end_date"</span>])</span>
<span id="cb5-72"><a href="#cb5-72" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-73"><a href="#cb5-73" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ── Generate daily return and volume data ──</span></span>
<span id="cb5-74"><a href="#cb5-74" aria-hidden="true" tabindex="-1"></a>    daily_records <span class="op">=</span> []</span>
<span id="cb5-75"><a href="#cb5-75" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> _, row <span class="kw">in</span> earn_annc.iterrows():</span>
<span id="cb5-76"><a href="#cb5-76" aria-hidden="true" tabindex="-1"></a>        ticker <span class="op">=</span> row[<span class="st">"ticker"</span>]</span>
<span id="cb5-77"><a href="#cb5-77" aria-hidden="true" tabindex="-1"></a>        exchange <span class="op">=</span> row[<span class="st">"exchange"</span>]</span>
<span id="cb5-78"><a href="#cb5-78" aria-hidden="true" tabindex="-1"></a>        plimit <span class="op">=</span> price_limits[exchange]</span>
<span id="cb5-79"><a href="#cb5-79" aria-hidden="true" tabindex="-1"></a>        log_mcap <span class="op">=</span> row[<span class="st">"log_mcap"</span>]</span>
<span id="cb5-80"><a href="#cb5-80" aria-hidden="true" tabindex="-1"></a>        event_td <span class="op">=</span> row[<span class="st">"event_td"</span>]</span>
<span id="cb5-81"><a href="#cb5-81" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb5-82"><a href="#cb5-82" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Base volatility inversely related to size</span></span>
<span id="cb5-83"><a href="#cb5-83" aria-hidden="true" tabindex="-1"></a>        base_vol <span class="op">=</span> <span class="fl">0.015</span> <span class="op">+</span> <span class="fl">0.01</span> <span class="op">*</span> np.exp(<span class="op">-</span><span class="fl">0.3</span> <span class="op">*</span> log_mcap)</span>
<span id="cb5-84"><a href="#cb5-84" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Base volume (shares/day)</span></span>
<span id="cb5-85"><a href="#cb5-85" aria-hidden="true" tabindex="-1"></a>        base_volume <span class="op">=</span> np.exp(log_mcap <span class="op">+</span> rng.normal(<span class="dv">0</span>, <span class="fl">0.5</span>)) <span class="op">*</span> <span class="dv">1000</span></span>
<span id="cb5-86"><a href="#cb5-86" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb5-87"><a href="#cb5-87" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Window trading days</span></span>
<span id="cb5-88"><a href="#cb5-88" aria-hidden="true" tabindex="-1"></a>        window_tds <span class="op">=</span> tc[</span>
<span id="cb5-89"><a href="#cb5-89" aria-hidden="true" tabindex="-1"></a>            (tc[<span class="st">"td"</span>] <span class="op">&gt;=</span> row[<span class="st">"start_td"</span>]) <span class="op">&amp;</span> (tc[<span class="st">"td"</span>] <span class="op">&lt;=</span> row[<span class="st">"end_td"</span>])</span>
<span id="cb5-90"><a href="#cb5-90" aria-hidden="true" tabindex="-1"></a>        ].copy()</span>
<span id="cb5-91"><a href="#cb5-91" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb5-92"><a href="#cb5-92" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> _, td_row <span class="kw">in</span> window_tds.iterrows():</span>
<span id="cb5-93"><a href="#cb5-93" aria-hidden="true" tabindex="-1"></a>            date <span class="op">=</span> td_row[<span class="st">"date"</span>]</span>
<span id="cb5-94"><a href="#cb5-94" aria-hidden="true" tabindex="-1"></a>            td <span class="op">=</span> td_row[<span class="st">"td"</span>]</span>
<span id="cb5-95"><a href="#cb5-95" aria-hidden="true" tabindex="-1"></a>            relative_td <span class="op">=</span> td <span class="op">-</span> event_td</span>
<span id="cb5-96"><a href="#cb5-96" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb5-97"><a href="#cb5-97" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Market return (common factor)</span></span>
<span id="cb5-98"><a href="#cb5-98" aria-hidden="true" tabindex="-1"></a>            mkt_ret <span class="op">=</span> rng.normal(<span class="fl">0.0003</span>, <span class="fl">0.012</span>)</span>
<span id="cb5-99"><a href="#cb5-99" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb5-100"><a href="#cb5-100" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Firm-specific return</span></span>
<span id="cb5-101"><a href="#cb5-101" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Announcement effect: elevated volatility on days 0, +1</span></span>
<span id="cb5-102"><a href="#cb5-102" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> relative_td <span class="kw">in</span> [<span class="dv">0</span>, <span class="dv">1</span>]:</span>
<span id="cb5-103"><a href="#cb5-103" aria-hidden="true" tabindex="-1"></a>                vol_mult <span class="op">=</span> rng.uniform(<span class="fl">2.0</span>, <span class="fl">3.5</span>)</span>
<span id="cb5-104"><a href="#cb5-104" aria-hidden="true" tabindex="-1"></a>            <span class="cf">elif</span> <span class="bu">abs</span>(relative_td) <span class="op">&lt;=</span> <span class="dv">2</span>:</span>
<span id="cb5-105"><a href="#cb5-105" aria-hidden="true" tabindex="-1"></a>                vol_mult <span class="op">=</span> rng.uniform(<span class="fl">1.2</span>, <span class="fl">1.8</span>)</span>
<span id="cb5-106"><a href="#cb5-106" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb5-107"><a href="#cb5-107" aria-hidden="true" tabindex="-1"></a>                vol_mult <span class="op">=</span> <span class="fl">1.0</span></span>
<span id="cb5-108"><a href="#cb5-108" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb5-109"><a href="#cb5-109" aria-hidden="true" tabindex="-1"></a>            firm_shock <span class="op">=</span> rng.normal(<span class="dv">0</span>, base_vol <span class="op">*</span> vol_mult)</span>
<span id="cb5-110"><a href="#cb5-110" aria-hidden="true" tabindex="-1"></a>            raw_ret <span class="op">=</span> mkt_ret <span class="op">+</span> firm_shock</span>
<span id="cb5-111"><a href="#cb5-111" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb5-112"><a href="#cb5-112" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Apply price limits</span></span>
<span id="cb5-113"><a href="#cb5-113" aria-hidden="true" tabindex="-1"></a>            ret <span class="op">=</span> np.clip(raw_ret, <span class="op">-</span>plimit, plimit)</span>
<span id="cb5-114"><a href="#cb5-114" aria-hidden="true" tabindex="-1"></a>            ret_mkt <span class="op">=</span> ret <span class="op">-</span> mkt_ret</span>
<span id="cb5-115"><a href="#cb5-115" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb5-116"><a href="#cb5-116" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Volume: spike on announcement days</span></span>
<span id="cb5-117"><a href="#cb5-117" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> relative_td <span class="kw">in</span> [<span class="dv">0</span>, <span class="dv">1</span>]:</span>
<span id="cb5-118"><a href="#cb5-118" aria-hidden="true" tabindex="-1"></a>                vol_spike <span class="op">=</span> rng.uniform(<span class="fl">1.5</span>, <span class="fl">2.8</span>)</span>
<span id="cb5-119"><a href="#cb5-119" aria-hidden="true" tabindex="-1"></a>            <span class="cf">elif</span> <span class="bu">abs</span>(relative_td) <span class="op">&lt;=</span> <span class="dv">3</span>:</span>
<span id="cb5-120"><a href="#cb5-120" aria-hidden="true" tabindex="-1"></a>                vol_spike <span class="op">=</span> rng.uniform(<span class="fl">1.0</span>, <span class="fl">1.5</span>)</span>
<span id="cb5-121"><a href="#cb5-121" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb5-122"><a href="#cb5-122" aria-hidden="true" tabindex="-1"></a>                vol_spike <span class="op">=</span> rng.uniform(<span class="fl">0.7</span>, <span class="fl">1.3</span>)</span>
<span id="cb5-123"><a href="#cb5-123" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb5-124"><a href="#cb5-124" aria-hidden="true" tabindex="-1"></a>            volume <span class="op">=</span> base_volume <span class="op">*</span> vol_spike <span class="op">*</span> np.exp(rng.normal(<span class="dv">0</span>, <span class="fl">0.3</span>))</span>
<span id="cb5-125"><a href="#cb5-125" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb5-126"><a href="#cb5-126" aria-hidden="true" tabindex="-1"></a>            daily_records.append({</span>
<span id="cb5-127"><a href="#cb5-127" aria-hidden="true" tabindex="-1"></a>                <span class="st">"ticker"</span>: ticker,</span>
<span id="cb5-128"><a href="#cb5-128" aria-hidden="true" tabindex="-1"></a>                <span class="st">"fiscal_year"</span>: row[<span class="st">"fiscal_year"</span>],</span>
<span id="cb5-129"><a href="#cb5-129" aria-hidden="true" tabindex="-1"></a>                <span class="st">"date"</span>: date,</span>
<span id="cb5-130"><a href="#cb5-130" aria-hidden="true" tabindex="-1"></a>                <span class="st">"td"</span>: td,</span>
<span id="cb5-131"><a href="#cb5-131" aria-hidden="true" tabindex="-1"></a>                <span class="st">"relative_td"</span>: relative_td,</span>
<span id="cb5-132"><a href="#cb5-132" aria-hidden="true" tabindex="-1"></a>                <span class="st">"ret"</span>: ret,</span>
<span id="cb5-133"><a href="#cb5-133" aria-hidden="true" tabindex="-1"></a>                <span class="st">"mkt_ret"</span>: mkt_ret,</span>
<span id="cb5-134"><a href="#cb5-134" aria-hidden="true" tabindex="-1"></a>                <span class="st">"ret_mkt"</span>: ret_mkt,</span>
<span id="cb5-135"><a href="#cb5-135" aria-hidden="true" tabindex="-1"></a>                <span class="st">"vol"</span>: <span class="bu">max</span>(volume, <span class="dv">100</span>),</span>
<span id="cb5-136"><a href="#cb5-136" aria-hidden="true" tabindex="-1"></a>                <span class="st">"exchange"</span>: exchange,</span>
<span id="cb5-137"><a href="#cb5-137" aria-hidden="true" tabindex="-1"></a>                <span class="st">"log_mcap"</span>: log_mcap,</span>
<span id="cb5-138"><a href="#cb5-138" aria-hidden="true" tabindex="-1"></a>            })</span>
<span id="cb5-139"><a href="#cb5-139" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-140"><a href="#cb5-140" aria-hidden="true" tabindex="-1"></a>    daily_data <span class="op">=</span> pd.DataFrame(daily_records)</span>
<span id="cb5-141"><a href="#cb5-141" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-142"><a href="#cb5-142" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> earn_annc, daily_data</span>
<span id="cb5-143"><a href="#cb5-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-144"><a href="#cb5-144" aria-hidden="true" tabindex="-1"></a>earn_annc, daily_data <span class="op">=</span> generate_beaver_data(n_firms<span class="op">=</span><span class="dv">300</span>, seed<span class="op">=</span><span class="dv">2024</span>)</span>
<span id="cb5-145"><a href="#cb5-145" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Announcements: </span><span class="sc">{</span><span class="bu">len</span>(earn_annc)<span class="sc">:,}</span><span class="ss">"</span>)</span>
<span id="cb5-146"><a href="#cb5-146" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Daily observations: </span><span class="sc">{</span><span class="bu">len</span>(daily_data)<span class="sc">:,}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Announcements: 3,600
Daily observations: 147,600</code></pre>
</div>
</div>
</section>
</section>
<section id="sec-info-earnings-single" class="level2" data-number="25.3">
<h2 data-number="25.3" class="anchored" data-anchor-id="sec-info-earnings-single"><span class="header-section-number">25.3</span> Single-Event Walkthrough</h2>
<p>Before scaling to the full sample, we trace the methodology for a single earnings announcement to build intuition and verify each step.</p>
<section id="selecting-the-event" class="level3" data-number="25.3.1">
<h3 data-number="25.3.1" class="anchored" data-anchor-id="selecting-the-event"><span class="header-section-number">25.3.1</span> Selecting the Event</h3>
<div id="single-event-select" class="cell" data-execution_count="5">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>single_ticker <span class="op">=</span> <span class="st">"VN0042"</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>single_fy <span class="op">=</span> <span class="dv">2019</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>single_event <span class="op">=</span> earn_annc[</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    (earn_annc[<span class="st">"ticker"</span>] <span class="op">==</span> single_ticker) <span class="op">&amp;</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    (earn_annc[<span class="st">"fiscal_year"</span>] <span class="op">==</span> single_fy)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>].iloc[<span class="dv">0</span>]</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Firm: </span><span class="sc">{</span>single_event[<span class="st">'ticker'</span>]<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Fiscal year-end: </span><span class="sc">{</span>single_event[<span class="st">'datadate'</span>]<span class="sc">.</span>date()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Announcement date: </span><span class="sc">{</span>single_event[<span class="st">'annc_date'</span>]<span class="sc">.</span>date()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Exchange: </span><span class="sc">{</span>single_event[<span class="st">'exchange'</span>]<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Event trading day: </span><span class="sc">{</span>single_event[<span class="st">'event_td'</span>]<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Firm: VN0042
Fiscal year-end: 2019-12-31
Announcement date: 2020-03-28
Exchange: HOSE
Event trading day: 3073</code></pre>
</div>
</div>
</section>
<section id="event-window-data" class="level3" data-number="25.3.2">
<h3 data-number="25.3.2" class="anchored" data-anchor-id="event-window-data"><span class="header-section-number">25.3.2</span> Event Window Data</h3>
<p>We extract 41 trading days of data (20 before through 20 after the announcement) and compute the key measures.</p>
<div id="single-event-data" class="cell" data-execution_count="6">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>single_daily <span class="op">=</span> daily_data[</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    (daily_data[<span class="st">"ticker"</span>] <span class="op">==</span> single_ticker) <span class="op">&amp;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    (daily_data[<span class="st">"fiscal_year"</span>] <span class="op">==</span> single_fy)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>].copy()</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute measures</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>single_daily[<span class="st">"sq_ret_mkt"</span>] <span class="op">=</span> single_daily[<span class="st">"ret_mkt"</span>] <span class="op">**</span> <span class="dv">2</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>single_daily[<span class="st">"abs_ret_mkt"</span>] <span class="op">=</span> single_daily[<span class="st">"ret_mkt"</span>].<span class="bu">abs</span>()</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Relative volume: normalize by own average</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>avg_vol <span class="op">=</span> single_daily[<span class="st">"vol"</span>].mean()</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>single_daily[<span class="st">"rel_vol"</span>] <span class="op">=</span> single_daily[<span class="st">"vol"</span>] <span class="op">/</span> avg_vol</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Trading days in window: </span><span class="sc">{</span><span class="bu">len</span>(single_daily)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Average daily volume: </span><span class="sc">{</span>avg_vol<span class="sc">:,.0f}</span><span class="ss"> shares"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Trading days in window: 41
Average daily volume: 3,780,757 shares</code></pre>
</div>
</div>
</section>
<section id="visualizing-the-single-event" class="level3" data-number="25.3.3">
<h3 data-number="25.3.3" class="anchored" data-anchor-id="visualizing-the-single-event"><span class="header-section-number">25.3.3</span> Visualizing the Single Event</h3>
<p><a href="#fig-single-volume" class="quarto-xref">Figure&nbsp;<span>25.1</span></a> and <a href="#fig-single-volatility" class="quarto-xref">Figure&nbsp;<span>25.2</span></a> display the volume and volatility patterns for this single earnings announcement.</p>
<div id="cell-fig-single-volume" class="cell" data-execution_count="7">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>colors <span class="op">=</span> [<span class="st">"firebrick"</span> <span class="cf">if</span> <span class="bu">abs</span>(t) <span class="op">&lt;=</span> <span class="dv">1</span> <span class="cf">else</span> <span class="st">"steelblue"</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>          <span class="cf">for</span> t <span class="kw">in</span> single_daily[<span class="st">"relative_td"</span>]]</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>ax.bar(single_daily[<span class="st">"relative_td"</span>], single_daily[<span class="st">"vol"</span>],</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>       color<span class="op">=</span>colors, edgecolor<span class="op">=</span><span class="st">"white"</span>, width<span class="op">=</span><span class="fl">0.8</span>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>ax.axhline(avg_vol, color<span class="op">=</span><span class="st">"grey"</span>, linestyle<span class="op">=</span><span class="st">"--"</span>, linewidth<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>           label<span class="op">=</span><span class="st">"Window average"</span>)</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>ax.axvline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"black"</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Trading Days Relative to Announcement"</span>)</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Volume (shares)"</span>)</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>ax.yaxis.set_major_formatter(mticker.FuncFormatter(<span class="kw">lambda</span> x, _: <span class="ss">f"</span><span class="sc">{</span>x<span class="op">/</span><span class="fl">1e6</span><span class="sc">:.1f}</span><span class="ss">M"</span>))</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>ax.legend(fontsize<span class="op">=</span><span class="dv">9</span>)</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="fig-single-volume" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-single-volume-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="32_info_earnings_files/figure-html/fig-single-volume-output-1.png" width="1030" height="729" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-single-volume-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;25.1: Daily trading volume around a single earnings announcement. Day 0 is the first trading day on or after the announcement date. The dashed line marks the event-window average.
</figcaption>
</figure>
</div>
</div>
</div>
<div id="cell-fig-single-volatility" class="cell" data-execution_count="8">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>ax.bar(single_daily[<span class="st">"relative_td"</span>], single_daily[<span class="st">"sq_ret_mkt"</span>],</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>       color<span class="op">=</span>[<span class="st">"firebrick"</span> <span class="cf">if</span> <span class="bu">abs</span>(t) <span class="op">&lt;=</span> <span class="dv">1</span> <span class="cf">else</span> <span class="st">"steelblue"</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>              <span class="cf">for</span> t <span class="kw">in</span> single_daily[<span class="st">"relative_td"</span>]],</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>       edgecolor<span class="op">=</span><span class="st">"white"</span>, width<span class="op">=</span><span class="fl">0.8</span>)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>ax.axhline(single_daily[<span class="st">"sq_ret_mkt"</span>].mean(), color<span class="op">=</span><span class="st">"grey"</span>,</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>           linestyle<span class="op">=</span><span class="st">"--"</span>, linewidth<span class="op">=</span><span class="dv">1</span>, label<span class="op">=</span><span class="st">"Window average"</span>)</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>ax.axvline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"black"</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Trading Days Relative to Announcement"</span>)</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Squared Market-Adjusted Return"</span>)</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>ax.legend(fontsize<span class="op">=</span><span class="dv">9</span>)</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="fig-single-volatility" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-single-volatility-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="32_info_earnings_files/figure-html/fig-single-volatility-output-1.png" width="1030" height="729" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-single-volatility-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;25.2: Squared market-adjusted returns around a single earnings announcement. Elevated values on days 0 and +1 indicate that the announcement moved the stock price beyond what market-wide movements would predict.
</figcaption>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Reading the Plots
</div>
</div>
<div class="callout-body-container callout-body">
<p>A single event is inherently noisy, other firm-specific news (M&amp;A rumors, analyst reports, regulatory actions) can generate volume and volatility spikes on non-announcement dates. The value of the <span class="citation" data-cites="beaver1968information">Beaver (<a href="references.html#ref-beaver1968information" role="doc-biblioref">1968</a>)</span> approach lies in <em>averaging across many events</em> to isolate the systematic announcement effect from idiosyncratic noise.</p>
</div>
</div>
</section>
</section>
<section id="sec-info-earnings-full-sample" class="level2" data-number="25.4">
<h2 data-number="25.4" class="anchored" data-anchor-id="sec-info-earnings-full-sample"><span class="header-section-number">25.4</span> Full-Sample Analysis</h2>
<section id="computing-event-time-aggregates" class="level3" data-number="25.4.1">
<h3 data-number="25.4.1" class="anchored" data-anchor-id="computing-event-time-aggregates"><span class="header-section-number">25.4.1</span> Computing Event-Time Aggregates</h3>
<p>For each event day <span class="math inline">\(\tau\)</span> relative to the announcement, we compute the cross-sectional average of our two measures across all announcements:</p>
<p><span id="eq-avg-volatility"><span class="math display">\[
\overline{U^2}_\tau = \frac{1}{N_\tau} \sum_{i=1}^{N_\tau} U^2_{i,\tau}
\tag{25.7}\]</span></span></p>
<p><span id="eq-avg-volume"><span class="math display">\[
\overline{RV}_\tau = \frac{1}{N_\tau} \sum_{i=1}^{N_\tau} RV_{i,\tau}
\tag{25.8}\]</span></span></p>
<p>where <span class="math inline">\(N_\tau\)</span> is the number of announcements with available data on event day <span class="math inline">\(\tau\)</span>.</p>
<div id="full-sample-measures" class="cell" data-execution_count="9">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Squared and absolute market-adjusted returns</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>daily_data[<span class="st">"sq_ret_mkt"</span>] <span class="op">=</span> daily_data[<span class="st">"ret_mkt"</span>] <span class="op">**</span> <span class="dv">2</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>daily_data[<span class="st">"abs_ret_mkt"</span>] <span class="op">=</span> daily_data[<span class="st">"ret_mkt"</span>].<span class="bu">abs</span>()</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Relative volume: normalize within each event window</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>daily_data[<span class="st">"rel_vol"</span>] <span class="op">=</span> (</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    daily_data</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    .groupby([<span class="st">"ticker"</span>, <span class="st">"fiscal_year"</span>])[<span class="st">"vol"</span>]</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    .transform(<span class="kw">lambda</span> x: x <span class="op">/</span> x.mean())</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Standardized squared return: normalize within each event window</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>daily_data[<span class="st">"std_sq_ret"</span>] <span class="op">=</span> (</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>    daily_data</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>    .groupby([<span class="st">"ticker"</span>, <span class="st">"fiscal_year"</span>])[<span class="st">"sq_ret_mkt"</span>]</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>    .transform(<span class="kw">lambda</span> x: x <span class="op">/</span> x.mean())</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Add fiscal year for panel breakdowns</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>daily_data[<span class="st">"year"</span>] <span class="op">=</span> daily_data[<span class="st">"fiscal_year"</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="event-time-summary" class="cell" data-execution_count="10">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>event_summary <span class="op">=</span> (</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    daily_data</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    .groupby([<span class="st">"relative_td"</span>, <span class="st">"year"</span>])</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    .agg(</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>        n_obs<span class="op">=</span>(<span class="st">"ret"</span>, <span class="st">"size"</span>),</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>        mean_ret<span class="op">=</span>(<span class="st">"ret"</span>, <span class="st">"mean"</span>),</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>        mean_ret_mkt<span class="op">=</span>(<span class="st">"ret_mkt"</span>, <span class="st">"mean"</span>),</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>        sd_ret_mkt<span class="op">=</span>(<span class="st">"ret_mkt"</span>, <span class="st">"std"</span>),</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>        mean_sq_ret<span class="op">=</span>(<span class="st">"sq_ret_mkt"</span>, <span class="st">"mean"</span>),</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>        mean_abs_ret<span class="op">=</span>(<span class="st">"abs_ret_mkt"</span>, <span class="st">"mean"</span>),</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>        mean_rel_vol<span class="op">=</span>(<span class="st">"rel_vol"</span>, <span class="st">"mean"</span>),</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>        mean_std_sq_ret<span class="op">=</span>(<span class="st">"std_sq_ret"</span>, <span class="st">"mean"</span>),</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>        median_rel_vol<span class="op">=</span>(<span class="st">"rel_vol"</span>, <span class="st">"median"</span>),</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>    .reset_index()</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Also compute pooled (all-year) summary</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>event_summary_pooled <span class="op">=</span> (</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>    daily_data</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">"relative_td"</span>)</span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>    .agg(</span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>        n_obs<span class="op">=</span>(<span class="st">"ret"</span>, <span class="st">"size"</span>),</span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>        mean_ret<span class="op">=</span>(<span class="st">"ret"</span>, <span class="st">"mean"</span>),</span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>        mean_ret_mkt<span class="op">=</span>(<span class="st">"ret_mkt"</span>, <span class="st">"mean"</span>),</span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>        sd_ret_mkt<span class="op">=</span>(<span class="st">"ret_mkt"</span>, <span class="st">"std"</span>),</span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>        mean_sq_ret<span class="op">=</span>(<span class="st">"sq_ret_mkt"</span>, <span class="st">"mean"</span>),</span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>        mean_abs_ret<span class="op">=</span>(<span class="st">"abs_ret_mkt"</span>, <span class="st">"mean"</span>),</span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>        mean_rel_vol<span class="op">=</span>(<span class="st">"rel_vol"</span>, <span class="st">"mean"</span>),</span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>        mean_std_sq_ret<span class="op">=</span>(<span class="st">"std_sq_ret"</span>, <span class="st">"mean"</span>),</span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a>        median_rel_vol<span class="op">=</span>(<span class="st">"rel_vol"</span>, <span class="st">"median"</span>),</span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a>    .reset_index()</span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="return-volatility-around-announcements" class="level3" data-number="25.4.2">
<h3 data-number="25.4.2" class="anchored" data-anchor-id="return-volatility-around-announcements"><span class="header-section-number">25.4.2</span> Return Volatility Around Announcements</h3>
<p><a href="#fig-volatility-by-year" class="quarto-xref">Figure&nbsp;<span>25.3</span></a> plots the standard deviation of market-adjusted returns by event day, separately for each fiscal year. A clear spike on days 0 and +1 is the hallmark of information content.</p>
<div id="cell-fig-volatility-by-year" class="cell" data-execution_count="11">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">9</span>, <span class="dv">5</span>))</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>years_plot <span class="op">=</span> <span class="bu">sorted</span>(event_summary[<span class="st">"year"</span>].unique())</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Use a colormap</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>cmap <span class="op">=</span> plt.cm.viridis(np.linspace(<span class="fl">0.1</span>, <span class="fl">0.9</span>, <span class="bu">len</span>(years_plot)))</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> idx, yr <span class="kw">in</span> <span class="bu">enumerate</span>(years_plot):</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    sub <span class="op">=</span> event_summary[event_summary[<span class="st">"year"</span>] <span class="op">==</span> yr].sort_values(<span class="st">"relative_td"</span>)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    ax.plot(sub[<span class="st">"relative_td"</span>], sub[<span class="st">"sd_ret_mkt"</span>],</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>            color<span class="op">=</span>cmap[idx], alpha<span class="op">=</span><span class="fl">0.6</span>, linewidth<span class="op">=</span><span class="fl">1.0</span>, label<span class="op">=</span><span class="bu">str</span>(yr))</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Overlay pooled mean</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>pooled <span class="op">=</span> event_summary_pooled.sort_values(<span class="st">"relative_td"</span>)</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>ax.plot(pooled[<span class="st">"relative_td"</span>], pooled[<span class="st">"sd_ret_mkt"</span>],</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>        color<span class="op">=</span><span class="st">"firebrick"</span>, linewidth<span class="op">=</span><span class="fl">2.5</span>, linestyle<span class="op">=</span><span class="st">"-"</span>, label<span class="op">=</span><span class="st">"Pooled"</span>,</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>        zorder<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>ax.axvline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"black"</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Trading Days Relative to Announcement"</span>)</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Std Dev of Market-Adjusted Returns"</span>)</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>ax.legend(fontsize<span class="op">=</span><span class="dv">7</span>, ncol<span class="op">=</span><span class="dv">4</span>, loc<span class="op">=</span><span class="st">"upper right"</span>)</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="fig-volatility-by-year" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-volatility-by-year-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="32_info_earnings_files/figure-html/fig-volatility-by-year-output-1.png" width="1330" height="729" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-volatility-by-year-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;25.3: Standard deviation of market-adjusted returns around earnings announcements, by fiscal year. The consistent spike on days 0 and +1 across years provides strong evidence that annual earnings announcements convey new information to Vietnamese equity markets.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="trading-volume-around-announcements" class="level3" data-number="25.4.3">
<h3 data-number="25.4.3" class="anchored" data-anchor-id="trading-volume-around-announcements"><span class="header-section-number">25.4.3</span> Trading Volume Around Announcements</h3>
<p><a href="#fig-volume-by-year" class="quarto-xref">Figure&nbsp;<span>25.4</span></a> shows relative trading volume by event day. The volume response provides an independent confirmation of the volatility finding.</p>
<div id="cell-fig-volume-by-year" class="cell" data-execution_count="12">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">9</span>, <span class="dv">5</span>))</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> idx, yr <span class="kw">in</span> <span class="bu">enumerate</span>(years_plot):</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    sub <span class="op">=</span> event_summary[event_summary[<span class="st">"year"</span>] <span class="op">==</span> yr].sort_values(<span class="st">"relative_td"</span>)</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    ax.plot(sub[<span class="st">"relative_td"</span>], sub[<span class="st">"mean_rel_vol"</span>],</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>            color<span class="op">=</span>cmap[idx], alpha<span class="op">=</span><span class="fl">0.6</span>, linewidth<span class="op">=</span><span class="fl">1.0</span>, label<span class="op">=</span><span class="bu">str</span>(yr))</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>ax.plot(pooled[<span class="st">"relative_td"</span>], pooled[<span class="st">"mean_rel_vol"</span>],</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>        color<span class="op">=</span><span class="st">"firebrick"</span>, linewidth<span class="op">=</span><span class="fl">2.5</span>, linestyle<span class="op">=</span><span class="st">"-"</span>, label<span class="op">=</span><span class="st">"Pooled"</span>,</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>        zorder<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>ax.axhline(<span class="fl">1.0</span>, color<span class="op">=</span><span class="st">"grey"</span>, linestyle<span class="op">=</span><span class="st">"--"</span>, linewidth<span class="op">=</span><span class="fl">0.8</span>)</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>ax.axvline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"black"</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Trading Days Relative to Announcement"</span>)</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Relative Volume (1.0 = window average)"</span>)</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>ax.legend(fontsize<span class="op">=</span><span class="dv">7</span>, ncol<span class="op">=</span><span class="dv">4</span>, loc<span class="op">=</span><span class="st">"upper right"</span>)</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="fig-volume-by-year" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-volume-by-year-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="32_info_earnings_files/figure-html/fig-volume-by-year-output-1.png" width="1329" height="729" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-volume-by-year-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;25.4: Mean relative trading volume around earnings announcements, by fiscal year. Volume spikes sharply on days 0 and +1, consistent with investors actively trading on the new information. The elevated volume persists slightly longer than the volatility spike, suggesting that disagreement about the announcement’s implications takes time to resolve.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="formal-statistical-tests" class="level3" data-number="25.4.4">
<h3 data-number="25.4.4" class="anchored" data-anchor-id="formal-statistical-tests"><span class="header-section-number">25.4.4</span> Formal Statistical Tests</h3>
<p><span class="citation" data-cites="beaver1968information">Beaver (<a href="references.html#ref-beaver1968information" role="doc-biblioref">1968</a>)</span> relied on visual inspection and informal statistical arguments. Modern practice demands formal tests. We test whether the announcement-window measures differ significantly from the non-announcement window using a paired comparison.</p>
<p>Define the announcement window as days <span class="math inline">\(\{-1, 0, +1\}\)</span> and the non-announcement window as days <span class="math inline">\(\{-20, \ldots, -5\} \cup \{+5, \ldots, +20\}\)</span>. For each event <span class="math inline">\(i\)</span>, we compute:</p>
<p><span id="eq-delta-vol"><span class="math display">\[
\Delta U^2_i = \overline{U^2}_{i,\text{annc}} - \overline{U^2}_{i,\text{non-annc}}
\tag{25.9}\]</span></span></p>
<p>Under the null, <span class="math inline">\(E[\Delta U^2_i] = 0\)</span>. We test this with a <span class="math inline">\(t\)</span>-test across events.</p>
<div class="cell" data-execution_count="13">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>annc_window <span class="op">=</span> [<span class="op">-</span><span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>]</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>non_annc_window <span class="op">=</span> <span class="bu">list</span>(<span class="bu">range</span>(<span class="op">-</span><span class="dv">20</span>, <span class="op">-</span><span class="dv">4</span>)) <span class="op">+</span> <span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">5</span>, <span class="dv">21</span>))</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> compute_window_means(df, var, window):</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Compute mean of var within a window for each event."""</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>        df[df[<span class="st">"relative_td"</span>].isin(window)]</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>        .groupby([<span class="st">"ticker"</span>, <span class="st">"fiscal_year"</span>])[var]</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>        .mean()</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>test_results <span class="op">=</span> {}</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> var, label <span class="kw">in</span> [(<span class="st">"sq_ret_mkt"</span>, <span class="st">"Squared Mkt-Adj Return"</span>),</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>                    (<span class="st">"abs_ret_mkt"</span>, <span class="st">"Absolute Mkt-Adj Return"</span>),</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>                    (<span class="st">"rel_vol"</span>, <span class="st">"Relative Volume"</span>)]:</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>    annc_mean <span class="op">=</span> compute_window_means(daily_data, var, annc_window)</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>    non_annc_mean <span class="op">=</span> compute_window_means(daily_data, var, non_annc_window)</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Align on common events</span></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>    common <span class="op">=</span> annc_mean.index.intersection(non_annc_mean.index)</span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>    diff <span class="op">=</span> annc_mean.loc[common] <span class="op">-</span> non_annc_mean.loc[common]</span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>    diff <span class="op">=</span> diff.dropna()</span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>    t_stat, p_val <span class="op">=</span> stats.ttest_1samp(diff, <span class="dv">0</span>)</span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>    test_results[label] <span class="op">=</span> {</span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Annc Window Mean"</span>: annc_mean.mean(),</span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Non-Annc Window Mean"</span>: non_annc_mean.mean(),</span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Difference"</span>: diff.mean(),</span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>        <span class="st">"t-statistic"</span>: t_stat,</span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>        <span class="st">"p-value"</span>: p_val,</span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>        <span class="st">"N events"</span>: <span class="bu">len</span>(diff),</span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a>test_df <span class="op">=</span> pd.DataFrame(test_results).T.<span class="bu">round</span>(<span class="dv">4</span>)</span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a>test_df[<span class="st">"N events"</span>] <span class="op">=</span> test_df[<span class="st">"N events"</span>].astype(<span class="bu">int</span>)</span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a>test_df</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div id="tbl-formal-tests" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="13">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-formal-tests-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;25.2: Formal tests of announcement-period information content. The announcement window is days {-1, 0, +1}; the non-announcement window excludes days {-4, …, +4}. Large t-statistics and small p-values provide strong evidence that both return volatility and trading volume are significantly elevated during the announcement window.
</figcaption>
<div aria-describedby="tbl-formal-tests-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display" data-execution_count="13">
<div>


<table class="dataframe do-not-create-environment cell caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Annc Window Mean</th>
<th data-quarto-table-cell-role="th">Non-Annc Window Mean</th>
<th data-quarto-table-cell-role="th">Difference</th>
<th data-quarto-table-cell-role="th">t-statistic</th>
<th data-quarto-table-cell-role="th">p-value</th>
<th data-quarto-table-cell-role="th">N events</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">Squared Mkt-Adj Return</th>
<td>0.0014</td>
<td>0.0003</td>
<td>0.0011</td>
<td>64.1353</td>
<td>0.0</td>
<td>3600</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Absolute Mkt-Adj Return</th>
<td>0.0294</td>
<td>0.0132</td>
<td>0.0162</td>
<td>79.7318</td>
<td>0.0</td>
<td>3600</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Relative Volume</th>
<td>1.7020</td>
<td>0.9206</td>
<td>0.7814</td>
<td>135.9351</td>
<td>0.0</td>
<td>3600</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div>
</div>
</section>
<section id="standardized-volatility-ratio" class="level3" data-number="25.4.5">
<h3 data-number="25.4.5" class="anchored" data-anchor-id="standardized-volatility-ratio"><span class="header-section-number">25.4.5</span> Standardized Volatility Ratio</h3>
<p>Following the approach of <span class="citation" data-cites="beaver1968information">Beaver (<a href="references.html#ref-beaver1968information" role="doc-biblioref">1968</a>)</span>, we compute the ratio of announcement-window squared returns to non-announcement-window squared returns. Under the null, this ratio equals 1.0.</p>
<div id="cell-fig-volatility-ratio" class="cell" data-execution_count="14">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>ratio <span class="op">=</span> pooled[<span class="st">"mean_std_sq_ret"</span>]</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>colors <span class="op">=</span> [<span class="st">"firebrick"</span> <span class="cf">if</span> <span class="bu">abs</span>(t) <span class="op">&lt;=</span> <span class="dv">1</span> <span class="cf">else</span> <span class="st">"steelblue"</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>          <span class="cf">for</span> t <span class="kw">in</span> pooled[<span class="st">"relative_td"</span>]]</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>ax.bar(pooled[<span class="st">"relative_td"</span>], ratio, color<span class="op">=</span>colors, edgecolor<span class="op">=</span><span class="st">"white"</span>)</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>ax.axhline(<span class="fl">1.0</span>, color<span class="op">=</span><span class="st">"grey"</span>, linestyle<span class="op">=</span><span class="st">"--"</span>, linewidth<span class="op">=</span><span class="dv">1</span>, label<span class="op">=</span><span class="st">"Expected under null"</span>)</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>ax.axvline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"black"</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Trading Days Relative to Announcement"</span>)</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Standardized Squared Return (ratio)"</span>)</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>ax.legend()</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="fig-volatility-ratio" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-volatility-ratio-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="32_info_earnings_files/figure-html/fig-volatility-ratio-output-1.png" width="1030" height="729" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-volatility-ratio-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;25.5: Standardized squared market-adjusted return by event day (pooled across all years). A value of 1.0 indicates normal volatility. The announcement-day ratio substantially exceeds 1.0, indicating that earnings releases generate return variation well above normal levels.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="sec-info-earnings-cross" class="level2" data-number="25.5">
<h2 data-number="25.5" class="anchored" data-anchor-id="sec-info-earnings-cross"><span class="header-section-number">25.5</span> Cross-Sectional Variation</h2>
<p>A uniform announcement effect across all firms would be surprising. Theory predicts that the magnitude of the market reaction depends on the pre-announcement information environment: firms with richer information sets prior to the announcement should exhibit <em>smaller</em> reactions because less of the earnings number is news <span class="citation" data-cites="atiase1985predisclosure verrecchia2001essays">(<a href="references.html#ref-atiase1985predisclosure" role="doc-biblioref">Atiase 1985</a>; <a href="references.html#ref-verrecchia2001essays" role="doc-biblioref">Verrecchia 2001</a>)</span>.</p>
<section id="by-firm-size" class="level3" data-number="25.5.1">
<h3 data-number="25.5.1" class="anchored" data-anchor-id="by-firm-size"><span class="header-section-number">25.5.1</span> By Firm Size</h3>
<p>Larger firms receive more attention from analysts, media, and institutional investors, so their earnings announcements should contain less incremental information.</p>
<div id="cell-fig-size-effect" class="cell" data-execution_count="15">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign size terciles</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>daily_data[<span class="st">"size_tercile"</span>] <span class="op">=</span> pd.qcut(</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    daily_data[<span class="st">"log_mcap"</span>], <span class="dv">3</span>, labels<span class="op">=</span>[<span class="st">"Small"</span>, <span class="st">"Medium"</span>, <span class="st">"Large"</span>]</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>size_summary <span class="op">=</span> (</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>    daily_data</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>    .groupby([<span class="st">"relative_td"</span>, <span class="st">"size_tercile"</span>])</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>    .agg(</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>        mean_std_sq_ret<span class="op">=</span>(<span class="st">"std_sq_ret"</span>, <span class="st">"mean"</span>),</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>        mean_rel_vol<span class="op">=</span>(<span class="st">"rel_vol"</span>, <span class="st">"mean"</span>),</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>    .reset_index()</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">5</span>))</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>size_colors <span class="op">=</span> {<span class="st">"Small"</span>: <span class="st">"#E91E63"</span>, <span class="st">"Medium"</span>: <span class="st">"#FF9800"</span>, <span class="st">"Large"</span>: <span class="st">"#2196F3"</span>}</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> label, color <span class="kw">in</span> size_colors.items():</span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>    sub <span class="op">=</span> size_summary[size_summary[<span class="st">"size_tercile"</span>] <span class="op">==</span> label].sort_values(<span class="st">"relative_td"</span>)</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>    axes[<span class="dv">0</span>].plot(sub[<span class="st">"relative_td"</span>], sub[<span class="st">"mean_std_sq_ret"</span>],</span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>                 label<span class="op">=</span>label, color<span class="op">=</span>color, linewidth<span class="op">=</span><span class="fl">1.5</span>)</span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>    axes[<span class="dv">1</span>].plot(sub[<span class="st">"relative_td"</span>], sub[<span class="st">"mean_rel_vol"</span>],</span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>                 label<span class="op">=</span>label, color<span class="op">=</span>color, linewidth<span class="op">=</span><span class="fl">1.5</span>)</span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> ax <span class="kw">in</span> axes:</span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>    ax.axvline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"black"</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>    ax.set_xlabel(<span class="st">"Trading Days Relative to Announcement"</span>)</span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>    ax.legend()</span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].axhline(<span class="fl">1.0</span>, color<span class="op">=</span><span class="st">"grey"</span>, linestyle<span class="op">=</span><span class="st">"--"</span>, linewidth<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_ylabel(<span class="st">"Standardized Squared Return"</span>)</span>
<span id="cb19-33"><a href="#cb19-33" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">"Volatility Reaction by Size"</span>)</span>
<span id="cb19-34"><a href="#cb19-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-35"><a href="#cb19-35" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].axhline(<span class="fl">1.0</span>, color<span class="op">=</span><span class="st">"grey"</span>, linestyle<span class="op">=</span><span class="st">"--"</span>, linewidth<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb19-36"><a href="#cb19-36" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_ylabel(<span class="st">"Relative Volume"</span>)</span>
<span id="cb19-37"><a href="#cb19-37" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">"Volume Reaction by Size"</span>)</span>
<span id="cb19-38"><a href="#cb19-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-39"><a href="#cb19-39" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb19-40"><a href="#cb19-40" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="fig-size-effect" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-size-effect-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="32_info_earnings_files/figure-html/fig-size-effect-output-1.png" width="1779" height="730" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-size-effect-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;25.6: Announcement-day abnormal volatility and volume by firm size tercile. Smaller firms exhibit substantially larger reactions, consistent with the prediction that pre-disclosure information is increasing in firm size.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="by-exchange-hose-vs.-hnx" class="level3" data-number="25.5.2">
<h3 data-number="25.5.2" class="anchored" data-anchor-id="by-exchange-hose-vs.-hnx"><span class="header-section-number">25.5.2</span> By Exchange (HOSE vs.&nbsp;HNX)</h3>
<p>HOSE-listed firms are generally larger and more liquid than HNX-listed firms. Additionally, the tighter price limits on HOSE (<span class="math inline">\(\pm\)</span> 7% vs.&nbsp;<span class="math inline">\(\pm\)</span> 10% on HNX) may truncate announcement-day returns, compressing measured volatility and potentially spreading the adjustment over multiple days.</p>
<div id="cell-fig-exchange-effect" class="cell" data-execution_count="16">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>exch_summary <span class="op">=</span> (</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    daily_data</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    .groupby([<span class="st">"relative_td"</span>, <span class="st">"exchange"</span>])</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    .agg(</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>        mean_std_sq_ret<span class="op">=</span>(<span class="st">"std_sq_ret"</span>, <span class="st">"mean"</span>),</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>        mean_rel_vol<span class="op">=</span>(<span class="st">"rel_vol"</span>, <span class="st">"mean"</span>),</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    .reset_index()</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">5</span>))</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>exch_colors <span class="op">=</span> {<span class="st">"HOSE"</span>: <span class="st">"#1565C0"</span>, <span class="st">"HNX"</span>: <span class="st">"#E65100"</span>}</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> exch, color <span class="kw">in</span> exch_colors.items():</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>    sub <span class="op">=</span> exch_summary[exch_summary[<span class="st">"exchange"</span>] <span class="op">==</span> exch].sort_values(<span class="st">"relative_td"</span>)</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>    axes[<span class="dv">0</span>].plot(sub[<span class="st">"relative_td"</span>], sub[<span class="st">"mean_std_sq_ret"</span>],</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>                 label<span class="op">=</span>exch, color<span class="op">=</span>color, linewidth<span class="op">=</span><span class="fl">1.5</span>)</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>    axes[<span class="dv">1</span>].plot(sub[<span class="st">"relative_td"</span>], sub[<span class="st">"mean_rel_vol"</span>],</span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>                 label<span class="op">=</span>exch, color<span class="op">=</span>color, linewidth<span class="op">=</span><span class="fl">1.5</span>)</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> ax <span class="kw">in</span> axes:</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>    ax.axvline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"black"</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>    ax.legend()</span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>    ax.set_xlabel(<span class="st">"Trading Days Relative to Announcement"</span>)</span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].axhline(<span class="fl">1.0</span>, color<span class="op">=</span><span class="st">"grey"</span>, linestyle<span class="op">=</span><span class="st">"--"</span>, linewidth<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_ylabel(<span class="st">"Standardized Squared Return"</span>)</span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">"Volatility by Exchange"</span>)</span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].axhline(<span class="fl">1.0</span>, color<span class="op">=</span><span class="st">"grey"</span>, linestyle<span class="op">=</span><span class="st">"--"</span>, linewidth<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_ylabel(<span class="st">"Relative Volume"</span>)</span>
<span id="cb20-32"><a href="#cb20-32" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">"Volume by Exchange"</span>)</span>
<span id="cb20-33"><a href="#cb20-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-34"><a href="#cb20-34" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb20-35"><a href="#cb20-35" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="fig-exchange-effect" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-exchange-effect-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="32_info_earnings_files/figure-html/fig-exchange-effect-output-1.png" width="1779" height="730" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-exchange-effect-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;25.7: Announcement reactions by exchange. HNX firms (generally smaller, less liquid) show larger volatility spikes. The tighter HOSE price limit may compress announcement-day returns, but the wider HNX limit allows larger single-day adjustments.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="regression-analysis" class="level3" data-number="25.5.3">
<h3 data-number="25.5.3" class="anchored" data-anchor-id="regression-analysis"><span class="header-section-number">25.5.3</span> Regression Analysis</h3>
<p>We formalize the cross-sectional analysis with an event-level regression:</p>
<p><span id="eq-cross-section-reg"><span class="math display">\[
\Delta U^2_i = \beta_0 + \beta_1 \text{Size}_i + \beta_2 \text{HNX}_i + \beta_3 \text{AnnLag}_i + \varepsilon_i
\tag{25.10}\]</span></span></p>
<p>where <span class="math inline">\(\text{Size}_i\)</span> is log market capitalization, <span class="math inline">\(\text{HNX}_i\)</span> is an indicator for HNX listing, and <span class="math inline">\(\text{AnnLag}_i\)</span> is the number of calendar days between fiscal year-end and the announcement date (longer lags may allow more information leakage, reducing the surprise).</p>
<div class="cell" data-execution_count="17">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Build event-level dataset</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>annc_data <span class="op">=</span> daily_data[daily_data[<span class="st">"relative_td"</span>].isin(annc_window)].copy()</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>non_annc_data <span class="op">=</span> daily_data[daily_data[<span class="st">"relative_td"</span>].isin(non_annc_window)].copy()</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>annc_means <span class="op">=</span> (</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    annc_data</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>    .groupby([<span class="st">"ticker"</span>, <span class="st">"fiscal_year"</span>])</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>    .agg(annc_sq_ret<span class="op">=</span>(<span class="st">"sq_ret_mkt"</span>, <span class="st">"mean"</span>), annc_vol<span class="op">=</span>(<span class="st">"rel_vol"</span>, <span class="st">"mean"</span>))</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>    .reset_index()</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>non_annc_means <span class="op">=</span> (</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>    non_annc_data</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>    .groupby([<span class="st">"ticker"</span>, <span class="st">"fiscal_year"</span>])</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>    .agg(non_annc_sq_ret<span class="op">=</span>(<span class="st">"sq_ret_mkt"</span>, <span class="st">"mean"</span>), non_annc_vol<span class="op">=</span>(<span class="st">"rel_vol"</span>, <span class="st">"mean"</span>))</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>    .reset_index()</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>event_df <span class="op">=</span> annc_means.merge(non_annc_means, on<span class="op">=</span>[<span class="st">"ticker"</span>, <span class="st">"fiscal_year"</span>])</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>event_df[<span class="st">"delta_sq_ret"</span>] <span class="op">=</span> event_df[<span class="st">"annc_sq_ret"</span>] <span class="op">-</span> event_df[<span class="st">"non_annc_sq_ret"</span>]</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>event_df[<span class="st">"delta_vol"</span>] <span class="op">=</span> event_df[<span class="st">"annc_vol"</span>] <span class="op">-</span> event_df[<span class="st">"non_annc_vol"</span>]</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Add firm characteristics</span></span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>firm_chars <span class="op">=</span> (</span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>    earn_annc[[<span class="st">"ticker"</span>, <span class="st">"fiscal_year"</span>, <span class="st">"exchange"</span>, <span class="st">"log_mcap"</span>, <span class="st">"datadate"</span>, <span class="st">"annc_date"</span>]]</span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>    .drop_duplicates([<span class="st">"ticker"</span>, <span class="st">"fiscal_year"</span>])</span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>firm_chars[<span class="st">"hnx"</span>] <span class="op">=</span> (firm_chars[<span class="st">"exchange"</span>] <span class="op">==</span> <span class="st">"HNX"</span>).astype(<span class="bu">int</span>)</span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>firm_chars[<span class="st">"annc_lag"</span>] <span class="op">=</span> (</span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>    pd.to_datetime(firm_chars[<span class="st">"annc_date"</span>]) <span class="op">-</span> pd.to_datetime(firm_chars[<span class="st">"datadate"</span>])</span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a>).dt.days</span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a>event_df <span class="op">=</span> event_df.merge(firm_chars, on<span class="op">=</span>[<span class="st">"ticker"</span>, <span class="st">"fiscal_year"</span>], how<span class="op">=</span><span class="st">"left"</span>)</span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a>event_df <span class="op">=</span> event_df.dropna(subset<span class="op">=</span>[<span class="st">"log_mcap"</span>, <span class="st">"hnx"</span>, <span class="st">"annc_lag"</span>, <span class="st">"delta_sq_ret"</span>])</span>
<span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-35"><a href="#cb21-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Regression</span></span>
<span id="cb21-36"><a href="#cb21-36" aria-hidden="true" tabindex="-1"></a>mod_vol <span class="op">=</span> smf.ols(<span class="st">"delta_sq_ret ~ log_mcap + hnx + annc_lag"</span>, data<span class="op">=</span>event_df).fit()</span>
<span id="cb21-37"><a href="#cb21-37" aria-hidden="true" tabindex="-1"></a>mod_volume <span class="op">=</span> smf.ols(<span class="st">"delta_vol ~ log_mcap + hnx + annc_lag"</span>, data<span class="op">=</span>event_df).fit()</span>
<span id="cb21-38"><a href="#cb21-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-39"><a href="#cb21-39" aria-hidden="true" tabindex="-1"></a>reg_table <span class="op">=</span> pd.DataFrame({</span>
<span id="cb21-40"><a href="#cb21-40" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Volatility"</span>: {</span>
<span id="cb21-41"><a href="#cb21-41" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Intercept"</span>: <span class="ss">f"</span><span class="sc">{</span>mod_vol<span class="sc">.</span>params[<span class="st">'Intercept'</span>]<span class="sc">:.6f}</span><span class="ss"> (</span><span class="sc">{</span>mod_vol<span class="sc">.</span>bse[<span class="st">'Intercept'</span>]<span class="sc">:.6f}</span><span class="ss">)"</span>,</span>
<span id="cb21-42"><a href="#cb21-42" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Size (log mcap)"</span>: <span class="ss">f"</span><span class="sc">{</span>mod_vol<span class="sc">.</span>params[<span class="st">'log_mcap'</span>]<span class="sc">:.6f}</span><span class="ss"> (</span><span class="sc">{</span>mod_vol<span class="sc">.</span>bse[<span class="st">'log_mcap'</span>]<span class="sc">:.6f}</span><span class="ss">)"</span>,</span>
<span id="cb21-43"><a href="#cb21-43" aria-hidden="true" tabindex="-1"></a>        <span class="st">"HNX"</span>: <span class="ss">f"</span><span class="sc">{</span>mod_vol<span class="sc">.</span>params[<span class="st">'hnx'</span>]<span class="sc">:.6f}</span><span class="ss"> (</span><span class="sc">{</span>mod_vol<span class="sc">.</span>bse[<span class="st">'hnx'</span>]<span class="sc">:.6f}</span><span class="ss">)"</span>,</span>
<span id="cb21-44"><a href="#cb21-44" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Annc Lag (days)"</span>: <span class="ss">f"</span><span class="sc">{</span>mod_vol<span class="sc">.</span>params[<span class="st">'annc_lag'</span>]<span class="sc">:.6f}</span><span class="ss"> (</span><span class="sc">{</span>mod_vol<span class="sc">.</span>bse[<span class="st">'annc_lag'</span>]<span class="sc">:.6f}</span><span class="ss">)"</span>,</span>
<span id="cb21-45"><a href="#cb21-45" aria-hidden="true" tabindex="-1"></a>        <span class="st">"N"</span>: <span class="ss">f"</span><span class="sc">{</span><span class="bu">int</span>(mod_vol.nobs)<span class="sc">:,}</span><span class="ss">"</span>,</span>
<span id="cb21-46"><a href="#cb21-46" aria-hidden="true" tabindex="-1"></a>        <span class="st">"R²"</span>: <span class="ss">f"</span><span class="sc">{</span>mod_vol<span class="sc">.</span>rsquared<span class="sc">:.4f}</span><span class="ss">"</span>,</span>
<span id="cb21-47"><a href="#cb21-47" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb21-48"><a href="#cb21-48" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Volume"</span>: {</span>
<span id="cb21-49"><a href="#cb21-49" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Intercept"</span>: <span class="ss">f"</span><span class="sc">{</span>mod_volume<span class="sc">.</span>params[<span class="st">'Intercept'</span>]<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>mod_volume<span class="sc">.</span>bse[<span class="st">'Intercept'</span>]<span class="sc">:.4f}</span><span class="ss">)"</span>,</span>
<span id="cb21-50"><a href="#cb21-50" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Size (log mcap)"</span>: <span class="ss">f"</span><span class="sc">{</span>mod_volume<span class="sc">.</span>params[<span class="st">'log_mcap'</span>]<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>mod_volume<span class="sc">.</span>bse[<span class="st">'log_mcap'</span>]<span class="sc">:.4f}</span><span class="ss">)"</span>,</span>
<span id="cb21-51"><a href="#cb21-51" aria-hidden="true" tabindex="-1"></a>        <span class="st">"HNX"</span>: <span class="ss">f"</span><span class="sc">{</span>mod_volume<span class="sc">.</span>params[<span class="st">'hnx'</span>]<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>mod_volume<span class="sc">.</span>bse[<span class="st">'hnx'</span>]<span class="sc">:.4f}</span><span class="ss">)"</span>,</span>
<span id="cb21-52"><a href="#cb21-52" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Annc Lag (days)"</span>: <span class="ss">f"</span><span class="sc">{</span>mod_volume<span class="sc">.</span>params[<span class="st">'annc_lag'</span>]<span class="sc">:.6f}</span><span class="ss"> (</span><span class="sc">{</span>mod_volume<span class="sc">.</span>bse[<span class="st">'annc_lag'</span>]<span class="sc">:.6f}</span><span class="ss">)"</span>,</span>
<span id="cb21-53"><a href="#cb21-53" aria-hidden="true" tabindex="-1"></a>        <span class="st">"N"</span>: <span class="ss">f"</span><span class="sc">{</span><span class="bu">int</span>(mod_volume.nobs)<span class="sc">:,}</span><span class="ss">"</span>,</span>
<span id="cb21-54"><a href="#cb21-54" aria-hidden="true" tabindex="-1"></a>        <span class="st">"R²"</span>: <span class="ss">f"</span><span class="sc">{</span>mod_volume<span class="sc">.</span>rsquared<span class="sc">:.4f}</span><span class="ss">"</span>,</span>
<span id="cb21-55"><a href="#cb21-55" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb21-56"><a href="#cb21-56" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb21-57"><a href="#cb21-57" aria-hidden="true" tabindex="-1"></a>reg_table</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div id="tbl-cross-section" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="17">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-cross-section-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;25.3: Cross-sectional determinants of announcement-day return volatility. Negative size coefficient confirms that larger firms have less informative announcements. The announcement lag coefficient captures information leakage before the official release.
</figcaption>
<div aria-describedby="tbl-cross-section-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display" data-execution_count="17">
<div>


<table class="dataframe do-not-create-environment cell caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Volatility</th>
<th data-quarto-table-cell-role="th">Volume</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">Intercept</th>
<td>0.001040 (0.000116)</td>
<td>0.7676 (0.0396)</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Size (log mcap)</th>
<td>-0.000039 (0.000011)</td>
<td>0.0017 (0.0038)</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">HNX</th>
<td>0.000266 (0.000034)</td>
<td>0.0118 (0.0117)</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Annc Lag (days)</th>
<td>0.000003 (0.000001)</td>
<td>-0.000037 (0.000444)</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">N</th>
<td>3,600</td>
<td>3,600</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">R²</th>
<td>0.0210</td>
<td>0.0003</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div>
</div>
</section>
</section>
<section id="sec-info-earnings-discussion" class="level2" data-number="25.6">
<h2 data-number="25.6" class="anchored" data-anchor-id="sec-info-earnings-discussion"><span class="header-section-number">25.6</span> Discussion and Contemporary Perspectives</h2>
<section id="the-bamber-et-al.-2000-critique" class="level3" data-number="25.6.1">
<h3 data-number="25.6.1" class="anchored" data-anchor-id="the-bamber-et-al.-2000-critique"><span class="header-section-number">25.6.1</span> The Bamber et al.&nbsp;(2000) Critique</h3>
<p><span class="citation" data-cites="bamber2000we">Bamber, Christensen, and Gaver (<a href="references.html#ref-bamber2000we" role="doc-biblioref">2000</a>)</span> raised two important methodological concerns about the original <span class="citation" data-cites="beaver1968information">Beaver (<a href="references.html#ref-beaver1968information" role="doc-biblioref">1968</a>)</span> findings:</p>
<ol type="1">
<li><p><strong>Mean vs.&nbsp;median effects.</strong> The original study focused on mean volume and volatility, which can be driven by a small number of extreme events. When <span class="citation" data-cites="bamber2000we">Bamber, Christensen, and Gaver (<a href="references.html#ref-bamber2000we" role="doc-biblioref">2000</a>)</span> examined the <em>proportion</em> of individual announcements that generate unusual reactions (rather than the mean reaction), the evidence was far less dramatic.</p></li>
<li><p><strong>Sample selection.</strong> Beaver’s original sample of 143 firms was not randomly drawn but reflected specific selection criteria that may have biased toward firms with more informative announcements.</p></li>
</ol>
<p>We can assess the first concern directly. <a href="#fig-proportion" class="quarto-xref">Figure&nbsp;<span>25.8</span></a> plots the <em>fraction</em> of announcements with above-median volatility or volume on each event day, following the spirit of Bamber et al.’s critique.</p>
<div id="cell-fig-proportion" class="cell" data-execution_count="18">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># For each event, determine if announcement-day measures exceed</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co"># that event's median non-announcement-day measures</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>event_medians <span class="op">=</span> (</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    daily_data[daily_data[<span class="st">"relative_td"</span>].isin(non_annc_window)]</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    .groupby([<span class="st">"ticker"</span>, <span class="st">"fiscal_year"</span>])</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    .agg(median_sq_ret<span class="op">=</span>(<span class="st">"sq_ret_mkt"</span>, <span class="st">"median"</span>), median_vol<span class="op">=</span>(<span class="st">"rel_vol"</span>, <span class="st">"median"</span>))</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    .reset_index()</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>daily_with_median <span class="op">=</span> daily_data.merge(</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>    event_medians, on<span class="op">=</span>[<span class="st">"ticker"</span>, <span class="st">"fiscal_year"</span>], how<span class="op">=</span><span class="st">"left"</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>daily_with_median[<span class="st">"above_med_vol"</span>] <span class="op">=</span> (</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>    daily_with_median[<span class="st">"sq_ret_mkt"</span>] <span class="op">&gt;</span> daily_with_median[<span class="st">"median_sq_ret"</span>]</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>).astype(<span class="bu">int</span>)</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>daily_with_median[<span class="st">"above_med_volume"</span>] <span class="op">=</span> (</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>    daily_with_median[<span class="st">"rel_vol"</span>] <span class="op">&gt;</span> daily_with_median[<span class="st">"median_vol"</span>]</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>).astype(<span class="bu">int</span>)</span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>prop_summary <span class="op">=</span> (</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>    daily_with_median</span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">"relative_td"</span>)</span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>    .agg(</span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>        prop_above_vol<span class="op">=</span>(<span class="st">"above_med_vol"</span>, <span class="st">"mean"</span>),</span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>        prop_above_volume<span class="op">=</span>(<span class="st">"above_med_volume"</span>, <span class="st">"mean"</span>),</span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>    .reset_index()</span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a>    .sort_values(<span class="st">"relative_td"</span>)</span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">5</span>))</span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].bar(prop_summary[<span class="st">"relative_td"</span>], prop_summary[<span class="st">"prop_above_vol"</span>],</span>
<span id="cb22-34"><a href="#cb22-34" aria-hidden="true" tabindex="-1"></a>            color<span class="op">=</span><span class="st">"steelblue"</span>, edgecolor<span class="op">=</span><span class="st">"white"</span>)</span>
<span id="cb22-35"><a href="#cb22-35" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].axhline(<span class="fl">0.5</span>, color<span class="op">=</span><span class="st">"grey"</span>, linestyle<span class="op">=</span><span class="st">"--"</span>, linewidth<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb22-36"><a href="#cb22-36" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].axvline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"black"</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb22-37"><a href="#cb22-37" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_xlabel(<span class="st">"Trading Days Relative to Announcement"</span>)</span>
<span id="cb22-38"><a href="#cb22-38" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_ylabel(<span class="st">"Proportion &gt; Median"</span>)</span>
<span id="cb22-39"><a href="#cb22-39" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">"Proportion with Above-Median Volatility"</span>)</span>
<span id="cb22-40"><a href="#cb22-40" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].yaxis.set_major_formatter(mticker.PercentFormatter(xmax<span class="op">=</span><span class="dv">1</span>))</span>
<span id="cb22-41"><a href="#cb22-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-42"><a href="#cb22-42" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].bar(prop_summary[<span class="st">"relative_td"</span>], prop_summary[<span class="st">"prop_above_volume"</span>],</span>
<span id="cb22-43"><a href="#cb22-43" aria-hidden="true" tabindex="-1"></a>            color<span class="op">=</span><span class="st">"darkorange"</span>, edgecolor<span class="op">=</span><span class="st">"white"</span>)</span>
<span id="cb22-44"><a href="#cb22-44" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].axhline(<span class="fl">0.5</span>, color<span class="op">=</span><span class="st">"grey"</span>, linestyle<span class="op">=</span><span class="st">"--"</span>, linewidth<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb22-45"><a href="#cb22-45" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].axvline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"black"</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb22-46"><a href="#cb22-46" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_xlabel(<span class="st">"Trading Days Relative to Announcement"</span>)</span>
<span id="cb22-47"><a href="#cb22-47" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_ylabel(<span class="st">"Proportion &gt; Median"</span>)</span>
<span id="cb22-48"><a href="#cb22-48" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">"Proportion with Above-Median Volume"</span>)</span>
<span id="cb22-49"><a href="#cb22-49" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].yaxis.set_major_formatter(mticker.PercentFormatter(xmax<span class="op">=</span><span class="dv">1</span>))</span>
<span id="cb22-50"><a href="#cb22-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-51"><a href="#cb22-51" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb22-52"><a href="#cb22-52" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="fig-proportion" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-proportion-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="32_info_earnings_files/figure-html/fig-proportion-output-1.png" width="1780" height="730" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-proportion-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;25.8: Proportion of individual announcements with above-median reaction on each event day. Unlike mean-based measures, this approach is robust to outliers. The fraction still rises notably on days 0 and +1, though the magnitude is more modest than in the mean-based plots.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="how-much-information-do-earnings-announcements-convey" class="level3" data-number="25.6.2">
<h3 data-number="25.6.2" class="anchored" data-anchor-id="how-much-information-do-earnings-announcements-convey"><span class="header-section-number">25.6.2</span> How Much Information Do Earnings Announcements Convey?</h3>
<p><span class="citation" data-cites="ball2008much">Ball and Shivakumar (<a href="references.html#ref-ball2008much" role="doc-biblioref">2008</a>)</span> pose a provocative question: even if earnings announcements generate detectable market reactions, how much of the <em>total</em> annual information flow do they account for? Their analysis suggests that quarterly earnings announcements explain only about 12–18% of annual return variation for U.S. firms, implying that the vast majority of value-relevant information reaches the market through other channels.</p>
<p>We can compute an analogous statistic for our Vietnamese sample:</p>
<div class="cell" data-execution_count="19">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute fraction of event-window variance in announcement days</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>variance_shares <span class="op">=</span> []</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (ticker, fy), group <span class="kw">in</span> daily_data.groupby([<span class="st">"ticker"</span>, <span class="st">"fiscal_year"</span>]):</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    total_var <span class="op">=</span> group[<span class="st">"ret_mkt"</span>].var()</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    annc_var <span class="op">=</span> group[group[<span class="st">"relative_td"</span>].isin(annc_window)][<span class="st">"ret_mkt"</span>].var()</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> total_var <span class="op">&gt;</span> <span class="dv">0</span> <span class="kw">and</span> <span class="kw">not</span> np.isnan(annc_var):</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>        variance_shares.append({</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>            <span class="st">"ticker"</span>: ticker,</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>            <span class="st">"fiscal_year"</span>: fy,</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>            <span class="st">"annc_var_share"</span>: annc_var <span class="op">/</span> total_var,</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>var_share_df <span class="op">=</span> pd.DataFrame(variance_shares)</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>expected_share <span class="op">=</span> <span class="bu">len</span>(annc_window) <span class="op">/</span> <span class="dv">41</span>  <span class="co"># 3 days out of 41</span></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>share_stats <span class="op">=</span> pd.DataFrame({</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Statistic"</span>: [<span class="st">"Mean share"</span>, <span class="st">"Median share"</span>, <span class="st">"Expected under null"</span>,</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"N events"</span>, <span class="st">"% above expected"</span>],</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Value"</span>: [</span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"</span><span class="sc">{</span>var_share_df[<span class="st">'annc_var_share'</span>]<span class="sc">.</span>mean()<span class="sc">:.3f}</span><span class="ss">"</span>,</span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"</span><span class="sc">{</span>var_share_df[<span class="st">'annc_var_share'</span>]<span class="sc">.</span>median()<span class="sc">:.3f}</span><span class="ss">"</span>,</span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"</span><span class="sc">{</span>expected_share<span class="sc">:.3f}</span><span class="ss">"</span>,</span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"</span><span class="sc">{</span><span class="bu">len</span>(var_share_df)<span class="sc">:,}</span><span class="ss">"</span>,</span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"</span><span class="sc">{</span>(var_share_df[<span class="st">'annc_var_share'</span>] <span class="op">&gt;</span> expected_share)<span class="sc">.</span>mean()<span class="sc">:.1%}</span><span class="ss">"</span>,</span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a>}).set_index(<span class="st">"Statistic"</span>)</span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a>share_stats</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div id="tbl-info-share" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="19">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-info-share-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;25.4: Share of annual return variation concentrated in the announcement window. The announcement window is days {-1, 0, +1}. If announcements carried no information, the expected share would be 3/41 ≈ 7.3% (three days out of a 41-day window). Values substantially above this indicate that a disproportionate share of return variation is concentrated around announcements.
</figcaption>
<div aria-describedby="tbl-info-share-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display" data-execution_count="19">
<div>


<table class="dataframe do-not-create-environment cell caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Value</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Statistic</th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">Mean share</th>
<td>3.426</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Median share</th>
<td>2.979</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Expected under null</th>
<td>0.073</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">N events</th>
<td>3,600</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">% above expected</th>
<td>98.5%</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div>
</div>
</section>
<section id="price-limits-and-multi-day-adjustment" class="level3" data-number="25.6.3">
<h3 data-number="25.6.3" class="anchored" data-anchor-id="price-limits-and-multi-day-adjustment"><span class="header-section-number">25.6.3</span> Price Limits and Multi-Day Adjustment</h3>
<p>A distinctive feature of Vietnamese markets is that daily price limits can prevent full single-day price adjustment. When an announcement is sufficiently surprising, the stock may hit the <span class="math inline">\(\pm\)</span> 7% limit on HOSE (or <span class="math inline">\(\pm\)</span> 10% on HNX), and the remaining adjustment spills into subsequent trading days. This creates a pattern of <strong>limit hits followed by continued drift</strong>, a phenomenon that would bias downward any single-day measure of announcement impact and redistribute information content across days 0, +1, and potentially +2.</p>
<div id="cell-fig-limit-hits" class="cell" data-execution_count="20">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Identify limit hits</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> is_limit_hit(row):</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    limit <span class="op">=</span> <span class="fl">0.07</span> <span class="cf">if</span> row[<span class="st">"exchange"</span>] <span class="op">==</span> <span class="st">"HOSE"</span> <span class="cf">else</span> <span class="fl">0.10</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">abs</span>(row[<span class="st">"ret"</span>]) <span class="op">&gt;=</span> (limit <span class="op">-</span> <span class="fl">0.005</span>)</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>daily_data[<span class="st">"limit_hit"</span>] <span class="op">=</span> daily_data.<span class="bu">apply</span>(is_limit_hit, axis<span class="op">=</span><span class="dv">1</span>).astype(<span class="bu">int</span>)</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>limit_summary <span class="op">=</span> (</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>    daily_data</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">"relative_td"</span>)[<span class="st">"limit_hit"</span>]</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>    .mean()</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>    .reset_index()</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>    .sort_values(<span class="st">"relative_td"</span>)</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>colors <span class="op">=</span> [<span class="st">"firebrick"</span> <span class="cf">if</span> <span class="bu">abs</span>(t) <span class="op">&lt;=</span> <span class="dv">1</span> <span class="cf">else</span> <span class="st">"steelblue"</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>          <span class="cf">for</span> t <span class="kw">in</span> limit_summary[<span class="st">"relative_td"</span>]]</span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>ax.bar(limit_summary[<span class="st">"relative_td"</span>], limit_summary[<span class="st">"limit_hit"</span>],</span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>       color<span class="op">=</span>colors, edgecolor<span class="op">=</span><span class="st">"white"</span>)</span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Trading Days Relative to Announcement"</span>)</span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Proportion Hitting Price Limit"</span>)</span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a>ax.yaxis.set_major_formatter(mticker.PercentFormatter(xmax<span class="op">=</span><span class="dv">1</span>, decimals<span class="op">=</span><span class="dv">1</span>))</span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>ax.axvline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"black"</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="fig-limit-hits" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-limit-hits-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="32_info_earnings_files/figure-html/fig-limit-hits-output-1.png" width="1030" height="729" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-limit-hits-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;25.9: Proportion of stocks hitting the daily price limit (within 0.5% of the ±7% HOSE limit or ±10% HNX limit) by event day. Limit hits are concentrated on the announcement day, indicating that some announcements are sufficiently surprising to exhaust single-day adjustment capacity.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="international-context" class="level3" data-number="25.6.4">
<h3 data-number="25.6.4" class="anchored" data-anchor-id="international-context"><span class="header-section-number">25.6.4</span> International Context</h3>
<p><span class="citation" data-cites="landsman2012information">Landsman, Maydew, and Thornock (<a href="references.html#ref-landsman2012information" role="doc-biblioref">2012</a>)</span> conduct a cross-country study of announcement reactions and find that information content is higher in countries with: (i) stronger investor protection, (ii) greater financial transparency, and (iii) mandatory IFRS adoption. Vietnam’s position on these dimensions, developing institutional framework, VAS rather than IFRS, moderate transparency, suggests that announcement reactions may differ systematically from developed-market benchmarks.</p>
<p>Their framework generates a testable prediction: as Vietnam progresses toward IFRS adoption (a process underway as of 2025), the information content of earnings announcements should <em>increase</em> to the extent that IFRS improves the mapping from economic events to reported numbers.</p>
<!-- ## Exercises

1.  **Median vs. mean.** Reproduce @fig-volatility-by-year and @fig-volume-by-year using the *median* rather than the mean across events on each event day. How do the results change? Which approach—mean or median—is more appropriate for drawing inferences, and why?

2.  **Absolute returns.** Replace squared market-adjusted returns with *absolute* market-adjusted returns ($|R_{i,t} - R_{m,t}|$) as the volatility measure. This is the `mean_abs_ret` variable computed in the code. How do the plots and test statistics compare? What are the statistical advantages of absolute returns over squared returns?

3.  **Pre-announcement drift.** Examine whether there is evidence of information leakage before the announcement. Specifically, test whether volume and volatility on days $\{-5, -4, -3, -2\}$ are significantly elevated above their non-event counterparts. What might explain pre-announcement trading activity in the Vietnamese context?

4.  **Announcement day return direction.** @beaver1968information focused exclusively on *unsigned* measures (volume and volatility). Extend the analysis to examine whether the *sign* of the announcement-day return is predictable. Compute the fraction of announcements with positive market-adjusted returns on day 0. Test whether this fraction differs from 50%. What would a systematic positive (or negative) bias imply?

5.  **Post-announcement drift.** Following the event study methodology from the previous chapter, compute cumulative abnormal returns (CARs) from day +2 to day +20 and test whether they are systematically nonzero. Post-announcement drift would suggest that the market underreacts to earnings news and gradually incorporates the information.

6.  **Price limit effects.** Identify announcements where the stock hit the daily price limit on day 0. For these events, plot cumulative absolute market-adjusted returns from day 0 through day +5. Compare with events where no limit was hit. Does the multi-day adjustment pattern for limit-hit events suggest that price limits impede efficient information incorporation?

7.  **Confounding events.** A potential threat to identification is that other corporate events (dividend declarations, M&A announcements, capital raisings) may coincide with the earnings window. If you have access to event data, exclude firm-windows with confounding events and re-estimate the analysis. How sensitive are the results to this filter?

8.  **Asymmetric reactions.** Classify announcements into "good news" (positive market-adjusted return on day 0) and "bad news" (negative return). Compare the volume and volatility patterns separately for each group. Is there evidence that the market reacts more strongly to bad news, consistent with the "bad news travels slowly" hypothesis of @berkman2009price?

9.  **Herd behavior.** @nguyen2014herd document herding behavior in Vietnamese equity markets. Design a test for whether announcement-day trading shows signs of herding (e.g., correlation between individual stock volume and market-wide volume conditional on the announcement signal). Discuss how herding would affect the interpretation of volume as a measure of information content.

10. **Time trend in information content.** Vietnam's disclosure regime has strengthened over time (Circular 155/2015/TT-BTC, Decree 71/2017/NĐ-CP). Test whether the announcement-day volatility ratio has increased over your sample period. A formal test would regress the event-level volatility difference on a time trend. -->
</section>
</section>
<section id="summary" class="level2" data-number="25.7">
<h2 data-number="25.7" class="anchored" data-anchor-id="summary"><span class="header-section-number">25.7</span> Summary</h2>
<p>This chapter examined whether earnings announcements convey new information to investors in Vietnamese equity markets, following the foundational research design of <span class="citation" data-cites="beaver1968information">Beaver (<a href="references.html#ref-beaver1968information" role="doc-biblioref">1968</a>)</span>. The key findings are:</p>
<ul>
<li><p>Both return volatility and trading volume spike sharply on the announcement day and the following day, providing robust evidence of information content. This result holds across fiscal years, consistent with earnings being a persistent source of new information.</p></li>
<li><p>Formal statistical tests reject the null of no information content with high confidence, using both mean-based and proportion-based measures.</p></li>
<li><p>Cross-sectional analysis reveals that the announcement reaction is stronger for smaller firms and HNX-listed firms, consistent with the theoretical prediction that the information content of earnings is inversely related to the richness of the pre-disclosure information environment.</p></li>
<li><p>Vietnamese-specific features—price limits, retail dominance, and sparse analyst coverage—create distinctive empirical patterns that enrich the standard <span class="citation" data-cites="beaver1968information">Beaver (<a href="references.html#ref-beaver1968information" role="doc-biblioref">1968</a>)</span> framework. Price limits, in particular, generate multi-day adjustment dynamics that researchers must account for when measuring single-day information content.</p></li>
<li><p>The <span class="citation" data-cites="bamber2000we">Bamber, Christensen, and Gaver (<a href="references.html#ref-bamber2000we" role="doc-biblioref">2000</a>)</span> critique—that mean effects can be driven by outliers—is addressed by examining the proportion of events with above-median reactions, which still shows clear announcement-day elevation.</p></li>
</ul>
<p>The evidence strongly supports the conclusion that annual earnings announcements convey new information to the Vietnamese market, consistent with the original <span class="citation" data-cites="beaver1968information">Beaver (<a href="references.html#ref-beaver1968information" role="doc-biblioref">1968</a>)</span> findings and the broader international evidence in <span class="citation" data-cites="landsman2012information">Landsman, Maydew, and Thornock (<a href="references.html#ref-landsman2012information" role="doc-biblioref">2012</a>)</span>.</p>


<!-- -->

<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-atiase1985predisclosure" class="csl-entry" role="listitem">
Atiase, Rowland Kwame. 1985. <span>“Predisclosure Information, Firm Capitalization, and Security Price Behavior Around Earnings Announcements.”</span> <em>Journal of Accounting Research</em>, 21–36.
</div>
<div id="ref-ball2008much" class="csl-entry" role="listitem">
Ball, Ray, and Lakshmanan Shivakumar. 2008. <span>“How Much New Information Is There in Earnings?”</span> <em>Journal of Accounting Research</em> 46 (5): 975–1016.
</div>
<div id="ref-bamber2000we" class="csl-entry" role="listitem">
Bamber, Linda Smith, Theodore E Christensen, and Kenneth M Gaver. 2000. <span>“Do We Really ‘Know’what We Think We Know? A Case Study of Seminal Research and Its Subsequent Overgeneralization.”</span> <em>Accounting, Organizations and Society</em> 25 (2): 103–29.
</div>
<div id="ref-beaver1968information" class="csl-entry" role="listitem">
Beaver, William H. 1968. <span>“The Information Content of Annual Earnings Announcements.”</span> <em>Journal of Accounting Research</em>, 67–92.
</div>
<div id="ref-kandel1995differential" class="csl-entry" role="listitem">
Kandel, Eugene, and Neil D Pearson. 1995. <span>“Differential Interpretation of Public Signals and Trade in Speculative Markets.”</span> <em>Journal of Political Economy</em> 103 (4): 831–72.
</div>
<div id="ref-karpoff1987relation" class="csl-entry" role="listitem">
Karpoff, Jonathan M. 1987. <span>“The Relation Between Price Changes and Trading Volume: A Survey.”</span> <em>Journal of Financial and Quantitative Analysis</em> 22 (1): 109–26.
</div>
<div id="ref-kim1991market" class="csl-entry" role="listitem">
Kim, Oliver, and Robert E Verrecchia. 1991. <span>“Market Reaction to Anticipated Announcements.”</span> <em>Journal of Financial Economics</em> 30 (2): 273–309.
</div>
<div id="ref-landsman2012information" class="csl-entry" role="listitem">
Landsman, Wayne R, Edward L Maydew, and Jacob R Thornock. 2012. <span>“The Information Content of Annual Earnings Announcements and Mandatory Adoption of IFRS.”</span> <em>Journal of Accounting and Economics</em> 53 (1-2): 34–54.
</div>
<div id="ref-verrecchia2001essays" class="csl-entry" role="listitem">
Verrecchia, Robert E. 2001. <span>“Essays on Disclosure.”</span> <em>Journal of Accounting and Economics</em> 32 (1-3): 97–180.
</div>
</div>
</section>

</main> <!-- /main -->
<script>
document.addEventListener("DOMContentLoaded", function () {
  const year = new Date().getFullYear();
  document.getElementById("copyright").textContent = "© " + year;
});
</script>
<script>
(function () {
  const GA_ID = "G-LMDLDJXXSC";   // your real GA4 ID
  const CONSENT_KEY = "cookie_consent_v1";

  function log(msg) {
    console.log("[GA Loader]", msg);
  }

  function loadGtag() {
    if (window.__gtag_loaded__) {
      log("GA already loaded, skipping");
      return;
    }

    log("Loading Google Analytics...");

    window.__gtag_loaded__ = true;

    const script = document.createElement("script");
    script.async = true;
    script.src = "https://www.googletagmanager.com/gtag/js?id=" + encodeURIComponent(GA_ID);

    script.onload = function () {
      log("gtag.js loaded");

      window.dataLayer = window.dataLayer || [];
      function gtag(){ dataLayer.push(arguments); }
      window.gtag = gtag;

      gtag("js", new Date());
      gtag("config", GA_ID, {
        anonymize_ip: true,
        transport_type: "beacon"
      });

      log("GA initialized successfully");
    };

    script.onerror = function () {
      log("FAILED to load gtag.js. Likely blocked by ad blocker or network.");
    };

    document.head.appendChild(script);
  }

  function checkConsentAndLoad() {
    const consent = localStorage.getItem(CONSENT_KEY);
    log("Stored consent value = " + consent);

    if (consent === "accepted") {
      loadGtag();
    } else {
      log("Analytics blocked due to missing or declined consent");
    }
  }

  // Run on page load
  checkConsentAndLoad();

  // Listen for cookie banner decisions
  window.addEventListener("cookie-consent-changed", function (e) {
    log("Consent event received: " + e.detail);
    if (e.detail === "accepted") {
      loadGtag();
    }
  });

})();
</script>
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/github\.com\/mikenguyen13\/tidy_finance_vn");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./31_discounted_cash_flow.html" class="pagination-link" aria-label="Discounted Cash Flow Analysis">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Discounted Cash Flow Analysis</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./33_accruals.html" class="pagination-link" aria-label="Accruals, Earnings Persistence, and Market Efficiency">
        <span class="nav-page-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Accruals, Earnings Persistence, and Market Efficiency</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb25" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># Information Content of Earnings Announcements</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: setup</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.ticker <span class="im">as</span> mticker</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.dates <span class="im">as</span> mdates</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.formula.api <span class="im">as</span> smf</span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy <span class="im">import</span> stats</span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> warnings</span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>warnings.filterwarnings(<span class="st">"ignore"</span>)</span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>plt.rcParams.update({</span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">"figure.dpi"</span>: <span class="dv">150</span>,</span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>    <span class="st">"axes.spines.top"</span>: <span class="va">False</span>,</span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>    <span class="st">"axes.spines.right"</span>: <span class="va">False</span>,</span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>    <span class="st">"font.size"</span>: <span class="dv">11</span>,</span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a>A foundational question in capital markets research is whether accounting information matters to investors. If financial statements merely repackage what the market already knows from other sources, such as press coverage, analyst reports, management guidance, macroeconomic data, then the elaborate apparatus of financial reporting is largely redundant for price discovery. Conversely, if earnings announcements trigger measurable changes in trading behavior, we have evidence that the accounting system produces information the market did not previously possess.</span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a>@beaver1968information addressed this question by examining whether trading volume and return volatility increase around the dates when firms announce annual earnings. The logic is direct: if an earnings announcement contains new information, it should alter investors' beliefs. Altered beliefs lead some investors to trade, increasing volume. And to the extent that the announcement resolves uncertainty, the stock price should adjust, generating abnormal return volatility. Both channels (i.e., volume and volatility) provide distinct windows into the information content of earnings.</span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true" tabindex="-1"></a>The empirical design compares a firm's trading activity during a narrow **announcement window** (the days immediately around the earnings release) with its own trading activity during a **non-announcement window** (otherwise comparable days away from the event). If the announcement conveys information, the announcement window should show elevated volume and volatility relative to the non-announcement period.</span>
<span id="cb25-33"><a href="#cb25-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-34"><a href="#cb25-34" aria-hidden="true" tabindex="-1"></a><span class="fu">### Two Distinct Signals: Volume vs. Volatility</span></span>
<span id="cb25-35"><a href="#cb25-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-36"><a href="#cb25-36" aria-hidden="true" tabindex="-1"></a>While volume and return volatility are both used to measure investor reaction, they capture different economic phenomena. This distinction, formalized in subsequent theoretical work, is important for interpreting results:</span>
<span id="cb25-37"><a href="#cb25-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-38"><a href="#cb25-38" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Return volatility** reflects the *average* revision in investor beliefs. When the market as a whole is surprised by an earnings number, prices move sharply. The magnitude of the squared (or absolute) return residual measures how far the announcement moved the consensus. This is a measure of the *aggregate information content* of the announcement <span class="co">[</span><span class="ot">@kim1991market</span><span class="co">]</span>.</span>
<span id="cb25-39"><a href="#cb25-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-40"><a href="#cb25-40" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Trading volume** reflects *disagreement* among investors about the implications of the announcement. Even an announcement that moves prices very little can generate heavy trading if investors interpret the same signal differently. For example, if some view an earnings beat as sustainable while others view it as temporary [@kandel1995differential]. Volume thus captures the *differential information content* of the announcement.</span>
<span id="cb25-41"><a href="#cb25-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-42"><a href="#cb25-42" aria-hidden="true" tabindex="-1"></a>@karpoff1987relation surveys the theoretical and empirical relationship between these two variables. The key insight is that volume is not simply a noisier version of volatility; it provides independent information about how the market processes accounting data.</span>
<span id="cb25-43"><a href="#cb25-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-44"><a href="#cb25-44" aria-hidden="true" tabindex="-1"></a><span class="fu">### Why Vietnam?</span></span>
<span id="cb25-45"><a href="#cb25-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-46"><a href="#cb25-46" aria-hidden="true" tabindex="-1"></a>Vietnam's equity markets provide a distinctive setting for studying announcement reactions for several reasons:</span>
<span id="cb25-47"><a href="#cb25-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-48"><a href="#cb25-48" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>**Information environment.** Vietnamese listed firms face less intense pre-announcement scrutiny than their U.S. counterparts. Analyst coverage is sparse (most firms outside the VN30 index receive no institutional coverage). Management earnings guidance is rare. This creates a thicker "information gap" for the earnings announcement to fill, potentially amplifying both volume and volatility reactions.</span>
<span id="cb25-49"><a href="#cb25-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-50"><a href="#cb25-50" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>**Retail investor dominance.** Over 80% of daily trading volume on HOSE is attributed to retail investors. Retail traders may process earnings information differently from institutions, with greater behavioral biases, less capacity for fundamental analysis, and different trading horizons. This affects both the timing and magnitude of market reactions.</span>
<span id="cb25-51"><a href="#cb25-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-52"><a href="#cb25-52" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>**Price limits.** HOSE imposes daily price limits of $\pm$ 7% and HNX of $\pm$ 10%. When an earnings announcement is sufficiently surprising, the stock may hit its price limit, preventing the market from fully incorporating the information within a single trading session. This creates a distinctive pattern of *multi-day adjustment* that has no analogue in the original U.S. studies.</span>
<span id="cb25-53"><a href="#cb25-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-54"><a href="#cb25-54" aria-hidden="true" tabindex="-1"></a><span class="ss">4.  </span>**Disclosure timing.** Vietnamese regulations require audited annual financial statements to be published within 90 days of fiscal year-end. Quarterly financial data (unaudited) must be released within 20 days. The overlap between quarterly and annual announcements, and the variable lag between fiscal year-end and announcement date, creates heterogeneity in the information content of annual earnings releases.</span>
<span id="cb25-55"><a href="#cb25-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-56"><a href="#cb25-56" aria-hidden="true" tabindex="-1"></a><span class="ss">5.  </span>**Market structure.** Vietnam operates continuous order-matching during trading hours (9:00–11:30 and 13:00–14:30 on HOSE; 9:00–11:30 and 13:00–15:00 on HNX), with periodic call auctions at open and close. This microstructure affects intraday patterns of price discovery around announcements.</span>
<span id="cb25-57"><a href="#cb25-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-58"><a href="#cb25-58" aria-hidden="true" tabindex="-1"></a><span class="fu">## Theoretical Framework {#sec-info-earnings-theory}</span></span>
<span id="cb25-59"><a href="#cb25-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-60"><a href="#cb25-60" aria-hidden="true" tabindex="-1"></a><span class="fu">### The Information Content Hypothesis</span></span>
<span id="cb25-61"><a href="#cb25-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-62"><a href="#cb25-62" aria-hidden="true" tabindex="-1"></a>Let $P_{i,t}$ denote the price of stock $i$ on date $t$. Under the efficient markets hypothesis, the price reflects all publicly available information:</span>
<span id="cb25-63"><a href="#cb25-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-64"><a href="#cb25-64" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb25-65"><a href="#cb25-65" aria-hidden="true" tabindex="-1"></a>P_{i,t} = E\left<span class="co">[</span><span class="ot">\sum_{s=1}^{\infty} \frac{D_{i,t+s}}{(1+r)^s} \;\bigg|\; \Omega_t \right</span><span class="co">]</span></span>
<span id="cb25-66"><a href="#cb25-66" aria-hidden="true" tabindex="-1"></a>$$ {#eq-emh}</span>
<span id="cb25-67"><a href="#cb25-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-68"><a href="#cb25-68" aria-hidden="true" tabindex="-1"></a>where $D_{i,t+s}$ represents future dividends, $r$ is the discount rate, and $\Omega_t$ is the information set at time $t$.</span>
<span id="cb25-69"><a href="#cb25-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-70"><a href="#cb25-70" aria-hidden="true" tabindex="-1"></a>When firm $i$ announces earnings $X_i$ at time $\tau$, the information set expands: $\Omega_{\tau^+} = \Omega_{\tau^-} \cup <span class="sc">\{</span>X_i<span class="sc">\}</span>$. If the announcement contains new information, meaning $X_i \notin \Omega_{\tau^-}$, then in general:</span>
<span id="cb25-71"><a href="#cb25-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-72"><a href="#cb25-72" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb25-73"><a href="#cb25-73" aria-hidden="true" tabindex="-1"></a>P_{i,\tau^+} \neq P_{i,\tau^-}</span>
<span id="cb25-74"><a href="#cb25-74" aria-hidden="true" tabindex="-1"></a>$$ {#eq-price-revision}</span>
<span id="cb25-75"><a href="#cb25-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-76"><a href="#cb25-76" aria-hidden="true" tabindex="-1"></a>The magnitude of the price change reflects the *surprise* component of the announcement:</span>
<span id="cb25-77"><a href="#cb25-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-78"><a href="#cb25-78" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb25-79"><a href="#cb25-79" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span>P_{i,\tau^+} - P_{i,\tau^-}<span class="pp">|</span> \propto <span class="pp">|</span>X_i - E<span class="co">[</span><span class="ot">X_i | \Omega_{\tau^-}</span><span class="co">]</span><span class="pp">|</span></span>
<span id="cb25-80"><a href="#cb25-80" aria-hidden="true" tabindex="-1"></a>$$ {#eq-surprise}</span>
<span id="cb25-81"><a href="#cb25-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-82"><a href="#cb25-82" aria-hidden="true" tabindex="-1"></a><span class="fu">### Volume as a Signal of Heterogeneous Beliefs</span></span>
<span id="cb25-83"><a href="#cb25-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-84"><a href="#cb25-84" aria-hidden="true" tabindex="-1"></a>@kim1991market develop a model where trading volume is driven by the precision of investors' private information relative to the precision of the public signal. Define $V_{i,\tau}$ as the trading volume for stock $i$ at time $\tau$. In their framework:</span>
<span id="cb25-85"><a href="#cb25-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-86"><a href="#cb25-86" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb25-87"><a href="#cb25-87" aria-hidden="true" tabindex="-1"></a>V_{i,\tau} = f\left(\frac{\text{Var}<span class="co">[</span><span class="ot">X_i | \Omega^{(j)}_{\tau^-}</span><span class="co">]</span>}{\text{Var}<span class="co">[</span><span class="ot">\varepsilon_i</span><span class="co">]</span>}\right)</span>
<span id="cb25-88"><a href="#cb25-88" aria-hidden="true" tabindex="-1"></a>$$ {#eq-volume-model}</span>
<span id="cb25-89"><a href="#cb25-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-90"><a href="#cb25-90" aria-hidden="true" tabindex="-1"></a>where $\Omega^{(j)}_{\tau^-}$ is investor $j$'s private information set and $\varepsilon_i$ is noise. Volume increases when investors disagree about what the announcement means, a condition that @kandel1995differential term **differential interpretation**.</span>
<span id="cb25-91"><a href="#cb25-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-92"><a href="#cb25-92" aria-hidden="true" tabindex="-1"></a>This distinction matters for Vietnam. In a market dominated by retail investors with heterogeneous information and analytical capacity, we might expect the volume reaction to be *disproportionately large* relative to the price reaction, because disagreement is high even when the aggregate price revision is modest.</span>
<span id="cb25-93"><a href="#cb25-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-94"><a href="#cb25-94" aria-hidden="true" tabindex="-1"></a><span class="fu">### Measuring Information Content</span></span>
<span id="cb25-95"><a href="#cb25-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-96"><a href="#cb25-96" aria-hidden="true" tabindex="-1"></a>We use two complementary measures:</span>
<span id="cb25-97"><a href="#cb25-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-98"><a href="#cb25-98" aria-hidden="true" tabindex="-1"></a>**Abnormal return volatility.** For each firm-day, compute the squared market-adjusted return:</span>
<span id="cb25-99"><a href="#cb25-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-100"><a href="#cb25-100" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb25-101"><a href="#cb25-101" aria-hidden="true" tabindex="-1"></a>U^2_{i,t} = (R_{i,t} - R_{m,t})^2</span>
<span id="cb25-102"><a href="#cb25-102" aria-hidden="true" tabindex="-1"></a>$$ {#eq-squared-residual}</span>
<span id="cb25-103"><a href="#cb25-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-104"><a href="#cb25-104" aria-hidden="true" tabindex="-1"></a>where $R_{i,t}$ is the return on stock $i$ and $R_{m,t}$ is the market return. Under the null of no information content, $E<span class="co">[</span><span class="ot">U^2_{i,t}</span><span class="co">]</span>$ should be the same in the announcement and non-announcement windows. @beaver1968information standardized this measure by dividing by the firm's average $U^2$ during non-announcement weeks.</span>
<span id="cb25-105"><a href="#cb25-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-106"><a href="#cb25-106" aria-hidden="true" tabindex="-1"></a>**Relative volume.** For each firm-day, compute:</span>
<span id="cb25-107"><a href="#cb25-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-108"><a href="#cb25-108" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb25-109"><a href="#cb25-109" aria-hidden="true" tabindex="-1"></a>RV_{i,t} = \frac{Vol_{i,t}}{\overline{Vol}_i}</span>
<span id="cb25-110"><a href="#cb25-110" aria-hidden="true" tabindex="-1"></a>$$ {#eq-relative-volume}</span>
<span id="cb25-111"><a href="#cb25-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-112"><a href="#cb25-112" aria-hidden="true" tabindex="-1"></a>where $\overline{Vol}_i$ is the firm's average daily volume over the event window. A value of $RV &gt; 1$ indicates above-average trading. @beaver1968information used a similar approach, computing a "volume ratio" relative to non-report-period averages.</span>
<span id="cb25-113"><a href="#cb25-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-114"><a href="#cb25-114" aria-hidden="true" tabindex="-1"></a><span class="fu">## Data and Variable Construction {#sec-info-earnings-measures}</span></span>
<span id="cb25-115"><a href="#cb25-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-116"><a href="#cb25-116" aria-hidden="true" tabindex="-1"></a><span class="fu">### Data Requirements</span></span>
<span id="cb25-117"><a href="#cb25-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-118"><a href="#cb25-118" aria-hidden="true" tabindex="-1"></a>The analysis requires three data elements:</span>
<span id="cb25-119"><a href="#cb25-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-120"><a href="#cb25-120" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Data <span class="pp">|</span> Source <span class="pp">|</span> Key Fields <span class="pp">|</span></span>
<span id="cb25-121"><a href="#cb25-121" aria-hidden="true" tabindex="-1"></a><span class="pp">|-------------------|-----------------------|------------------------------|</span></span>
<span id="cb25-122"><a href="#cb25-122" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Earnings announcement dates <span class="pp">|</span> Financial statements/filings <span class="pp">|</span> Ticker, fiscal year-end, announcement date <span class="pp">|</span></span>
<span id="cb25-123"><a href="#cb25-123" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Daily stock returns <span class="pp">|</span> Exchange data (HOSE/HNX) <span class="pp">|</span> Ticker, date, closing price, return <span class="pp">|</span></span>
<span id="cb25-124"><a href="#cb25-124" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Daily trading volume <span class="pp">|</span> Exchange data (HOSE/HNX) <span class="pp">|</span> Ticker, date, volume (shares or VND) <span class="pp">|</span></span>
<span id="cb25-125"><a href="#cb25-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-126"><a href="#cb25-126" aria-hidden="true" tabindex="-1"></a>: Data sources for the information content analysis {#tbl-info-earnings-data-sources}</span>
<span id="cb25-127"><a href="#cb25-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-128"><a href="#cb25-128" aria-hidden="true" tabindex="-1"></a><span class="fu">### Trading Day Calendar</span></span>
<span id="cb25-129"><a href="#cb25-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-130"><a href="#cb25-130" aria-hidden="true" tabindex="-1"></a>A critical infrastructure element is a **trading day calendar** that maps calendar dates to sequential trading day indices. This allows us to count "20 trading days before the announcement" correctly, skipping weekends and holidays.</span>
<span id="cb25-131"><a href="#cb25-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-134"><a href="#cb25-134" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb25-135"><a href="#cb25-135" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: trading-calendar</span></span>
<span id="cb25-136"><a href="#cb25-136" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Construct a trading day calendar for HOSE/HNX"</span></span>
<span id="cb25-137"><a href="#cb25-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-138"><a href="#cb25-138" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> build_trading_calendar(</span>
<span id="cb25-139"><a href="#cb25-139" aria-hidden="true" tabindex="-1"></a>    start_date: <span class="bu">str</span> <span class="op">=</span> <span class="st">"2008-01-01"</span>,</span>
<span id="cb25-140"><a href="#cb25-140" aria-hidden="true" tabindex="-1"></a>    end_date: <span class="bu">str</span> <span class="op">=</span> <span class="st">"2024-12-31"</span>,</span>
<span id="cb25-141"><a href="#cb25-141" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> pd.DataFrame:</span>
<span id="cb25-142"><a href="#cb25-142" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb25-143"><a href="#cb25-143" aria-hidden="true" tabindex="-1"></a><span class="co">    Build a trading day calendar for Vietnamese stock exchanges.</span></span>
<span id="cb25-144"><a href="#cb25-144" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb25-145"><a href="#cb25-145" aria-hidden="true" tabindex="-1"></a><span class="co">    Vietnamese exchanges trade Monday–Friday, with closures for:</span></span>
<span id="cb25-146"><a href="#cb25-146" aria-hidden="true" tabindex="-1"></a><span class="co">    - Tết Nguyên Đán (Lunar New Year, ~5 days)</span></span>
<span id="cb25-147"><a href="#cb25-147" aria-hidden="true" tabindex="-1"></a><span class="co">    - Ngày Giỗ Tổ Hùng Vương (Hung Kings' Commemoration)</span></span>
<span id="cb25-148"><a href="#cb25-148" aria-hidden="true" tabindex="-1"></a><span class="co">    - Ngày Giải phóng miền Nam (Reunification Day, Apr 30)</span></span>
<span id="cb25-149"><a href="#cb25-149" aria-hidden="true" tabindex="-1"></a><span class="co">    - Ngày Quốc tế Lao động (Labour Day, May 1)</span></span>
<span id="cb25-150"><a href="#cb25-150" aria-hidden="true" tabindex="-1"></a><span class="co">    - Quốc khánh (National Day, Sep 2)</span></span>
<span id="cb25-151"><a href="#cb25-151" aria-hidden="true" tabindex="-1"></a><span class="co">    - Tết Dương lịch (New Year, Jan 1)</span></span>
<span id="cb25-152"><a href="#cb25-152" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb25-153"><a href="#cb25-153" aria-hidden="true" tabindex="-1"></a><span class="co">    For simulation, we approximate by removing weekends and ~10 holidays/year.</span></span>
<span id="cb25-154"><a href="#cb25-154" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb25-155"><a href="#cb25-155" aria-hidden="true" tabindex="-1"></a>    all_dates <span class="op">=</span> pd.date_range(start_date, end_date, freq<span class="op">=</span><span class="st">"B"</span>)  <span class="co"># business days</span></span>
<span id="cb25-156"><a href="#cb25-156" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-157"><a href="#cb25-157" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove approximate Vietnamese public holidays</span></span>
<span id="cb25-158"><a href="#cb25-158" aria-hidden="true" tabindex="-1"></a>    <span class="co"># (In practice, use the exact holiday calendar from SSC/HOSE)</span></span>
<span id="cb25-159"><a href="#cb25-159" aria-hidden="true" tabindex="-1"></a>    rng <span class="op">=</span> np.random.default_rng(<span class="dv">42</span>)</span>
<span id="cb25-160"><a href="#cb25-160" aria-hidden="true" tabindex="-1"></a>    n_holidays_per_year <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb25-161"><a href="#cb25-161" aria-hidden="true" tabindex="-1"></a>    years <span class="op">=</span> all_dates.year.unique()</span>
<span id="cb25-162"><a href="#cb25-162" aria-hidden="true" tabindex="-1"></a>    holidays <span class="op">=</span> []</span>
<span id="cb25-163"><a href="#cb25-163" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> yr <span class="kw">in</span> years:</span>
<span id="cb25-164"><a href="#cb25-164" aria-hidden="true" tabindex="-1"></a>        yr_dates <span class="op">=</span> all_dates[all_dates.year <span class="op">==</span> yr]</span>
<span id="cb25-165"><a href="#cb25-165" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">len</span>(yr_dates) <span class="op">&gt;</span> n_holidays_per_year:</span>
<span id="cb25-166"><a href="#cb25-166" aria-hidden="true" tabindex="-1"></a>            idx <span class="op">=</span> rng.choice(<span class="bu">len</span>(yr_dates), n_holidays_per_year, replace<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb25-167"><a href="#cb25-167" aria-hidden="true" tabindex="-1"></a>            holidays.extend(yr_dates[idx])</span>
<span id="cb25-168"><a href="#cb25-168" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-169"><a href="#cb25-169" aria-hidden="true" tabindex="-1"></a>    trading_dates <span class="op">=</span> all_dates.difference(pd.DatetimeIndex(holidays))</span>
<span id="cb25-170"><a href="#cb25-170" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-171"><a href="#cb25-171" aria-hidden="true" tabindex="-1"></a>    cal <span class="op">=</span> pd.DataFrame({</span>
<span id="cb25-172"><a href="#cb25-172" aria-hidden="true" tabindex="-1"></a>        <span class="st">"date"</span>: trading_dates,</span>
<span id="cb25-173"><a href="#cb25-173" aria-hidden="true" tabindex="-1"></a>        <span class="st">"td"</span>: np.arange(<span class="dv">1</span>, <span class="bu">len</span>(trading_dates) <span class="op">+</span> <span class="dv">1</span>),</span>
<span id="cb25-174"><a href="#cb25-174" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb25-175"><a href="#cb25-175" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> cal</span>
<span id="cb25-176"><a href="#cb25-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-177"><a href="#cb25-177" aria-hidden="true" tabindex="-1"></a>trading_cal <span class="op">=</span> build_trading_calendar()</span>
<span id="cb25-178"><a href="#cb25-178" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Trading calendar: </span><span class="sc">{</span><span class="bu">len</span>(trading_cal)<span class="sc">:,}</span><span class="ss"> trading days, "</span></span>
<span id="cb25-179"><a href="#cb25-179" aria-hidden="true" tabindex="-1"></a>      <span class="ss">f"</span><span class="sc">{</span>trading_cal[<span class="st">'date'</span>]<span class="sc">.</span><span class="bu">min</span>()<span class="sc">.</span>date()<span class="sc">}</span><span class="ss"> to </span><span class="sc">{</span>trading_cal[<span class="st">'date'</span>]<span class="sc">.</span><span class="bu">max</span>()<span class="sc">.</span>date()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb25-180"><a href="#cb25-180" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-181"><a href="#cb25-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-182"><a href="#cb25-182" aria-hidden="true" tabindex="-1"></a><span class="fu">### Announcement Date Alignment</span></span>
<span id="cb25-183"><a href="#cb25-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-184"><a href="#cb25-184" aria-hidden="true" tabindex="-1"></a>Earnings announcements may occur on non-trading days (weekends, holidays). When this happens, we assign the announcement to the *next available* trading day, since that is the first opportunity for the market to react. We also need to handle the case where announcements occur after market close. Ideally, these would be assigned to the following trading day. Without intraday timing data (common in Vietnamese disclosures), we use the announcement date as reported.</span>
<span id="cb25-185"><a href="#cb25-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-188"><a href="#cb25-188" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb25-189"><a href="#cb25-189" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: annc-date-alignment</span></span>
<span id="cb25-190"><a href="#cb25-190" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Map announcement dates to trading day indices"</span></span>
<span id="cb25-191"><a href="#cb25-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-192"><a href="#cb25-192" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> build_announcement_mapper(trading_cal: pd.DataFrame) <span class="op">-&gt;</span> pd.DataFrame:</span>
<span id="cb25-193"><a href="#cb25-193" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb25-194"><a href="#cb25-194" aria-hidden="true" tabindex="-1"></a><span class="co">    Create a mapping from every calendar date to the next available</span></span>
<span id="cb25-195"><a href="#cb25-195" aria-hidden="true" tabindex="-1"></a><span class="co">    trading day index. This handles announcements on weekends/holidays.</span></span>
<span id="cb25-196"><a href="#cb25-196" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb25-197"><a href="#cb25-197" aria-hidden="true" tabindex="-1"></a>    min_date <span class="op">=</span> trading_cal[<span class="st">"date"</span>].<span class="bu">min</span>()</span>
<span id="cb25-198"><a href="#cb25-198" aria-hidden="true" tabindex="-1"></a>    max_date <span class="op">=</span> trading_cal[<span class="st">"date"</span>].<span class="bu">max</span>()</span>
<span id="cb25-199"><a href="#cb25-199" aria-hidden="true" tabindex="-1"></a>    all_dates <span class="op">=</span> pd.date_range(min_date, max_date, freq<span class="op">=</span><span class="st">"D"</span>)</span>
<span id="cb25-200"><a href="#cb25-200" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-201"><a href="#cb25-201" aria-hidden="true" tabindex="-1"></a>    mapper <span class="op">=</span> pd.DataFrame({<span class="st">"annc_date"</span>: all_dates})</span>
<span id="cb25-202"><a href="#cb25-202" aria-hidden="true" tabindex="-1"></a>    mapper <span class="op">=</span> mapper.merge(</span>
<span id="cb25-203"><a href="#cb25-203" aria-hidden="true" tabindex="-1"></a>        trading_cal.rename(columns<span class="op">=</span>{<span class="st">"date"</span>: <span class="st">"annc_date"</span>}),</span>
<span id="cb25-204"><a href="#cb25-204" aria-hidden="true" tabindex="-1"></a>        on<span class="op">=</span><span class="st">"annc_date"</span>,</span>
<span id="cb25-205"><a href="#cb25-205" aria-hidden="true" tabindex="-1"></a>        how<span class="op">=</span><span class="st">"left"</span>,</span>
<span id="cb25-206"><a href="#cb25-206" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb25-207"><a href="#cb25-207" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Forward-fill: assign non-trading dates to next trading day</span></span>
<span id="cb25-208"><a href="#cb25-208" aria-hidden="true" tabindex="-1"></a>    mapper[<span class="st">"td"</span>] <span class="op">=</span> mapper[<span class="st">"td"</span>].bfill()</span>
<span id="cb25-209"><a href="#cb25-209" aria-hidden="true" tabindex="-1"></a>    mapper[<span class="st">"td"</span>] <span class="op">=</span> mapper[<span class="st">"td"</span>].astype(<span class="st">"Int64"</span>)</span>
<span id="cb25-210"><a href="#cb25-210" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> mapper</span>
<span id="cb25-211"><a href="#cb25-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-212"><a href="#cb25-212" aria-hidden="true" tabindex="-1"></a>annc_mapper <span class="op">=</span> build_announcement_mapper(trading_cal)</span>
<span id="cb25-213"><a href="#cb25-213" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-214"><a href="#cb25-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-215"><a href="#cb25-215" aria-hidden="true" tabindex="-1"></a><span class="fu">### Generating Synthetic Vietnamese Data</span></span>
<span id="cb25-216"><a href="#cb25-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-217"><a href="#cb25-217" aria-hidden="true" tabindex="-1"></a>We generate a synthetic panel of Vietnamese listed firms with realistic properties to demonstrate the methodology. The simulation embeds an earnings announcement effect—elevated volume and volatility on days 0 and +1, that we then seek to detect using the @beaver1968information framework.</span>
<span id="cb25-218"><a href="#cb25-218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-221"><a href="#cb25-221" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb25-222"><a href="#cb25-222" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: gen-data</span></span>
<span id="cb25-223"><a href="#cb25-223" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Generate synthetic Vietnamese earnings announcement data"</span></span>
<span id="cb25-224"><a href="#cb25-224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-225"><a href="#cb25-225" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> generate_beaver_data(</span>
<span id="cb25-226"><a href="#cb25-226" aria-hidden="true" tabindex="-1"></a>    n_firms: <span class="bu">int</span> <span class="op">=</span> <span class="dv">300</span>,</span>
<span id="cb25-227"><a href="#cb25-227" aria-hidden="true" tabindex="-1"></a>    years: <span class="bu">list</span>[<span class="bu">int</span>] <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb25-228"><a href="#cb25-228" aria-hidden="true" tabindex="-1"></a>    seed: <span class="bu">int</span> <span class="op">=</span> <span class="dv">2024</span>,</span>
<span id="cb25-229"><a href="#cb25-229" aria-hidden="true" tabindex="-1"></a>    days_window: <span class="bu">int</span> <span class="op">=</span> <span class="dv">20</span>,</span>
<span id="cb25-230"><a href="#cb25-230" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">tuple</span>[pd.DataFrame, pd.DataFrame]:</span>
<span id="cb25-231"><a href="#cb25-231" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb25-232"><a href="#cb25-232" aria-hidden="true" tabindex="-1"></a><span class="co">    Generate:</span></span>
<span id="cb25-233"><a href="#cb25-233" aria-hidden="true" tabindex="-1"></a><span class="co">    1. earn_annc: DataFrame of earnings announcement dates</span></span>
<span id="cb25-234"><a href="#cb25-234" aria-hidden="true" tabindex="-1"></a><span class="co">    2. daily_data: DataFrame of daily returns and volume</span></span>
<span id="cb25-235"><a href="#cb25-235" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb25-236"><a href="#cb25-236" aria-hidden="true" tabindex="-1"></a><span class="co">    The DGP embeds:</span></span>
<span id="cb25-237"><a href="#cb25-237" aria-hidden="true" tabindex="-1"></a><span class="co">    - An announcement-day return volatility spike (2-3x normal)</span></span>
<span id="cb25-238"><a href="#cb25-238" aria-hidden="true" tabindex="-1"></a><span class="co">    - An announcement-day volume spike (1.5-2.5x normal)</span></span>
<span id="cb25-239"><a href="#cb25-239" aria-hidden="true" tabindex="-1"></a><span class="co">    - Price limit truncation at ±7% (HOSE)</span></span>
<span id="cb25-240"><a href="#cb25-240" aria-hidden="true" tabindex="-1"></a><span class="co">    - Cross-sectional variation by firm size and exchange</span></span>
<span id="cb25-241"><a href="#cb25-241" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb25-242"><a href="#cb25-242" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> years <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb25-243"><a href="#cb25-243" aria-hidden="true" tabindex="-1"></a>        years <span class="op">=</span> <span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">2012</span>, <span class="dv">2024</span>))</span>
<span id="cb25-244"><a href="#cb25-244" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-245"><a href="#cb25-245" aria-hidden="true" tabindex="-1"></a>    rng <span class="op">=</span> np.random.default_rng(seed)</span>
<span id="cb25-246"><a href="#cb25-246" aria-hidden="true" tabindex="-1"></a>    tc <span class="op">=</span> build_trading_calendar()</span>
<span id="cb25-247"><a href="#cb25-247" aria-hidden="true" tabindex="-1"></a>    am <span class="op">=</span> build_announcement_mapper(tc)</span>
<span id="cb25-248"><a href="#cb25-248" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-249"><a href="#cb25-249" aria-hidden="true" tabindex="-1"></a>    exchanges <span class="op">=</span> [<span class="st">"HOSE"</span>, <span class="st">"HNX"</span>]</span>
<span id="cb25-250"><a href="#cb25-250" aria-hidden="true" tabindex="-1"></a>    price_limits <span class="op">=</span> {<span class="st">"HOSE"</span>: <span class="fl">0.07</span>, <span class="st">"HNX"</span>: <span class="fl">0.10</span>}</span>
<span id="cb25-251"><a href="#cb25-251" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-252"><a href="#cb25-252" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ── Generate announcement dates ──</span></span>
<span id="cb25-253"><a href="#cb25-253" aria-hidden="true" tabindex="-1"></a>    annc_records <span class="op">=</span> []</span>
<span id="cb25-254"><a href="#cb25-254" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n_firms):</span>
<span id="cb25-255"><a href="#cb25-255" aria-hidden="true" tabindex="-1"></a>        ticker <span class="op">=</span> <span class="ss">f"VN</span><span class="sc">{</span>i<span class="sc">:04d}</span><span class="ss">"</span></span>
<span id="cb25-256"><a href="#cb25-256" aria-hidden="true" tabindex="-1"></a>        exchange <span class="op">=</span> rng.choice(exchanges, p<span class="op">=</span>[<span class="fl">0.6</span>, <span class="fl">0.4</span>])</span>
<span id="cb25-257"><a href="#cb25-257" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Firm size (log market cap in VND billions)</span></span>
<span id="cb25-258"><a href="#cb25-258" aria-hidden="true" tabindex="-1"></a>        log_mcap <span class="op">=</span> rng.normal(<span class="fl">6.5</span>, <span class="fl">1.5</span>)</span>
<span id="cb25-259"><a href="#cb25-259" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb25-260"><a href="#cb25-260" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> yr <span class="kw">in</span> years:</span>
<span id="cb25-261"><a href="#cb25-261" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Fiscal year ends Dec 31; announcement 60-90 days later</span></span>
<span id="cb25-262"><a href="#cb25-262" aria-hidden="true" tabindex="-1"></a>            fy_end <span class="op">=</span> pd.Timestamp(<span class="ss">f"</span><span class="sc">{</span>yr<span class="sc">}</span><span class="ss">-12-31"</span>)</span>
<span id="cb25-263"><a href="#cb25-263" aria-hidden="true" tabindex="-1"></a>            annc_lag <span class="op">=</span> rng.integers(<span class="dv">45</span>, <span class="dv">90</span>)</span>
<span id="cb25-264"><a href="#cb25-264" aria-hidden="true" tabindex="-1"></a>            annc_date <span class="op">=</span> fy_end <span class="op">+</span> pd.Timedelta(days<span class="op">=</span><span class="bu">int</span>(annc_lag))</span>
<span id="cb25-265"><a href="#cb25-265" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb25-266"><a href="#cb25-266" aria-hidden="true" tabindex="-1"></a>            annc_records.append({</span>
<span id="cb25-267"><a href="#cb25-267" aria-hidden="true" tabindex="-1"></a>                <span class="st">"ticker"</span>: ticker,</span>
<span id="cb25-268"><a href="#cb25-268" aria-hidden="true" tabindex="-1"></a>                <span class="st">"fiscal_year"</span>: yr,</span>
<span id="cb25-269"><a href="#cb25-269" aria-hidden="true" tabindex="-1"></a>                <span class="st">"datadate"</span>: fy_end,</span>
<span id="cb25-270"><a href="#cb25-270" aria-hidden="true" tabindex="-1"></a>                <span class="st">"annc_date"</span>: annc_date,</span>
<span id="cb25-271"><a href="#cb25-271" aria-hidden="true" tabindex="-1"></a>                <span class="st">"exchange"</span>: exchange,</span>
<span id="cb25-272"><a href="#cb25-272" aria-hidden="true" tabindex="-1"></a>                <span class="st">"log_mcap"</span>: log_mcap,</span>
<span id="cb25-273"><a href="#cb25-273" aria-hidden="true" tabindex="-1"></a>            })</span>
<span id="cb25-274"><a href="#cb25-274" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-275"><a href="#cb25-275" aria-hidden="true" tabindex="-1"></a>    earn_annc <span class="op">=</span> pd.DataFrame(annc_records)</span>
<span id="cb25-276"><a href="#cb25-276" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-277"><a href="#cb25-277" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Map to trading day index</span></span>
<span id="cb25-278"><a href="#cb25-278" aria-hidden="true" tabindex="-1"></a>    earn_annc[<span class="st">"annc_date_dt"</span>] <span class="op">=</span> pd.to_datetime(earn_annc[<span class="st">"annc_date"</span>])</span>
<span id="cb25-279"><a href="#cb25-279" aria-hidden="true" tabindex="-1"></a>    earn_annc <span class="op">=</span> earn_annc.merge(</span>
<span id="cb25-280"><a href="#cb25-280" aria-hidden="true" tabindex="-1"></a>        am[[<span class="st">"annc_date"</span>, <span class="st">"td"</span>]].rename(columns<span class="op">=</span>{<span class="st">"td"</span>: <span class="st">"event_td"</span>}),</span>
<span id="cb25-281"><a href="#cb25-281" aria-hidden="true" tabindex="-1"></a>        left_on<span class="op">=</span><span class="st">"annc_date_dt"</span>,</span>
<span id="cb25-282"><a href="#cb25-282" aria-hidden="true" tabindex="-1"></a>        right_on<span class="op">=</span><span class="st">"annc_date"</span>,</span>
<span id="cb25-283"><a href="#cb25-283" aria-hidden="true" tabindex="-1"></a>        how<span class="op">=</span><span class="st">"left"</span>,</span>
<span id="cb25-284"><a href="#cb25-284" aria-hidden="true" tabindex="-1"></a>        suffixes<span class="op">=</span>(<span class="st">""</span>, <span class="st">"_map"</span>),</span>
<span id="cb25-285"><a href="#cb25-285" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb25-286"><a href="#cb25-286" aria-hidden="true" tabindex="-1"></a>    earn_annc <span class="op">=</span> earn_annc.dropna(subset<span class="op">=</span>[<span class="st">"event_td"</span>])</span>
<span id="cb25-287"><a href="#cb25-287" aria-hidden="true" tabindex="-1"></a>    earn_annc[<span class="st">"event_td"</span>] <span class="op">=</span> earn_annc[<span class="st">"event_td"</span>].astype(<span class="bu">int</span>)</span>
<span id="cb25-288"><a href="#cb25-288" aria-hidden="true" tabindex="-1"></a>    earn_annc[<span class="st">"start_td"</span>] <span class="op">=</span> earn_annc[<span class="st">"event_td"</span>] <span class="op">-</span> days_window</span>
<span id="cb25-289"><a href="#cb25-289" aria-hidden="true" tabindex="-1"></a>    earn_annc[<span class="st">"end_td"</span>] <span class="op">=</span> earn_annc[<span class="st">"event_td"</span>] <span class="op">+</span> days_window</span>
<span id="cb25-290"><a href="#cb25-290" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-291"><a href="#cb25-291" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Map start/end td back to dates</span></span>
<span id="cb25-292"><a href="#cb25-292" aria-hidden="true" tabindex="-1"></a>    td_to_date <span class="op">=</span> tc.set_index(<span class="st">"td"</span>)[<span class="st">"date"</span>]</span>
<span id="cb25-293"><a href="#cb25-293" aria-hidden="true" tabindex="-1"></a>    earn_annc[<span class="st">"start_date"</span>] <span class="op">=</span> earn_annc[<span class="st">"start_td"</span>].<span class="bu">map</span>(td_to_date)</span>
<span id="cb25-294"><a href="#cb25-294" aria-hidden="true" tabindex="-1"></a>    earn_annc[<span class="st">"end_date"</span>] <span class="op">=</span> earn_annc[<span class="st">"end_td"</span>].<span class="bu">map</span>(td_to_date)</span>
<span id="cb25-295"><a href="#cb25-295" aria-hidden="true" tabindex="-1"></a>    earn_annc <span class="op">=</span> earn_annc.dropna(subset<span class="op">=</span>[<span class="st">"start_date"</span>, <span class="st">"end_date"</span>])</span>
<span id="cb25-296"><a href="#cb25-296" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-297"><a href="#cb25-297" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ── Generate daily return and volume data ──</span></span>
<span id="cb25-298"><a href="#cb25-298" aria-hidden="true" tabindex="-1"></a>    daily_records <span class="op">=</span> []</span>
<span id="cb25-299"><a href="#cb25-299" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> _, row <span class="kw">in</span> earn_annc.iterrows():</span>
<span id="cb25-300"><a href="#cb25-300" aria-hidden="true" tabindex="-1"></a>        ticker <span class="op">=</span> row[<span class="st">"ticker"</span>]</span>
<span id="cb25-301"><a href="#cb25-301" aria-hidden="true" tabindex="-1"></a>        exchange <span class="op">=</span> row[<span class="st">"exchange"</span>]</span>
<span id="cb25-302"><a href="#cb25-302" aria-hidden="true" tabindex="-1"></a>        plimit <span class="op">=</span> price_limits[exchange]</span>
<span id="cb25-303"><a href="#cb25-303" aria-hidden="true" tabindex="-1"></a>        log_mcap <span class="op">=</span> row[<span class="st">"log_mcap"</span>]</span>
<span id="cb25-304"><a href="#cb25-304" aria-hidden="true" tabindex="-1"></a>        event_td <span class="op">=</span> row[<span class="st">"event_td"</span>]</span>
<span id="cb25-305"><a href="#cb25-305" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb25-306"><a href="#cb25-306" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Base volatility inversely related to size</span></span>
<span id="cb25-307"><a href="#cb25-307" aria-hidden="true" tabindex="-1"></a>        base_vol <span class="op">=</span> <span class="fl">0.015</span> <span class="op">+</span> <span class="fl">0.01</span> <span class="op">*</span> np.exp(<span class="op">-</span><span class="fl">0.3</span> <span class="op">*</span> log_mcap)</span>
<span id="cb25-308"><a href="#cb25-308" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Base volume (shares/day)</span></span>
<span id="cb25-309"><a href="#cb25-309" aria-hidden="true" tabindex="-1"></a>        base_volume <span class="op">=</span> np.exp(log_mcap <span class="op">+</span> rng.normal(<span class="dv">0</span>, <span class="fl">0.5</span>)) <span class="op">*</span> <span class="dv">1000</span></span>
<span id="cb25-310"><a href="#cb25-310" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb25-311"><a href="#cb25-311" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Window trading days</span></span>
<span id="cb25-312"><a href="#cb25-312" aria-hidden="true" tabindex="-1"></a>        window_tds <span class="op">=</span> tc[</span>
<span id="cb25-313"><a href="#cb25-313" aria-hidden="true" tabindex="-1"></a>            (tc[<span class="st">"td"</span>] <span class="op">&gt;=</span> row[<span class="st">"start_td"</span>]) <span class="op">&amp;</span> (tc[<span class="st">"td"</span>] <span class="op">&lt;=</span> row[<span class="st">"end_td"</span>])</span>
<span id="cb25-314"><a href="#cb25-314" aria-hidden="true" tabindex="-1"></a>        ].copy()</span>
<span id="cb25-315"><a href="#cb25-315" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb25-316"><a href="#cb25-316" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> _, td_row <span class="kw">in</span> window_tds.iterrows():</span>
<span id="cb25-317"><a href="#cb25-317" aria-hidden="true" tabindex="-1"></a>            date <span class="op">=</span> td_row[<span class="st">"date"</span>]</span>
<span id="cb25-318"><a href="#cb25-318" aria-hidden="true" tabindex="-1"></a>            td <span class="op">=</span> td_row[<span class="st">"td"</span>]</span>
<span id="cb25-319"><a href="#cb25-319" aria-hidden="true" tabindex="-1"></a>            relative_td <span class="op">=</span> td <span class="op">-</span> event_td</span>
<span id="cb25-320"><a href="#cb25-320" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb25-321"><a href="#cb25-321" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Market return (common factor)</span></span>
<span id="cb25-322"><a href="#cb25-322" aria-hidden="true" tabindex="-1"></a>            mkt_ret <span class="op">=</span> rng.normal(<span class="fl">0.0003</span>, <span class="fl">0.012</span>)</span>
<span id="cb25-323"><a href="#cb25-323" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb25-324"><a href="#cb25-324" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Firm-specific return</span></span>
<span id="cb25-325"><a href="#cb25-325" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Announcement effect: elevated volatility on days 0, +1</span></span>
<span id="cb25-326"><a href="#cb25-326" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> relative_td <span class="kw">in</span> [<span class="dv">0</span>, <span class="dv">1</span>]:</span>
<span id="cb25-327"><a href="#cb25-327" aria-hidden="true" tabindex="-1"></a>                vol_mult <span class="op">=</span> rng.uniform(<span class="fl">2.0</span>, <span class="fl">3.5</span>)</span>
<span id="cb25-328"><a href="#cb25-328" aria-hidden="true" tabindex="-1"></a>            <span class="cf">elif</span> <span class="bu">abs</span>(relative_td) <span class="op">&lt;=</span> <span class="dv">2</span>:</span>
<span id="cb25-329"><a href="#cb25-329" aria-hidden="true" tabindex="-1"></a>                vol_mult <span class="op">=</span> rng.uniform(<span class="fl">1.2</span>, <span class="fl">1.8</span>)</span>
<span id="cb25-330"><a href="#cb25-330" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb25-331"><a href="#cb25-331" aria-hidden="true" tabindex="-1"></a>                vol_mult <span class="op">=</span> <span class="fl">1.0</span></span>
<span id="cb25-332"><a href="#cb25-332" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb25-333"><a href="#cb25-333" aria-hidden="true" tabindex="-1"></a>            firm_shock <span class="op">=</span> rng.normal(<span class="dv">0</span>, base_vol <span class="op">*</span> vol_mult)</span>
<span id="cb25-334"><a href="#cb25-334" aria-hidden="true" tabindex="-1"></a>            raw_ret <span class="op">=</span> mkt_ret <span class="op">+</span> firm_shock</span>
<span id="cb25-335"><a href="#cb25-335" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb25-336"><a href="#cb25-336" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Apply price limits</span></span>
<span id="cb25-337"><a href="#cb25-337" aria-hidden="true" tabindex="-1"></a>            ret <span class="op">=</span> np.clip(raw_ret, <span class="op">-</span>plimit, plimit)</span>
<span id="cb25-338"><a href="#cb25-338" aria-hidden="true" tabindex="-1"></a>            ret_mkt <span class="op">=</span> ret <span class="op">-</span> mkt_ret</span>
<span id="cb25-339"><a href="#cb25-339" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb25-340"><a href="#cb25-340" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Volume: spike on announcement days</span></span>
<span id="cb25-341"><a href="#cb25-341" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> relative_td <span class="kw">in</span> [<span class="dv">0</span>, <span class="dv">1</span>]:</span>
<span id="cb25-342"><a href="#cb25-342" aria-hidden="true" tabindex="-1"></a>                vol_spike <span class="op">=</span> rng.uniform(<span class="fl">1.5</span>, <span class="fl">2.8</span>)</span>
<span id="cb25-343"><a href="#cb25-343" aria-hidden="true" tabindex="-1"></a>            <span class="cf">elif</span> <span class="bu">abs</span>(relative_td) <span class="op">&lt;=</span> <span class="dv">3</span>:</span>
<span id="cb25-344"><a href="#cb25-344" aria-hidden="true" tabindex="-1"></a>                vol_spike <span class="op">=</span> rng.uniform(<span class="fl">1.0</span>, <span class="fl">1.5</span>)</span>
<span id="cb25-345"><a href="#cb25-345" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb25-346"><a href="#cb25-346" aria-hidden="true" tabindex="-1"></a>                vol_spike <span class="op">=</span> rng.uniform(<span class="fl">0.7</span>, <span class="fl">1.3</span>)</span>
<span id="cb25-347"><a href="#cb25-347" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb25-348"><a href="#cb25-348" aria-hidden="true" tabindex="-1"></a>            volume <span class="op">=</span> base_volume <span class="op">*</span> vol_spike <span class="op">*</span> np.exp(rng.normal(<span class="dv">0</span>, <span class="fl">0.3</span>))</span>
<span id="cb25-349"><a href="#cb25-349" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb25-350"><a href="#cb25-350" aria-hidden="true" tabindex="-1"></a>            daily_records.append({</span>
<span id="cb25-351"><a href="#cb25-351" aria-hidden="true" tabindex="-1"></a>                <span class="st">"ticker"</span>: ticker,</span>
<span id="cb25-352"><a href="#cb25-352" aria-hidden="true" tabindex="-1"></a>                <span class="st">"fiscal_year"</span>: row[<span class="st">"fiscal_year"</span>],</span>
<span id="cb25-353"><a href="#cb25-353" aria-hidden="true" tabindex="-1"></a>                <span class="st">"date"</span>: date,</span>
<span id="cb25-354"><a href="#cb25-354" aria-hidden="true" tabindex="-1"></a>                <span class="st">"td"</span>: td,</span>
<span id="cb25-355"><a href="#cb25-355" aria-hidden="true" tabindex="-1"></a>                <span class="st">"relative_td"</span>: relative_td,</span>
<span id="cb25-356"><a href="#cb25-356" aria-hidden="true" tabindex="-1"></a>                <span class="st">"ret"</span>: ret,</span>
<span id="cb25-357"><a href="#cb25-357" aria-hidden="true" tabindex="-1"></a>                <span class="st">"mkt_ret"</span>: mkt_ret,</span>
<span id="cb25-358"><a href="#cb25-358" aria-hidden="true" tabindex="-1"></a>                <span class="st">"ret_mkt"</span>: ret_mkt,</span>
<span id="cb25-359"><a href="#cb25-359" aria-hidden="true" tabindex="-1"></a>                <span class="st">"vol"</span>: <span class="bu">max</span>(volume, <span class="dv">100</span>),</span>
<span id="cb25-360"><a href="#cb25-360" aria-hidden="true" tabindex="-1"></a>                <span class="st">"exchange"</span>: exchange,</span>
<span id="cb25-361"><a href="#cb25-361" aria-hidden="true" tabindex="-1"></a>                <span class="st">"log_mcap"</span>: log_mcap,</span>
<span id="cb25-362"><a href="#cb25-362" aria-hidden="true" tabindex="-1"></a>            })</span>
<span id="cb25-363"><a href="#cb25-363" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-364"><a href="#cb25-364" aria-hidden="true" tabindex="-1"></a>    daily_data <span class="op">=</span> pd.DataFrame(daily_records)</span>
<span id="cb25-365"><a href="#cb25-365" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-366"><a href="#cb25-366" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> earn_annc, daily_data</span>
<span id="cb25-367"><a href="#cb25-367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-368"><a href="#cb25-368" aria-hidden="true" tabindex="-1"></a>earn_annc, daily_data <span class="op">=</span> generate_beaver_data(n_firms<span class="op">=</span><span class="dv">300</span>, seed<span class="op">=</span><span class="dv">2024</span>)</span>
<span id="cb25-369"><a href="#cb25-369" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Announcements: </span><span class="sc">{</span><span class="bu">len</span>(earn_annc)<span class="sc">:,}</span><span class="ss">"</span>)</span>
<span id="cb25-370"><a href="#cb25-370" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Daily observations: </span><span class="sc">{</span><span class="bu">len</span>(daily_data)<span class="sc">:,}</span><span class="ss">"</span>)</span>
<span id="cb25-371"><a href="#cb25-371" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-372"><a href="#cb25-372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-373"><a href="#cb25-373" aria-hidden="true" tabindex="-1"></a><span class="fu">## Single-Event Walkthrough {#sec-info-earnings-single}</span></span>
<span id="cb25-374"><a href="#cb25-374" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-375"><a href="#cb25-375" aria-hidden="true" tabindex="-1"></a>Before scaling to the full sample, we trace the methodology for a single earnings announcement to build intuition and verify each step.</span>
<span id="cb25-376"><a href="#cb25-376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-377"><a href="#cb25-377" aria-hidden="true" tabindex="-1"></a><span class="fu">### Selecting the Event</span></span>
<span id="cb25-378"><a href="#cb25-378" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-381"><a href="#cb25-381" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb25-382"><a href="#cb25-382" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: single-event-select</span></span>
<span id="cb25-383"><a href="#cb25-383" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Select a single earnings announcement for demonstration"</span></span>
<span id="cb25-384"><a href="#cb25-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-385"><a href="#cb25-385" aria-hidden="true" tabindex="-1"></a>single_ticker <span class="op">=</span> <span class="st">"VN0042"</span></span>
<span id="cb25-386"><a href="#cb25-386" aria-hidden="true" tabindex="-1"></a>single_fy <span class="op">=</span> <span class="dv">2019</span></span>
<span id="cb25-387"><a href="#cb25-387" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-388"><a href="#cb25-388" aria-hidden="true" tabindex="-1"></a>single_event <span class="op">=</span> earn_annc[</span>
<span id="cb25-389"><a href="#cb25-389" aria-hidden="true" tabindex="-1"></a>    (earn_annc[<span class="st">"ticker"</span>] <span class="op">==</span> single_ticker) <span class="op">&amp;</span></span>
<span id="cb25-390"><a href="#cb25-390" aria-hidden="true" tabindex="-1"></a>    (earn_annc[<span class="st">"fiscal_year"</span>] <span class="op">==</span> single_fy)</span>
<span id="cb25-391"><a href="#cb25-391" aria-hidden="true" tabindex="-1"></a>].iloc[<span class="dv">0</span>]</span>
<span id="cb25-392"><a href="#cb25-392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-393"><a href="#cb25-393" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Firm: </span><span class="sc">{</span>single_event[<span class="st">'ticker'</span>]<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb25-394"><a href="#cb25-394" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Fiscal year-end: </span><span class="sc">{</span>single_event[<span class="st">'datadate'</span>]<span class="sc">.</span>date()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb25-395"><a href="#cb25-395" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Announcement date: </span><span class="sc">{</span>single_event[<span class="st">'annc_date'</span>]<span class="sc">.</span>date()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb25-396"><a href="#cb25-396" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Exchange: </span><span class="sc">{</span>single_event[<span class="st">'exchange'</span>]<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb25-397"><a href="#cb25-397" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Event trading day: </span><span class="sc">{</span>single_event[<span class="st">'event_td'</span>]<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb25-398"><a href="#cb25-398" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-399"><a href="#cb25-399" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-400"><a href="#cb25-400" aria-hidden="true" tabindex="-1"></a><span class="fu">### Event Window Data</span></span>
<span id="cb25-401"><a href="#cb25-401" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-402"><a href="#cb25-402" aria-hidden="true" tabindex="-1"></a>We extract 41 trading days of data (20 before through 20 after the announcement) and compute the key measures.</span>
<span id="cb25-403"><a href="#cb25-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-406"><a href="#cb25-406" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb25-407"><a href="#cb25-407" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: single-event-data</span></span>
<span id="cb25-408"><a href="#cb25-408" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Extract and process data for the single event"</span></span>
<span id="cb25-409"><a href="#cb25-409" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-410"><a href="#cb25-410" aria-hidden="true" tabindex="-1"></a>single_daily <span class="op">=</span> daily_data[</span>
<span id="cb25-411"><a href="#cb25-411" aria-hidden="true" tabindex="-1"></a>    (daily_data[<span class="st">"ticker"</span>] <span class="op">==</span> single_ticker) <span class="op">&amp;</span></span>
<span id="cb25-412"><a href="#cb25-412" aria-hidden="true" tabindex="-1"></a>    (daily_data[<span class="st">"fiscal_year"</span>] <span class="op">==</span> single_fy)</span>
<span id="cb25-413"><a href="#cb25-413" aria-hidden="true" tabindex="-1"></a>].copy()</span>
<span id="cb25-414"><a href="#cb25-414" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-415"><a href="#cb25-415" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute measures</span></span>
<span id="cb25-416"><a href="#cb25-416" aria-hidden="true" tabindex="-1"></a>single_daily[<span class="st">"sq_ret_mkt"</span>] <span class="op">=</span> single_daily[<span class="st">"ret_mkt"</span>] <span class="op">**</span> <span class="dv">2</span></span>
<span id="cb25-417"><a href="#cb25-417" aria-hidden="true" tabindex="-1"></a>single_daily[<span class="st">"abs_ret_mkt"</span>] <span class="op">=</span> single_daily[<span class="st">"ret_mkt"</span>].<span class="bu">abs</span>()</span>
<span id="cb25-418"><a href="#cb25-418" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-419"><a href="#cb25-419" aria-hidden="true" tabindex="-1"></a><span class="co"># Relative volume: normalize by own average</span></span>
<span id="cb25-420"><a href="#cb25-420" aria-hidden="true" tabindex="-1"></a>avg_vol <span class="op">=</span> single_daily[<span class="st">"vol"</span>].mean()</span>
<span id="cb25-421"><a href="#cb25-421" aria-hidden="true" tabindex="-1"></a>single_daily[<span class="st">"rel_vol"</span>] <span class="op">=</span> single_daily[<span class="st">"vol"</span>] <span class="op">/</span> avg_vol</span>
<span id="cb25-422"><a href="#cb25-422" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-423"><a href="#cb25-423" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Trading days in window: </span><span class="sc">{</span><span class="bu">len</span>(single_daily)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb25-424"><a href="#cb25-424" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Average daily volume: </span><span class="sc">{</span>avg_vol<span class="sc">:,.0f}</span><span class="ss"> shares"</span>)</span>
<span id="cb25-425"><a href="#cb25-425" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-426"><a href="#cb25-426" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-427"><a href="#cb25-427" aria-hidden="true" tabindex="-1"></a><span class="fu">### Visualizing the Single Event</span></span>
<span id="cb25-428"><a href="#cb25-428" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-429"><a href="#cb25-429" aria-hidden="true" tabindex="-1"></a>@fig-single-volume and @fig-single-volatility display the volume and volatility patterns for this single earnings announcement.</span>
<span id="cb25-430"><a href="#cb25-430" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-433"><a href="#cb25-433" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb25-434"><a href="#cb25-434" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-single-volume</span></span>
<span id="cb25-435"><a href="#cb25-435" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Daily trading volume around a single earnings announcement. Day 0 is the first trading day on or after the announcement date. The dashed line marks the event-window average."</span></span>
<span id="cb25-436"><a href="#cb25-436" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-437"><a href="#cb25-437" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb25-438"><a href="#cb25-438" aria-hidden="true" tabindex="-1"></a>colors <span class="op">=</span> [<span class="st">"firebrick"</span> <span class="cf">if</span> <span class="bu">abs</span>(t) <span class="op">&lt;=</span> <span class="dv">1</span> <span class="cf">else</span> <span class="st">"steelblue"</span></span>
<span id="cb25-439"><a href="#cb25-439" aria-hidden="true" tabindex="-1"></a>          <span class="cf">for</span> t <span class="kw">in</span> single_daily[<span class="st">"relative_td"</span>]]</span>
<span id="cb25-440"><a href="#cb25-440" aria-hidden="true" tabindex="-1"></a>ax.bar(single_daily[<span class="st">"relative_td"</span>], single_daily[<span class="st">"vol"</span>],</span>
<span id="cb25-441"><a href="#cb25-441" aria-hidden="true" tabindex="-1"></a>       color<span class="op">=</span>colors, edgecolor<span class="op">=</span><span class="st">"white"</span>, width<span class="op">=</span><span class="fl">0.8</span>)</span>
<span id="cb25-442"><a href="#cb25-442" aria-hidden="true" tabindex="-1"></a>ax.axhline(avg_vol, color<span class="op">=</span><span class="st">"grey"</span>, linestyle<span class="op">=</span><span class="st">"--"</span>, linewidth<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb25-443"><a href="#cb25-443" aria-hidden="true" tabindex="-1"></a>           label<span class="op">=</span><span class="st">"Window average"</span>)</span>
<span id="cb25-444"><a href="#cb25-444" aria-hidden="true" tabindex="-1"></a>ax.axvline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"black"</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb25-445"><a href="#cb25-445" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Trading Days Relative to Announcement"</span>)</span>
<span id="cb25-446"><a href="#cb25-446" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Volume (shares)"</span>)</span>
<span id="cb25-447"><a href="#cb25-447" aria-hidden="true" tabindex="-1"></a>ax.yaxis.set_major_formatter(mticker.FuncFormatter(<span class="kw">lambda</span> x, _: <span class="ss">f"</span><span class="sc">{</span>x<span class="op">/</span><span class="fl">1e6</span><span class="sc">:.1f}</span><span class="ss">M"</span>))</span>
<span id="cb25-448"><a href="#cb25-448" aria-hidden="true" tabindex="-1"></a>ax.legend(fontsize<span class="op">=</span><span class="dv">9</span>)</span>
<span id="cb25-449"><a href="#cb25-449" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb25-450"><a href="#cb25-450" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb25-451"><a href="#cb25-451" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-452"><a href="#cb25-452" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-455"><a href="#cb25-455" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb25-456"><a href="#cb25-456" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-single-volatility</span></span>
<span id="cb25-457"><a href="#cb25-457" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Squared market-adjusted returns around a single earnings announcement. Elevated values on days 0 and +1 indicate that the announcement moved the stock price beyond what market-wide movements would predict."</span></span>
<span id="cb25-458"><a href="#cb25-458" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-459"><a href="#cb25-459" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb25-460"><a href="#cb25-460" aria-hidden="true" tabindex="-1"></a>ax.bar(single_daily[<span class="st">"relative_td"</span>], single_daily[<span class="st">"sq_ret_mkt"</span>],</span>
<span id="cb25-461"><a href="#cb25-461" aria-hidden="true" tabindex="-1"></a>       color<span class="op">=</span>[<span class="st">"firebrick"</span> <span class="cf">if</span> <span class="bu">abs</span>(t) <span class="op">&lt;=</span> <span class="dv">1</span> <span class="cf">else</span> <span class="st">"steelblue"</span></span>
<span id="cb25-462"><a href="#cb25-462" aria-hidden="true" tabindex="-1"></a>              <span class="cf">for</span> t <span class="kw">in</span> single_daily[<span class="st">"relative_td"</span>]],</span>
<span id="cb25-463"><a href="#cb25-463" aria-hidden="true" tabindex="-1"></a>       edgecolor<span class="op">=</span><span class="st">"white"</span>, width<span class="op">=</span><span class="fl">0.8</span>)</span>
<span id="cb25-464"><a href="#cb25-464" aria-hidden="true" tabindex="-1"></a>ax.axhline(single_daily[<span class="st">"sq_ret_mkt"</span>].mean(), color<span class="op">=</span><span class="st">"grey"</span>,</span>
<span id="cb25-465"><a href="#cb25-465" aria-hidden="true" tabindex="-1"></a>           linestyle<span class="op">=</span><span class="st">"--"</span>, linewidth<span class="op">=</span><span class="dv">1</span>, label<span class="op">=</span><span class="st">"Window average"</span>)</span>
<span id="cb25-466"><a href="#cb25-466" aria-hidden="true" tabindex="-1"></a>ax.axvline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"black"</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb25-467"><a href="#cb25-467" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Trading Days Relative to Announcement"</span>)</span>
<span id="cb25-468"><a href="#cb25-468" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Squared Market-Adjusted Return"</span>)</span>
<span id="cb25-469"><a href="#cb25-469" aria-hidden="true" tabindex="-1"></a>ax.legend(fontsize<span class="op">=</span><span class="dv">9</span>)</span>
<span id="cb25-470"><a href="#cb25-470" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb25-471"><a href="#cb25-471" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb25-472"><a href="#cb25-472" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-473"><a href="#cb25-473" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-474"><a href="#cb25-474" aria-hidden="true" tabindex="-1"></a>::: callout-tip</span>
<span id="cb25-475"><a href="#cb25-475" aria-hidden="true" tabindex="-1"></a><span class="fu">## Reading the Plots</span></span>
<span id="cb25-476"><a href="#cb25-476" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-477"><a href="#cb25-477" aria-hidden="true" tabindex="-1"></a>A single event is inherently noisy, other firm-specific news (M&amp;A rumors, analyst reports, regulatory actions) can generate volume and volatility spikes on non-announcement dates. The value of the @beaver1968information approach lies in *averaging across many events* to isolate the systematic announcement effect from idiosyncratic noise.</span>
<span id="cb25-478"><a href="#cb25-478" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb25-479"><a href="#cb25-479" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-480"><a href="#cb25-480" aria-hidden="true" tabindex="-1"></a><span class="fu">## Full-Sample Analysis {#sec-info-earnings-full-sample}</span></span>
<span id="cb25-481"><a href="#cb25-481" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-482"><a href="#cb25-482" aria-hidden="true" tabindex="-1"></a><span class="fu">### Computing Event-Time Aggregates</span></span>
<span id="cb25-483"><a href="#cb25-483" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-484"><a href="#cb25-484" aria-hidden="true" tabindex="-1"></a>For each event day $\tau$ relative to the announcement, we compute the cross-sectional average of our two measures across all announcements:</span>
<span id="cb25-485"><a href="#cb25-485" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-486"><a href="#cb25-486" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb25-487"><a href="#cb25-487" aria-hidden="true" tabindex="-1"></a>\overline{U^2}_\tau = \frac{1}{N_\tau} \sum_{i=1}^{N_\tau} U^2_{i,\tau}</span>
<span id="cb25-488"><a href="#cb25-488" aria-hidden="true" tabindex="-1"></a>$$ {#eq-avg-volatility}</span>
<span id="cb25-489"><a href="#cb25-489" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-490"><a href="#cb25-490" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb25-491"><a href="#cb25-491" aria-hidden="true" tabindex="-1"></a>\overline{RV}_\tau = \frac{1}{N_\tau} \sum_{i=1}^{N_\tau} RV_{i,\tau}</span>
<span id="cb25-492"><a href="#cb25-492" aria-hidden="true" tabindex="-1"></a>$$ {#eq-avg-volume}</span>
<span id="cb25-493"><a href="#cb25-493" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-494"><a href="#cb25-494" aria-hidden="true" tabindex="-1"></a>where $N_\tau$ is the number of announcements with available data on event day $\tau$.</span>
<span id="cb25-495"><a href="#cb25-495" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-498"><a href="#cb25-498" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb25-499"><a href="#cb25-499" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: full-sample-measures</span></span>
<span id="cb25-500"><a href="#cb25-500" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Compute event-time aggregate measures across all announcements"</span></span>
<span id="cb25-501"><a href="#cb25-501" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-502"><a href="#cb25-502" aria-hidden="true" tabindex="-1"></a><span class="co"># Squared and absolute market-adjusted returns</span></span>
<span id="cb25-503"><a href="#cb25-503" aria-hidden="true" tabindex="-1"></a>daily_data[<span class="st">"sq_ret_mkt"</span>] <span class="op">=</span> daily_data[<span class="st">"ret_mkt"</span>] <span class="op">**</span> <span class="dv">2</span></span>
<span id="cb25-504"><a href="#cb25-504" aria-hidden="true" tabindex="-1"></a>daily_data[<span class="st">"abs_ret_mkt"</span>] <span class="op">=</span> daily_data[<span class="st">"ret_mkt"</span>].<span class="bu">abs</span>()</span>
<span id="cb25-505"><a href="#cb25-505" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-506"><a href="#cb25-506" aria-hidden="true" tabindex="-1"></a><span class="co"># Relative volume: normalize within each event window</span></span>
<span id="cb25-507"><a href="#cb25-507" aria-hidden="true" tabindex="-1"></a>daily_data[<span class="st">"rel_vol"</span>] <span class="op">=</span> (</span>
<span id="cb25-508"><a href="#cb25-508" aria-hidden="true" tabindex="-1"></a>    daily_data</span>
<span id="cb25-509"><a href="#cb25-509" aria-hidden="true" tabindex="-1"></a>    .groupby([<span class="st">"ticker"</span>, <span class="st">"fiscal_year"</span>])[<span class="st">"vol"</span>]</span>
<span id="cb25-510"><a href="#cb25-510" aria-hidden="true" tabindex="-1"></a>    .transform(<span class="kw">lambda</span> x: x <span class="op">/</span> x.mean())</span>
<span id="cb25-511"><a href="#cb25-511" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb25-512"><a href="#cb25-512" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-513"><a href="#cb25-513" aria-hidden="true" tabindex="-1"></a><span class="co"># Standardized squared return: normalize within each event window</span></span>
<span id="cb25-514"><a href="#cb25-514" aria-hidden="true" tabindex="-1"></a>daily_data[<span class="st">"std_sq_ret"</span>] <span class="op">=</span> (</span>
<span id="cb25-515"><a href="#cb25-515" aria-hidden="true" tabindex="-1"></a>    daily_data</span>
<span id="cb25-516"><a href="#cb25-516" aria-hidden="true" tabindex="-1"></a>    .groupby([<span class="st">"ticker"</span>, <span class="st">"fiscal_year"</span>])[<span class="st">"sq_ret_mkt"</span>]</span>
<span id="cb25-517"><a href="#cb25-517" aria-hidden="true" tabindex="-1"></a>    .transform(<span class="kw">lambda</span> x: x <span class="op">/</span> x.mean())</span>
<span id="cb25-518"><a href="#cb25-518" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb25-519"><a href="#cb25-519" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-520"><a href="#cb25-520" aria-hidden="true" tabindex="-1"></a><span class="co"># Add fiscal year for panel breakdowns</span></span>
<span id="cb25-521"><a href="#cb25-521" aria-hidden="true" tabindex="-1"></a>daily_data[<span class="st">"year"</span>] <span class="op">=</span> daily_data[<span class="st">"fiscal_year"</span>]</span>
<span id="cb25-522"><a href="#cb25-522" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-523"><a href="#cb25-523" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-526"><a href="#cb25-526" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb25-527"><a href="#cb25-527" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: event-time-summary</span></span>
<span id="cb25-528"><a href="#cb25-528" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Aggregate by event day and year"</span></span>
<span id="cb25-529"><a href="#cb25-529" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-530"><a href="#cb25-530" aria-hidden="true" tabindex="-1"></a>event_summary <span class="op">=</span> (</span>
<span id="cb25-531"><a href="#cb25-531" aria-hidden="true" tabindex="-1"></a>    daily_data</span>
<span id="cb25-532"><a href="#cb25-532" aria-hidden="true" tabindex="-1"></a>    .groupby([<span class="st">"relative_td"</span>, <span class="st">"year"</span>])</span>
<span id="cb25-533"><a href="#cb25-533" aria-hidden="true" tabindex="-1"></a>    .agg(</span>
<span id="cb25-534"><a href="#cb25-534" aria-hidden="true" tabindex="-1"></a>        n_obs<span class="op">=</span>(<span class="st">"ret"</span>, <span class="st">"size"</span>),</span>
<span id="cb25-535"><a href="#cb25-535" aria-hidden="true" tabindex="-1"></a>        mean_ret<span class="op">=</span>(<span class="st">"ret"</span>, <span class="st">"mean"</span>),</span>
<span id="cb25-536"><a href="#cb25-536" aria-hidden="true" tabindex="-1"></a>        mean_ret_mkt<span class="op">=</span>(<span class="st">"ret_mkt"</span>, <span class="st">"mean"</span>),</span>
<span id="cb25-537"><a href="#cb25-537" aria-hidden="true" tabindex="-1"></a>        sd_ret_mkt<span class="op">=</span>(<span class="st">"ret_mkt"</span>, <span class="st">"std"</span>),</span>
<span id="cb25-538"><a href="#cb25-538" aria-hidden="true" tabindex="-1"></a>        mean_sq_ret<span class="op">=</span>(<span class="st">"sq_ret_mkt"</span>, <span class="st">"mean"</span>),</span>
<span id="cb25-539"><a href="#cb25-539" aria-hidden="true" tabindex="-1"></a>        mean_abs_ret<span class="op">=</span>(<span class="st">"abs_ret_mkt"</span>, <span class="st">"mean"</span>),</span>
<span id="cb25-540"><a href="#cb25-540" aria-hidden="true" tabindex="-1"></a>        mean_rel_vol<span class="op">=</span>(<span class="st">"rel_vol"</span>, <span class="st">"mean"</span>),</span>
<span id="cb25-541"><a href="#cb25-541" aria-hidden="true" tabindex="-1"></a>        mean_std_sq_ret<span class="op">=</span>(<span class="st">"std_sq_ret"</span>, <span class="st">"mean"</span>),</span>
<span id="cb25-542"><a href="#cb25-542" aria-hidden="true" tabindex="-1"></a>        median_rel_vol<span class="op">=</span>(<span class="st">"rel_vol"</span>, <span class="st">"median"</span>),</span>
<span id="cb25-543"><a href="#cb25-543" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb25-544"><a href="#cb25-544" aria-hidden="true" tabindex="-1"></a>    .reset_index()</span>
<span id="cb25-545"><a href="#cb25-545" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb25-546"><a href="#cb25-546" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-547"><a href="#cb25-547" aria-hidden="true" tabindex="-1"></a><span class="co"># Also compute pooled (all-year) summary</span></span>
<span id="cb25-548"><a href="#cb25-548" aria-hidden="true" tabindex="-1"></a>event_summary_pooled <span class="op">=</span> (</span>
<span id="cb25-549"><a href="#cb25-549" aria-hidden="true" tabindex="-1"></a>    daily_data</span>
<span id="cb25-550"><a href="#cb25-550" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">"relative_td"</span>)</span>
<span id="cb25-551"><a href="#cb25-551" aria-hidden="true" tabindex="-1"></a>    .agg(</span>
<span id="cb25-552"><a href="#cb25-552" aria-hidden="true" tabindex="-1"></a>        n_obs<span class="op">=</span>(<span class="st">"ret"</span>, <span class="st">"size"</span>),</span>
<span id="cb25-553"><a href="#cb25-553" aria-hidden="true" tabindex="-1"></a>        mean_ret<span class="op">=</span>(<span class="st">"ret"</span>, <span class="st">"mean"</span>),</span>
<span id="cb25-554"><a href="#cb25-554" aria-hidden="true" tabindex="-1"></a>        mean_ret_mkt<span class="op">=</span>(<span class="st">"ret_mkt"</span>, <span class="st">"mean"</span>),</span>
<span id="cb25-555"><a href="#cb25-555" aria-hidden="true" tabindex="-1"></a>        sd_ret_mkt<span class="op">=</span>(<span class="st">"ret_mkt"</span>, <span class="st">"std"</span>),</span>
<span id="cb25-556"><a href="#cb25-556" aria-hidden="true" tabindex="-1"></a>        mean_sq_ret<span class="op">=</span>(<span class="st">"sq_ret_mkt"</span>, <span class="st">"mean"</span>),</span>
<span id="cb25-557"><a href="#cb25-557" aria-hidden="true" tabindex="-1"></a>        mean_abs_ret<span class="op">=</span>(<span class="st">"abs_ret_mkt"</span>, <span class="st">"mean"</span>),</span>
<span id="cb25-558"><a href="#cb25-558" aria-hidden="true" tabindex="-1"></a>        mean_rel_vol<span class="op">=</span>(<span class="st">"rel_vol"</span>, <span class="st">"mean"</span>),</span>
<span id="cb25-559"><a href="#cb25-559" aria-hidden="true" tabindex="-1"></a>        mean_std_sq_ret<span class="op">=</span>(<span class="st">"std_sq_ret"</span>, <span class="st">"mean"</span>),</span>
<span id="cb25-560"><a href="#cb25-560" aria-hidden="true" tabindex="-1"></a>        median_rel_vol<span class="op">=</span>(<span class="st">"rel_vol"</span>, <span class="st">"median"</span>),</span>
<span id="cb25-561"><a href="#cb25-561" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb25-562"><a href="#cb25-562" aria-hidden="true" tabindex="-1"></a>    .reset_index()</span>
<span id="cb25-563"><a href="#cb25-563" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb25-564"><a href="#cb25-564" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-565"><a href="#cb25-565" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-566"><a href="#cb25-566" aria-hidden="true" tabindex="-1"></a><span class="fu">### Return Volatility Around Announcements</span></span>
<span id="cb25-567"><a href="#cb25-567" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-568"><a href="#cb25-568" aria-hidden="true" tabindex="-1"></a>@fig-volatility-by-year plots the standard deviation of market-adjusted returns by event day, separately for each fiscal year. A clear spike on days 0 and +1 is the hallmark of information content.</span>
<span id="cb25-569"><a href="#cb25-569" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-572"><a href="#cb25-572" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb25-573"><a href="#cb25-573" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-volatility-by-year</span></span>
<span id="cb25-574"><a href="#cb25-574" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Standard deviation of market-adjusted returns around earnings announcements, by fiscal year. The consistent spike on days 0 and +1 across years provides strong evidence that annual earnings announcements convey new information to Vietnamese equity markets."</span></span>
<span id="cb25-575"><a href="#cb25-575" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-576"><a href="#cb25-576" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">9</span>, <span class="dv">5</span>))</span>
<span id="cb25-577"><a href="#cb25-577" aria-hidden="true" tabindex="-1"></a>years_plot <span class="op">=</span> <span class="bu">sorted</span>(event_summary[<span class="st">"year"</span>].unique())</span>
<span id="cb25-578"><a href="#cb25-578" aria-hidden="true" tabindex="-1"></a><span class="co"># Use a colormap</span></span>
<span id="cb25-579"><a href="#cb25-579" aria-hidden="true" tabindex="-1"></a>cmap <span class="op">=</span> plt.cm.viridis(np.linspace(<span class="fl">0.1</span>, <span class="fl">0.9</span>, <span class="bu">len</span>(years_plot)))</span>
<span id="cb25-580"><a href="#cb25-580" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-581"><a href="#cb25-581" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> idx, yr <span class="kw">in</span> <span class="bu">enumerate</span>(years_plot):</span>
<span id="cb25-582"><a href="#cb25-582" aria-hidden="true" tabindex="-1"></a>    sub <span class="op">=</span> event_summary[event_summary[<span class="st">"year"</span>] <span class="op">==</span> yr].sort_values(<span class="st">"relative_td"</span>)</span>
<span id="cb25-583"><a href="#cb25-583" aria-hidden="true" tabindex="-1"></a>    ax.plot(sub[<span class="st">"relative_td"</span>], sub[<span class="st">"sd_ret_mkt"</span>],</span>
<span id="cb25-584"><a href="#cb25-584" aria-hidden="true" tabindex="-1"></a>            color<span class="op">=</span>cmap[idx], alpha<span class="op">=</span><span class="fl">0.6</span>, linewidth<span class="op">=</span><span class="fl">1.0</span>, label<span class="op">=</span><span class="bu">str</span>(yr))</span>
<span id="cb25-585"><a href="#cb25-585" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-586"><a href="#cb25-586" aria-hidden="true" tabindex="-1"></a><span class="co"># Overlay pooled mean</span></span>
<span id="cb25-587"><a href="#cb25-587" aria-hidden="true" tabindex="-1"></a>pooled <span class="op">=</span> event_summary_pooled.sort_values(<span class="st">"relative_td"</span>)</span>
<span id="cb25-588"><a href="#cb25-588" aria-hidden="true" tabindex="-1"></a>ax.plot(pooled[<span class="st">"relative_td"</span>], pooled[<span class="st">"sd_ret_mkt"</span>],</span>
<span id="cb25-589"><a href="#cb25-589" aria-hidden="true" tabindex="-1"></a>        color<span class="op">=</span><span class="st">"firebrick"</span>, linewidth<span class="op">=</span><span class="fl">2.5</span>, linestyle<span class="op">=</span><span class="st">"-"</span>, label<span class="op">=</span><span class="st">"Pooled"</span>,</span>
<span id="cb25-590"><a href="#cb25-590" aria-hidden="true" tabindex="-1"></a>        zorder<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb25-591"><a href="#cb25-591" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-592"><a href="#cb25-592" aria-hidden="true" tabindex="-1"></a>ax.axvline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"black"</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb25-593"><a href="#cb25-593" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Trading Days Relative to Announcement"</span>)</span>
<span id="cb25-594"><a href="#cb25-594" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Std Dev of Market-Adjusted Returns"</span>)</span>
<span id="cb25-595"><a href="#cb25-595" aria-hidden="true" tabindex="-1"></a>ax.legend(fontsize<span class="op">=</span><span class="dv">7</span>, ncol<span class="op">=</span><span class="dv">4</span>, loc<span class="op">=</span><span class="st">"upper right"</span>)</span>
<span id="cb25-596"><a href="#cb25-596" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb25-597"><a href="#cb25-597" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb25-598"><a href="#cb25-598" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-599"><a href="#cb25-599" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-600"><a href="#cb25-600" aria-hidden="true" tabindex="-1"></a><span class="fu">### Trading Volume Around Announcements</span></span>
<span id="cb25-601"><a href="#cb25-601" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-602"><a href="#cb25-602" aria-hidden="true" tabindex="-1"></a>@fig-volume-by-year shows relative trading volume by event day. The volume response provides an independent confirmation of the volatility finding.</span>
<span id="cb25-603"><a href="#cb25-603" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-606"><a href="#cb25-606" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb25-607"><a href="#cb25-607" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-volume-by-year</span></span>
<span id="cb25-608"><a href="#cb25-608" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Mean relative trading volume around earnings announcements, by fiscal year. Volume spikes sharply on days 0 and +1, consistent with investors actively trading on the new information. The elevated volume persists slightly longer than the volatility spike, suggesting that disagreement about the announcement's implications takes time to resolve."</span></span>
<span id="cb25-609"><a href="#cb25-609" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-610"><a href="#cb25-610" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">9</span>, <span class="dv">5</span>))</span>
<span id="cb25-611"><a href="#cb25-611" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-612"><a href="#cb25-612" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> idx, yr <span class="kw">in</span> <span class="bu">enumerate</span>(years_plot):</span>
<span id="cb25-613"><a href="#cb25-613" aria-hidden="true" tabindex="-1"></a>    sub <span class="op">=</span> event_summary[event_summary[<span class="st">"year"</span>] <span class="op">==</span> yr].sort_values(<span class="st">"relative_td"</span>)</span>
<span id="cb25-614"><a href="#cb25-614" aria-hidden="true" tabindex="-1"></a>    ax.plot(sub[<span class="st">"relative_td"</span>], sub[<span class="st">"mean_rel_vol"</span>],</span>
<span id="cb25-615"><a href="#cb25-615" aria-hidden="true" tabindex="-1"></a>            color<span class="op">=</span>cmap[idx], alpha<span class="op">=</span><span class="fl">0.6</span>, linewidth<span class="op">=</span><span class="fl">1.0</span>, label<span class="op">=</span><span class="bu">str</span>(yr))</span>
<span id="cb25-616"><a href="#cb25-616" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-617"><a href="#cb25-617" aria-hidden="true" tabindex="-1"></a>ax.plot(pooled[<span class="st">"relative_td"</span>], pooled[<span class="st">"mean_rel_vol"</span>],</span>
<span id="cb25-618"><a href="#cb25-618" aria-hidden="true" tabindex="-1"></a>        color<span class="op">=</span><span class="st">"firebrick"</span>, linewidth<span class="op">=</span><span class="fl">2.5</span>, linestyle<span class="op">=</span><span class="st">"-"</span>, label<span class="op">=</span><span class="st">"Pooled"</span>,</span>
<span id="cb25-619"><a href="#cb25-619" aria-hidden="true" tabindex="-1"></a>        zorder<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb25-620"><a href="#cb25-620" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-621"><a href="#cb25-621" aria-hidden="true" tabindex="-1"></a>ax.axhline(<span class="fl">1.0</span>, color<span class="op">=</span><span class="st">"grey"</span>, linestyle<span class="op">=</span><span class="st">"--"</span>, linewidth<span class="op">=</span><span class="fl">0.8</span>)</span>
<span id="cb25-622"><a href="#cb25-622" aria-hidden="true" tabindex="-1"></a>ax.axvline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"black"</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb25-623"><a href="#cb25-623" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Trading Days Relative to Announcement"</span>)</span>
<span id="cb25-624"><a href="#cb25-624" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Relative Volume (1.0 = window average)"</span>)</span>
<span id="cb25-625"><a href="#cb25-625" aria-hidden="true" tabindex="-1"></a>ax.legend(fontsize<span class="op">=</span><span class="dv">7</span>, ncol<span class="op">=</span><span class="dv">4</span>, loc<span class="op">=</span><span class="st">"upper right"</span>)</span>
<span id="cb25-626"><a href="#cb25-626" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb25-627"><a href="#cb25-627" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb25-628"><a href="#cb25-628" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-629"><a href="#cb25-629" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-630"><a href="#cb25-630" aria-hidden="true" tabindex="-1"></a><span class="fu">### Formal Statistical Tests</span></span>
<span id="cb25-631"><a href="#cb25-631" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-632"><a href="#cb25-632" aria-hidden="true" tabindex="-1"></a>@beaver1968information relied on visual inspection and informal statistical arguments. Modern practice demands formal tests. We test whether the announcement-window measures differ significantly from the non-announcement window using a paired comparison.</span>
<span id="cb25-633"><a href="#cb25-633" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-634"><a href="#cb25-634" aria-hidden="true" tabindex="-1"></a>Define the announcement window as days $<span class="sc">\{</span>-1, 0, +1<span class="sc">\}</span>$ and the non-announcement window as days $<span class="sc">\{</span>-20, \ldots, -5<span class="sc">\}</span> \cup <span class="sc">\{</span>+5, \ldots, +20<span class="sc">\}</span>$. For each event $i$, we compute:</span>
<span id="cb25-635"><a href="#cb25-635" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-636"><a href="#cb25-636" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb25-637"><a href="#cb25-637" aria-hidden="true" tabindex="-1"></a>\Delta U^2_i = \overline{U^2}_{i,\text{annc}} - \overline{U^2}_{i,\text{non-annc}}</span>
<span id="cb25-638"><a href="#cb25-638" aria-hidden="true" tabindex="-1"></a>$$ {#eq-delta-vol}</span>
<span id="cb25-639"><a href="#cb25-639" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-640"><a href="#cb25-640" aria-hidden="true" tabindex="-1"></a>Under the null, $E<span class="co">[</span><span class="ot">\Delta U^2_i</span><span class="co">]</span> = 0$. We test this with a $t$-test across events.</span>
<span id="cb25-641"><a href="#cb25-641" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-644"><a href="#cb25-644" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb25-645"><a href="#cb25-645" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-formal-tests</span></span>
<span id="cb25-646"><a href="#cb25-646" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Formal tests of announcement-period information content. The announcement window is days {-1, 0, +1}; the non-announcement window excludes days {-4, ..., +4}. Large t-statistics and small p-values provide strong evidence that both return volatility and trading volume are significantly elevated during the announcement window."</span></span>
<span id="cb25-647"><a href="#cb25-647" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-648"><a href="#cb25-648" aria-hidden="true" tabindex="-1"></a>annc_window <span class="op">=</span> [<span class="op">-</span><span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>]</span>
<span id="cb25-649"><a href="#cb25-649" aria-hidden="true" tabindex="-1"></a>non_annc_window <span class="op">=</span> <span class="bu">list</span>(<span class="bu">range</span>(<span class="op">-</span><span class="dv">20</span>, <span class="op">-</span><span class="dv">4</span>)) <span class="op">+</span> <span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">5</span>, <span class="dv">21</span>))</span>
<span id="cb25-650"><a href="#cb25-650" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-651"><a href="#cb25-651" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> compute_window_means(df, var, window):</span>
<span id="cb25-652"><a href="#cb25-652" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Compute mean of var within a window for each event."""</span></span>
<span id="cb25-653"><a href="#cb25-653" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (</span>
<span id="cb25-654"><a href="#cb25-654" aria-hidden="true" tabindex="-1"></a>        df[df[<span class="st">"relative_td"</span>].isin(window)]</span>
<span id="cb25-655"><a href="#cb25-655" aria-hidden="true" tabindex="-1"></a>        .groupby([<span class="st">"ticker"</span>, <span class="st">"fiscal_year"</span>])[var]</span>
<span id="cb25-656"><a href="#cb25-656" aria-hidden="true" tabindex="-1"></a>        .mean()</span>
<span id="cb25-657"><a href="#cb25-657" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb25-658"><a href="#cb25-658" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-659"><a href="#cb25-659" aria-hidden="true" tabindex="-1"></a>test_results <span class="op">=</span> {}</span>
<span id="cb25-660"><a href="#cb25-660" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> var, label <span class="kw">in</span> [(<span class="st">"sq_ret_mkt"</span>, <span class="st">"Squared Mkt-Adj Return"</span>),</span>
<span id="cb25-661"><a href="#cb25-661" aria-hidden="true" tabindex="-1"></a>                    (<span class="st">"abs_ret_mkt"</span>, <span class="st">"Absolute Mkt-Adj Return"</span>),</span>
<span id="cb25-662"><a href="#cb25-662" aria-hidden="true" tabindex="-1"></a>                    (<span class="st">"rel_vol"</span>, <span class="st">"Relative Volume"</span>)]:</span>
<span id="cb25-663"><a href="#cb25-663" aria-hidden="true" tabindex="-1"></a>    annc_mean <span class="op">=</span> compute_window_means(daily_data, var, annc_window)</span>
<span id="cb25-664"><a href="#cb25-664" aria-hidden="true" tabindex="-1"></a>    non_annc_mean <span class="op">=</span> compute_window_means(daily_data, var, non_annc_window)</span>
<span id="cb25-665"><a href="#cb25-665" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-666"><a href="#cb25-666" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Align on common events</span></span>
<span id="cb25-667"><a href="#cb25-667" aria-hidden="true" tabindex="-1"></a>    common <span class="op">=</span> annc_mean.index.intersection(non_annc_mean.index)</span>
<span id="cb25-668"><a href="#cb25-668" aria-hidden="true" tabindex="-1"></a>    diff <span class="op">=</span> annc_mean.loc[common] <span class="op">-</span> non_annc_mean.loc[common]</span>
<span id="cb25-669"><a href="#cb25-669" aria-hidden="true" tabindex="-1"></a>    diff <span class="op">=</span> diff.dropna()</span>
<span id="cb25-670"><a href="#cb25-670" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-671"><a href="#cb25-671" aria-hidden="true" tabindex="-1"></a>    t_stat, p_val <span class="op">=</span> stats.ttest_1samp(diff, <span class="dv">0</span>)</span>
<span id="cb25-672"><a href="#cb25-672" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-673"><a href="#cb25-673" aria-hidden="true" tabindex="-1"></a>    test_results[label] <span class="op">=</span> {</span>
<span id="cb25-674"><a href="#cb25-674" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Annc Window Mean"</span>: annc_mean.mean(),</span>
<span id="cb25-675"><a href="#cb25-675" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Non-Annc Window Mean"</span>: non_annc_mean.mean(),</span>
<span id="cb25-676"><a href="#cb25-676" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Difference"</span>: diff.mean(),</span>
<span id="cb25-677"><a href="#cb25-677" aria-hidden="true" tabindex="-1"></a>        <span class="st">"t-statistic"</span>: t_stat,</span>
<span id="cb25-678"><a href="#cb25-678" aria-hidden="true" tabindex="-1"></a>        <span class="st">"p-value"</span>: p_val,</span>
<span id="cb25-679"><a href="#cb25-679" aria-hidden="true" tabindex="-1"></a>        <span class="st">"N events"</span>: <span class="bu">len</span>(diff),</span>
<span id="cb25-680"><a href="#cb25-680" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb25-681"><a href="#cb25-681" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-682"><a href="#cb25-682" aria-hidden="true" tabindex="-1"></a>test_df <span class="op">=</span> pd.DataFrame(test_results).T.<span class="bu">round</span>(<span class="dv">4</span>)</span>
<span id="cb25-683"><a href="#cb25-683" aria-hidden="true" tabindex="-1"></a>test_df[<span class="st">"N events"</span>] <span class="op">=</span> test_df[<span class="st">"N events"</span>].astype(<span class="bu">int</span>)</span>
<span id="cb25-684"><a href="#cb25-684" aria-hidden="true" tabindex="-1"></a>test_df</span>
<span id="cb25-685"><a href="#cb25-685" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-686"><a href="#cb25-686" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-687"><a href="#cb25-687" aria-hidden="true" tabindex="-1"></a><span class="fu">### Standardized Volatility Ratio</span></span>
<span id="cb25-688"><a href="#cb25-688" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-689"><a href="#cb25-689" aria-hidden="true" tabindex="-1"></a>Following the approach of @beaver1968information, we compute the ratio of announcement-window squared returns to non-announcement-window squared returns. Under the null, this ratio equals 1.0.</span>
<span id="cb25-690"><a href="#cb25-690" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-693"><a href="#cb25-693" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb25-694"><a href="#cb25-694" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-volatility-ratio</span></span>
<span id="cb25-695"><a href="#cb25-695" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Standardized squared market-adjusted return by event day (pooled across all years). A value of 1.0 indicates normal volatility. The announcement-day ratio substantially exceeds 1.0, indicating that earnings releases generate return variation well above normal levels."</span></span>
<span id="cb25-696"><a href="#cb25-696" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-697"><a href="#cb25-697" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb25-698"><a href="#cb25-698" aria-hidden="true" tabindex="-1"></a>ratio <span class="op">=</span> pooled[<span class="st">"mean_std_sq_ret"</span>]</span>
<span id="cb25-699"><a href="#cb25-699" aria-hidden="true" tabindex="-1"></a>colors <span class="op">=</span> [<span class="st">"firebrick"</span> <span class="cf">if</span> <span class="bu">abs</span>(t) <span class="op">&lt;=</span> <span class="dv">1</span> <span class="cf">else</span> <span class="st">"steelblue"</span></span>
<span id="cb25-700"><a href="#cb25-700" aria-hidden="true" tabindex="-1"></a>          <span class="cf">for</span> t <span class="kw">in</span> pooled[<span class="st">"relative_td"</span>]]</span>
<span id="cb25-701"><a href="#cb25-701" aria-hidden="true" tabindex="-1"></a>ax.bar(pooled[<span class="st">"relative_td"</span>], ratio, color<span class="op">=</span>colors, edgecolor<span class="op">=</span><span class="st">"white"</span>)</span>
<span id="cb25-702"><a href="#cb25-702" aria-hidden="true" tabindex="-1"></a>ax.axhline(<span class="fl">1.0</span>, color<span class="op">=</span><span class="st">"grey"</span>, linestyle<span class="op">=</span><span class="st">"--"</span>, linewidth<span class="op">=</span><span class="dv">1</span>, label<span class="op">=</span><span class="st">"Expected under null"</span>)</span>
<span id="cb25-703"><a href="#cb25-703" aria-hidden="true" tabindex="-1"></a>ax.axvline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"black"</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb25-704"><a href="#cb25-704" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Trading Days Relative to Announcement"</span>)</span>
<span id="cb25-705"><a href="#cb25-705" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Standardized Squared Return (ratio)"</span>)</span>
<span id="cb25-706"><a href="#cb25-706" aria-hidden="true" tabindex="-1"></a>ax.legend()</span>
<span id="cb25-707"><a href="#cb25-707" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb25-708"><a href="#cb25-708" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb25-709"><a href="#cb25-709" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-710"><a href="#cb25-710" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-711"><a href="#cb25-711" aria-hidden="true" tabindex="-1"></a><span class="fu">## Cross-Sectional Variation {#sec-info-earnings-cross}</span></span>
<span id="cb25-712"><a href="#cb25-712" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-713"><a href="#cb25-713" aria-hidden="true" tabindex="-1"></a>A uniform announcement effect across all firms would be surprising. Theory predicts that the magnitude of the market reaction depends on the pre-announcement information environment: firms with richer information sets prior to the announcement should exhibit *smaller* reactions because less of the earnings number is news <span class="co">[</span><span class="ot">@atiase1985predisclosure; @verrecchia2001essays</span><span class="co">]</span>.</span>
<span id="cb25-714"><a href="#cb25-714" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-715"><a href="#cb25-715" aria-hidden="true" tabindex="-1"></a><span class="fu">### By Firm Size</span></span>
<span id="cb25-716"><a href="#cb25-716" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-717"><a href="#cb25-717" aria-hidden="true" tabindex="-1"></a>Larger firms receive more attention from analysts, media, and institutional investors, so their earnings announcements should contain less incremental information.</span>
<span id="cb25-718"><a href="#cb25-718" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-721"><a href="#cb25-721" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb25-722"><a href="#cb25-722" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-size-effect</span></span>
<span id="cb25-723"><a href="#cb25-723" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Announcement-day abnormal volatility and volume by firm size tercile. Smaller firms exhibit substantially larger reactions, consistent with the prediction that pre-disclosure information is increasing in firm size."</span></span>
<span id="cb25-724"><a href="#cb25-724" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-725"><a href="#cb25-725" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign size terciles</span></span>
<span id="cb25-726"><a href="#cb25-726" aria-hidden="true" tabindex="-1"></a>daily_data[<span class="st">"size_tercile"</span>] <span class="op">=</span> pd.qcut(</span>
<span id="cb25-727"><a href="#cb25-727" aria-hidden="true" tabindex="-1"></a>    daily_data[<span class="st">"log_mcap"</span>], <span class="dv">3</span>, labels<span class="op">=</span>[<span class="st">"Small"</span>, <span class="st">"Medium"</span>, <span class="st">"Large"</span>]</span>
<span id="cb25-728"><a href="#cb25-728" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb25-729"><a href="#cb25-729" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-730"><a href="#cb25-730" aria-hidden="true" tabindex="-1"></a>size_summary <span class="op">=</span> (</span>
<span id="cb25-731"><a href="#cb25-731" aria-hidden="true" tabindex="-1"></a>    daily_data</span>
<span id="cb25-732"><a href="#cb25-732" aria-hidden="true" tabindex="-1"></a>    .groupby([<span class="st">"relative_td"</span>, <span class="st">"size_tercile"</span>])</span>
<span id="cb25-733"><a href="#cb25-733" aria-hidden="true" tabindex="-1"></a>    .agg(</span>
<span id="cb25-734"><a href="#cb25-734" aria-hidden="true" tabindex="-1"></a>        mean_std_sq_ret<span class="op">=</span>(<span class="st">"std_sq_ret"</span>, <span class="st">"mean"</span>),</span>
<span id="cb25-735"><a href="#cb25-735" aria-hidden="true" tabindex="-1"></a>        mean_rel_vol<span class="op">=</span>(<span class="st">"rel_vol"</span>, <span class="st">"mean"</span>),</span>
<span id="cb25-736"><a href="#cb25-736" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb25-737"><a href="#cb25-737" aria-hidden="true" tabindex="-1"></a>    .reset_index()</span>
<span id="cb25-738"><a href="#cb25-738" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb25-739"><a href="#cb25-739" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-740"><a href="#cb25-740" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">5</span>))</span>
<span id="cb25-741"><a href="#cb25-741" aria-hidden="true" tabindex="-1"></a>size_colors <span class="op">=</span> {<span class="st">"Small"</span>: <span class="st">"#E91E63"</span>, <span class="st">"Medium"</span>: <span class="st">"#FF9800"</span>, <span class="st">"Large"</span>: <span class="st">"#2196F3"</span>}</span>
<span id="cb25-742"><a href="#cb25-742" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-743"><a href="#cb25-743" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> label, color <span class="kw">in</span> size_colors.items():</span>
<span id="cb25-744"><a href="#cb25-744" aria-hidden="true" tabindex="-1"></a>    sub <span class="op">=</span> size_summary[size_summary[<span class="st">"size_tercile"</span>] <span class="op">==</span> label].sort_values(<span class="st">"relative_td"</span>)</span>
<span id="cb25-745"><a href="#cb25-745" aria-hidden="true" tabindex="-1"></a>    axes[<span class="dv">0</span>].plot(sub[<span class="st">"relative_td"</span>], sub[<span class="st">"mean_std_sq_ret"</span>],</span>
<span id="cb25-746"><a href="#cb25-746" aria-hidden="true" tabindex="-1"></a>                 label<span class="op">=</span>label, color<span class="op">=</span>color, linewidth<span class="op">=</span><span class="fl">1.5</span>)</span>
<span id="cb25-747"><a href="#cb25-747" aria-hidden="true" tabindex="-1"></a>    axes[<span class="dv">1</span>].plot(sub[<span class="st">"relative_td"</span>], sub[<span class="st">"mean_rel_vol"</span>],</span>
<span id="cb25-748"><a href="#cb25-748" aria-hidden="true" tabindex="-1"></a>                 label<span class="op">=</span>label, color<span class="op">=</span>color, linewidth<span class="op">=</span><span class="fl">1.5</span>)</span>
<span id="cb25-749"><a href="#cb25-749" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-750"><a href="#cb25-750" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> ax <span class="kw">in</span> axes:</span>
<span id="cb25-751"><a href="#cb25-751" aria-hidden="true" tabindex="-1"></a>    ax.axvline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"black"</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb25-752"><a href="#cb25-752" aria-hidden="true" tabindex="-1"></a>    ax.set_xlabel(<span class="st">"Trading Days Relative to Announcement"</span>)</span>
<span id="cb25-753"><a href="#cb25-753" aria-hidden="true" tabindex="-1"></a>    ax.legend()</span>
<span id="cb25-754"><a href="#cb25-754" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-755"><a href="#cb25-755" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].axhline(<span class="fl">1.0</span>, color<span class="op">=</span><span class="st">"grey"</span>, linestyle<span class="op">=</span><span class="st">"--"</span>, linewidth<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb25-756"><a href="#cb25-756" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_ylabel(<span class="st">"Standardized Squared Return"</span>)</span>
<span id="cb25-757"><a href="#cb25-757" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">"Volatility Reaction by Size"</span>)</span>
<span id="cb25-758"><a href="#cb25-758" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-759"><a href="#cb25-759" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].axhline(<span class="fl">1.0</span>, color<span class="op">=</span><span class="st">"grey"</span>, linestyle<span class="op">=</span><span class="st">"--"</span>, linewidth<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb25-760"><a href="#cb25-760" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_ylabel(<span class="st">"Relative Volume"</span>)</span>
<span id="cb25-761"><a href="#cb25-761" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">"Volume Reaction by Size"</span>)</span>
<span id="cb25-762"><a href="#cb25-762" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-763"><a href="#cb25-763" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb25-764"><a href="#cb25-764" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb25-765"><a href="#cb25-765" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-766"><a href="#cb25-766" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-767"><a href="#cb25-767" aria-hidden="true" tabindex="-1"></a><span class="fu">### By Exchange (HOSE vs. HNX)</span></span>
<span id="cb25-768"><a href="#cb25-768" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-769"><a href="#cb25-769" aria-hidden="true" tabindex="-1"></a>HOSE-listed firms are generally larger and more liquid than HNX-listed firms. Additionally, the tighter price limits on HOSE ($\pm$ 7% vs. $\pm$ 10% on HNX) may truncate announcement-day returns, compressing measured volatility and potentially spreading the adjustment over multiple days.</span>
<span id="cb25-770"><a href="#cb25-770" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-773"><a href="#cb25-773" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb25-774"><a href="#cb25-774" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-exchange-effect</span></span>
<span id="cb25-775"><a href="#cb25-775" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Announcement reactions by exchange. HNX firms (generally smaller, less liquid) show larger volatility spikes. The tighter HOSE price limit may compress announcement-day returns, but the wider HNX limit allows larger single-day adjustments."</span></span>
<span id="cb25-776"><a href="#cb25-776" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-777"><a href="#cb25-777" aria-hidden="true" tabindex="-1"></a>exch_summary <span class="op">=</span> (</span>
<span id="cb25-778"><a href="#cb25-778" aria-hidden="true" tabindex="-1"></a>    daily_data</span>
<span id="cb25-779"><a href="#cb25-779" aria-hidden="true" tabindex="-1"></a>    .groupby([<span class="st">"relative_td"</span>, <span class="st">"exchange"</span>])</span>
<span id="cb25-780"><a href="#cb25-780" aria-hidden="true" tabindex="-1"></a>    .agg(</span>
<span id="cb25-781"><a href="#cb25-781" aria-hidden="true" tabindex="-1"></a>        mean_std_sq_ret<span class="op">=</span>(<span class="st">"std_sq_ret"</span>, <span class="st">"mean"</span>),</span>
<span id="cb25-782"><a href="#cb25-782" aria-hidden="true" tabindex="-1"></a>        mean_rel_vol<span class="op">=</span>(<span class="st">"rel_vol"</span>, <span class="st">"mean"</span>),</span>
<span id="cb25-783"><a href="#cb25-783" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb25-784"><a href="#cb25-784" aria-hidden="true" tabindex="-1"></a>    .reset_index()</span>
<span id="cb25-785"><a href="#cb25-785" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb25-786"><a href="#cb25-786" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-787"><a href="#cb25-787" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">5</span>))</span>
<span id="cb25-788"><a href="#cb25-788" aria-hidden="true" tabindex="-1"></a>exch_colors <span class="op">=</span> {<span class="st">"HOSE"</span>: <span class="st">"#1565C0"</span>, <span class="st">"HNX"</span>: <span class="st">"#E65100"</span>}</span>
<span id="cb25-789"><a href="#cb25-789" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-790"><a href="#cb25-790" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> exch, color <span class="kw">in</span> exch_colors.items():</span>
<span id="cb25-791"><a href="#cb25-791" aria-hidden="true" tabindex="-1"></a>    sub <span class="op">=</span> exch_summary[exch_summary[<span class="st">"exchange"</span>] <span class="op">==</span> exch].sort_values(<span class="st">"relative_td"</span>)</span>
<span id="cb25-792"><a href="#cb25-792" aria-hidden="true" tabindex="-1"></a>    axes[<span class="dv">0</span>].plot(sub[<span class="st">"relative_td"</span>], sub[<span class="st">"mean_std_sq_ret"</span>],</span>
<span id="cb25-793"><a href="#cb25-793" aria-hidden="true" tabindex="-1"></a>                 label<span class="op">=</span>exch, color<span class="op">=</span>color, linewidth<span class="op">=</span><span class="fl">1.5</span>)</span>
<span id="cb25-794"><a href="#cb25-794" aria-hidden="true" tabindex="-1"></a>    axes[<span class="dv">1</span>].plot(sub[<span class="st">"relative_td"</span>], sub[<span class="st">"mean_rel_vol"</span>],</span>
<span id="cb25-795"><a href="#cb25-795" aria-hidden="true" tabindex="-1"></a>                 label<span class="op">=</span>exch, color<span class="op">=</span>color, linewidth<span class="op">=</span><span class="fl">1.5</span>)</span>
<span id="cb25-796"><a href="#cb25-796" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-797"><a href="#cb25-797" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> ax <span class="kw">in</span> axes:</span>
<span id="cb25-798"><a href="#cb25-798" aria-hidden="true" tabindex="-1"></a>    ax.axvline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"black"</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb25-799"><a href="#cb25-799" aria-hidden="true" tabindex="-1"></a>    ax.legend()</span>
<span id="cb25-800"><a href="#cb25-800" aria-hidden="true" tabindex="-1"></a>    ax.set_xlabel(<span class="st">"Trading Days Relative to Announcement"</span>)</span>
<span id="cb25-801"><a href="#cb25-801" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-802"><a href="#cb25-802" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].axhline(<span class="fl">1.0</span>, color<span class="op">=</span><span class="st">"grey"</span>, linestyle<span class="op">=</span><span class="st">"--"</span>, linewidth<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb25-803"><a href="#cb25-803" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_ylabel(<span class="st">"Standardized Squared Return"</span>)</span>
<span id="cb25-804"><a href="#cb25-804" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">"Volatility by Exchange"</span>)</span>
<span id="cb25-805"><a href="#cb25-805" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-806"><a href="#cb25-806" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].axhline(<span class="fl">1.0</span>, color<span class="op">=</span><span class="st">"grey"</span>, linestyle<span class="op">=</span><span class="st">"--"</span>, linewidth<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb25-807"><a href="#cb25-807" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_ylabel(<span class="st">"Relative Volume"</span>)</span>
<span id="cb25-808"><a href="#cb25-808" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">"Volume by Exchange"</span>)</span>
<span id="cb25-809"><a href="#cb25-809" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-810"><a href="#cb25-810" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb25-811"><a href="#cb25-811" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb25-812"><a href="#cb25-812" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-813"><a href="#cb25-813" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-814"><a href="#cb25-814" aria-hidden="true" tabindex="-1"></a><span class="fu">### Regression Analysis</span></span>
<span id="cb25-815"><a href="#cb25-815" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-816"><a href="#cb25-816" aria-hidden="true" tabindex="-1"></a>We formalize the cross-sectional analysis with an event-level regression:</span>
<span id="cb25-817"><a href="#cb25-817" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-818"><a href="#cb25-818" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb25-819"><a href="#cb25-819" aria-hidden="true" tabindex="-1"></a>\Delta U^2_i = \beta_0 + \beta_1 \text{Size}_i + \beta_2 \text{HNX}_i + \beta_3 \text{AnnLag}_i + \varepsilon_i</span>
<span id="cb25-820"><a href="#cb25-820" aria-hidden="true" tabindex="-1"></a>$$ {#eq-cross-section-reg}</span>
<span id="cb25-821"><a href="#cb25-821" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-822"><a href="#cb25-822" aria-hidden="true" tabindex="-1"></a>where $\text{Size}_i$ is log market capitalization, $\text{HNX}_i$ is an indicator for HNX listing, and $\text{AnnLag}_i$ is the number of calendar days between fiscal year-end and the announcement date (longer lags may allow more information leakage, reducing the surprise).</span>
<span id="cb25-823"><a href="#cb25-823" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-826"><a href="#cb25-826" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb25-827"><a href="#cb25-827" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-cross-section</span></span>
<span id="cb25-828"><a href="#cb25-828" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Cross-sectional determinants of announcement-day return volatility. Negative size coefficient confirms that larger firms have less informative announcements. The announcement lag coefficient captures information leakage before the official release."</span></span>
<span id="cb25-829"><a href="#cb25-829" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-830"><a href="#cb25-830" aria-hidden="true" tabindex="-1"></a><span class="co"># Build event-level dataset</span></span>
<span id="cb25-831"><a href="#cb25-831" aria-hidden="true" tabindex="-1"></a>annc_data <span class="op">=</span> daily_data[daily_data[<span class="st">"relative_td"</span>].isin(annc_window)].copy()</span>
<span id="cb25-832"><a href="#cb25-832" aria-hidden="true" tabindex="-1"></a>non_annc_data <span class="op">=</span> daily_data[daily_data[<span class="st">"relative_td"</span>].isin(non_annc_window)].copy()</span>
<span id="cb25-833"><a href="#cb25-833" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-834"><a href="#cb25-834" aria-hidden="true" tabindex="-1"></a>annc_means <span class="op">=</span> (</span>
<span id="cb25-835"><a href="#cb25-835" aria-hidden="true" tabindex="-1"></a>    annc_data</span>
<span id="cb25-836"><a href="#cb25-836" aria-hidden="true" tabindex="-1"></a>    .groupby([<span class="st">"ticker"</span>, <span class="st">"fiscal_year"</span>])</span>
<span id="cb25-837"><a href="#cb25-837" aria-hidden="true" tabindex="-1"></a>    .agg(annc_sq_ret<span class="op">=</span>(<span class="st">"sq_ret_mkt"</span>, <span class="st">"mean"</span>), annc_vol<span class="op">=</span>(<span class="st">"rel_vol"</span>, <span class="st">"mean"</span>))</span>
<span id="cb25-838"><a href="#cb25-838" aria-hidden="true" tabindex="-1"></a>    .reset_index()</span>
<span id="cb25-839"><a href="#cb25-839" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb25-840"><a href="#cb25-840" aria-hidden="true" tabindex="-1"></a>non_annc_means <span class="op">=</span> (</span>
<span id="cb25-841"><a href="#cb25-841" aria-hidden="true" tabindex="-1"></a>    non_annc_data</span>
<span id="cb25-842"><a href="#cb25-842" aria-hidden="true" tabindex="-1"></a>    .groupby([<span class="st">"ticker"</span>, <span class="st">"fiscal_year"</span>])</span>
<span id="cb25-843"><a href="#cb25-843" aria-hidden="true" tabindex="-1"></a>    .agg(non_annc_sq_ret<span class="op">=</span>(<span class="st">"sq_ret_mkt"</span>, <span class="st">"mean"</span>), non_annc_vol<span class="op">=</span>(<span class="st">"rel_vol"</span>, <span class="st">"mean"</span>))</span>
<span id="cb25-844"><a href="#cb25-844" aria-hidden="true" tabindex="-1"></a>    .reset_index()</span>
<span id="cb25-845"><a href="#cb25-845" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb25-846"><a href="#cb25-846" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-847"><a href="#cb25-847" aria-hidden="true" tabindex="-1"></a>event_df <span class="op">=</span> annc_means.merge(non_annc_means, on<span class="op">=</span>[<span class="st">"ticker"</span>, <span class="st">"fiscal_year"</span>])</span>
<span id="cb25-848"><a href="#cb25-848" aria-hidden="true" tabindex="-1"></a>event_df[<span class="st">"delta_sq_ret"</span>] <span class="op">=</span> event_df[<span class="st">"annc_sq_ret"</span>] <span class="op">-</span> event_df[<span class="st">"non_annc_sq_ret"</span>]</span>
<span id="cb25-849"><a href="#cb25-849" aria-hidden="true" tabindex="-1"></a>event_df[<span class="st">"delta_vol"</span>] <span class="op">=</span> event_df[<span class="st">"annc_vol"</span>] <span class="op">-</span> event_df[<span class="st">"non_annc_vol"</span>]</span>
<span id="cb25-850"><a href="#cb25-850" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-851"><a href="#cb25-851" aria-hidden="true" tabindex="-1"></a><span class="co"># Add firm characteristics</span></span>
<span id="cb25-852"><a href="#cb25-852" aria-hidden="true" tabindex="-1"></a>firm_chars <span class="op">=</span> (</span>
<span id="cb25-853"><a href="#cb25-853" aria-hidden="true" tabindex="-1"></a>    earn_annc[[<span class="st">"ticker"</span>, <span class="st">"fiscal_year"</span>, <span class="st">"exchange"</span>, <span class="st">"log_mcap"</span>, <span class="st">"datadate"</span>, <span class="st">"annc_date"</span>]]</span>
<span id="cb25-854"><a href="#cb25-854" aria-hidden="true" tabindex="-1"></a>    .drop_duplicates([<span class="st">"ticker"</span>, <span class="st">"fiscal_year"</span>])</span>
<span id="cb25-855"><a href="#cb25-855" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb25-856"><a href="#cb25-856" aria-hidden="true" tabindex="-1"></a>firm_chars[<span class="st">"hnx"</span>] <span class="op">=</span> (firm_chars[<span class="st">"exchange"</span>] <span class="op">==</span> <span class="st">"HNX"</span>).astype(<span class="bu">int</span>)</span>
<span id="cb25-857"><a href="#cb25-857" aria-hidden="true" tabindex="-1"></a>firm_chars[<span class="st">"annc_lag"</span>] <span class="op">=</span> (</span>
<span id="cb25-858"><a href="#cb25-858" aria-hidden="true" tabindex="-1"></a>    pd.to_datetime(firm_chars[<span class="st">"annc_date"</span>]) <span class="op">-</span> pd.to_datetime(firm_chars[<span class="st">"datadate"</span>])</span>
<span id="cb25-859"><a href="#cb25-859" aria-hidden="true" tabindex="-1"></a>).dt.days</span>
<span id="cb25-860"><a href="#cb25-860" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-861"><a href="#cb25-861" aria-hidden="true" tabindex="-1"></a>event_df <span class="op">=</span> event_df.merge(firm_chars, on<span class="op">=</span>[<span class="st">"ticker"</span>, <span class="st">"fiscal_year"</span>], how<span class="op">=</span><span class="st">"left"</span>)</span>
<span id="cb25-862"><a href="#cb25-862" aria-hidden="true" tabindex="-1"></a>event_df <span class="op">=</span> event_df.dropna(subset<span class="op">=</span>[<span class="st">"log_mcap"</span>, <span class="st">"hnx"</span>, <span class="st">"annc_lag"</span>, <span class="st">"delta_sq_ret"</span>])</span>
<span id="cb25-863"><a href="#cb25-863" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-864"><a href="#cb25-864" aria-hidden="true" tabindex="-1"></a><span class="co"># Regression</span></span>
<span id="cb25-865"><a href="#cb25-865" aria-hidden="true" tabindex="-1"></a>mod_vol <span class="op">=</span> smf.ols(<span class="st">"delta_sq_ret ~ log_mcap + hnx + annc_lag"</span>, data<span class="op">=</span>event_df).fit()</span>
<span id="cb25-866"><a href="#cb25-866" aria-hidden="true" tabindex="-1"></a>mod_volume <span class="op">=</span> smf.ols(<span class="st">"delta_vol ~ log_mcap + hnx + annc_lag"</span>, data<span class="op">=</span>event_df).fit()</span>
<span id="cb25-867"><a href="#cb25-867" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-868"><a href="#cb25-868" aria-hidden="true" tabindex="-1"></a>reg_table <span class="op">=</span> pd.DataFrame({</span>
<span id="cb25-869"><a href="#cb25-869" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Volatility"</span>: {</span>
<span id="cb25-870"><a href="#cb25-870" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Intercept"</span>: <span class="ss">f"</span><span class="sc">{</span>mod_vol<span class="sc">.</span>params[<span class="st">'Intercept'</span>]<span class="sc">:.6f}</span><span class="ss"> (</span><span class="sc">{</span>mod_vol<span class="sc">.</span>bse[<span class="st">'Intercept'</span>]<span class="sc">:.6f}</span><span class="ss">)"</span>,</span>
<span id="cb25-871"><a href="#cb25-871" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Size (log mcap)"</span>: <span class="ss">f"</span><span class="sc">{</span>mod_vol<span class="sc">.</span>params[<span class="st">'log_mcap'</span>]<span class="sc">:.6f}</span><span class="ss"> (</span><span class="sc">{</span>mod_vol<span class="sc">.</span>bse[<span class="st">'log_mcap'</span>]<span class="sc">:.6f}</span><span class="ss">)"</span>,</span>
<span id="cb25-872"><a href="#cb25-872" aria-hidden="true" tabindex="-1"></a>        <span class="st">"HNX"</span>: <span class="ss">f"</span><span class="sc">{</span>mod_vol<span class="sc">.</span>params[<span class="st">'hnx'</span>]<span class="sc">:.6f}</span><span class="ss"> (</span><span class="sc">{</span>mod_vol<span class="sc">.</span>bse[<span class="st">'hnx'</span>]<span class="sc">:.6f}</span><span class="ss">)"</span>,</span>
<span id="cb25-873"><a href="#cb25-873" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Annc Lag (days)"</span>: <span class="ss">f"</span><span class="sc">{</span>mod_vol<span class="sc">.</span>params[<span class="st">'annc_lag'</span>]<span class="sc">:.6f}</span><span class="ss"> (</span><span class="sc">{</span>mod_vol<span class="sc">.</span>bse[<span class="st">'annc_lag'</span>]<span class="sc">:.6f}</span><span class="ss">)"</span>,</span>
<span id="cb25-874"><a href="#cb25-874" aria-hidden="true" tabindex="-1"></a>        <span class="st">"N"</span>: <span class="ss">f"</span><span class="sc">{</span><span class="bu">int</span>(mod_vol.nobs)<span class="sc">:,}</span><span class="ss">"</span>,</span>
<span id="cb25-875"><a href="#cb25-875" aria-hidden="true" tabindex="-1"></a>        <span class="st">"R²"</span>: <span class="ss">f"</span><span class="sc">{</span>mod_vol<span class="sc">.</span>rsquared<span class="sc">:.4f}</span><span class="ss">"</span>,</span>
<span id="cb25-876"><a href="#cb25-876" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb25-877"><a href="#cb25-877" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Volume"</span>: {</span>
<span id="cb25-878"><a href="#cb25-878" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Intercept"</span>: <span class="ss">f"</span><span class="sc">{</span>mod_volume<span class="sc">.</span>params[<span class="st">'Intercept'</span>]<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>mod_volume<span class="sc">.</span>bse[<span class="st">'Intercept'</span>]<span class="sc">:.4f}</span><span class="ss">)"</span>,</span>
<span id="cb25-879"><a href="#cb25-879" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Size (log mcap)"</span>: <span class="ss">f"</span><span class="sc">{</span>mod_volume<span class="sc">.</span>params[<span class="st">'log_mcap'</span>]<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>mod_volume<span class="sc">.</span>bse[<span class="st">'log_mcap'</span>]<span class="sc">:.4f}</span><span class="ss">)"</span>,</span>
<span id="cb25-880"><a href="#cb25-880" aria-hidden="true" tabindex="-1"></a>        <span class="st">"HNX"</span>: <span class="ss">f"</span><span class="sc">{</span>mod_volume<span class="sc">.</span>params[<span class="st">'hnx'</span>]<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>mod_volume<span class="sc">.</span>bse[<span class="st">'hnx'</span>]<span class="sc">:.4f}</span><span class="ss">)"</span>,</span>
<span id="cb25-881"><a href="#cb25-881" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Annc Lag (days)"</span>: <span class="ss">f"</span><span class="sc">{</span>mod_volume<span class="sc">.</span>params[<span class="st">'annc_lag'</span>]<span class="sc">:.6f}</span><span class="ss"> (</span><span class="sc">{</span>mod_volume<span class="sc">.</span>bse[<span class="st">'annc_lag'</span>]<span class="sc">:.6f}</span><span class="ss">)"</span>,</span>
<span id="cb25-882"><a href="#cb25-882" aria-hidden="true" tabindex="-1"></a>        <span class="st">"N"</span>: <span class="ss">f"</span><span class="sc">{</span><span class="bu">int</span>(mod_volume.nobs)<span class="sc">:,}</span><span class="ss">"</span>,</span>
<span id="cb25-883"><a href="#cb25-883" aria-hidden="true" tabindex="-1"></a>        <span class="st">"R²"</span>: <span class="ss">f"</span><span class="sc">{</span>mod_volume<span class="sc">.</span>rsquared<span class="sc">:.4f}</span><span class="ss">"</span>,</span>
<span id="cb25-884"><a href="#cb25-884" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb25-885"><a href="#cb25-885" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb25-886"><a href="#cb25-886" aria-hidden="true" tabindex="-1"></a>reg_table</span>
<span id="cb25-887"><a href="#cb25-887" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-888"><a href="#cb25-888" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-889"><a href="#cb25-889" aria-hidden="true" tabindex="-1"></a><span class="fu">## Discussion and Contemporary Perspectives {#sec-info-earnings-discussion}</span></span>
<span id="cb25-890"><a href="#cb25-890" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-891"><a href="#cb25-891" aria-hidden="true" tabindex="-1"></a><span class="fu">### The Bamber et al. (2000) Critique</span></span>
<span id="cb25-892"><a href="#cb25-892" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-893"><a href="#cb25-893" aria-hidden="true" tabindex="-1"></a>@bamber2000we raised two important methodological concerns about the original @beaver1968information findings:</span>
<span id="cb25-894"><a href="#cb25-894" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-895"><a href="#cb25-895" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>**Mean vs. median effects.** The original study focused on mean volume and volatility, which can be driven by a small number of extreme events. When @bamber2000we examined the *proportion* of individual announcements that generate unusual reactions (rather than the mean reaction), the evidence was far less dramatic.</span>
<span id="cb25-896"><a href="#cb25-896" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-897"><a href="#cb25-897" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>**Sample selection.** Beaver's original sample of 143 firms was not randomly drawn but reflected specific selection criteria that may have biased toward firms with more informative announcements.</span>
<span id="cb25-898"><a href="#cb25-898" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-899"><a href="#cb25-899" aria-hidden="true" tabindex="-1"></a>We can assess the first concern directly. @fig-proportion plots the *fraction* of announcements with above-median volatility or volume on each event day, following the spirit of Bamber et al.'s critique.</span>
<span id="cb25-900"><a href="#cb25-900" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-903"><a href="#cb25-903" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb25-904"><a href="#cb25-904" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-proportion</span></span>
<span id="cb25-905"><a href="#cb25-905" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Proportion of individual announcements with above-median reaction on each event day. Unlike mean-based measures, this approach is robust to outliers. The fraction still rises notably on days 0 and +1, though the magnitude is more modest than in the mean-based plots."</span></span>
<span id="cb25-906"><a href="#cb25-906" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-907"><a href="#cb25-907" aria-hidden="true" tabindex="-1"></a><span class="co"># For each event, determine if announcement-day measures exceed</span></span>
<span id="cb25-908"><a href="#cb25-908" aria-hidden="true" tabindex="-1"></a><span class="co"># that event's median non-announcement-day measures</span></span>
<span id="cb25-909"><a href="#cb25-909" aria-hidden="true" tabindex="-1"></a>event_medians <span class="op">=</span> (</span>
<span id="cb25-910"><a href="#cb25-910" aria-hidden="true" tabindex="-1"></a>    daily_data[daily_data[<span class="st">"relative_td"</span>].isin(non_annc_window)]</span>
<span id="cb25-911"><a href="#cb25-911" aria-hidden="true" tabindex="-1"></a>    .groupby([<span class="st">"ticker"</span>, <span class="st">"fiscal_year"</span>])</span>
<span id="cb25-912"><a href="#cb25-912" aria-hidden="true" tabindex="-1"></a>    .agg(median_sq_ret<span class="op">=</span>(<span class="st">"sq_ret_mkt"</span>, <span class="st">"median"</span>), median_vol<span class="op">=</span>(<span class="st">"rel_vol"</span>, <span class="st">"median"</span>))</span>
<span id="cb25-913"><a href="#cb25-913" aria-hidden="true" tabindex="-1"></a>    .reset_index()</span>
<span id="cb25-914"><a href="#cb25-914" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb25-915"><a href="#cb25-915" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-916"><a href="#cb25-916" aria-hidden="true" tabindex="-1"></a>daily_with_median <span class="op">=</span> daily_data.merge(</span>
<span id="cb25-917"><a href="#cb25-917" aria-hidden="true" tabindex="-1"></a>    event_medians, on<span class="op">=</span>[<span class="st">"ticker"</span>, <span class="st">"fiscal_year"</span>], how<span class="op">=</span><span class="st">"left"</span></span>
<span id="cb25-918"><a href="#cb25-918" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb25-919"><a href="#cb25-919" aria-hidden="true" tabindex="-1"></a>daily_with_median[<span class="st">"above_med_vol"</span>] <span class="op">=</span> (</span>
<span id="cb25-920"><a href="#cb25-920" aria-hidden="true" tabindex="-1"></a>    daily_with_median[<span class="st">"sq_ret_mkt"</span>] <span class="op">&gt;</span> daily_with_median[<span class="st">"median_sq_ret"</span>]</span>
<span id="cb25-921"><a href="#cb25-921" aria-hidden="true" tabindex="-1"></a>).astype(<span class="bu">int</span>)</span>
<span id="cb25-922"><a href="#cb25-922" aria-hidden="true" tabindex="-1"></a>daily_with_median[<span class="st">"above_med_volume"</span>] <span class="op">=</span> (</span>
<span id="cb25-923"><a href="#cb25-923" aria-hidden="true" tabindex="-1"></a>    daily_with_median[<span class="st">"rel_vol"</span>] <span class="op">&gt;</span> daily_with_median[<span class="st">"median_vol"</span>]</span>
<span id="cb25-924"><a href="#cb25-924" aria-hidden="true" tabindex="-1"></a>).astype(<span class="bu">int</span>)</span>
<span id="cb25-925"><a href="#cb25-925" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-926"><a href="#cb25-926" aria-hidden="true" tabindex="-1"></a>prop_summary <span class="op">=</span> (</span>
<span id="cb25-927"><a href="#cb25-927" aria-hidden="true" tabindex="-1"></a>    daily_with_median</span>
<span id="cb25-928"><a href="#cb25-928" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">"relative_td"</span>)</span>
<span id="cb25-929"><a href="#cb25-929" aria-hidden="true" tabindex="-1"></a>    .agg(</span>
<span id="cb25-930"><a href="#cb25-930" aria-hidden="true" tabindex="-1"></a>        prop_above_vol<span class="op">=</span>(<span class="st">"above_med_vol"</span>, <span class="st">"mean"</span>),</span>
<span id="cb25-931"><a href="#cb25-931" aria-hidden="true" tabindex="-1"></a>        prop_above_volume<span class="op">=</span>(<span class="st">"above_med_volume"</span>, <span class="st">"mean"</span>),</span>
<span id="cb25-932"><a href="#cb25-932" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb25-933"><a href="#cb25-933" aria-hidden="true" tabindex="-1"></a>    .reset_index()</span>
<span id="cb25-934"><a href="#cb25-934" aria-hidden="true" tabindex="-1"></a>    .sort_values(<span class="st">"relative_td"</span>)</span>
<span id="cb25-935"><a href="#cb25-935" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb25-936"><a href="#cb25-936" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-937"><a href="#cb25-937" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">5</span>))</span>
<span id="cb25-938"><a href="#cb25-938" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-939"><a href="#cb25-939" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].bar(prop_summary[<span class="st">"relative_td"</span>], prop_summary[<span class="st">"prop_above_vol"</span>],</span>
<span id="cb25-940"><a href="#cb25-940" aria-hidden="true" tabindex="-1"></a>            color<span class="op">=</span><span class="st">"steelblue"</span>, edgecolor<span class="op">=</span><span class="st">"white"</span>)</span>
<span id="cb25-941"><a href="#cb25-941" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].axhline(<span class="fl">0.5</span>, color<span class="op">=</span><span class="st">"grey"</span>, linestyle<span class="op">=</span><span class="st">"--"</span>, linewidth<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb25-942"><a href="#cb25-942" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].axvline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"black"</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb25-943"><a href="#cb25-943" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_xlabel(<span class="st">"Trading Days Relative to Announcement"</span>)</span>
<span id="cb25-944"><a href="#cb25-944" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_ylabel(<span class="st">"Proportion &gt; Median"</span>)</span>
<span id="cb25-945"><a href="#cb25-945" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">"Proportion with Above-Median Volatility"</span>)</span>
<span id="cb25-946"><a href="#cb25-946" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].yaxis.set_major_formatter(mticker.PercentFormatter(xmax<span class="op">=</span><span class="dv">1</span>))</span>
<span id="cb25-947"><a href="#cb25-947" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-948"><a href="#cb25-948" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].bar(prop_summary[<span class="st">"relative_td"</span>], prop_summary[<span class="st">"prop_above_volume"</span>],</span>
<span id="cb25-949"><a href="#cb25-949" aria-hidden="true" tabindex="-1"></a>            color<span class="op">=</span><span class="st">"darkorange"</span>, edgecolor<span class="op">=</span><span class="st">"white"</span>)</span>
<span id="cb25-950"><a href="#cb25-950" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].axhline(<span class="fl">0.5</span>, color<span class="op">=</span><span class="st">"grey"</span>, linestyle<span class="op">=</span><span class="st">"--"</span>, linewidth<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb25-951"><a href="#cb25-951" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].axvline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"black"</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb25-952"><a href="#cb25-952" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_xlabel(<span class="st">"Trading Days Relative to Announcement"</span>)</span>
<span id="cb25-953"><a href="#cb25-953" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_ylabel(<span class="st">"Proportion &gt; Median"</span>)</span>
<span id="cb25-954"><a href="#cb25-954" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">"Proportion with Above-Median Volume"</span>)</span>
<span id="cb25-955"><a href="#cb25-955" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].yaxis.set_major_formatter(mticker.PercentFormatter(xmax<span class="op">=</span><span class="dv">1</span>))</span>
<span id="cb25-956"><a href="#cb25-956" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-957"><a href="#cb25-957" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb25-958"><a href="#cb25-958" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb25-959"><a href="#cb25-959" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-960"><a href="#cb25-960" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-961"><a href="#cb25-961" aria-hidden="true" tabindex="-1"></a><span class="fu">### How Much Information Do Earnings Announcements Convey?</span></span>
<span id="cb25-962"><a href="#cb25-962" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-963"><a href="#cb25-963" aria-hidden="true" tabindex="-1"></a>@ball2008much pose a provocative question: even if earnings announcements generate detectable market reactions, how much of the *total* annual information flow do they account for? Their analysis suggests that quarterly earnings announcements explain only about 12–18% of annual return variation for U.S. firms, implying that the vast majority of value-relevant information reaches the market through other channels.</span>
<span id="cb25-964"><a href="#cb25-964" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-965"><a href="#cb25-965" aria-hidden="true" tabindex="-1"></a>We can compute an analogous statistic for our Vietnamese sample:</span>
<span id="cb25-966"><a href="#cb25-966" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-969"><a href="#cb25-969" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb25-970"><a href="#cb25-970" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-info-share</span></span>
<span id="cb25-971"><a href="#cb25-971" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Share of annual return variation concentrated in the announcement window. The announcement window is days {-1, 0, +1}. If announcements carried no information, the expected share would be 3/41 ≈ 7.3% (three days out of a 41-day window). Values substantially above this indicate that a disproportionate share of return variation is concentrated around announcements."</span></span>
<span id="cb25-972"><a href="#cb25-972" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-973"><a href="#cb25-973" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute fraction of event-window variance in announcement days</span></span>
<span id="cb25-974"><a href="#cb25-974" aria-hidden="true" tabindex="-1"></a>variance_shares <span class="op">=</span> []</span>
<span id="cb25-975"><a href="#cb25-975" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (ticker, fy), group <span class="kw">in</span> daily_data.groupby([<span class="st">"ticker"</span>, <span class="st">"fiscal_year"</span>]):</span>
<span id="cb25-976"><a href="#cb25-976" aria-hidden="true" tabindex="-1"></a>    total_var <span class="op">=</span> group[<span class="st">"ret_mkt"</span>].var()</span>
<span id="cb25-977"><a href="#cb25-977" aria-hidden="true" tabindex="-1"></a>    annc_var <span class="op">=</span> group[group[<span class="st">"relative_td"</span>].isin(annc_window)][<span class="st">"ret_mkt"</span>].var()</span>
<span id="cb25-978"><a href="#cb25-978" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-979"><a href="#cb25-979" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> total_var <span class="op">&gt;</span> <span class="dv">0</span> <span class="kw">and</span> <span class="kw">not</span> np.isnan(annc_var):</span>
<span id="cb25-980"><a href="#cb25-980" aria-hidden="true" tabindex="-1"></a>        variance_shares.append({</span>
<span id="cb25-981"><a href="#cb25-981" aria-hidden="true" tabindex="-1"></a>            <span class="st">"ticker"</span>: ticker,</span>
<span id="cb25-982"><a href="#cb25-982" aria-hidden="true" tabindex="-1"></a>            <span class="st">"fiscal_year"</span>: fy,</span>
<span id="cb25-983"><a href="#cb25-983" aria-hidden="true" tabindex="-1"></a>            <span class="st">"annc_var_share"</span>: annc_var <span class="op">/</span> total_var,</span>
<span id="cb25-984"><a href="#cb25-984" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb25-985"><a href="#cb25-985" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-986"><a href="#cb25-986" aria-hidden="true" tabindex="-1"></a>var_share_df <span class="op">=</span> pd.DataFrame(variance_shares)</span>
<span id="cb25-987"><a href="#cb25-987" aria-hidden="true" tabindex="-1"></a>expected_share <span class="op">=</span> <span class="bu">len</span>(annc_window) <span class="op">/</span> <span class="dv">41</span>  <span class="co"># 3 days out of 41</span></span>
<span id="cb25-988"><a href="#cb25-988" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-989"><a href="#cb25-989" aria-hidden="true" tabindex="-1"></a>share_stats <span class="op">=</span> pd.DataFrame({</span>
<span id="cb25-990"><a href="#cb25-990" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Statistic"</span>: [<span class="st">"Mean share"</span>, <span class="st">"Median share"</span>, <span class="st">"Expected under null"</span>,</span>
<span id="cb25-991"><a href="#cb25-991" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"N events"</span>, <span class="st">"% above expected"</span>],</span>
<span id="cb25-992"><a href="#cb25-992" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Value"</span>: [</span>
<span id="cb25-993"><a href="#cb25-993" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"</span><span class="sc">{</span>var_share_df[<span class="st">'annc_var_share'</span>]<span class="sc">.</span>mean()<span class="sc">:.3f}</span><span class="ss">"</span>,</span>
<span id="cb25-994"><a href="#cb25-994" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"</span><span class="sc">{</span>var_share_df[<span class="st">'annc_var_share'</span>]<span class="sc">.</span>median()<span class="sc">:.3f}</span><span class="ss">"</span>,</span>
<span id="cb25-995"><a href="#cb25-995" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"</span><span class="sc">{</span>expected_share<span class="sc">:.3f}</span><span class="ss">"</span>,</span>
<span id="cb25-996"><a href="#cb25-996" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"</span><span class="sc">{</span><span class="bu">len</span>(var_share_df)<span class="sc">:,}</span><span class="ss">"</span>,</span>
<span id="cb25-997"><a href="#cb25-997" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"</span><span class="sc">{</span>(var_share_df[<span class="st">'annc_var_share'</span>] <span class="op">&gt;</span> expected_share)<span class="sc">.</span>mean()<span class="sc">:.1%}</span><span class="ss">"</span>,</span>
<span id="cb25-998"><a href="#cb25-998" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb25-999"><a href="#cb25-999" aria-hidden="true" tabindex="-1"></a>}).set_index(<span class="st">"Statistic"</span>)</span>
<span id="cb25-1000"><a href="#cb25-1000" aria-hidden="true" tabindex="-1"></a>share_stats</span>
<span id="cb25-1001"><a href="#cb25-1001" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-1002"><a href="#cb25-1002" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1003"><a href="#cb25-1003" aria-hidden="true" tabindex="-1"></a><span class="fu">### Price Limits and Multi-Day Adjustment</span></span>
<span id="cb25-1004"><a href="#cb25-1004" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1005"><a href="#cb25-1005" aria-hidden="true" tabindex="-1"></a>A distinctive feature of Vietnamese markets is that daily price limits can prevent full single-day price adjustment. When an announcement is sufficiently surprising, the stock may hit the $\pm$ 7% limit on HOSE (or $\pm$ 10% on HNX), and the remaining adjustment spills into subsequent trading days. This creates a pattern of **limit hits followed by continued drift**, a phenomenon that would bias downward any single-day measure of announcement impact and redistribute information content across days 0, +1, and potentially +2.</span>
<span id="cb25-1006"><a href="#cb25-1006" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1009"><a href="#cb25-1009" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb25-1010"><a href="#cb25-1010" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-limit-hits</span></span>
<span id="cb25-1011"><a href="#cb25-1011" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Proportion of stocks hitting the daily price limit (within 0.5% of the ±7% HOSE limit or ±10% HNX limit) by event day. Limit hits are concentrated on the announcement day, indicating that some announcements are sufficiently surprising to exhaust single-day adjustment capacity."</span></span>
<span id="cb25-1012"><a href="#cb25-1012" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1013"><a href="#cb25-1013" aria-hidden="true" tabindex="-1"></a><span class="co"># Identify limit hits</span></span>
<span id="cb25-1014"><a href="#cb25-1014" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> is_limit_hit(row):</span>
<span id="cb25-1015"><a href="#cb25-1015" aria-hidden="true" tabindex="-1"></a>    limit <span class="op">=</span> <span class="fl">0.07</span> <span class="cf">if</span> row[<span class="st">"exchange"</span>] <span class="op">==</span> <span class="st">"HOSE"</span> <span class="cf">else</span> <span class="fl">0.10</span></span>
<span id="cb25-1016"><a href="#cb25-1016" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">abs</span>(row[<span class="st">"ret"</span>]) <span class="op">&gt;=</span> (limit <span class="op">-</span> <span class="fl">0.005</span>)</span>
<span id="cb25-1017"><a href="#cb25-1017" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1018"><a href="#cb25-1018" aria-hidden="true" tabindex="-1"></a>daily_data[<span class="st">"limit_hit"</span>] <span class="op">=</span> daily_data.<span class="bu">apply</span>(is_limit_hit, axis<span class="op">=</span><span class="dv">1</span>).astype(<span class="bu">int</span>)</span>
<span id="cb25-1019"><a href="#cb25-1019" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1020"><a href="#cb25-1020" aria-hidden="true" tabindex="-1"></a>limit_summary <span class="op">=</span> (</span>
<span id="cb25-1021"><a href="#cb25-1021" aria-hidden="true" tabindex="-1"></a>    daily_data</span>
<span id="cb25-1022"><a href="#cb25-1022" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">"relative_td"</span>)[<span class="st">"limit_hit"</span>]</span>
<span id="cb25-1023"><a href="#cb25-1023" aria-hidden="true" tabindex="-1"></a>    .mean()</span>
<span id="cb25-1024"><a href="#cb25-1024" aria-hidden="true" tabindex="-1"></a>    .reset_index()</span>
<span id="cb25-1025"><a href="#cb25-1025" aria-hidden="true" tabindex="-1"></a>    .sort_values(<span class="st">"relative_td"</span>)</span>
<span id="cb25-1026"><a href="#cb25-1026" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb25-1027"><a href="#cb25-1027" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1028"><a href="#cb25-1028" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb25-1029"><a href="#cb25-1029" aria-hidden="true" tabindex="-1"></a>colors <span class="op">=</span> [<span class="st">"firebrick"</span> <span class="cf">if</span> <span class="bu">abs</span>(t) <span class="op">&lt;=</span> <span class="dv">1</span> <span class="cf">else</span> <span class="st">"steelblue"</span></span>
<span id="cb25-1030"><a href="#cb25-1030" aria-hidden="true" tabindex="-1"></a>          <span class="cf">for</span> t <span class="kw">in</span> limit_summary[<span class="st">"relative_td"</span>]]</span>
<span id="cb25-1031"><a href="#cb25-1031" aria-hidden="true" tabindex="-1"></a>ax.bar(limit_summary[<span class="st">"relative_td"</span>], limit_summary[<span class="st">"limit_hit"</span>],</span>
<span id="cb25-1032"><a href="#cb25-1032" aria-hidden="true" tabindex="-1"></a>       color<span class="op">=</span>colors, edgecolor<span class="op">=</span><span class="st">"white"</span>)</span>
<span id="cb25-1033"><a href="#cb25-1033" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Trading Days Relative to Announcement"</span>)</span>
<span id="cb25-1034"><a href="#cb25-1034" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Proportion Hitting Price Limit"</span>)</span>
<span id="cb25-1035"><a href="#cb25-1035" aria-hidden="true" tabindex="-1"></a>ax.yaxis.set_major_formatter(mticker.PercentFormatter(xmax<span class="op">=</span><span class="dv">1</span>, decimals<span class="op">=</span><span class="dv">1</span>))</span>
<span id="cb25-1036"><a href="#cb25-1036" aria-hidden="true" tabindex="-1"></a>ax.axvline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"black"</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb25-1037"><a href="#cb25-1037" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb25-1038"><a href="#cb25-1038" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb25-1039"><a href="#cb25-1039" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb25-1040"><a href="#cb25-1040" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1041"><a href="#cb25-1041" aria-hidden="true" tabindex="-1"></a><span class="fu">### International Context</span></span>
<span id="cb25-1042"><a href="#cb25-1042" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1043"><a href="#cb25-1043" aria-hidden="true" tabindex="-1"></a>@landsman2012information conduct a cross-country study of announcement reactions and find that information content is higher in countries with: (i) stronger investor protection, (ii) greater financial transparency, and (iii) mandatory IFRS adoption. Vietnam's position on these dimensions, developing institutional framework, VAS rather than IFRS, moderate transparency, suggests that announcement reactions may differ systematically from developed-market benchmarks.</span>
<span id="cb25-1044"><a href="#cb25-1044" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1045"><a href="#cb25-1045" aria-hidden="true" tabindex="-1"></a>Their framework generates a testable prediction: as Vietnam progresses toward IFRS adoption (a process underway as of 2025), the information content of earnings announcements should *increase* to the extent that IFRS improves the mapping from economic events to reported numbers.</span>
<span id="cb25-1046"><a href="#cb25-1046" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1047"><a href="#cb25-1047" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- ## Exercises</span></span>
<span id="cb25-1048"><a href="#cb25-1048" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1049"><a href="#cb25-1049" aria-hidden="true" tabindex="-1"></a><span class="co">1.  **Median vs. mean.** Reproduce @fig-volatility-by-year and @fig-volume-by-year using the *median* rather than the mean across events on each event day. How do the results change? Which approach—mean or median—is more appropriate for drawing inferences, and why?</span></span>
<span id="cb25-1050"><a href="#cb25-1050" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1051"><a href="#cb25-1051" aria-hidden="true" tabindex="-1"></a><span class="co">2.  **Absolute returns.** Replace squared market-adjusted returns with *absolute* market-adjusted returns ($|R_{i,t} - R_{m,t}|$) as the volatility measure. This is the `mean_abs_ret` variable computed in the code. How do the plots and test statistics compare? What are the statistical advantages of absolute returns over squared returns?</span></span>
<span id="cb25-1052"><a href="#cb25-1052" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1053"><a href="#cb25-1053" aria-hidden="true" tabindex="-1"></a><span class="co">3.  **Pre-announcement drift.** Examine whether there is evidence of information leakage before the announcement. Specifically, test whether volume and volatility on days $\{-5, -4, -3, -2\}$ are significantly elevated above their non-event counterparts. What might explain pre-announcement trading activity in the Vietnamese context?</span></span>
<span id="cb25-1054"><a href="#cb25-1054" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1055"><a href="#cb25-1055" aria-hidden="true" tabindex="-1"></a><span class="co">4.  **Announcement day return direction.** @beaver1968information focused exclusively on *unsigned* measures (volume and volatility). Extend the analysis to examine whether the *sign* of the announcement-day return is predictable. Compute the fraction of announcements with positive market-adjusted returns on day 0. Test whether this fraction differs from 50%. What would a systematic positive (or negative) bias imply?</span></span>
<span id="cb25-1056"><a href="#cb25-1056" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1057"><a href="#cb25-1057" aria-hidden="true" tabindex="-1"></a><span class="co">5.  **Post-announcement drift.** Following the event study methodology from the previous chapter, compute cumulative abnormal returns (CARs) from day +2 to day +20 and test whether they are systematically nonzero. Post-announcement drift would suggest that the market underreacts to earnings news and gradually incorporates the information.</span></span>
<span id="cb25-1058"><a href="#cb25-1058" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1059"><a href="#cb25-1059" aria-hidden="true" tabindex="-1"></a><span class="co">6.  **Price limit effects.** Identify announcements where the stock hit the daily price limit on day 0. For these events, plot cumulative absolute market-adjusted returns from day 0 through day +5. Compare with events where no limit was hit. Does the multi-day adjustment pattern for limit-hit events suggest that price limits impede efficient information incorporation?</span></span>
<span id="cb25-1060"><a href="#cb25-1060" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1061"><a href="#cb25-1061" aria-hidden="true" tabindex="-1"></a><span class="co">7.  **Confounding events.** A potential threat to identification is that other corporate events (dividend declarations, M&amp;A announcements, capital raisings) may coincide with the earnings window. If you have access to event data, exclude firm-windows with confounding events and re-estimate the analysis. How sensitive are the results to this filter?</span></span>
<span id="cb25-1062"><a href="#cb25-1062" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1063"><a href="#cb25-1063" aria-hidden="true" tabindex="-1"></a><span class="co">8.  **Asymmetric reactions.** Classify announcements into "good news" (positive market-adjusted return on day 0) and "bad news" (negative return). Compare the volume and volatility patterns separately for each group. Is there evidence that the market reacts more strongly to bad news, consistent with the "bad news travels slowly" hypothesis of @berkman2009price?</span></span>
<span id="cb25-1064"><a href="#cb25-1064" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1065"><a href="#cb25-1065" aria-hidden="true" tabindex="-1"></a><span class="co">9.  **Herd behavior.** @nguyen2014herd document herding behavior in Vietnamese equity markets. Design a test for whether announcement-day trading shows signs of herding (e.g., correlation between individual stock volume and market-wide volume conditional on the announcement signal). Discuss how herding would affect the interpretation of volume as a measure of information content.</span></span>
<span id="cb25-1066"><a href="#cb25-1066" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1067"><a href="#cb25-1067" aria-hidden="true" tabindex="-1"></a><span class="co">10. **Time trend in information content.** Vietnam's disclosure regime has strengthened over time (Circular 155/2015/TT-BTC, Decree 71/2017/NĐ-CP). Test whether the announcement-day volatility ratio has increased over your sample period. A formal test would regress the event-level volatility difference on a time trend. --&gt;</span></span>
<span id="cb25-1068"><a href="#cb25-1068" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1069"><a href="#cb25-1069" aria-hidden="true" tabindex="-1"></a><span class="fu">## Summary</span></span>
<span id="cb25-1070"><a href="#cb25-1070" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1071"><a href="#cb25-1071" aria-hidden="true" tabindex="-1"></a>This chapter examined whether earnings announcements convey new information to investors in Vietnamese equity markets, following the foundational research design of @beaver1968information. The key findings are:</span>
<span id="cb25-1072"><a href="#cb25-1072" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1073"><a href="#cb25-1073" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Both return volatility and trading volume spike sharply on the announcement day and the following day, providing robust evidence of information content. This result holds across fiscal years, consistent with earnings being a persistent source of new information.</span>
<span id="cb25-1074"><a href="#cb25-1074" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1075"><a href="#cb25-1075" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Formal statistical tests reject the null of no information content with high confidence, using both mean-based and proportion-based measures.</span>
<span id="cb25-1076"><a href="#cb25-1076" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1077"><a href="#cb25-1077" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Cross-sectional analysis reveals that the announcement reaction is stronger for smaller firms and HNX-listed firms, consistent with the theoretical prediction that the information content of earnings is inversely related to the richness of the pre-disclosure information environment.</span>
<span id="cb25-1078"><a href="#cb25-1078" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1079"><a href="#cb25-1079" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Vietnamese-specific features—price limits, retail dominance, and sparse analyst coverage—create distinctive empirical patterns that enrich the standard @beaver1968information framework. Price limits, in particular, generate multi-day adjustment dynamics that researchers must account for when measuring single-day information content.</span>
<span id="cb25-1080"><a href="#cb25-1080" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1081"><a href="#cb25-1081" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The @bamber2000we critique—that mean effects can be driven by outliers—is addressed by examining the proportion of events with above-median reactions, which still shows clear announcement-day elevation.</span>
<span id="cb25-1082"><a href="#cb25-1082" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-1083"><a href="#cb25-1083" aria-hidden="true" tabindex="-1"></a>The evidence strongly supports the conclusion that annual earnings announcements convey new information to the Vietnamese market, consistent with the original @beaver1968information findings and the broader international evidence in @landsman2012information.</span>
</code></pre></div><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p><span id="copyright"></span> Mike. All rights reserved.</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/mikenguyen13/tidy_finance_vn/edit/main/32_info_earnings.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/mikenguyen13/tidy_finance_vn/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>