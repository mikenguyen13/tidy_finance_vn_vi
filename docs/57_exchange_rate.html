<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>39&nbsp; Exchange Rate Dynamics ‚Äì T√†i Ch√≠nh ·ª®ng D·ª•ng v·ªõi Python</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./60_event_studies.html" rel="next">
<link href="./56_market_integration_and_segmentation.html" rel="prev">
<link href="./favicon.ico" rel="icon">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-b758ccaa5987ceb1b75504551e579abf.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-ed993afc62d41eaa40b4794cd0abf8eb.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark-72097b8a1e3a3da1d7b8bbfaaf81c3d8.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="site_libs/bootstrap/bootstrap-ed993afc62d41eaa40b4794cd0abf8eb.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="39&nbsp; Exchange Rate Dynamics ‚Äì T√†i Ch√≠nh ·ª®ng D·ª•ng v·ªõi Python">
<meta property="og:description" content="">
<meta property="og:site_name" content="T√†i Ch√≠nh ·ª®ng D·ª•ng v·ªõi Python">
<meta name="twitter:title" content="39&nbsp; Exchange Rate Dynamics ‚Äì T√†i Ch√≠nh ·ª®ng D·ª•ng v·ªõi Python">
<meta name="twitter:description" content="">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-sidebar floating nav-fixed quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">T√†i Ch√≠nh ·ª®ng D·ª•ng v·ªõi Python</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" aria-current="page"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://mikenguyen13.github.io/tidy_finance_vn_vi/"> 
<span class="menu-text">üìò English Book</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://mikenguyen13.github.io/tidy_finance_vn_vi/"> 
<span class="menu-text">üìó S√°ch Ti·∫øng Vi·ªát</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
    <a href="https://github.com/mikenguyen13/tidy_finance_vn_vi" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./50_institutional_ownership.html">Quy·ªÅn s·ªü h·ªØu, ma s√°t th·ªã tr∆∞·ªùng v√† r·ªßi ro qu·ªëc t·∫ø</a></li><li class="breadcrumb-item"><a href="./57_exchange_rate.html"><span class="chapter-number">39</span>&nbsp; <span class="chapter-title">Exchange Rate Dynamics</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Th·ªã tr∆∞·ªùng t√†i ch√≠nh, th·ªÉ ch·∫ø v√† d·ªØ li·ªáu Vi·ªát Nam</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00_institutional_background.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Institutional Background and Market Structure of Vietnam‚Äôs Equity Market</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01_accessing_and_managing_financial_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Accessing and Managing VN Financial Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02_datacore_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Datacore Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_market_microstructure.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Market Microstructure in Vietnam</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04_risk_free_rate_construction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Risk-Free Rate Construction in Vietnam</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05_working_with_stock_returns.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Constructing and Analyzing Equity Return Series</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06_compound_return.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Compound Returns</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">X√¢y d·ª±ng danh m·ª•c ƒë·∫ßu t∆∞, r·ªßi ro v√† c∆° h·ªçc th·ª±c nghi·ªám</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10_modern_portfolio_theory.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Modern Portfolio Theory</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11_univariate_portfolio_sort.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Univariate Portfolio Sorts</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12_size_sorts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Size Sorts</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13_value_bivariate.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Value and Bivariate Sorts</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14_portfolio_weighting_and_rebalancing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Portfolio Weighting and Rebalancing</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15_missing_data_and_survivorship.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Missing Data and Survivorship Bias</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16_liquidity_and_turnover_measures.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Liquidity and Turnover Measures</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17_beta_estimation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Beta Estimation</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">M√¥ h√¨nh ƒë·ªãnh gi√° t√†i s·∫£n</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./20_capm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">The Capital Asset Pricing Model</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./21_fama_french.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Fama-French Factors</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./22_momentum.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Momentum Strategies</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./23_factor_construction_principles.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Factor Construction Principles</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./24_fama_macbeth.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Fama-MacBeth Regressions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./25_factor_zoo_and_multiple_testing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Factor Zoo and Multiple Testing</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./26_time_series_vs_cross_section.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Time-Series vs.&nbsp;Cross-Sectional Factor Tests</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">C√°c y·∫øu t·ªë c∆° b·∫£n c·ªßa c√¥ng ty, ƒë·ªãnh gi√° v√† t√≠n hi·ªáu doanh nghi·ªáp</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./30_financial_statement_analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Financial Statement Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./31_discounted_cash_flow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Discounted Cash Flow Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./32_info_earnings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Information Content of Earnings Announcements</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./33_accruals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Accruals, Earnings Persistence, and Market Efficiency</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./34_earning_management.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Earnings Management: Detection and Measurement</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./35_pe_ratio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">P/E Ratio</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./36_valuation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Firm Valuation, Financial Distress, and Company Maturity</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./37_disclosure_quality_and_timing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Disclosure Quality and Timing</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./38_sue.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Standardized Earnings Surprises (SUE)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./39_divop.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Measuring Divergence of Investor Opinion</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Quy·ªÅn s·ªü h·ªØu, ma s√°t th·ªã tr∆∞·ªùng v√† r·ªßi ro qu·ªëc t·∫ø</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./50_institutional_ownership.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Institutional Ownership Analytics in Vietnam</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./52_institutional_trade_flow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Institutional Trades, Flows, and Turnover Ratios</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./53_governance.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">Corporate Governance</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./54_return_gaps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">36</span>&nbsp; <span class="chapter-title">Return Gap: Measuring Unobserved Actions of Fund Managers</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./55_price_limits_and_volatility.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">37</span>&nbsp; <span class="chapter-title">Price Limits and Volatility</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./56_market_integration_and_segmentation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">38</span>&nbsp; <span class="chapter-title">Market Integration and Segmentation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./57_exchange_rate.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">39</span>&nbsp; <span class="chapter-title">Exchange Rate Dynamics</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">M√¥ h√¨nh t√†i ch√≠nh n√¢ng cao</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./60_event_studies.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">40</span>&nbsp; <span class="chapter-title">Event Studies in Finance</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./61_tail_risk_extreme_events.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">41</span>&nbsp; <span class="chapter-title">Tail Risk and Extreme Events</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./62_corporate_finance_estimators.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">42</span>&nbsp; <span class="chapter-title">Corporate Finance Estimators and Identification</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./63_structural_models_finance.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">43</span>&nbsp; <span class="chapter-title">Structural Models in Finance</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true">
 <span class="menu-text">D·ªØ li·ªáu thay th·∫ø v√† Tr√≠ tu·ªá nh√¢n t·∫°o trong t√†i ch√≠nh</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./70_textual.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">44</span>&nbsp; <span class="chapter-title">Textual Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./71_image.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">45</span>&nbsp; <span class="chapter-title">Image and Visual Data in Finance</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./73_networks_graphs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">46</span>&nbsp; <span class="chapter-title">Networks and Graphs in Finance</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./74_multimodel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">47</span>&nbsp; <span class="chapter-title">Multimodal Models in Finance</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./99_conclusion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">48</span>&nbsp; <span class="chapter-title">Conclusion</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="-1">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#sec-fx-theory" id="toc-sec-fx-theory" class="nav-link active" data-scroll-target="#sec-fx-theory"><span class="header-section-number">39.1</span> Theoretical Foundations</a>
  <ul class="collapse">
  <li><a href="#exchange-rate-determination" id="toc-exchange-rate-determination" class="nav-link" data-scroll-target="#exchange-rate-determination"><span class="header-section-number">39.1.1</span> Exchange Rate Determination</a></li>
  <li><a href="#interest-rate-parity" id="toc-interest-rate-parity" class="nav-link" data-scroll-target="#interest-rate-parity"><span class="header-section-number">39.1.2</span> Interest Rate Parity</a></li>
  <li><a href="#the-carry-trade" id="toc-the-carry-trade" class="nav-link" data-scroll-target="#the-carry-trade"><span class="header-section-number">39.1.3</span> The Carry Trade</a></li>
  <li><a href="#the-trilemma" id="toc-the-trilemma" class="nav-link" data-scroll-target="#the-trilemma"><span class="header-section-number">39.1.4</span> The Trilemma</a></li>
  </ul></li>
  <li><a href="#sec-fx-regime" id="toc-sec-fx-regime" class="nav-link" data-scroll-target="#sec-fx-regime"><span class="header-section-number">39.2</span> The VND Exchange Rate Regime</a>
  <ul class="collapse">
  <li><a href="#historical-evolution" id="toc-historical-evolution" class="nav-link" data-scroll-target="#historical-evolution"><span class="header-section-number">39.2.1</span> Historical Evolution</a></li>
  <li><a href="#band-mechanics" id="toc-band-mechanics" class="nav-link" data-scroll-target="#band-mechanics"><span class="header-section-number">39.2.2</span> Band Mechanics</a></li>
  </ul></li>
  <li><a href="#sec-fx-data" id="toc-sec-fx-data" class="nav-link" data-scroll-target="#sec-fx-data"><span class="header-section-number">39.3</span> Data Construction</a>
  <ul class="collapse">
  <li><a href="#loading-libraries" id="toc-loading-libraries" class="nav-link" data-scroll-target="#loading-libraries"><span class="header-section-number">39.3.1</span> Loading Libraries</a></li>
  <li><a href="#retrieving-exchange-rate-data" id="toc-retrieving-exchange-rate-data" class="nav-link" data-scroll-target="#retrieving-exchange-rate-data"><span class="header-section-number">39.3.2</span> Retrieving Exchange Rate Data</a></li>
  <li><a href="#constructing-the-vndusd-time-series" id="toc-constructing-the-vndusd-time-series" class="nav-link" data-scroll-target="#constructing-the-vndusd-time-series"><span class="header-section-number">39.3.3</span> Constructing the VND/USD Time Series</a></li>
  <li><a href="#multi-currency-panel" id="toc-multi-currency-panel" class="nav-link" data-scroll-target="#multi-currency-panel"><span class="header-section-number">39.3.4</span> Multi-Currency Panel</a></li>
  </ul></li>
  <li><a href="#sec-fx-statistics" id="toc-sec-fx-statistics" class="nav-link" data-scroll-target="#sec-fx-statistics"><span class="header-section-number">39.4</span> Statistical Properties of VND Returns</a>
  <ul class="collapse">
  <li><a href="#return-distribution" id="toc-return-distribution" class="nav-link" data-scroll-target="#return-distribution"><span class="header-section-number">39.4.1</span> Return Distribution</a></li>
  <li><a href="#autocorrelation-structure" id="toc-autocorrelation-structure" class="nav-link" data-scroll-target="#autocorrelation-structure"><span class="header-section-number">39.4.2</span> Autocorrelation Structure</a></li>
  <li><a href="#reference-rate-adjustments-and-structural-breaks" id="toc-reference-rate-adjustments-and-structural-breaks" class="nav-link" data-scroll-target="#reference-rate-adjustments-and-structural-breaks"><span class="header-section-number">39.4.3</span> Reference Rate Adjustments and Structural Breaks</a></li>
  <li><a href="#cross-currency-correlations" id="toc-cross-currency-correlations" class="nav-link" data-scroll-target="#cross-currency-correlations"><span class="header-section-number">39.4.4</span> Cross-Currency Correlations</a></li>
  </ul></li>
  <li><a href="#sec-fx-parity" id="toc-sec-fx-parity" class="nav-link" data-scroll-target="#sec-fx-parity"><span class="header-section-number">39.5</span> Interest Rate Parity Tests</a>
  <ul class="collapse">
  <li><a href="#testing-covered-interest-rate-parity" id="toc-testing-covered-interest-rate-parity" class="nav-link" data-scroll-target="#testing-covered-interest-rate-parity"><span class="header-section-number">39.5.1</span> Testing Covered Interest Rate Parity</a></li>
  <li><a href="#testing-uncovered-interest-rate-parity" id="toc-testing-uncovered-interest-rate-parity" class="nav-link" data-scroll-target="#testing-uncovered-interest-rate-parity"><span class="header-section-number">39.5.2</span> Testing Uncovered Interest Rate Parity</a></li>
  <li><a href="#carry-trade-returns" id="toc-carry-trade-returns" class="nav-link" data-scroll-target="#carry-trade-returns"><span class="header-section-number">39.5.3</span> Carry Trade Returns</a></li>
  </ul></li>
  <li><a href="#sec-fx-volatility" id="toc-sec-fx-volatility" class="nav-link" data-scroll-target="#sec-fx-volatility"><span class="header-section-number">39.6</span> Volatility Modeling</a>
  <ul class="collapse">
  <li><a href="#garch-estimation" id="toc-garch-estimation" class="nav-link" data-scroll-target="#garch-estimation"><span class="header-section-number">39.6.1</span> GARCH Estimation</a></li>
  <li><a href="#volatility-regime-identification" id="toc-volatility-regime-identification" class="nav-link" data-scroll-target="#volatility-regime-identification"><span class="header-section-number">39.6.2</span> Volatility Regime Identification</a></li>
  </ul></li>
  <li><a href="#sec-fx-exposure" id="toc-sec-fx-exposure" class="nav-link" data-scroll-target="#sec-fx-exposure"><span class="header-section-number">39.7</span> Exchange Rate Exposure of Vietnamese Firms</a>
  <ul class="collapse">
  <li><a href="#the-jorion-framework" id="toc-the-jorion-framework" class="nav-link" data-scroll-target="#the-jorion-framework"><span class="header-section-number">39.7.1</span> The Jorion Framework</a></li>
  <li><a href="#industry-level-exposure" id="toc-industry-level-exposure" class="nav-link" data-scroll-target="#industry-level-exposure"><span class="header-section-number">39.7.2</span> Industry-Level Exposure</a></li>
  <li><a href="#time-varying-exposure" id="toc-time-varying-exposure" class="nav-link" data-scroll-target="#time-varying-exposure"><span class="header-section-number">39.7.3</span> Time-Varying Exposure</a></li>
  </ul></li>
  <li><a href="#sec-fx-hedging" id="toc-sec-fx-hedging" class="nav-link" data-scroll-target="#sec-fx-hedging"><span class="header-section-number">39.8</span> Currency Hedging for International Investors</a>
  <ul class="collapse">
  <li><a href="#the-hedging-decision" id="toc-the-hedging-decision" class="nav-link" data-scroll-target="#the-hedging-decision"><span class="header-section-number">39.8.1</span> The Hedging Decision</a></li>
  <li><a href="#optimal-hedge-ratio" id="toc-optimal-hedge-ratio" class="nav-link" data-scroll-target="#optimal-hedge-ratio"><span class="header-section-number">39.8.2</span> Optimal Hedge Ratio</a></li>
  </ul></li>
  <li><a href="#sec-fx-asean" id="toc-sec-fx-asean" class="nav-link" data-scroll-target="#sec-fx-asean"><span class="header-section-number">39.9</span> ASEAN Currency Comparison</a></li>
  <li><a href="#sec-fx-comovement" id="toc-sec-fx-comovement" class="nav-link" data-scroll-target="#sec-fx-comovement"><span class="header-section-number">39.10</span> Exchange Rate and Equity Market Co-Movement</a></li>
  <li><a href="#sec-fx-summary" id="toc-sec-fx-summary" class="nav-link" data-scroll-target="#sec-fx-summary"><span class="header-section-number">39.11</span> Summary</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/mikenguyen13/tidy_finance_vn_vi/edit/main/57_exchange_rate.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/mikenguyen13/tidy_finance_vn_vi/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">


<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./50_institutional_ownership.html">Quy·ªÅn s·ªü h·ªØu, ma s√°t th·ªã tr∆∞·ªùng v√† r·ªßi ro qu·ªëc t·∫ø</a></li><li class="breadcrumb-item"><a href="./57_exchange_rate.html"><span class="chapter-number">39</span>&nbsp; <span class="chapter-title">Exchange Rate Dynamics</span></a></li></ol></nav>
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span class="chapter-number">39</span>&nbsp; <span class="chapter-title">Exchange Rate Dynamics</span></h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>In this chapter, we construct a comprehensive exchange rate database for the Vietnamese Dong (VND) against major currencies, analyze the statistical properties of VND returns, test covered and uncovered interest rate parity, estimate the currency exposure of Vietnamese listed firms, model volatility regimes using GARCH, and evaluate hedging strategies for international investors.</p>
</div>
</div>
<p>Exchange rates sit at the intersection of macroeconomics and finance. For international investors considering Vietnamese equities, the VND/USD exchange rate is not a secondary concern; it is a first-order determinant of dollar-denominated returns. A Vietnamese stock portfolio that earns 15% in VND terms but coincides with a 5% VND depreciation delivers only about 10% in USD terms. Conversely, periods of VND stability or appreciation amplify returns for foreign investors. Understanding exchange rate dynamics is therefore essential for anyone working with Vietnamese financial data in an international context.</p>
<p>Vietnam presents a distinctive exchange rate regime. Unlike freely floating currencies such as the USD/EUR or USD/JPY, the VND operates under a managed float. The State Bank of Vietnam (SBV) sets a daily reference rate and allows trading within a band (currently <span class="math inline">\(\pm\)</span> 3% on the interbank market and <span class="math inline">\(\pm\)</span> 5% against the official rate for commercial banks). This regime creates specific patterns in VND returns that differ fundamentally from those observed in freely floating pairs: clustered movements near band boundaries, discrete adjustments when the SBV shifts the reference rate, and periods of near-zero volatility punctuated by sharp moves during policy changes.</p>
<p>This chapter develops tools for working with these dynamics. We progress from data construction through statistical characterization to economic applications: interest rate parity tests, firm-level exposure estimation, GARCH volatility modeling, and hedging strategy evaluation.</p>
<section id="sec-fx-theory" class="level2" data-number="39.1">
<h2 data-number="39.1" class="anchored" data-anchor-id="sec-fx-theory"><span class="header-section-number">39.1</span> Theoretical Foundations</h2>
<section id="exchange-rate-determination" class="level3" data-number="39.1.1">
<h3 data-number="39.1.1" class="anchored" data-anchor-id="exchange-rate-determination"><span class="header-section-number">39.1.1</span> Exchange Rate Determination</h3>
<p>The modern theory of exchange rate determination rests on several building blocks. <span class="citation" data-cites="dornbusch1976expectations">Dornbusch (<a href="references.html#ref-dornbusch1976expectations" role="doc-biblioref">1976</a>)</span> provides the canonical ‚Äúovershooting‚Äù model: because goods prices are sticky while asset prices adjust instantly, a monetary shock causes the exchange rate to overshoot its long-run equilibrium. <span class="citation" data-cites="frankel1979mark">Frankel (<a href="references.html#ref-frankel1979mark" role="doc-biblioref">1979</a>)</span> extends this to a real interest differential model where the exchange rate depends on relative money supplies, income levels, and interest rates across countries.</p>
<p>Despite elegant theory, <span class="citation" data-cites="meese1983empirical">Meese and Rogoff (<a href="references.html#ref-meese1983empirical" role="doc-biblioref">1983</a>)</span> delivered a devastating empirical result: no structural model of exchange rates consistently outperforms a random walk in out-of-sample forecasting. This finding, confirmed repeatedly over four decades and surveyed by <span class="citation" data-cites="rossi2013exchange">Rossi (<a href="references.html#ref-rossi2013exchange" role="doc-biblioref">2013</a>)</span>, means that exchange rate changes are, to a first approximation, unpredictable. For practical purposes, the best forecast of tomorrow‚Äôs VND/USD rate is today‚Äôs rate.</p>
</section>
<section id="interest-rate-parity" class="level3" data-number="39.1.2">
<h3 data-number="39.1.2" class="anchored" data-anchor-id="interest-rate-parity"><span class="header-section-number">39.1.2</span> Interest Rate Parity</h3>
<p>Two parity conditions link exchange rates to interest rates:</p>
<p><strong>Covered Interest Rate Parity (CIP):</strong> Arbitrage between spot and forward markets should equalize the forward premium with the interest rate differential:</p>
<p><span id="eq-cip"><span class="math display">\[
F_{t,t+k} = S_t \cdot \frac{(1 + r^{VND}_{t,k})}{(1 + r^{USD}_{t,k})}
\tag{39.1}\]</span></span></p>
<p>where <span class="math inline">\(S_t\)</span> is the spot rate (VND per USD), <span class="math inline">\(F_{t,t+k}\)</span> is the <span class="math inline">\(k\)</span>-period forward rate, and <span class="math inline">\(r^{VND}_{t,k}\)</span> and <span class="math inline">\(r^{USD}_{t,k}\)</span> are the domestic and foreign interest rates for maturity <span class="math inline">\(k\)</span>. CIP should hold exactly in the absence of transaction costs, credit risk, and capital controls. <span class="citation" data-cites="du2018deviations">Du, Tepper, and Verdelhan (<a href="references.html#ref-du2018deviations" role="doc-biblioref">2018</a>)</span> document that CIP violations have widened significantly in major currency pairs since 2008, driven by post-crisis bank balance sheet constraints. In Vietnam, capital controls and limited forward market liquidity create additional CIP deviations.</p>
<p><strong>Uncovered Interest Rate Parity (UIP):</strong> The expected depreciation should equal the interest rate differential:</p>
<p><span id="eq-uip"><span class="math display">\[
\mathbb{E}_t[\Delta s_{t+k}] = r^{VND}_{t,k} - r^{USD}_{t,k}
\tag{39.2}\]</span></span></p>
<p>where <span class="math inline">\(\Delta s_{t+k} = \ln(S_{t+k}/S_t)\)</span>. UIP is an equilibrium condition, not an arbitrage condition, it requires risk-neutral investors. <span class="citation" data-cites="fama1984forward">Fama (<a href="references.html#ref-fama1984forward" role="doc-biblioref">1984</a>)</span> famously showed that the forward premium predicts exchange rate changes with the <em>wrong sign</em>: high-interest-rate currencies tend to appreciate rather than depreciate, contradicting UIP. This ‚Äúforward premium anomaly‚Äù is the foundation of the carry trade.</p>
</section>
<section id="the-carry-trade" class="level3" data-number="39.1.3">
<h3 data-number="39.1.3" class="anchored" data-anchor-id="the-carry-trade"><span class="header-section-number">39.1.3</span> The Carry Trade</h3>
<p>The carry trade exploits UIP violations by borrowing in low-interest-rate currencies and investing in high-interest-rate currencies. <span class="citation" data-cites="lustig2007cross">Lustig and Verdelhan (<a href="references.html#ref-lustig2007cross" role="doc-biblioref">2007</a>)</span> show that a portfolio of carry trade positions earns a significant risk premium, which they link to consumption growth risk. <span class="citation" data-cites="menkhoff2012carry">Menkhoff et al. (<a href="references.html#ref-menkhoff2012carry" role="doc-biblioref">2012</a>)</span> identify global FX volatility as the key risk factor: carry trades lose money precisely when global volatility spikes, a ‚Äúcrash risk‚Äù documented by <span class="citation" data-cites="brunnermeier2008carry">Brunnermeier, Nagel, and Pedersen (<a href="references.html#ref-brunnermeier2008carry" role="doc-biblioref">2008</a>)</span>.</p>
<p>Vietnam, with interest rates typically 3-8 percentage points above U.S. rates, is a natural candidate for carry trade inflows. The managed exchange rate regime provides an additional attraction: the SBV‚Äôs implicit defense of the band reduces short-term volatility, increasing the Sharpe ratio of the carry position, until a band adjustment or devaluation erases accumulated gains in a single move.</p>
</section>
<section id="the-trilemma" class="level3" data-number="39.1.4">
<h3 data-number="39.1.4" class="anchored" data-anchor-id="the-trilemma"><span class="header-section-number">39.1.4</span> The Trilemma</h3>
<p><span class="citation" data-cites="obstfeld2005trilemma">Obstfeld, Shambaugh, and Taylor (<a href="references.html#ref-obstfeld2005trilemma" role="doc-biblioref">2005</a>)</span> formalize the ‚Äúimpossible trinity‚Äù: a country cannot simultaneously maintain (i) a fixed exchange rate, (ii) an independent monetary policy, and (iii) free capital mobility. Vietnam navigates this trilemma by maintaining partial capital controls alongside its managed float, allowing some degree of monetary policy independence. Understanding where Vietnam sits on the trilemma at any given time is essential for interpreting exchange rate data: periods of tighter capital controls produce artificially low exchange rate volatility that does not reflect true economic uncertainty.</p>
</section>
</section>
<section id="sec-fx-regime" class="level2" data-number="39.2">
<h2 data-number="39.2" class="anchored" data-anchor-id="sec-fx-regime"><span class="header-section-number">39.2</span> The VND Exchange Rate Regime</h2>
<section id="historical-evolution" class="level3" data-number="39.2.1">
<h3 data-number="39.2.1" class="anchored" data-anchor-id="historical-evolution"><span class="header-section-number">39.2.1</span> Historical Evolution</h3>
<p>The VND/USD exchange rate has evolved through several distinct phases:</p>
<div id="tbl-regime-history" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-regime-history-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;39.1: Evolution of the VND/USD exchange rate regime.
</figcaption>
<div aria-describedby="tbl-regime-history-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th>Period</th>
<th>Regime</th>
<th>Key Features</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Pre-1999</td>
<td>Narrow band</td>
<td>SBV set the rate with minimal flexibility</td>
</tr>
<tr class="even">
<td>1999-2007</td>
<td>Gradual crawl</td>
<td>Slow, controlled depreciation (~1-2% per year)</td>
</tr>
<tr class="odd">
<td>2008-2011</td>
<td>Crisis adjustments</td>
<td>Multiple discrete devaluations (2008, 2010, 2011)</td>
</tr>
<tr class="even">
<td>2012-2015</td>
<td>Stabilization</td>
<td>Tight band, rare adjustments, building reserves</td>
</tr>
<tr class="odd">
<td>2016-present</td>
<td>Reference rate mechanism</td>
<td>Daily reference rate based on a basket; <span class="math inline">\(\pm\)</span> 3% band</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>The 2016 reform, shifting from a fixed peg to a daily reference rate influenced by a currency basket, was a significant structural change. The reference rate now incorporates the previous day‚Äôs closing interbank rate, supply-demand conditions, and movements in currencies of major trading partners (USD, EUR, CNY, JPY, KRW).</p>
</section>
<section id="band-mechanics" class="level3" data-number="39.2.2">
<h3 data-number="39.2.2" class="anchored" data-anchor-id="band-mechanics"><span class="header-section-number">39.2.2</span> Band Mechanics</h3>
<p>The SBV announces a daily reference rate each morning. Commercial banks may quote rates within a band around this reference. The interbank market operates with a narrower <span class="math inline">\(\pm\)</span> 3% band. When the spot rate approaches the band ceiling, the SBV may intervene by selling USD from reserves, widening the band, or adjusting the reference rate.</p>
<p>This regime creates distinctive statistical properties:</p>
<ol type="1">
<li><strong>Return clustering near zero:</strong> On most days, the VND/USD rate barely moves, producing a spike at zero in the return distribution.</li>
<li><strong>Discrete jumps:</strong> Reference rate adjustments create large single-day moves that appear as outliers.</li>
<li><strong>Bounded volatility:</strong> The band constrains daily moves, producing a return distribution with thinner tails than a freely floating currency.</li>
<li><strong>Asymmetric adjustment:</strong> Depreciation pressure (VND weakening) is more common than appreciation, reflecting persistent inflation differentials.</li>
</ol>
</section>
</section>
<section id="sec-fx-data" class="level2" data-number="39.3">
<h2 data-number="39.3" class="anchored" data-anchor-id="sec-fx-data"><span class="header-section-number">39.3</span> Data Construction</h2>
<section id="loading-libraries" class="level3" data-number="39.3.1">
<h3 data-number="39.3.1" class="anchored" data-anchor-id="loading-libraries"><span class="header-section-number">39.3.1</span> Loading Libraries</h3>
<div id="setup" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.formula.api <span class="im">as</span> smf</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy <span class="im">import</span> stats</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> arch <span class="im">import</span> arch_model</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> linearmodels.panel <span class="im">import</span> PanelOLS</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> warnings</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>warnings.filterwarnings(<span class="st">'ignore'</span>)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>plt.rcParams.update({</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">'figure.figsize'</span>: (<span class="dv">12</span>, <span class="dv">6</span>),</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">'figure.dpi'</span>: <span class="dv">150</span>,</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">'font.size'</span>: <span class="dv">11</span>,</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">'axes.spines.top'</span>: <span class="va">False</span>,</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">'axes.spines.right'</span>: <span class="va">False</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="retrieving-exchange-rate-data" class="level3" data-number="39.3.2">
<h3 data-number="39.3.2" class="anchored" data-anchor-id="retrieving-exchange-rate-data"><span class="header-section-number">39.3.2</span> Retrieving Exchange Rate Data</h3>
<p>We extract daily spot rates for the VND against all major currencies, along with the SBV reference rate and forward rates where available.</p>
<div id="data-load" class="cell" data-execution_count="2">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datacore <span class="im">import</span> DataCoreClient</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>client <span class="op">=</span> DataCoreClient()</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Spot exchange rates: VND per unit of foreign currency</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>fx_spot <span class="op">=</span> client.get_exchange_rates(</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    base_currency<span class="op">=</span><span class="st">'VND'</span>,</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    quote_currencies<span class="op">=</span>[<span class="st">'USD'</span>, <span class="st">'EUR'</span>, <span class="st">'JPY'</span>, <span class="st">'CNY'</span>, <span class="st">'KRW'</span>,</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>                      <span class="st">'SGD'</span>, <span class="st">'THB'</span>, <span class="st">'GBP'</span>, <span class="st">'AUD'</span>],</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    start_date<span class="op">=</span><span class="st">'2005-01-01'</span>,</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    end_date<span class="op">=</span><span class="st">'2024-12-31'</span>,</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    fields<span class="op">=</span>[<span class="st">'date'</span>, <span class="st">'from_currency'</span>, <span class="st">'to_currency'</span>, <span class="st">'rate'</span>,</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>            <span class="st">'bid'</span>, <span class="st">'ask'</span>, <span class="st">'reference_rate'</span>]</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Forward rates (VND/USD)</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>fx_forward <span class="op">=</span> client.get_fx_forwards(</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>    pair<span class="op">=</span><span class="st">'VND/USD'</span>,</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>    start_date<span class="op">=</span><span class="st">'2010-01-01'</span>,</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>    end_date<span class="op">=</span><span class="st">'2024-12-31'</span>,</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>    tenors<span class="op">=</span>[<span class="st">'1M'</span>, <span class="st">'3M'</span>, <span class="st">'6M'</span>, <span class="st">'12M'</span>],</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>    fields<span class="op">=</span>[<span class="st">'date'</span>, <span class="st">'tenor'</span>, <span class="st">'forward_rate'</span>, <span class="st">'forward_points'</span>]</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Interest rates for parity tests</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>interest_rates <span class="op">=</span> client.get_interest_rates(</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>    countries<span class="op">=</span>[<span class="st">'VN'</span>, <span class="st">'US'</span>],</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>    start_date<span class="op">=</span><span class="st">'2005-01-01'</span>,</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>    end_date<span class="op">=</span><span class="st">'2024-12-31'</span>,</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>    instruments<span class="op">=</span>[<span class="st">'interbank_overnight'</span>, <span class="st">'deposit_3m'</span>,</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'government_bond_1y'</span>, <span class="st">'government_bond_10y'</span>]</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Spot observations: </span><span class="sc">{</span>fx_spot<span class="sc">.</span>shape[<span class="dv">0</span>]<span class="sc">:,}</span><span class="ss">"</span>)</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Forward observations: </span><span class="sc">{</span>fx_forward<span class="sc">.</span>shape[<span class="dv">0</span>]<span class="sc">:,}</span><span class="ss">"</span>)</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Interest rate observations: </span><span class="sc">{</span>interest_rates<span class="sc">.</span>shape[<span class="dv">0</span>]<span class="sc">:,}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="constructing-the-vndusd-time-series" class="level3" data-number="39.3.3">
<h3 data-number="39.3.3" class="anchored" data-anchor-id="constructing-the-vndusd-time-series"><span class="header-section-number">39.3.3</span> Constructing the VND/USD Time Series</h3>
<p>We focus primarily on the VND/USD pair, the dominant bilateral rate for Vietnam, while using other pairs for cross-rate analysis.</p>
<div id="construct-vnd-usd" class="cell" data-execution_count="3">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter VND/USD</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>vnd_usd <span class="op">=</span> fx_spot[</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    (fx_spot[<span class="st">'from_currency'</span>] <span class="op">==</span> <span class="st">'VND'</span>) <span class="op">&amp;</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    (fx_spot[<span class="st">'to_currency'</span>] <span class="op">==</span> <span class="st">'USD'</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>].copy()</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>vnd_usd[<span class="st">'date'</span>] <span class="op">=</span> pd.to_datetime(vnd_usd[<span class="st">'date'</span>])</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>vnd_usd <span class="op">=</span> vnd_usd.sort_values(<span class="st">'date'</span>).set_index(<span class="st">'date'</span>)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Log returns: positive = VND depreciation, negative = VND appreciation</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>vnd_usd[<span class="st">'log_return'</span>] <span class="op">=</span> np.log(vnd_usd[<span class="st">'rate'</span>] <span class="op">/</span> vnd_usd[<span class="st">'rate'</span>].shift(<span class="dv">1</span>))</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Bid-ask spread as fraction of mid rate</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>vnd_usd[<span class="st">'spread_pct'</span>] <span class="op">=</span> (vnd_usd[<span class="st">'ask'</span>] <span class="op">-</span> vnd_usd[<span class="st">'bid'</span>]) <span class="op">/</span> vnd_usd[<span class="st">'rate'</span>]</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Distance from reference rate (in %)</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>vnd_usd[<span class="st">'deviation_from_ref'</span>] <span class="op">=</span> (</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>    (vnd_usd[<span class="st">'rate'</span>] <span class="op">-</span> vnd_usd[<span class="st">'reference_rate'</span>])</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">/</span> vnd_usd[<span class="st">'reference_rate'</span>] <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Rolling volatility measures</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>vnd_usd[<span class="st">'vol_30d'</span>] <span class="op">=</span> vnd_usd[<span class="st">'log_return'</span>].rolling(<span class="dv">30</span>).std() <span class="op">*</span> np.sqrt(<span class="dv">252</span>)</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>vnd_usd[<span class="st">'vol_90d'</span>] <span class="op">=</span> vnd_usd[<span class="st">'log_return'</span>].rolling(<span class="dv">90</span>).std() <span class="op">*</span> np.sqrt(<span class="dv">252</span>)</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>vnd_usd <span class="op">=</span> vnd_usd.dropna(subset<span class="op">=</span>[<span class="st">'log_return'</span>])</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"VND/USD series: </span><span class="sc">{</span><span class="bu">len</span>(vnd_usd)<span class="sc">}</span><span class="ss"> daily observations"</span>)</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Date range: </span><span class="sc">{</span>vnd_usd<span class="sc">.</span>index<span class="sc">.</span><span class="bu">min</span>()<span class="sc">}</span><span class="ss"> to </span><span class="sc">{</span>vnd_usd<span class="sc">.</span>index<span class="sc">.</span><span class="bu">max</span>()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Summary of daily log returns:"</span>)</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(vnd_usd[<span class="st">'log_return'</span>].describe().<span class="bu">round</span>(<span class="dv">6</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="multi-currency-panel" class="level3" data-number="39.3.4">
<h3 data-number="39.3.4" class="anchored" data-anchor-id="multi-currency-panel"><span class="header-section-number">39.3.4</span> Multi-Currency Panel</h3>
<p>For cross-rate analysis and ASEAN comparisons, we construct a panel of log returns for all currency pairs.</p>
<div id="multi-currency" class="cell" data-execution_count="4">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pivot to wide format: one column per currency pair</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>fx_wide <span class="op">=</span> fx_spot.pivot_table(</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    index<span class="op">=</span><span class="st">'date'</span>, columns<span class="op">=</span><span class="st">'to_currency'</span>, values<span class="op">=</span><span class="st">'rate'</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>fx_wide.index <span class="op">=</span> pd.to_datetime(fx_wide.index)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>fx_wide <span class="op">=</span> fx_wide.sort_index()</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute log returns for all pairs</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>fx_returns <span class="op">=</span> np.log(fx_wide <span class="op">/</span> fx_wide.shift(<span class="dv">1</span>)).dropna()</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary statistics</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>fx_summary <span class="op">=</span> pd.DataFrame({</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Mean (ann.)'</span>: fx_returns.mean() <span class="op">*</span> <span class="dv">252</span>,</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Vol (ann.)'</span>: fx_returns.std() <span class="op">*</span> np.sqrt(<span class="dv">252</span>),</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Skewness'</span>: fx_returns.skew(),</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Kurtosis'</span>: fx_returns.kurtosis(),</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Min'</span>: fx_returns.<span class="bu">min</span>(),</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Max'</span>: fx_returns.<span class="bu">max</span>()</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"VND Cross-Rate Return Statistics (Daily):"</span>)</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(fx_summary.<span class="bu">round</span>(<span class="dv">4</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
</section>
<section id="sec-fx-statistics" class="level2" data-number="39.4">
<h2 data-number="39.4" class="anchored" data-anchor-id="sec-fx-statistics"><span class="header-section-number">39.4</span> Statistical Properties of VND Returns</h2>
<section id="return-distribution" class="level3" data-number="39.4.1">
<h3 data-number="39.4.1" class="anchored" data-anchor-id="return-distribution"><span class="header-section-number">39.4.1</span> Return Distribution</h3>
<p>The distribution of VND/USD log returns deviates sharply from normality. The managed float regime produces a return distribution that is leptokurtic (fat-tailed) and concentrated near zero, with occasional large discrete jumps from reference rate adjustments.</p>
<div id="fig-return-distribution" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="5">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-return-distribution-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">5</span>))</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Panel A: Histogram with normal overlay</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>returns <span class="op">=</span> vnd_usd[<span class="st">'log_return'</span>]</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>mu, sigma <span class="op">=</span> returns.mean(), returns.std()</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].hist(returns, bins<span class="op">=</span><span class="dv">100</span>, density<span class="op">=</span><span class="va">True</span>, color<span class="op">=</span><span class="st">'#2C5F8A'</span>,</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>             alpha<span class="op">=</span><span class="fl">0.7</span>, edgecolor<span class="op">=</span><span class="st">'white'</span>, label<span class="op">=</span><span class="st">'Empirical'</span>)</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>x_range <span class="op">=</span> np.linspace(returns.<span class="bu">min</span>(), returns.<span class="bu">max</span>(), <span class="dv">200</span>)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].plot(x_range, stats.norm.pdf(x_range, mu, sigma),</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>             color<span class="op">=</span><span class="st">'#C0392B'</span>, linewidth<span class="op">=</span><span class="dv">2</span>, label<span class="op">=</span><span class="st">'Normal fit'</span>)</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_xlabel(<span class="st">'Daily Log Return'</span>)</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_ylabel(<span class="st">'Density'</span>)</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">'Panel A: Return Distribution'</span>)</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].legend()</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Panel B: QQ plot</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>stats.probplot(returns, dist<span class="op">=</span><span class="st">'norm'</span>, plot<span class="op">=</span>axes[<span class="dv">1</span>])</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">'Panel B: Normal Q-Q Plot'</span>)</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].get_lines()[<span class="dv">0</span>].set_color(<span class="st">'#2C5F8A'</span>)</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].get_lines()[<span class="dv">0</span>].set_markersize(<span class="dv">3</span>)</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].get_lines()[<span class="dv">1</span>].set_color(<span class="st">'#C0392B'</span>)</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Formal tests</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>jb_stat, jb_p <span class="op">=</span> stats.jarque_bera(returns)</span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Jarque-Bera test: statistic = </span><span class="sc">{</span>jb_stat<span class="sc">:.1f}</span><span class="ss">, p-value = </span><span class="sc">{</span>jb_p<span class="sc">:.2e}</span><span class="ss">"</span>)</span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Skewness: </span><span class="sc">{</span>returns<span class="sc">.</span>skew()<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Excess Kurtosis: </span><span class="sc">{</span>returns<span class="sc">.</span>kurtosis()<span class="sc">:.4f}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-return-distribution-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;39.1
</figcaption>
</figure>
</div>
</section>
<section id="autocorrelation-structure" class="level3" data-number="39.4.2">
<h3 data-number="39.4.2" class="anchored" data-anchor-id="autocorrelation-structure"><span class="header-section-number">39.4.2</span> Autocorrelation Structure</h3>
<p>Freely floating exchange rate returns are approximately uncorrelated (consistent with the random walk result of <span class="citation" data-cites="meese1983empirical">Meese and Rogoff (<a href="references.html#ref-meese1983empirical" role="doc-biblioref">1983</a>)</span>). Managed exchange rates, however, may exhibit serial correlation because the central bank smooths adjustments over multiple days.</p>
<div id="fig-autocorrelation" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="6">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-autocorrelation-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> statsmodels.graphics.tsaplots <span class="im">import</span> plot_acf</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">2</span>, <span class="dv">1</span>, figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">8</span>))</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co"># ACF of returns</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>plot_acf(vnd_usd[<span class="st">'log_return'</span>].dropna(), lags<span class="op">=</span><span class="dv">40</span>, ax<span class="op">=</span>axes[<span class="dv">0</span>],</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>         color<span class="op">=</span><span class="st">'#2C5F8A'</span>, vlines_kwargs<span class="op">=</span>{<span class="st">'color'</span>: <span class="st">'#2C5F8A'</span>})</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">'Autocorrelation of Daily Returns'</span>)</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_ylabel(<span class="st">'ACF'</span>)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="co"># ACF of squared returns (volatility clustering)</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>plot_acf(vnd_usd[<span class="st">'log_return'</span>].dropna() <span class="op">**</span> <span class="dv">2</span>, lags<span class="op">=</span><span class="dv">40</span>, ax<span class="op">=</span>axes[<span class="dv">1</span>],</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>         color<span class="op">=</span><span class="st">'#C0392B'</span>, vlines_kwargs<span class="op">=</span>{<span class="st">'color'</span>: <span class="st">'#C0392B'</span>})</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">'Autocorrelation of Squared Returns (Volatility Clustering)'</span>)</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_ylabel(<span class="st">'ACF'</span>)</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Ljung-Box test</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> statsmodels.stats.diagnostic <span class="im">import</span> acorr_ljungbox</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>lb_returns <span class="op">=</span> acorr_ljungbox(returns, lags<span class="op">=</span><span class="dv">10</span>, return_df<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>lb_squared <span class="op">=</span> acorr_ljungbox(returns <span class="op">**</span> <span class="dv">2</span>, lags<span class="op">=</span><span class="dv">10</span>, return_df<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Ljung-Box Test (Returns, lag 10):"</span>)</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Statistic: </span><span class="sc">{</span>lb_returns[<span class="st">'lb_stat'</span>]<span class="sc">.</span>iloc[<span class="op">-</span><span class="dv">1</span>]<span class="sc">:.2f}</span><span class="ss">, "</span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>      <span class="ss">f"p-value: </span><span class="sc">{</span>lb_returns[<span class="st">'lb_pvalue'</span>]<span class="sc">.</span>iloc[<span class="op">-</span><span class="dv">1</span>]<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Ljung-Box Test (Squared Returns, lag 10):"</span>)</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Statistic: </span><span class="sc">{</span>lb_squared[<span class="st">'lb_stat'</span>]<span class="sc">.</span>iloc[<span class="op">-</span><span class="dv">1</span>]<span class="sc">:.2f}</span><span class="ss">, "</span></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>      <span class="ss">f"p-value: </span><span class="sc">{</span>lb_squared[<span class="st">'lb_pvalue'</span>]<span class="sc">.</span>iloc[<span class="op">-</span><span class="dv">1</span>]<span class="sc">:.4f}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-autocorrelation-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;39.2
</figcaption>
</figure>
</div>
</section>
<section id="reference-rate-adjustments-and-structural-breaks" class="level3" data-number="39.4.3">
<h3 data-number="39.4.3" class="anchored" data-anchor-id="reference-rate-adjustments-and-structural-breaks"><span class="header-section-number">39.4.3</span> Reference Rate Adjustments and Structural Breaks</h3>
<p>The SBV periodically adjusts the reference rate or the trading band width, events that create structural breaks in the exchange rate series. Identifying these breaks is essential for accurate modeling.</p>
<div id="fig-structural-breaks" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="7">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-structural-breaks-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Detect large daily moves (proxy for policy adjustments)</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>threshold <span class="op">=</span> vnd_usd[<span class="st">'log_return'</span>].std() <span class="op">*</span> <span class="dv">3</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>large_moves <span class="op">=</span> vnd_usd[vnd_usd[<span class="st">'log_return'</span>].<span class="bu">abs</span>() <span class="op">&gt;</span> threshold].copy()</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Known major adjustment dates (approximate)</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>policy_events <span class="op">=</span> pd.DataFrame({</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">'date'</span>: pd.to_datetime([</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">'2008-06-10'</span>, <span class="st">'2008-12-25'</span>, <span class="st">'2009-11-25'</span>,</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">'2010-02-11'</span>, <span class="st">'2010-08-18'</span>, <span class="st">'2011-02-11'</span>,</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">'2011-08-10'</span>, <span class="st">'2015-08-12'</span>, <span class="st">'2015-08-19'</span>,</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">'2016-01-04'</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>    ]),</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">'event'</span>: [</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Band widened to +/-1%'</span>, <span class="st">'Band widened to +/-3%'</span>,</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Devaluation ~5.4%'</span>, <span class="st">'Devaluation ~3.4%'</span>,</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Band narrowed to +/-1%'</span>, <span class="st">'Devaluation ~8.5%'</span>,</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Band widened to +/-1%'</span>, <span class="st">'Devaluation ~1%'</span>,</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Devaluation ~1%'</span>, <span class="st">'New reference rate mechanism'</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">6</span>))</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>ax.plot(vnd_usd.index, vnd_usd[<span class="st">'rate'</span>], color<span class="op">=</span><span class="st">'#2C5F8A'</span>,</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>        linewidth<span class="op">=</span><span class="fl">1.5</span>, label<span class="op">=</span><span class="st">'VND/USD Spot'</span>)</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="st">'reference_rate'</span> <span class="kw">in</span> vnd_usd.columns:</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>    ref_clean <span class="op">=</span> vnd_usd[<span class="st">'reference_rate'</span>].dropna()</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(ref_clean) <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>        ax.plot(ref_clean.index, ref_clean, color<span class="op">=</span><span class="st">'#E67E22'</span>,</span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>                linewidth<span class="op">=</span><span class="dv">1</span>, alpha<span class="op">=</span><span class="fl">0.7</span>, label<span class="op">=</span><span class="st">'SBV Reference Rate'</span>)</span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Mark policy events</span></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> _, event <span class="kw">in</span> policy_events.iterrows():</span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> event[<span class="st">'date'</span>] <span class="op">&gt;=</span> vnd_usd.index.<span class="bu">min</span>():</span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>        rate_at_event <span class="op">=</span> vnd_usd[<span class="st">'rate'</span>].asof(event[<span class="st">'date'</span>])</span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>        ax.annotate(</span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>            event[<span class="st">'event'</span>],</span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a>            xy<span class="op">=</span>(event[<span class="st">'date'</span>], rate_at_event),</span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a>            xytext<span class="op">=</span>(<span class="dv">0</span>, <span class="dv">30</span>), textcoords<span class="op">=</span><span class="st">'offset points'</span>,</span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a>            fontsize<span class="op">=</span><span class="dv">7</span>, rotation<span class="op">=</span><span class="dv">45</span>, ha<span class="op">=</span><span class="st">'left'</span>,</span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>            arrowprops<span class="op">=</span><span class="bu">dict</span>(arrowstyle<span class="op">=</span><span class="st">'-&gt;'</span>, color<span class="op">=</span><span class="st">'#C0392B'</span>,</span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a>                           lw<span class="op">=</span><span class="fl">0.8</span>),</span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>            color<span class="op">=</span><span class="st">'#C0392B'</span></span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">'VND per USD'</span>)</span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">'VND/USD Exchange Rate with Policy Events'</span>)</span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a>ax.legend(loc<span class="op">=</span><span class="st">'upper left'</span>)</span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-structural-breaks-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;39.3
</figcaption>
</figure>
</div>
</section>
<section id="cross-currency-correlations" class="level3" data-number="39.4.4">
<h3 data-number="39.4.4" class="anchored" data-anchor-id="cross-currency-correlations"><span class="header-section-number">39.4.4</span> Cross-Currency Correlations</h3>
<p>Understanding how VND co-moves with other currencies is important for diversification and for identifying common drivers (e.g., USD strength affects all Asian currencies).</p>
<div id="fig-cross-correlations" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="8">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-cross-correlations-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Correlation matrix of daily returns</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>corr_matrix <span class="op">=</span> fx_returns.corr()</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">9</span>, <span class="dv">8</span>))</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>mask <span class="op">=</span> np.triu(np.ones_like(corr_matrix, dtype<span class="op">=</span><span class="bu">bool</span>), k<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>sns.heatmap(</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    corr_matrix, mask<span class="op">=</span>mask, annot<span class="op">=</span><span class="va">True</span>, fmt<span class="op">=</span><span class="st">'.2f'</span>,</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    cmap<span class="op">=</span><span class="st">'RdBu_r'</span>, center<span class="op">=</span><span class="dv">0</span>, vmin<span class="op">=-</span><span class="dv">1</span>, vmax<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    square<span class="op">=</span><span class="va">True</span>, linewidths<span class="op">=</span><span class="fl">0.5</span>, ax<span class="op">=</span>ax,</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    cbar_kws<span class="op">=</span>{<span class="st">'label'</span>: <span class="st">'Correlation'</span>}</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">'Cross-Rate Return Correlations (VND Base)'</span>)</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-cross-correlations-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;39.4
</figcaption>
</figure>
</div>
</section>
</section>
<section id="sec-fx-parity" class="level2" data-number="39.5">
<h2 data-number="39.5" class="anchored" data-anchor-id="sec-fx-parity"><span class="header-section-number">39.5</span> Interest Rate Parity Tests</h2>
<section id="testing-covered-interest-rate-parity" class="level3" data-number="39.5.1">
<h3 data-number="39.5.1" class="anchored" data-anchor-id="testing-covered-interest-rate-parity"><span class="header-section-number">39.5.1</span> Testing Covered Interest Rate Parity</h3>
<p>CIP deviations are measured as the gap between the forward premium and the interest rate differential:</p>
<p><span id="eq-cip-deviation"><span class="math display">\[
\text{CIP Deviation}_t = f_{t,k} - s_t - (r^{VND}_{t,k} - r^{USD}_{t,k})
\tag{39.3}\]</span></span></p>
<p>where <span class="math inline">\(f_{t,k} = \ln F_{t,t+k}\)</span> and <span class="math inline">\(s_t = \ln S_t\)</span> are log forward and spot rates. Under exact CIP, this deviation is zero.</p>
<div id="cip-test" class="cell" data-execution_count="9">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge spot, forward, and interest rate data</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>vnd_usd_monthly <span class="op">=</span> vnd_usd[<span class="st">'rate'</span>].resample(<span class="st">'M'</span>).last().to_frame(<span class="st">'spot'</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>vnd_usd_monthly.index <span class="op">=</span> vnd_usd_monthly.index.to_period(<span class="st">'M'</span>).to_timestamp()</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Forward rates (3-month tenor)</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>fwd_3m <span class="op">=</span> fx_forward[fx_forward[<span class="st">'tenor'</span>] <span class="op">==</span> <span class="st">'3M'</span>].copy()</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>fwd_3m[<span class="st">'date'</span>] <span class="op">=</span> pd.to_datetime(fwd_3m[<span class="st">'date'</span>])</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>fwd_3m <span class="op">=</span> fwd_3m.set_index(<span class="st">'date'</span>).resample(<span class="st">'M'</span>).last()</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Interest rate differential</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>vn_rates <span class="op">=</span> interest_rates[</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    (interest_rates[<span class="st">'country'</span>] <span class="op">==</span> <span class="st">'VN'</span>) <span class="op">&amp;</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>    (interest_rates[<span class="st">'instrument'</span>] <span class="op">==</span> <span class="st">'deposit_3m'</span>)</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>].set_index(<span class="st">'date'</span>)[<span class="st">'rate'</span>].resample(<span class="st">'M'</span>).last()</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>us_rates <span class="op">=</span> interest_rates[</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>    (interest_rates[<span class="st">'country'</span>] <span class="op">==</span> <span class="st">'US'</span>) <span class="op">&amp;</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>    (interest_rates[<span class="st">'instrument'</span>] <span class="op">==</span> <span class="st">'deposit_3m'</span>)</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>].set_index(<span class="st">'date'</span>)[<span class="st">'rate'</span>].resample(<span class="st">'M'</span>).last()</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Align and compute CIP deviation</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>cip_data <span class="op">=</span> pd.DataFrame({</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>    <span class="st">'spot'</span>: vnd_usd_monthly[<span class="st">'spot'</span>],</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>    <span class="st">'forward'</span>: fwd_3m[<span class="st">'forward_rate'</span>],</span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>    <span class="st">'r_vnd'</span>: vn_rates <span class="op">/</span> <span class="dv">100</span>,</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>    <span class="st">'r_usd'</span>: us_rates <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>}).dropna()</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a><span class="co"># CIP deviation (annualized, in basis points)</span></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>cip_data[<span class="st">'log_spot'</span>] <span class="op">=</span> np.log(cip_data[<span class="st">'spot'</span>])</span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>cip_data[<span class="st">'log_forward'</span>] <span class="op">=</span> np.log(cip_data[<span class="st">'forward'</span>])</span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>cip_data[<span class="st">'forward_premium'</span>] <span class="op">=</span> (</span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>    (cip_data[<span class="st">'log_forward'</span>] <span class="op">-</span> cip_data[<span class="st">'log_spot'</span>]) <span class="op">*</span> <span class="dv">4</span></span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>cip_data[<span class="st">'rate_diff'</span>] <span class="op">=</span> cip_data[<span class="st">'r_vnd'</span>] <span class="op">-</span> cip_data[<span class="st">'r_usd'</span>]</span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a>cip_data[<span class="st">'cip_deviation'</span>] <span class="op">=</span> (</span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>    (cip_data[<span class="st">'forward_premium'</span>] <span class="op">-</span> cip_data[<span class="st">'rate_diff'</span>]) <span class="op">*</span> <span class="dv">10000</span></span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"CIP Deviation Summary (basis points, annualized):"</span>)</span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(cip_data[<span class="st">'cip_deviation'</span>].describe().<span class="bu">round</span>(<span class="dv">1</span>))</span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Mean deviation: </span><span class="sc">{</span>cip_data[<span class="st">'cip_deviation'</span>]<span class="sc">.</span>mean()<span class="sc">:.1f}</span><span class="ss"> bps"</span>)</span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a>t_stat, p_val <span class="op">=</span> stats.ttest_1samp(cip_data[<span class="st">'cip_deviation'</span>].dropna(), <span class="dv">0</span>)</span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"One-sample t-test: t = </span><span class="sc">{</span>t_stat<span class="sc">:.2f}</span><span class="ss">, p = </span><span class="sc">{</span>p_val<span class="sc">:.4f}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="fig-cip-deviation" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="10">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-cip-deviation-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">2</span>, <span class="dv">1</span>, figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">8</span>), height_ratios<span class="op">=</span>[<span class="dv">2</span>, <span class="dv">1</span>])</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Panel A: CIP deviation time series</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].fill_between(</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    cip_data.index, <span class="dv">0</span>, cip_data[<span class="st">'cip_deviation'</span>],</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    where<span class="op">=</span>cip_data[<span class="st">'cip_deviation'</span>] <span class="op">&gt;</span> <span class="dv">0</span>,</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">'#C0392B'</span>, alpha<span class="op">=</span><span class="fl">0.4</span>, label<span class="op">=</span><span class="st">'Positive (VND forward expensive)'</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].fill_between(</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    cip_data.index, <span class="dv">0</span>, cip_data[<span class="st">'cip_deviation'</span>],</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    where<span class="op">=</span>cip_data[<span class="st">'cip_deviation'</span>] <span class="op">&lt;=</span> <span class="dv">0</span>,</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">'#27AE60'</span>, alpha<span class="op">=</span><span class="fl">0.4</span>, label<span class="op">=</span><span class="st">'Negative'</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].axhline(y<span class="op">=</span><span class="dv">0</span>, color<span class="op">=</span><span class="st">'black'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_ylabel(<span class="st">'CIP Deviation (bps)'</span>)</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">'Panel A: CIP Deviations for VND/USD'</span>)</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].legend()</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Panel B: Interest rate differential</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].plot(cip_data.index, cip_data[<span class="st">'r_vnd'</span>] <span class="op">*</span> <span class="dv">100</span>,</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>             color<span class="op">=</span><span class="st">'#C0392B'</span>, label<span class="op">=</span><span class="st">'Vietnam 3M'</span>)</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].plot(cip_data.index, cip_data[<span class="st">'r_usd'</span>] <span class="op">*</span> <span class="dv">100</span>,</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>             color<span class="op">=</span><span class="st">'#2C5F8A'</span>, label<span class="op">=</span><span class="st">'US 3M'</span>)</span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_ylabel(<span class="st">'Interest Rate (%)'</span>)</span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_xlabel(<span class="st">'Date'</span>)</span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">'Panel B: Interest Rate Differential'</span>)</span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].legend()</span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-cip-deviation-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;39.5
</figcaption>
</figure>
</div>
</section>
<section id="testing-uncovered-interest-rate-parity" class="level3" data-number="39.5.2">
<h3 data-number="39.5.2" class="anchored" data-anchor-id="testing-uncovered-interest-rate-parity"><span class="header-section-number">39.5.2</span> Testing Uncovered Interest Rate Parity</h3>
<p>The standard UIP regression is:</p>
<p><span id="eq-uip-regression"><span class="math display">\[
\Delta s_{t+k} = \alpha + \beta (r^{VND}_{t,k} - r^{USD}_{t,k}) + \varepsilon_{t+k}
\tag{39.4}\]</span></span></p>
<p>Under UIP, <span class="math inline">\(\alpha = 0\)</span> and <span class="math inline">\(\beta = 1\)</span>. The <span class="citation" data-cites="fama1984forward">Fama (<a href="references.html#ref-fama1984forward" role="doc-biblioref">1984</a>)</span> anomaly corresponds to <span class="math inline">\(\beta &lt; 1\)</span> (often <span class="math inline">\(\beta &lt; 0\)</span>), implying that high-interest-rate currencies appreciate rather than depreciate.</p>
<div id="uip-test" class="cell" data-execution_count="11">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Monthly exchange rate changes</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>cip_data[<span class="st">'delta_s'</span>] <span class="op">=</span> (</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    np.log(cip_data[<span class="st">'spot'</span>].shift(<span class="op">-</span><span class="dv">3</span>) <span class="op">/</span> cip_data[<span class="st">'spot'</span>])</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Fama regression</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>uip_data <span class="op">=</span> cip_data[[<span class="st">'delta_s'</span>, <span class="st">'rate_diff'</span>]].dropna()</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>uip_model <span class="op">=</span> sm.OLS(</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>    uip_data[<span class="st">'delta_s'</span>],</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>    sm.add_constant(uip_data[<span class="st">'rate_diff'</span>])</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>).fit(cov_type<span class="op">=</span><span class="st">'HAC'</span>, cov_kwds<span class="op">=</span>{<span class="st">'maxlags'</span>: <span class="dv">4</span>})</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"UIP (Fama) Regression: delta_s_{t+3m} = alpha + beta(r_VND - r_USD) + eps"</span>)</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">alpha = </span><span class="sc">{</span>uip_model<span class="sc">.</span>params[<span class="st">'const'</span>]<span class="sc">:.4f}</span><span class="ss"> "</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>      <span class="ss">f"(t = </span><span class="sc">{</span>uip_model<span class="sc">.</span>tvalues[<span class="st">'const'</span>]<span class="sc">:.2f}</span><span class="ss">)"</span>)</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"beta = </span><span class="sc">{</span>uip_model<span class="sc">.</span>params[<span class="st">'rate_diff'</span>]<span class="sc">:.4f}</span><span class="ss"> "</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>      <span class="ss">f"(t = </span><span class="sc">{</span>uip_model<span class="sc">.</span>tvalues[<span class="st">'rate_diff'</span>]<span class="sc">:.2f}</span><span class="ss">)"</span>)</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"R-squared = </span><span class="sc">{</span>uip_model<span class="sc">.</span>rsquared<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">H0: beta = 1 (Wald test):"</span>)</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>wald_stat <span class="op">=</span> ((uip_model.params[<span class="st">'rate_diff'</span>] <span class="op">-</span> <span class="dv">1</span>) <span class="op">/</span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>             uip_model.bse[<span class="st">'rate_diff'</span>]) <span class="op">**</span> <span class="dv">2</span></span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Chi2 = </span><span class="sc">{</span>wald_stat<span class="sc">:.2f}</span><span class="ss">, p = </span><span class="sc">{</span><span class="dv">1</span> <span class="op">-</span> stats<span class="sc">.</span>chi2<span class="sc">.</span>cdf(wald_stat, <span class="dv">1</span>)<span class="sc">:.4f}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Interpreting UIP Failures in Vietnam
</div>
</div>
<div class="callout-body-container callout-body">
<p>A managed exchange rate complicates UIP tests. When the SBV successfully defends the VND within a narrow band, realized exchange rate changes are artificially compressed regardless of interest rate differentials. The resulting beta estimate reflects the credibility of the peg as much as it reflects the risk premium. Periods of active SBV intervention should be treated separately from periods of relative flexibility.</p>
</div>
</div>
</section>
<section id="carry-trade-returns" class="level3" data-number="39.5.3">
<h3 data-number="39.5.3" class="anchored" data-anchor-id="carry-trade-returns"><span class="header-section-number">39.5.3</span> Carry Trade Returns</h3>
<p>We construct a simple VND carry trade strategy: borrow USD at the U.S. short rate, convert to VND, invest at the Vietnamese short rate, and convert back at maturity. The excess return is:</p>
<p><span id="eq-carry"><span class="math display">\[
\text{Carry}_{t \to t+k} = (r^{VND}_{t,k} - r^{USD}_{t,k}) - \Delta s_{t+k}
\tag{39.5}\]</span></span></p>
<p>A positive carry return means the interest rate differential more than compensated for any VND depreciation.</p>
<div id="carry-trade" class="cell" data-execution_count="12">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>carry <span class="op">=</span> cip_data.copy()</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>carry[<span class="st">'carry_return'</span>] <span class="op">=</span> carry[<span class="st">'rate_diff'</span>] <span class="op">/</span> <span class="dv">4</span> <span class="op">-</span> carry[<span class="st">'delta_s'</span>]</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>carry <span class="op">=</span> carry.dropna(subset<span class="op">=</span>[<span class="st">'carry_return'</span>])</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Annualize</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>ann_carry <span class="op">=</span> carry[<span class="st">'carry_return'</span>].mean() <span class="op">*</span> <span class="dv">4</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>ann_vol <span class="op">=</span> carry[<span class="st">'carry_return'</span>].std() <span class="op">*</span> <span class="dv">2</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>sharpe <span class="op">=</span> ann_carry <span class="op">/</span> ann_vol</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"VND/USD Carry Trade Performance (3-Month Rolling):"</span>)</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Annualized return: </span><span class="sc">{</span>ann_carry<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>ann_carry<span class="op">*</span><span class="dv">100</span><span class="sc">:.2f}</span><span class="ss">%)"</span>)</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Annualized volatility: </span><span class="sc">{</span>ann_vol<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>ann_vol<span class="op">*</span><span class="dv">100</span><span class="sc">:.2f}</span><span class="ss">%)"</span>)</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Sharpe ratio: </span><span class="sc">{</span>sharpe<span class="sc">:.2f}</span><span class="ss">"</span>)</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Skewness: </span><span class="sc">{</span>carry[<span class="st">'carry_return'</span>]<span class="sc">.</span>skew()<span class="sc">:.2f}</span><span class="ss">"</span>)</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Kurtosis: </span><span class="sc">{</span>carry[<span class="st">'carry_return'</span>]<span class="sc">.</span>kurtosis()<span class="sc">:.2f}</span><span class="ss">"</span>)</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Max quarterly loss: </span><span class="sc">{</span>carry[<span class="st">'carry_return'</span>]<span class="sc">.</span><span class="bu">min</span>()<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Max quarterly gain: </span><span class="sc">{</span>carry[<span class="st">'carry_return'</span>]<span class="sc">.</span><span class="bu">max</span>()<span class="sc">:.4f}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="fig-carry-cumulative" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="13">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-carry-cumulative-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">2</span>, <span class="dv">1</span>, figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">8</span>), height_ratios<span class="op">=</span>[<span class="dv">2</span>, <span class="dv">1</span>])</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Panel A: Cumulative return</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>cum_carry <span class="op">=</span> (<span class="dv">1</span> <span class="op">+</span> carry[<span class="st">'carry_return'</span>]).cumprod()</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].plot(carry.index, cum_carry, color<span class="op">=</span><span class="st">'#2C5F8A'</span>, linewidth<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].fill_between(carry.index, <span class="dv">1</span>, cum_carry,</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>                     where<span class="op">=</span>cum_carry <span class="op">&gt;</span> <span class="dv">1</span>, color<span class="op">=</span><span class="st">'#27AE60'</span>, alpha<span class="op">=</span><span class="fl">0.2</span>)</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].fill_between(carry.index, <span class="dv">1</span>, cum_carry,</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>                     where<span class="op">=</span>cum_carry <span class="op">&lt;</span> <span class="dv">1</span>, color<span class="op">=</span><span class="st">'#C0392B'</span>, alpha<span class="op">=</span><span class="fl">0.2</span>)</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].axhline(y<span class="op">=</span><span class="dv">1</span>, color<span class="op">=</span><span class="st">'gray'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_ylabel(<span class="st">'Cumulative Return (VND 1 invested)'</span>)</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">'Panel A: VND/USD Carry Trade Cumulative Return'</span>)</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Panel B: Quarterly returns</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].bar(carry.index, carry[<span class="st">'carry_return'</span>] <span class="op">*</span> <span class="dv">100</span>,</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>            color<span class="op">=</span>[<span class="st">'#27AE60'</span> <span class="cf">if</span> x <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">else</span> <span class="st">'#C0392B'</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>                   <span class="cf">for</span> x <span class="kw">in</span> carry[<span class="st">'carry_return'</span>]],</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>            alpha<span class="op">=</span><span class="fl">0.7</span>, width<span class="op">=</span><span class="dv">60</span>)</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].axhline(y<span class="op">=</span><span class="dv">0</span>, color<span class="op">=</span><span class="st">'black'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_ylabel(<span class="st">'Quarterly Return (%)'</span>)</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_xlabel(<span class="st">'Date'</span>)</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">'Panel B: Quarterly Carry Returns'</span>)</span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-carry-cumulative-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;39.6
</figcaption>
</figure>
</div>
</section>
</section>
<section id="sec-fx-volatility" class="level2" data-number="39.6">
<h2 data-number="39.6" class="anchored" data-anchor-id="sec-fx-volatility"><span class="header-section-number">39.6</span> Volatility Modeling</h2>
<section id="garch-estimation" class="level3" data-number="39.6.1">
<h3 data-number="39.6.1" class="anchored" data-anchor-id="garch-estimation"><span class="header-section-number">39.6.1</span> GARCH Estimation</h3>
<p>The strong autocorrelation in squared VND/USD returns (<a href="#fig-autocorrelation" class="quarto-xref">Figure&nbsp;<span>39.2</span></a>) motivates GARCH modeling <span class="citation" data-cites="bollerslev1986generalized">(<a href="references.html#ref-bollerslev1986generalized" role="doc-biblioref">Bollerslev 1986</a>)</span>. We estimate a GARCH(1,1) model for daily VND/USD log returns:</p>
<p><span id="eq-garch-mean"><span class="math display">\[
r_t = \mu + \varepsilon_t, \quad \varepsilon_t = \sigma_t z_t, \quad z_t \sim D(0,1)
\tag{39.6}\]</span></span></p>
<p><span id="eq-garch-var"><span class="math display">\[
\sigma_t^2 = \omega + \alpha \varepsilon_{t-1}^2 + \beta \sigma_{t-1}^2
\tag{39.7}\]</span></span></p>
<p>where <span class="math inline">\(\alpha\)</span> captures the ARCH effect (impact of yesterday‚Äôs shock on today‚Äôs variance) and <span class="math inline">\(\beta\)</span> captures persistence (how slowly volatility reverts to its long-run mean). The unconditional variance is <span class="math inline">\(\bar{\sigma}^2 = \omega / (1 - \alpha - \beta)\)</span>.</p>
<div id="garch-estimation" class="cell" data-execution_count="14">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>returns_bps <span class="op">=</span> vnd_usd[<span class="st">'log_return'</span>] <span class="op">*</span> <span class="dv">10000</span>  <span class="co"># Scale to basis points</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co"># GARCH(1,1) with normal innovations</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>garch_norm <span class="op">=</span> arch_model(</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    returns_bps, vol<span class="op">=</span><span class="st">'Garch'</span>, p<span class="op">=</span><span class="dv">1</span>, q<span class="op">=</span><span class="dv">1</span>, dist<span class="op">=</span><span class="st">'normal'</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>res_norm <span class="op">=</span> garch_norm.fit(disp<span class="op">=</span><span class="st">'off'</span>)</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="co"># GARCH(1,1) with Student-t innovations</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>garch_t <span class="op">=</span> arch_model(</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>    returns_bps, vol<span class="op">=</span><span class="st">'Garch'</span>, p<span class="op">=</span><span class="dv">1</span>, q<span class="op">=</span><span class="dv">1</span>, dist<span class="op">=</span><span class="st">'t'</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>res_t <span class="op">=</span> garch_t.fit(disp<span class="op">=</span><span class="st">'off'</span>)</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a><span class="co"># GJR-GARCH (asymmetric: depreciation shocks may increase vol more)</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>gjr <span class="op">=</span> arch_model(</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>    returns_bps, vol<span class="op">=</span><span class="st">'Garch'</span>, p<span class="op">=</span><span class="dv">1</span>, o<span class="op">=</span><span class="dv">1</span>, q<span class="op">=</span><span class="dv">1</span>, dist<span class="op">=</span><span class="st">'t'</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>res_gjr <span class="op">=</span> gjr.fit(disp<span class="op">=</span><span class="st">'off'</span>)</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"GARCH(1,1) - Normal Innovations"</span>)</span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(res_norm.summary().tables[<span class="dv">1</span>])</span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span> <span class="op">+</span> <span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"GARCH(1,1) - Student-t Innovations"</span>)</span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(res_t.summary().tables[<span class="dv">1</span>])</span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span> <span class="op">+</span> <span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"GJR-GARCH(1,1,1) - Student-t Innovations"</span>)</span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(res_gjr.summary().tables[<span class="dv">1</span>])</span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Model comparison</span></span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Model Comparison:"</span>)</span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span><span class="st">'Model'</span><span class="sc">:&lt;25}</span><span class="ss"> </span><span class="sc">{</span><span class="st">'AIC'</span><span class="sc">:&gt;10}</span><span class="ss"> </span><span class="sc">{</span><span class="st">'BIC'</span><span class="sc">:&gt;10}</span><span class="ss"> </span><span class="sc">{</span><span class="st">'LogLik'</span><span class="sc">:&gt;12}</span><span class="ss">"</span>)</span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> name, res <span class="kw">in</span> [(<span class="st">'GARCH-Normal'</span>, res_norm),</span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a>                   (<span class="st">'GARCH-t'</span>, res_t),</span>
<span id="cb14-41"><a href="#cb14-41" aria-hidden="true" tabindex="-1"></a>                   (<span class="st">'GJR-GARCH-t'</span>, res_gjr)]:</span>
<span id="cb14-42"><a href="#cb14-42" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>name<span class="sc">:&lt;25}</span><span class="ss"> </span><span class="sc">{</span>res<span class="sc">.</span>aic<span class="sc">:&gt;10.1f}</span><span class="ss"> </span><span class="sc">{</span>res<span class="sc">.</span>bic<span class="sc">:&gt;10.1f}</span><span class="ss"> "</span></span>
<span id="cb14-43"><a href="#cb14-43" aria-hidden="true" tabindex="-1"></a>          <span class="ss">f"</span><span class="sc">{</span>res<span class="sc">.</span>loglikelihood<span class="sc">:&gt;12.1f}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="fig-garch-volatility" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="15">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-garch-volatility-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">6</span>))</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co"># GARCH conditional volatility (annualized, from basis points)</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>cond_vol <span class="op">=</span> res_t.conditional_volatility <span class="op">/</span> <span class="dv">10000</span> <span class="op">*</span> np.sqrt(<span class="dv">252</span>)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>ax.plot(vnd_usd.index[<span class="op">-</span><span class="bu">len</span>(cond_vol):], cond_vol,</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>        color<span class="op">=</span><span class="st">'#C0392B'</span>, linewidth<span class="op">=</span><span class="fl">1.2</span>, alpha<span class="op">=</span><span class="fl">0.9</span>,</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>        label<span class="op">=</span><span class="st">'GARCH(1,1) Conditional Vol'</span>)</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>ax.plot(vnd_usd.index, vnd_usd[<span class="st">'vol_30d'</span>],</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>        color<span class="op">=</span><span class="st">'#2C5F8A'</span>, linewidth<span class="op">=</span><span class="dv">1</span>, alpha<span class="op">=</span><span class="fl">0.6</span>,</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>        label<span class="op">=</span><span class="st">'30-Day Realized Vol'</span>)</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">'Annualized Volatility'</span>)</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">'Date'</span>)</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">'VND/USD Volatility: GARCH vs Realized'</span>)</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>ax.legend()</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-garch-volatility-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;39.7
</figcaption>
</figure>
</div>
</section>
<section id="volatility-regime-identification" class="level3" data-number="39.6.2">
<h3 data-number="39.6.2" class="anchored" data-anchor-id="volatility-regime-identification"><span class="header-section-number">39.6.2</span> Volatility Regime Identification</h3>
<p>We classify the VND/USD market into volatility regimes using the GARCH conditional volatility:</p>
<div id="volatility-regimes" class="cell" data-execution_count="16">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge conditional volatility back to main DataFrame</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>vol_series <span class="op">=</span> pd.Series(</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    cond_vol.values,</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    index<span class="op">=</span>vnd_usd.index[<span class="op">-</span><span class="bu">len</span>(cond_vol):]</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>vnd_usd[<span class="st">'cond_vol'</span>] <span class="op">=</span> vol_series</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Classify regimes based on percentiles</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>vnd_usd[<span class="st">'vol_regime'</span>] <span class="op">=</span> pd.cut(</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>    vnd_usd[<span class="st">'cond_vol'</span>],</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>    bins<span class="op">=</span>[<span class="dv">0</span>, vnd_usd[<span class="st">'cond_vol'</span>].quantile(<span class="fl">0.33</span>),</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>          vnd_usd[<span class="st">'cond_vol'</span>].quantile(<span class="fl">0.67</span>), np.inf],</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>    labels<span class="op">=</span>[<span class="st">'Low'</span>, <span class="st">'Medium'</span>, <span class="st">'High'</span>]</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Regime statistics</span></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>regime_stats <span class="op">=</span> (</span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>    vnd_usd.groupby(<span class="st">'vol_regime'</span>)</span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>    .agg(</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>        n_days<span class="op">=</span>(<span class="st">'log_return'</span>, <span class="st">'count'</span>),</span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>        mean_return<span class="op">=</span>(<span class="st">'log_return'</span>, <span class="kw">lambda</span> x: x.mean() <span class="op">*</span> <span class="dv">252</span>),</span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>        volatility<span class="op">=</span>(<span class="st">'log_return'</span>, <span class="kw">lambda</span> x: x.std() <span class="op">*</span> np.sqrt(<span class="dv">252</span>)),</span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>        mean_spread<span class="op">=</span>(<span class="st">'spread_pct'</span>, <span class="st">'mean'</span>),</span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>        skewness<span class="op">=</span>(<span class="st">'log_return'</span>, <span class="st">'skew'</span>)</span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">round</span>(<span class="dv">4</span>)</span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Volatility Regime Characteristics:"</span>)</span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(regime_stats)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="fig-regime-scatter" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="17">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-regime-scatter-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>colors_regime <span class="op">=</span> {<span class="st">'Low'</span>: <span class="st">'#27AE60'</span>, <span class="st">'Medium'</span>: <span class="st">'#F1C40F'</span>, <span class="st">'High'</span>: <span class="st">'#C0392B'</span>}</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> regime <span class="kw">in</span> [<span class="st">'Low'</span>, <span class="st">'Medium'</span>, <span class="st">'High'</span>]:</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    subset <span class="op">=</span> vnd_usd[vnd_usd[<span class="st">'vol_regime'</span>] <span class="op">==</span> regime]</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    ax.scatter(</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>        subset[<span class="st">'cond_vol'</span>] <span class="op">*</span> <span class="dv">100</span>,</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>        subset[<span class="st">'log_return'</span>] <span class="op">*</span> <span class="dv">100</span>,</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>        color<span class="op">=</span>colors_regime[regime], alpha<span class="op">=</span><span class="fl">0.3</span>, s<span class="op">=</span><span class="dv">8</span>, label<span class="op">=</span>regime</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>ax.axhline(y<span class="op">=</span><span class="dv">0</span>, color<span class="op">=</span><span class="st">'gray'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">'Conditional Volatility (% annualized)'</span>)</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">'Daily Return (%)'</span>)</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">'VND/USD Returns by Volatility Regime'</span>)</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>ax.legend(title<span class="op">=</span><span class="st">'Regime'</span>)</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-regime-scatter-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;39.8
</figcaption>
</figure>
</div>
</section>
</section>
<section id="sec-fx-exposure" class="level2" data-number="39.7">
<h2 data-number="39.7" class="anchored" data-anchor-id="sec-fx-exposure"><span class="header-section-number">39.7</span> Exchange Rate Exposure of Vietnamese Firms</h2>
<section id="the-jorion-framework" class="level3" data-number="39.7.1">
<h3 data-number="39.7.1" class="anchored" data-anchor-id="the-jorion-framework"><span class="header-section-number">39.7.1</span> The Jorion Framework</h3>
<p><span class="citation" data-cites="jorion1990exchange">Jorion (<a href="references.html#ref-jorion1990exchange" role="doc-biblioref">1990</a>)</span> introduced the standard two-factor model for estimating firm-level exchange rate exposure:</p>
<p><span id="eq-jorion"><span class="math display">\[
R_{i,t} = \alpha_i + \beta_i^{MKT} R_{m,t} + \gamma_i \Delta s_t + \varepsilon_{i,t}
\tag{39.8}\]</span></span></p>
<p>where <span class="math inline">\(R_{i,t}\)</span> is the stock return of firm <span class="math inline">\(i\)</span>, <span class="math inline">\(R_{m,t}\)</span> is the market return, and <span class="math inline">\(\Delta s_t\)</span> is the exchange rate change (VND/USD log return, where positive = VND depreciation). The coefficient <span class="math inline">\(\gamma_i\)</span> is the <strong>residual exchange rate exposure</strong>, the sensitivity of firm <span class="math inline">\(i\)</span>‚Äôs returns to currency movements after controlling for market-wide effects.</p>
<p>A positive <span class="math inline">\(\gamma_i\)</span> means the firm benefits from VND depreciation (typical for exporters), while a negative <span class="math inline">\(\gamma_i\)</span> means the firm is hurt by depreciation (typical for importers or firms with USD-denominated debt).</p>
<div id="exposure-estimation" class="cell" data-execution_count="18">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load equity returns</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>equity <span class="op">=</span> client.get_monthly_returns(</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    exchanges<span class="op">=</span>[<span class="st">'HOSE'</span>, <span class="st">'HNX'</span>],</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    start_date<span class="op">=</span><span class="st">'2012-01-01'</span>,</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    end_date<span class="op">=</span><span class="st">'2024-12-31'</span>,</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    fields<span class="op">=</span>[<span class="st">'ticker'</span>, <span class="st">'month_end'</span>, <span class="st">'monthly_return'</span>, <span class="st">'market_cap'</span>]</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Market return (VW)</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>market_ret <span class="op">=</span> (</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>    equity</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">'month_end'</span>)</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">apply</span>(<span class="kw">lambda</span> g: np.average(g[<span class="st">'monthly_return'</span>],</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>                                 weights<span class="op">=</span>g[<span class="st">'market_cap'</span>]))</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>    .reset_index(name<span class="op">=</span><span class="st">'market_return'</span>)</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Monthly VND/USD returns</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>fx_monthly <span class="op">=</span> (</span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>    vnd_usd[<span class="st">'log_return'</span>]</span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>    .resample(<span class="st">'M'</span>).<span class="bu">sum</span>()</span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>    .to_frame(<span class="st">'fx_return'</span>)</span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>fx_monthly.index <span class="op">=</span> fx_monthly.index.to_period(<span class="st">'M'</span>).to_timestamp()</span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge all data</span></span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a>exposure_data <span class="op">=</span> (</span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a>    equity</span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a>    .merge(market_ret, on<span class="op">=</span><span class="st">'month_end'</span>)</span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a>    .merge(fx_monthly, left_on<span class="op">=</span><span class="st">'month_end'</span>, right_index<span class="op">=</span><span class="va">True</span>, how<span class="op">=</span><span class="st">'inner'</span>)</span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb18-32"><a href="#cb18-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-33"><a href="#cb18-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Estimate exposure for each firm</span></span>
<span id="cb18-34"><a href="#cb18-34" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> estimate_exposure(group, min_obs<span class="op">=</span><span class="dv">36</span>):</span>
<span id="cb18-35"><a href="#cb18-35" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Estimate Jorion exposure model for a single firm."""</span></span>
<span id="cb18-36"><a href="#cb18-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(group) <span class="op">&lt;</span> min_obs:</span>
<span id="cb18-37"><a href="#cb18-37" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">None</span></span>
<span id="cb18-38"><a href="#cb18-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb18-39"><a href="#cb18-39" aria-hidden="true" tabindex="-1"></a>    y <span class="op">=</span> group[<span class="st">'monthly_return'</span>]</span>
<span id="cb18-40"><a href="#cb18-40" aria-hidden="true" tabindex="-1"></a>    X <span class="op">=</span> sm.add_constant(group[[<span class="st">'market_return'</span>, <span class="st">'fx_return'</span>]])</span>
<span id="cb18-41"><a href="#cb18-41" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb18-42"><a href="#cb18-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb18-43"><a href="#cb18-43" aria-hidden="true" tabindex="-1"></a>        model <span class="op">=</span> sm.OLS(y, X).fit(cov_type<span class="op">=</span><span class="st">'HC1'</span>)</span>
<span id="cb18-44"><a href="#cb18-44" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> pd.Series({</span>
<span id="cb18-45"><a href="#cb18-45" aria-hidden="true" tabindex="-1"></a>            <span class="st">'gamma'</span>: model.params[<span class="st">'fx_return'</span>],</span>
<span id="cb18-46"><a href="#cb18-46" aria-hidden="true" tabindex="-1"></a>            <span class="st">'gamma_se'</span>: model.bse[<span class="st">'fx_return'</span>],</span>
<span id="cb18-47"><a href="#cb18-47" aria-hidden="true" tabindex="-1"></a>            <span class="st">'gamma_t'</span>: model.tvalues[<span class="st">'fx_return'</span>],</span>
<span id="cb18-48"><a href="#cb18-48" aria-hidden="true" tabindex="-1"></a>            <span class="st">'gamma_p'</span>: model.pvalues[<span class="st">'fx_return'</span>],</span>
<span id="cb18-49"><a href="#cb18-49" aria-hidden="true" tabindex="-1"></a>            <span class="st">'beta_mkt'</span>: model.params[<span class="st">'market_return'</span>],</span>
<span id="cb18-50"><a href="#cb18-50" aria-hidden="true" tabindex="-1"></a>            <span class="st">'r_squared'</span>: model.rsquared,</span>
<span id="cb18-51"><a href="#cb18-51" aria-hidden="true" tabindex="-1"></a>            <span class="st">'n_obs'</span>: model.nobs</span>
<span id="cb18-52"><a href="#cb18-52" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb18-53"><a href="#cb18-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> <span class="pp">Exception</span>:</span>
<span id="cb18-54"><a href="#cb18-54" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">None</span></span>
<span id="cb18-55"><a href="#cb18-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-56"><a href="#cb18-56" aria-hidden="true" tabindex="-1"></a>exposures <span class="op">=</span> (</span>
<span id="cb18-57"><a href="#cb18-57" aria-hidden="true" tabindex="-1"></a>    exposure_data</span>
<span id="cb18-58"><a href="#cb18-58" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">'ticker'</span>)</span>
<span id="cb18-59"><a href="#cb18-59" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">apply</span>(estimate_exposure)</span>
<span id="cb18-60"><a href="#cb18-60" aria-hidden="true" tabindex="-1"></a>    .dropna()</span>
<span id="cb18-61"><a href="#cb18-61" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb18-62"><a href="#cb18-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-63"><a href="#cb18-63" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Estimated exposure for </span><span class="sc">{</span><span class="bu">len</span>(exposures)<span class="sc">}</span><span class="ss"> firms"</span>)</span>
<span id="cb18-64"><a href="#cb18-64" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Exposure (gamma) Summary:"</span>)</span>
<span id="cb18-65"><a href="#cb18-65" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(exposures[<span class="st">'gamma'</span>].describe().<span class="bu">round</span>(<span class="dv">4</span>))</span>
<span id="cb18-66"><a href="#cb18-66" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Significant at 5%: "</span></span>
<span id="cb18-67"><a href="#cb18-67" aria-hidden="true" tabindex="-1"></a>      <span class="ss">f"</span><span class="sc">{</span>(exposures[<span class="st">'gamma_p'</span>] <span class="op">&lt;</span> <span class="fl">0.05</span>)<span class="sc">.</span><span class="bu">sum</span>()<span class="sc">}</span><span class="ss"> / </span><span class="sc">{</span><span class="bu">len</span>(exposures)<span class="sc">}</span><span class="ss"> "</span></span>
<span id="cb18-68"><a href="#cb18-68" aria-hidden="true" tabindex="-1"></a>      <span class="ss">f"(</span><span class="sc">{</span>(exposures[<span class="st">'gamma_p'</span>] <span class="op">&lt;</span> <span class="fl">0.05</span>)<span class="sc">.</span>mean()<span class="sc">:.1%}</span><span class="ss">)"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="fig-exposure-distribution" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="19">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-exposure-distribution-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">5</span>))</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Panel A: Distribution of gamma</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>sig <span class="op">=</span> exposures[<span class="st">'gamma_p'</span>] <span class="op">&lt;</span> <span class="fl">0.05</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].hist(exposures.loc[<span class="op">~</span>sig, <span class="st">'gamma'</span>], bins<span class="op">=</span><span class="dv">40</span>, color<span class="op">=</span><span class="st">'#BDC3C7'</span>,</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>             alpha<span class="op">=</span><span class="fl">0.7</span>, label<span class="op">=</span><span class="st">'Insignificant'</span>, edgecolor<span class="op">=</span><span class="st">'white'</span>)</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].hist(exposures.loc[sig <span class="op">&amp;</span> (exposures[<span class="st">'gamma'</span>] <span class="op">&gt;</span> <span class="dv">0</span>), <span class="st">'gamma'</span>],</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>             bins<span class="op">=</span><span class="dv">20</span>, color<span class="op">=</span><span class="st">'#27AE60'</span>, alpha<span class="op">=</span><span class="fl">0.8</span>,</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>             label<span class="op">=</span><span class="st">'Significant positive'</span>, edgecolor<span class="op">=</span><span class="st">'white'</span>)</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].hist(exposures.loc[sig <span class="op">&amp;</span> (exposures[<span class="st">'gamma'</span>] <span class="op">&lt;</span> <span class="dv">0</span>), <span class="st">'gamma'</span>],</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>             bins<span class="op">=</span><span class="dv">20</span>, color<span class="op">=</span><span class="st">'#C0392B'</span>, alpha<span class="op">=</span><span class="fl">0.8</span>,</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>             label<span class="op">=</span><span class="st">'Significant negative'</span>, edgecolor<span class="op">=</span><span class="st">'white'</span>)</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].axvline(x<span class="op">=</span><span class="dv">0</span>, color<span class="op">=</span><span class="st">'black'</span>, linewidth<span class="op">=</span><span class="fl">0.8</span>)</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_xlabel(<span class="st">'Exchange Rate Exposure (gamma)'</span>)</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_ylabel(<span class="st">'Number of Firms'</span>)</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">'Panel A: Cross-Sectional Distribution'</span>)</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].legend(fontsize<span class="op">=</span><span class="dv">9</span>)</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Panel B: Exposure vs market beta</span></span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].scatter(exposures[<span class="st">'beta_mkt'</span>], exposures[<span class="st">'gamma'</span>],</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>                c<span class="op">=</span>exposures[<span class="st">'gamma_t'</span>].clip(<span class="op">-</span><span class="dv">3</span>, <span class="dv">3</span>),</span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>                cmap<span class="op">=</span><span class="st">'RdBu_r'</span>, s<span class="op">=</span><span class="dv">15</span>, alpha<span class="op">=</span><span class="fl">0.6</span>)</span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].axhline(y<span class="op">=</span><span class="dv">0</span>, color<span class="op">=</span><span class="st">'gray'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].axvline(x<span class="op">=</span><span class="dv">1</span>, color<span class="op">=</span><span class="st">'gray'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, linestyle<span class="op">=</span><span class="st">'--'</span>)</span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_xlabel(<span class="st">'Market Beta'</span>)</span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_ylabel(<span class="st">'FX Exposure (gamma)'</span>)</span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">'Panel B: Market Beta vs FX Exposure'</span>)</span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-exposure-distribution-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;39.9
</figcaption>
</figure>
</div>
</section>
<section id="industry-level-exposure" class="level3" data-number="39.7.2">
<h3 data-number="39.7.2" class="anchored" data-anchor-id="industry-level-exposure"><span class="header-section-number">39.7.2</span> Industry-Level Exposure</h3>
<p>Exchange rate exposure varies systematically across industries. Export-oriented sectors (textiles, seafood, electronics) should have positive exposure (benefiting from VND weakness), while import-dependent sectors (oil and gas, machinery, consumer goods) should have negative exposure.</p>
<div id="industry-exposure" class="cell" data-execution_count="20">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get industry classification</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>industry <span class="op">=</span> client.get_firm_info(</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    exchanges<span class="op">=</span>[<span class="st">'HOSE'</span>, <span class="st">'HNX'</span>],</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    fields<span class="op">=</span>[<span class="st">'ticker'</span>, <span class="st">'icb_sector'</span>, <span class="st">'icb_industry'</span>]</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>exposure_industry <span class="op">=</span> exposures.reset_index().merge(</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    industry, on<span class="op">=</span><span class="st">'ticker'</span>, how<span class="op">=</span><span class="st">'left'</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Industry-level average exposure</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>industry_avg <span class="op">=</span> (</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>    exposure_industry</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">'icb_sector'</span>)</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>    .agg(</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>        n_firms<span class="op">=</span>(<span class="st">'gamma'</span>, <span class="st">'count'</span>),</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>        mean_gamma<span class="op">=</span>(<span class="st">'gamma'</span>, <span class="st">'mean'</span>),</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>        median_gamma<span class="op">=</span>(<span class="st">'gamma'</span>, <span class="st">'median'</span>),</span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>        pct_significant<span class="op">=</span>(<span class="st">'gamma_p'</span>, <span class="kw">lambda</span> x: (x <span class="op">&lt;</span> <span class="fl">0.05</span>).mean())</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>    .sort_values(<span class="st">'mean_gamma'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">round</span>(<span class="dv">3</span>)</span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Exchange Rate Exposure by Industry:"</span>)</span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(industry_avg.to_string())</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="fig-industry-exposure" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="21">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-industry-exposure-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">6</span>))</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>colors_bar <span class="op">=</span> [<span class="st">'#27AE60'</span> <span class="cf">if</span> x <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">else</span> <span class="st">'#C0392B'</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>              <span class="cf">for</span> x <span class="kw">in</span> industry_avg[<span class="st">'mean_gamma'</span>]]</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>bars <span class="op">=</span> ax.barh(<span class="bu">range</span>(<span class="bu">len</span>(industry_avg)), industry_avg[<span class="st">'mean_gamma'</span>],</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>               color<span class="op">=</span>colors_bar, alpha<span class="op">=</span><span class="fl">0.85</span>)</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>ax.set_yticks(<span class="bu">range</span>(<span class="bu">len</span>(industry_avg)))</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>ax.set_yticklabels(industry_avg.index, fontsize<span class="op">=</span><span class="dv">9</span>)</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>ax.axvline(x<span class="op">=</span><span class="dv">0</span>, color<span class="op">=</span><span class="st">'black'</span>, linewidth<span class="op">=</span><span class="fl">0.8</span>)</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">'Average Exchange Rate Exposure (gamma)'</span>)</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">'Exchange Rate Exposure by Industry'</span>)</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i, (_, row) <span class="kw">in</span> <span class="bu">enumerate</span>(industry_avg.iterrows()):</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>    label <span class="op">=</span> <span class="ss">f"(</span><span class="sc">{</span>row[<span class="st">'pct_significant'</span>]<span class="sc">:.0%}</span><span class="ss"> sig.)"</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>    ax.text(row[<span class="st">'mean_gamma'</span>] <span class="op">+</span> <span class="fl">0.01</span> <span class="op">*</span> np.sign(row[<span class="st">'mean_gamma'</span>]),</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>            i, label, va<span class="op">=</span><span class="st">'center'</span>, fontsize<span class="op">=</span><span class="dv">8</span>, color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-industry-exposure-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;39.10
</figcaption>
</figure>
</div>
</section>
<section id="time-varying-exposure" class="level3" data-number="39.7.3">
<h3 data-number="39.7.3" class="anchored" data-anchor-id="time-varying-exposure"><span class="header-section-number">39.7.3</span> Time-Varying Exposure</h3>
<p>Exchange rate exposure is not constant, firms adjust hedging strategies, trade patterns shift, and the exchange rate regime itself evolves. We estimate rolling 36-month exposures:</p>
<div id="rolling-exposure" class="cell" data-execution_count="22">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> rolling_exposure(group, window<span class="op">=</span><span class="dv">36</span>, min_obs<span class="op">=</span><span class="dv">24</span>):</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Estimate rolling FX exposure with 36-month windows."""</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    results <span class="op">=</span> []</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    group <span class="op">=</span> group.sort_values(<span class="st">'month_end'</span>)</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(window, <span class="bu">len</span>(group) <span class="op">+</span> <span class="dv">1</span>):</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>        sub <span class="op">=</span> group.iloc[i <span class="op">-</span> window:i]</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">len</span>(sub) <span class="op">&lt;</span> min_obs:</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>        y <span class="op">=</span> sub[<span class="st">'monthly_return'</span>]</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>        X <span class="op">=</span> sm.add_constant(sub[[<span class="st">'market_return'</span>, <span class="st">'fx_return'</span>]])</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">try</span>:</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>            model <span class="op">=</span> sm.OLS(y, X).fit()</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>            results.append({</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>                <span class="st">'month_end'</span>: sub[<span class="st">'month_end'</span>].iloc[<span class="op">-</span><span class="dv">1</span>],</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>                <span class="st">'gamma'</span>: model.params[<span class="st">'fx_return'</span>],</span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>                <span class="st">'gamma_se'</span>: model.bse[<span class="st">'fx_return'</span>]</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>            })</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">except</span> <span class="pp">Exception</span>:</span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>            <span class="cf">pass</span></span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pd.DataFrame(results)</span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute for a sample of large firms</span></span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>large_firms <span class="op">=</span> (</span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a>    equity.groupby(<span class="st">'ticker'</span>)[<span class="st">'market_cap'</span>]</span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>    .last().nlargest(<span class="dv">20</span>).index</span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a>rolling_results <span class="op">=</span> {}</span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> ticker <span class="kw">in</span> large_firms:</span>
<span id="cb22-34"><a href="#cb22-34" aria-hidden="true" tabindex="-1"></a>    firm_data <span class="op">=</span> exposure_data[exposure_data[<span class="st">'ticker'</span>] <span class="op">==</span> ticker]</span>
<span id="cb22-35"><a href="#cb22-35" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> rolling_exposure(firm_data)</span>
<span id="cb22-36"><a href="#cb22-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(result) <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb22-37"><a href="#cb22-37" aria-hidden="true" tabindex="-1"></a>        rolling_results[ticker] <span class="op">=</span> result</span>
<span id="cb22-38"><a href="#cb22-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-39"><a href="#cb22-39" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Rolling exposures computed for </span><span class="sc">{</span><span class="bu">len</span>(rolling_results)<span class="sc">}</span><span class="ss"> firms"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="fig-rolling-exposure" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="23">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-rolling-exposure-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">6</span>))</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>plot_colors <span class="op">=</span> plt.cm.Set1(np.linspace(<span class="dv">0</span>, <span class="dv">1</span>, <span class="bu">min</span>(<span class="dv">6</span>, <span class="bu">len</span>(rolling_results))))</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i, (ticker, df) <span class="kw">in</span> <span class="bu">enumerate</span>(<span class="bu">list</span>(rolling_results.items())[:<span class="dv">6</span>]):</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    ax.plot(pd.to_datetime(df[<span class="st">'month_end'</span>]), df[<span class="st">'gamma'</span>],</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>            linewidth<span class="op">=</span><span class="fl">1.5</span>, label<span class="op">=</span>ticker, color<span class="op">=</span>plot_colors[i])</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> i <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>        ax.fill_between(</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>            pd.to_datetime(df[<span class="st">'month_end'</span>]),</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>            df[<span class="st">'gamma'</span>] <span class="op">-</span> <span class="fl">1.96</span> <span class="op">*</span> df[<span class="st">'gamma_se'</span>],</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>            df[<span class="st">'gamma'</span>] <span class="op">+</span> <span class="fl">1.96</span> <span class="op">*</span> df[<span class="st">'gamma_se'</span>],</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>            alpha<span class="op">=</span><span class="fl">0.1</span>, color<span class="op">=</span>plot_colors[i]</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>ax.axhline(y<span class="op">=</span><span class="dv">0</span>, color<span class="op">=</span><span class="st">'gray'</span>, linewidth<span class="op">=</span><span class="fl">0.8</span>)</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">'Exchange Rate Exposure (gamma)'</span>)</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">'Date'</span>)</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">'Rolling 36-Month Exchange Rate Exposure'</span>)</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>ax.legend(ncol<span class="op">=</span><span class="dv">3</span>, fontsize<span class="op">=</span><span class="dv">9</span>)</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-rolling-exposure-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;39.11
</figcaption>
</figure>
</div>
</section>
</section>
<section id="sec-fx-hedging" class="level2" data-number="39.8">
<h2 data-number="39.8" class="anchored" data-anchor-id="sec-fx-hedging"><span class="header-section-number">39.8</span> Currency Hedging for International Investors</h2>
<section id="the-hedging-decision" class="level3" data-number="39.8.1">
<h3 data-number="39.8.1" class="anchored" data-anchor-id="the-hedging-decision"><span class="header-section-number">39.8.1</span> The Hedging Decision</h3>
<p>For a foreign investor holding Vietnamese equities, the unhedged USD-denominated return is:</p>
<p><span id="eq-unhedged-return"><span class="math display">\[
R^{USD}_{i,t} \approx R^{VND}_{i,t} + \Delta s_t + R^{VND}_{i,t} \cdot \Delta s_t
\tag{39.9}\]</span></span></p>
<p>where the cross-product term is usually small. Under a full hedge using forward contracts, the return becomes:</p>
<p><span id="eq-hedged-return"><span class="math display">\[
R^{USD,\text{hedged}}_{i,t} \approx R^{VND}_{i,t} + (f_t - s_t)
\tag{39.10}\]</span></span></p>
<p>where <span class="math inline">\(f_t - s_t\)</span> is the forward premium (which, by CIP, approximately equals <span class="math inline">\(r^{USD}_t - r^{VND}_t\)</span>). In Vietnam, where VND rates exceed USD rates, the forward premium is negative, hedging costs money because the investor forgoes the interest rate differential.</p>
<p><span class="citation" data-cites="campbell2010global">Campbell, Serfaty-De Medeiros, and Viceira (<a href="references.html#ref-campbell2010global" role="doc-biblioref">2010</a>)</span> show that the optimal hedge ratio depends on the correlation between equity returns and currency returns. When the correlation is positive (VND depreciation coincides with equity losses), hedging reduces overall portfolio variance more effectively.</p>
<div id="hedging-analysis" class="cell" data-execution_count="24">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Construct VW equity index in VND</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>equity_index <span class="op">=</span> (</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    equity</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">'month_end'</span>)</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">apply</span>(<span class="kw">lambda</span> g: np.average(g[<span class="st">'monthly_return'</span>],</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>                                 weights<span class="op">=</span>g[<span class="st">'market_cap'</span>]))</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>    .reset_index(name<span class="op">=</span><span class="st">'equity_vnd'</span>)</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>equity_index[<span class="st">'month_end'</span>] <span class="op">=</span> pd.to_datetime(equity_index[<span class="st">'month_end'</span>])</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge with FX returns and forward premium</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>hedge_data <span class="op">=</span> (</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>    equity_index</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>    .merge(fx_monthly, left_on<span class="op">=</span><span class="st">'month_end'</span>, right_index<span class="op">=</span><span class="va">True</span>, how<span class="op">=</span><span class="st">'inner'</span>)</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Forward premium</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="bu">len</span>(cip_data) <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>    fwd_premium_monthly <span class="op">=</span> (</span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>        cip_data[<span class="st">'forward_premium'</span>]</span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>        .resample(<span class="st">'M'</span>).last() <span class="op">/</span> <span class="dv">12</span></span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a>    hedge_data <span class="op">=</span> hedge_data.merge(</span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>        fwd_premium_monthly.to_frame(<span class="st">'fwd_premium'</span>),</span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a>        left_on<span class="op">=</span><span class="st">'month_end'</span>, right_index<span class="op">=</span><span class="va">True</span>, how<span class="op">=</span><span class="st">'left'</span></span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a>    hedge_data[<span class="st">'fwd_premium'</span>] <span class="op">=</span> hedge_data[<span class="st">'fwd_premium'</span>].fillna(</span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a>        hedge_data[<span class="st">'fwd_premium'</span>].mean()</span>
<span id="cb24-29"><a href="#cb24-29" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb24-30"><a href="#cb24-30" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb24-31"><a href="#cb24-31" aria-hidden="true" tabindex="-1"></a>    hedge_data[<span class="st">'fwd_premium'</span>] <span class="op">=</span> <span class="op">-</span><span class="fl">0.003</span></span>
<span id="cb24-32"><a href="#cb24-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-33"><a href="#cb24-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Unhedged USD return</span></span>
<span id="cb24-34"><a href="#cb24-34" aria-hidden="true" tabindex="-1"></a>hedge_data[<span class="st">'return_unhedged'</span>] <span class="op">=</span> (</span>
<span id="cb24-35"><a href="#cb24-35" aria-hidden="true" tabindex="-1"></a>    hedge_data[<span class="st">'equity_vnd'</span>] <span class="op">+</span> hedge_data[<span class="st">'fx_return'</span>]</span>
<span id="cb24-36"><a href="#cb24-36" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> hedge_data[<span class="st">'equity_vnd'</span>] <span class="op">*</span> hedge_data[<span class="st">'fx_return'</span>]</span>
<span id="cb24-37"><a href="#cb24-37" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-38"><a href="#cb24-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-39"><a href="#cb24-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Fully hedged USD return</span></span>
<span id="cb24-40"><a href="#cb24-40" aria-hidden="true" tabindex="-1"></a>hedge_data[<span class="st">'return_hedged'</span>] <span class="op">=</span> (</span>
<span id="cb24-41"><a href="#cb24-41" aria-hidden="true" tabindex="-1"></a>    hedge_data[<span class="st">'equity_vnd'</span>] <span class="op">+</span> hedge_data[<span class="st">'fwd_premium'</span>]</span>
<span id="cb24-42"><a href="#cb24-42" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-43"><a href="#cb24-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-44"><a href="#cb24-44" aria-hidden="true" tabindex="-1"></a><span class="co"># 50% hedge ratio</span></span>
<span id="cb24-45"><a href="#cb24-45" aria-hidden="true" tabindex="-1"></a>hedge_data[<span class="st">'return_50pct'</span>] <span class="op">=</span> (</span>
<span id="cb24-46"><a href="#cb24-46" aria-hidden="true" tabindex="-1"></a>    <span class="fl">0.5</span> <span class="op">*</span> hedge_data[<span class="st">'return_hedged'</span>]</span>
<span id="cb24-47"><a href="#cb24-47" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> <span class="fl">0.5</span> <span class="op">*</span> hedge_data[<span class="st">'return_unhedged'</span>]</span>
<span id="cb24-48"><a href="#cb24-48" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-49"><a href="#cb24-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-50"><a href="#cb24-50" aria-hidden="true" tabindex="-1"></a><span class="co"># Performance comparison</span></span>
<span id="cb24-51"><a href="#cb24-51" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> strategy, col <span class="kw">in</span> [(<span class="st">'VND (Local)'</span>, <span class="st">'equity_vnd'</span>),</span>
<span id="cb24-52"><a href="#cb24-52" aria-hidden="true" tabindex="-1"></a>                       (<span class="st">'USD Unhedged'</span>, <span class="st">'return_unhedged'</span>),</span>
<span id="cb24-53"><a href="#cb24-53" aria-hidden="true" tabindex="-1"></a>                       (<span class="st">'USD 50% Hedged'</span>, <span class="st">'return_50pct'</span>),</span>
<span id="cb24-54"><a href="#cb24-54" aria-hidden="true" tabindex="-1"></a>                       (<span class="st">'USD Fully Hedged'</span>, <span class="st">'return_hedged'</span>)]:</span>
<span id="cb24-55"><a href="#cb24-55" aria-hidden="true" tabindex="-1"></a>    r <span class="op">=</span> hedge_data[col]</span>
<span id="cb24-56"><a href="#cb24-56" aria-hidden="true" tabindex="-1"></a>    ann_ret <span class="op">=</span> (<span class="dv">1</span> <span class="op">+</span> r).prod() <span class="op">**</span> (<span class="dv">12</span> <span class="op">/</span> <span class="bu">len</span>(r)) <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb24-57"><a href="#cb24-57" aria-hidden="true" tabindex="-1"></a>    ann_vol <span class="op">=</span> r.std() <span class="op">*</span> np.sqrt(<span class="dv">12</span>)</span>
<span id="cb24-58"><a href="#cb24-58" aria-hidden="true" tabindex="-1"></a>    sharpe <span class="op">=</span> r.mean() <span class="op">/</span> r.std() <span class="op">*</span> np.sqrt(<span class="dv">12</span>)</span>
<span id="cb24-59"><a href="#cb24-59" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>strategy<span class="sc">:&lt;22}</span><span class="ss"> Return: </span><span class="sc">{</span>ann_ret<span class="sc">:&gt;7.2%}</span><span class="ss">  Vol: </span><span class="sc">{</span>ann_vol<span class="sc">:&gt;7.2%}</span><span class="ss">  "</span></span>
<span id="cb24-60"><a href="#cb24-60" aria-hidden="true" tabindex="-1"></a>          <span class="ss">f"Sharpe: </span><span class="sc">{</span>sharpe<span class="sc">:&gt;5.2f}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="fig-hedging-comparison" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="25">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-hedging-comparison-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">6</span>))</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>strategies <span class="op">=</span> {</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'VND (Local)'</span>: (<span class="st">'equity_vnd'</span>, <span class="st">'#2C5F8A'</span>, <span class="st">'-'</span>),</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'USD Unhedged'</span>: (<span class="st">'return_unhedged'</span>, <span class="st">'#C0392B'</span>, <span class="st">'-'</span>),</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'USD 50% Hedged'</span>: (<span class="st">'return_50pct'</span>, <span class="st">'#E67E22'</span>, <span class="st">'--'</span>),</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">'USD Fully Hedged'</span>: (<span class="st">'return_hedged'</span>, <span class="st">'#27AE60'</span>, <span class="st">'-'</span>),</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> label, (col, color, ls) <span class="kw">in</span> strategies.items():</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>    cum <span class="op">=</span> (<span class="dv">1</span> <span class="op">+</span> hedge_data.set_index(<span class="st">'month_end'</span>)[col]).cumprod()</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>    ax.plot(cum.index, cum, label<span class="op">=</span>label, color<span class="op">=</span>color,</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>            linewidth<span class="op">=</span><span class="dv">2</span>, linestyle<span class="op">=</span>ls)</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">'Cumulative Wealth'</span>)</span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">'Date'</span>)</span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">'Vietnamese Equity Returns: Hedging Comparison'</span>)</span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>ax.legend()</span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>ax.set_yscale(<span class="st">'log'</span>)</span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-hedging-comparison-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;39.12
</figcaption>
</figure>
</div>
</section>
<section id="optimal-hedge-ratio" class="level3" data-number="39.8.2">
<h3 data-number="39.8.2" class="anchored" data-anchor-id="optimal-hedge-ratio"><span class="header-section-number">39.8.2</span> Optimal Hedge Ratio</h3>
<p>The minimum-variance hedge ratio is:</p>
<p><span id="eq-optimal-hedge"><span class="math display">\[
h^* = \frac{\text{Cov}(R^{VND}_t, \Delta s_t)}{\text{Var}(\Delta s_t)}
\tag{39.11}\]</span></span></p>
<p>This is the OLS slope from regressing local equity returns on exchange rate changes. When the correlation between equity and currency is positive (bad for unhedged investors), <span class="math inline">\(h^* &gt; 0\)</span> and hedging reduces variance.</p>
<div id="optimal-hedge" class="cell" data-execution_count="26">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Full-sample optimal hedge ratio</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>hedge_reg <span class="op">=</span> sm.OLS(</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>    hedge_data[<span class="st">'equity_vnd'</span>],</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    sm.add_constant(hedge_data[<span class="st">'fx_return'</span>])</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>).fit()</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>h_star <span class="op">=</span> hedge_reg.params[<span class="st">'fx_return'</span>]</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Optimal hedge ratio (full sample): </span><span class="sc">{</span>h_star<span class="sc">:.3f}</span><span class="ss">"</span>)</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Equity-currency correlation: "</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>      <span class="ss">f"</span><span class="sc">{</span>hedge_data[<span class="st">'equity_vnd'</span>]<span class="sc">.</span>corr(hedge_data[<span class="st">'fx_return'</span>])<span class="sc">:.3f}</span><span class="ss">"</span>)</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Rolling 36-month optimal hedge ratio</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>rolling_cov <span class="op">=</span> hedge_data[<span class="st">'equity_vnd'</span>].rolling(<span class="dv">36</span>).cov(</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>    hedge_data[<span class="st">'fx_return'</span>]</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>rolling_var <span class="op">=</span> hedge_data[<span class="st">'fx_return'</span>].rolling(<span class="dv">36</span>).var()</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>hedge_data[<span class="st">'h_star_rolling'</span>] <span class="op">=</span> rolling_cov <span class="op">/</span> rolling_var</span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Rolling hedge ratio range: "</span></span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>      <span class="ss">f"[</span><span class="sc">{</span>hedge_data[<span class="st">'h_star_rolling'</span>]<span class="sc">.</span><span class="bu">min</span>()<span class="sc">:.2f}</span><span class="ss">, "</span></span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a>      <span class="ss">f"</span><span class="sc">{</span>hedge_data[<span class="st">'h_star_rolling'</span>]<span class="sc">.</span><span class="bu">max</span>()<span class="sc">:.2f}</span><span class="ss">]"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
</section>
<section id="sec-fx-asean" class="level2" data-number="39.9">
<h2 data-number="39.9" class="anchored" data-anchor-id="sec-fx-asean"><span class="header-section-number">39.9</span> ASEAN Currency Comparison</h2>
<p>To put the VND in perspective, we compare its properties with other ASEAN currencies and the Chinese Yuan.</p>
<div id="fig-asean-comparison" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="27">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-asean-comparison-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute annual statistics for each currency</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>comparison <span class="op">=</span> pd.DataFrame()</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> currency <span class="kw">in</span> fx_returns.columns:</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>    r <span class="op">=</span> fx_returns[currency].dropna()</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(r) <span class="op">&gt;</span> <span class="dv">252</span>:</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>        comparison.loc[currency, <span class="st">'Ann. Depreciation (%)'</span>] <span class="op">=</span> r.mean() <span class="op">*</span> <span class="dv">252</span> <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>        comparison.loc[currency, <span class="st">'Ann. Volatility (%)'</span>] <span class="op">=</span> r.std() <span class="op">*</span> np.sqrt(<span class="dv">252</span>) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>        comparison.loc[currency, <span class="st">'Skewness'</span>] <span class="op">=</span> r.skew()</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>        comparison.loc[currency, <span class="st">'Kurtosis'</span>] <span class="op">=</span> r.kurtosis()</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>        comparison.loc[currency, <span class="st">'Max Daily Loss (%)'</span>] <span class="op">=</span> r.<span class="bu">max</span>() <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>        comparison.loc[currency, <span class="st">'Sharpe (Carry)'</span>] <span class="op">=</span> (</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>            r.mean() <span class="op">*</span> <span class="dv">252</span> <span class="op">/</span> (r.std() <span class="op">*</span> np.sqrt(<span class="dv">252</span>))</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"ASEAN + Asian Currency Comparison (VND base, vs USD):"</span>)</span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(comparison.<span class="bu">round</span>(<span class="dv">2</span>).to_string())</span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Risk-return scatter</span></span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">9</span>, <span class="dv">7</span>))</span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> currency <span class="kw">in</span> comparison.index:</span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a>    ax.scatter(</span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a>        comparison.loc[currency, <span class="st">'Ann. Volatility (%)'</span>],</span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a>        comparison.loc[currency, <span class="st">'Ann. Depreciation (%)'</span>],</span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a>        s<span class="op">=</span><span class="dv">120</span>, zorder<span class="op">=</span><span class="dv">5</span></span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a>    ax.annotate(</span>
<span id="cb27-27"><a href="#cb27-27" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f'VND/</span><span class="sc">{</span>currency<span class="sc">}</span><span class="ss">'</span>,</span>
<span id="cb27-28"><a href="#cb27-28" aria-hidden="true" tabindex="-1"></a>        (comparison.loc[currency, <span class="st">'Ann. Volatility (%)'</span>] <span class="op">+</span> <span class="fl">0.15</span>,</span>
<span id="cb27-29"><a href="#cb27-29" aria-hidden="true" tabindex="-1"></a>         comparison.loc[currency, <span class="st">'Ann. Depreciation (%)'</span>]),</span>
<span id="cb27-30"><a href="#cb27-30" aria-hidden="true" tabindex="-1"></a>        fontsize<span class="op">=</span><span class="dv">10</span></span>
<span id="cb27-31"><a href="#cb27-31" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb27-32"><a href="#cb27-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-33"><a href="#cb27-33" aria-hidden="true" tabindex="-1"></a>ax.axhline(y<span class="op">=</span><span class="dv">0</span>, color<span class="op">=</span><span class="st">'gray'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb27-34"><a href="#cb27-34" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">'Annualized Volatility (%)'</span>)</span>
<span id="cb27-35"><a href="#cb27-35" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">'Annualized Depreciation (%)'</span>)</span>
<span id="cb27-36"><a href="#cb27-36" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">'ASEAN Currency Risk-Return Characteristics'</span>)</span>
<span id="cb27-37"><a href="#cb27-37" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb27-38"><a href="#cb27-38" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-asean-comparison-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;39.13
</figcaption>
</figure>
</div>
</section>
<section id="sec-fx-comovement" class="level2" data-number="39.10">
<h2 data-number="39.10" class="anchored" data-anchor-id="sec-fx-comovement"><span class="header-section-number">39.10</span> Exchange Rate and Equity Market Co-Movement</h2>
<p>The relationship between VND/USD movements and the Vietnamese equity market is central to portfolio construction. We examine this at both the aggregate and conditional levels.</p>
<div id="fig-equity-fx-comovement" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="28">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-equity-fx-comovement-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">5</span>))</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Panel A: Scatter plot</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].scatter(</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    hedge_data[<span class="st">'fx_return'</span>] <span class="op">*</span> <span class="dv">100</span>,</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>    hedge_data[<span class="st">'equity_vnd'</span>] <span class="op">*</span> <span class="dv">100</span>,</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>    c<span class="op">=</span>hedge_data.index, cmap<span class="op">=</span><span class="st">'viridis'</span>, s<span class="op">=</span><span class="dv">20</span>, alpha<span class="op">=</span><span class="fl">0.7</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>z <span class="op">=</span> np.polyfit(hedge_data[<span class="st">'fx_return'</span>], hedge_data[<span class="st">'equity_vnd'</span>], <span class="dv">1</span>)</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>x_line <span class="op">=</span> np.linspace(hedge_data[<span class="st">'fx_return'</span>].<span class="bu">min</span>(),</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>                     hedge_data[<span class="st">'fx_return'</span>].<span class="bu">max</span>(), <span class="dv">100</span>)</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].plot(x_line <span class="op">*</span> <span class="dv">100</span>, np.polyval(z, x_line) <span class="op">*</span> <span class="dv">100</span>,</span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>             color<span class="op">=</span><span class="st">'#C0392B'</span>, linewidth<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].axhline(y<span class="op">=</span><span class="dv">0</span>, color<span class="op">=</span><span class="st">'gray'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].axvline(x<span class="op">=</span><span class="dv">0</span>, color<span class="op">=</span><span class="st">'gray'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_xlabel(<span class="st">'VND/USD Change (%)'</span>)</span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_ylabel(<span class="st">'VN-Index Return (%)'</span>)</span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">'Panel A: Monthly Equity-FX Relationship'</span>)</span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a>rho <span class="op">=</span> hedge_data[<span class="st">'equity_vnd'</span>].corr(hedge_data[<span class="st">'fx_return'</span>])</span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].text(<span class="fl">0.05</span>, <span class="fl">0.95</span>, <span class="ss">f'rho = </span><span class="sc">{</span>rho<span class="sc">:.3f}</span><span class="ss">'</span>, transform<span class="op">=</span>axes[<span class="dv">0</span>].transAxes,</span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a>             fontsize<span class="op">=</span><span class="dv">12</span>, verticalalignment<span class="op">=</span><span class="st">'top'</span>,</span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a>             bbox<span class="op">=</span><span class="bu">dict</span>(boxstyle<span class="op">=</span><span class="st">'round'</span>, facecolor<span class="op">=</span><span class="st">'white'</span>, alpha<span class="op">=</span><span class="fl">0.8</span>))</span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-25"><a href="#cb28-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Panel B: Rolling 36-month correlation</span></span>
<span id="cb28-26"><a href="#cb28-26" aria-hidden="true" tabindex="-1"></a>rolling_corr <span class="op">=</span> (</span>
<span id="cb28-27"><a href="#cb28-27" aria-hidden="true" tabindex="-1"></a>    hedge_data[<span class="st">'equity_vnd'</span>]</span>
<span id="cb28-28"><a href="#cb28-28" aria-hidden="true" tabindex="-1"></a>    .rolling(<span class="dv">36</span>)</span>
<span id="cb28-29"><a href="#cb28-29" aria-hidden="true" tabindex="-1"></a>    .corr(hedge_data[<span class="st">'fx_return'</span>])</span>
<span id="cb28-30"><a href="#cb28-30" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-31"><a href="#cb28-31" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].plot(hedge_data[<span class="st">'month_end'</span>], rolling_corr,</span>
<span id="cb28-32"><a href="#cb28-32" aria-hidden="true" tabindex="-1"></a>             color<span class="op">=</span><span class="st">'#2C5F8A'</span>, linewidth<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb28-33"><a href="#cb28-33" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].axhline(y<span class="op">=</span><span class="dv">0</span>, color<span class="op">=</span><span class="st">'gray'</span>, linewidth<span class="op">=</span><span class="fl">0.8</span>, linestyle<span class="op">=</span><span class="st">'--'</span>)</span>
<span id="cb28-34"><a href="#cb28-34" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].fill_between(</span>
<span id="cb28-35"><a href="#cb28-35" aria-hidden="true" tabindex="-1"></a>    hedge_data[<span class="st">'month_end'</span>], <span class="dv">0</span>, rolling_corr,</span>
<span id="cb28-36"><a href="#cb28-36" aria-hidden="true" tabindex="-1"></a>    where<span class="op">=</span>rolling_corr <span class="op">&lt;</span> <span class="dv">0</span>, color<span class="op">=</span><span class="st">'#C0392B'</span>, alpha<span class="op">=</span><span class="fl">0.2</span></span>
<span id="cb28-37"><a href="#cb28-37" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-38"><a href="#cb28-38" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].fill_between(</span>
<span id="cb28-39"><a href="#cb28-39" aria-hidden="true" tabindex="-1"></a>    hedge_data[<span class="st">'month_end'</span>], <span class="dv">0</span>, rolling_corr,</span>
<span id="cb28-40"><a href="#cb28-40" aria-hidden="true" tabindex="-1"></a>    where<span class="op">=</span>rolling_corr <span class="op">&gt;</span> <span class="dv">0</span>, color<span class="op">=</span><span class="st">'#27AE60'</span>, alpha<span class="op">=</span><span class="fl">0.2</span></span>
<span id="cb28-41"><a href="#cb28-41" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-42"><a href="#cb28-42" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_xlabel(<span class="st">'Date'</span>)</span>
<span id="cb28-43"><a href="#cb28-43" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_ylabel(<span class="st">'Rolling Correlation'</span>)</span>
<span id="cb28-44"><a href="#cb28-44" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">'Panel B: 36-Month Rolling Equity-FX Correlation'</span>)</span>
<span id="cb28-45"><a href="#cb28-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-46"><a href="#cb28-46" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb28-47"><a href="#cb28-47" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-equity-fx-comovement-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;39.14
</figcaption>
</figure>
</div>
</section>
<section id="sec-fx-summary" class="level2" data-number="39.11">
<h2 data-number="39.11" class="anchored" data-anchor-id="sec-fx-summary"><span class="header-section-number">39.11</span> Summary</h2>
<p>This chapter has developed a comprehensive toolkit for working with exchange rate data in the Vietnamese context. The key findings and methods are in <a href="#tbl-fx-summary" class="quarto-xref">Table&nbsp;<span>39.2</span></a>.</p>
<div id="tbl-fx-summary" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-fx-summary-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;39.2: Summary of findings on VND exchange rate dynamics.
</figcaption>
<div aria-describedby="tbl-fx-summary-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 28%">
<col style="width: 35%">
<col style="width: 35%">
</colgroup>
<thead>
<tr class="header">
<th>Topic</th>
<th>Finding</th>
<th>Implication</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>VND regime</td>
<td>Managed float with +/-3% band, daily reference rate</td>
<td>Returns are non-normal; clustered near zero with discrete jumps</td>
</tr>
<tr class="even">
<td>Return distribution</td>
<td>Fat tails, excess kurtosis, positive skewness</td>
<td>Standard normal-based risk models underestimate tail risk</td>
</tr>
<tr class="odd">
<td>CIP</td>
<td>Persistent positive deviations (~50-200 bps)</td>
<td>Capital controls and limited arbitrage; hedging is expensive</td>
</tr>
<tr class="even">
<td>UIP</td>
<td>beta &lt; 1 in Fama regression</td>
<td>Carry trade is profitable on average; crash risk in devaluations</td>
</tr>
<tr class="odd">
<td>Carry trade</td>
<td>Positive Sharpe but negative skewness</td>
<td>Steady gains punctuated by sharp losses during devaluations</td>
</tr>
<tr class="even">
<td>GARCH</td>
<td>Strong persistence (alpha + beta approx 0.99); Student-t preferred</td>
<td>Volatility clustering; regime switches around policy events</td>
</tr>
<tr class="odd">
<td>Firm exposure</td>
<td>~15-25% significant; systematic industry patterns</td>
<td>Exporters benefit from depreciation; importers hurt</td>
</tr>
<tr class="even">
<td>Hedging</td>
<td>Full hedge eliminates FX risk but costs ~3-5% p.a.</td>
<td>Optimal partial hedge depends on equity-FX correlation</td>
</tr>
<tr class="odd">
<td>ASEAN comparison</td>
<td>VND has lowest volatility but steady depreciation</td>
<td>Managed float compresses vol; does not eliminate trend risk</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>For researchers using Vietnamese equity data, the exchange rate dimension is not optional. Any study that converts VND returns to USD, uses international factor models, or examines firms with trade exposure must account for the distinctive properties of the VND regime. The tools developed in this chapter, from GARCH volatility modeling to rolling exposure estimation, provide the building blocks for incorporating exchange rate dynamics into broader empirical asset pricing work.</p>
<!-- ## Exercises {#sec-fx-exercises}

1. **Real effective exchange rate.** Construct a trade-weighted real exchange rate for Vietnam using bilateral rates against the top 10 trading partners, weighted by trade shares, and deflated by relative CPI. Does the REER predict future VND/USD movements?

2. **SBV intervention detection.** Using reserve data from the SBV (or proxies from the balance of payments), estimate a probit model for the probability of SBV intervention as a function of the deviation from the reference rate, reserve levels, and global risk indicators. How do intervention episodes affect subsequent exchange rate volatility?

3. **Currency factor in asset pricing.** Add a currency factor (VND/USD return) to the Vietnamese Fama-French model. Does the currency factor carry a significant risk premium in the cross-section of Vietnamese stocks? Use Fama-MacBeth cross-sectional regressions.

4. **Regime-switching GARCH.** Estimate a Markov-switching GARCH model with two states (high and low volatility). Do the regime probabilities align with known SBV policy changes? How does the model compare to standard GARCH in out-of-sample volatility forecasting?

5. **Carry trade with risk management.** Augment the simple carry trade with a stop-loss rule: close the position when the trailing 20-day realized volatility exceeds the 90th percentile of its historical distribution. How does this rule affect the return, volatility, and Sharpe ratio of the carry trade?

6. **Cross-listing premium and FX exposure.** Some Vietnamese firms issue depositary receipts or are cross-listed abroad. Compare their exchange rate exposure to purely domestic-listed peers. Does cross-listing reduce exposure, consistent with broader hedging opportunities?

7. **Forward premium decomposition.** Decompose the VND/USD forward premium into an expected depreciation component (from a survey or random walk forecast) and a risk premium component (the residual). How does the risk premium vary with global risk aversion proxies (VIX, MOVE)?

8. **Conditional exposure.** Estimate @jorion1990exchange exposures separately in appreciation months (VND strengthens) and depreciation months. Is exposure asymmetric, do firms react differently to appreciation vs. depreciation? What industries show the strongest asymmetry? -->


<!-- -->

<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-bollerslev1986generalized" class="csl-entry" role="listitem">
Bollerslev, Tim. 1986. <span>‚ÄúGeneralized Autoregressive Conditional Heteroskedasticity.‚Äù</span> <em>Journal of Econometrics</em> 31 (3): 307‚Äì27.
</div>
<div id="ref-brunnermeier2008carry" class="csl-entry" role="listitem">
Brunnermeier, Markus K, Stefan Nagel, and Lasse H Pedersen. 2008. <span>‚ÄúCarry Trades and Currency Crashes.‚Äù</span> <em>NBER Macroeconomics Annual</em> 23 (1): 313‚Äì48.
</div>
<div id="ref-campbell2010global" class="csl-entry" role="listitem">
Campbell, John Y, Karine Serfaty-De Medeiros, and Luis M Viceira. 2010. <span>‚ÄúGlobal Currency Hedging.‚Äù</span> <em>The Journal of Finance</em> 65 (1): 87‚Äì121.
</div>
<div id="ref-dornbusch1976expectations" class="csl-entry" role="listitem">
Dornbusch, Rudiger. 1976. <span>‚ÄúExpectations and Exchange Rate Dynamics.‚Äù</span> <em>Journal of Political Economy</em> 84 (6): 1161‚Äì76.
</div>
<div id="ref-du2018deviations" class="csl-entry" role="listitem">
Du, Wenxin, Alexander Tepper, and Adrien Verdelhan. 2018. <span>‚ÄúDeviations from Covered Interest Rate Parity.‚Äù</span> <em>The Journal of Finance</em> 73 (3): 915‚Äì57.
</div>
<div id="ref-fama1984forward" class="csl-entry" role="listitem">
Fama, Eugene F. 1984. <span>‚ÄúForward and Spot Exchange Rates.‚Äù</span> <em>Journal of Monetary Economics</em> 14 (3): 319‚Äì38.
</div>
<div id="ref-frankel1979mark" class="csl-entry" role="listitem">
Frankel, Jeffrey A. 1979. <span>‚ÄúOn the Mark: A Theory of Floating Exchange Rates Based on Real Interest Differentials.‚Äù</span> <em>The American Economic Review</em> 69 (4): 610‚Äì22.
</div>
<div id="ref-jorion1990exchange" class="csl-entry" role="listitem">
Jorion, Philippe. 1990. <span>‚ÄúThe Exchange-Rate Exposure of US Multinationals.‚Äù</span> <em>Journal of Business</em>, 331‚Äì45.
</div>
<div id="ref-lustig2007cross" class="csl-entry" role="listitem">
Lustig, Hanno, and Adrien Verdelhan. 2007. <span>‚ÄúThe Cross Section of Foreign Currency Risk Premia and Consumption Growth Risk.‚Äù</span> <em>American Economic Review</em> 97 (1): 89‚Äì117.
</div>
<div id="ref-meese1983empirical" class="csl-entry" role="listitem">
Meese, Richard A, and Kenneth Rogoff. 1983. <span>‚ÄúEmpirical Exchange Rate Models of the Seventies: Do They Fit Out of Sample?‚Äù</span> <em>Journal of International Economics</em> 14 (1-2): 3‚Äì24.
</div>
<div id="ref-menkhoff2012carry" class="csl-entry" role="listitem">
Menkhoff, Lukas, Lucio Sarno, Maik Schmeling, and Andreas Schrimpf. 2012. <span>‚ÄúCarry Trades and Global Foreign Exchange Volatility.‚Äù</span> <em>The Journal of Finance</em> 67 (2): 681‚Äì718.
</div>
<div id="ref-obstfeld2005trilemma" class="csl-entry" role="listitem">
Obstfeld, Maurice, Jay C Shambaugh, and Alan M Taylor. 2005. <span>‚ÄúThe Trilemma in History: Tradeoffs Among Exchange Rates, Monetary Policies, and Capital Mobility.‚Äù</span> <em>Review of Economics and Statistics</em> 87 (3): 423‚Äì38.
</div>
<div id="ref-rossi2013exchange" class="csl-entry" role="listitem">
Rossi, Barbara. 2013. <span>‚ÄúExchange Rate Predictability.‚Äù</span> <em>Journal of Economic Literature</em> 51 (4): 1063‚Äì1119.
</div>
</div>
</section>

</main> <!-- /main -->
<script>
document.addEventListener("DOMContentLoaded", function () {
  const year = new Date().getFullYear();
  document.getElementById("copyright").textContent = "¬© " + year;
});
</script>
<script>
(function () {
  const GA_ID = "G-LG91D0C6RB";   // your real GA4 ID
  const CONSENT_KEY = "cookie_consent_v1";

  function log(msg) {
    console.log("[GA Loader]", msg);
  }

  function loadGtag() {
    if (window.__gtag_loaded__) {
      log("GA already loaded, skipping");
      return;
    }

    log("Loading Google Analytics...");

    window.__gtag_loaded__ = true;

    const script = document.createElement("script");
    script.async = true;
    script.src = "https://www.googletagmanager.com/gtag/js?id=" + encodeURIComponent(GA_ID);

    script.onload = function () {
      log("gtag.js loaded");

      window.dataLayer = window.dataLayer || [];
      function gtag(){ dataLayer.push(arguments); }
      window.gtag = gtag;

      gtag("js", new Date());
      gtag("config", GA_ID, {
        anonymize_ip: true,
        transport_type: "beacon"
      });

      log("GA initialized successfully");
    };

    script.onerror = function () {
      log("FAILED to load gtag.js. Likely blocked by ad blocker or network.");
    };

    document.head.appendChild(script);
  }

  function checkConsentAndLoad() {
    const consent = localStorage.getItem(CONSENT_KEY);
    log("Stored consent value = " + consent);

    if (consent === "accepted") {
      loadGtag();
    } else {
      log("Analytics blocked due to missing or declined consent");
    }
  }

  // Run on page load
  checkConsentAndLoad();

  // Listen for cookie banner decisions
  window.addEventListener("cookie-consent-changed", function (e) {
    log("Consent event received: " + e.detail);
    if (e.detail === "accepted") {
      loadGtag();
    }
  });

})();
</script>
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/mikenguyen13\.github\.io\/tidy_finance_vn_vi\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./56_market_integration_and_segmentation.html" class="pagination-link" aria-label="Market Integration and Segmentation">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">38</span>&nbsp; <span class="chapter-title">Market Integration and Segmentation</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./60_event_studies.html" class="pagination-link" aria-label="Event Studies in Finance">
        <span class="nav-page-text"><span class="chapter-number">40</span>&nbsp; <span class="chapter-title">Event Studies in Finance</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb29" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># Exchange Rate Dynamics</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>::: callout-note</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>In this chapter, we construct a comprehensive exchange rate database for the Vietnamese Dong (VND) against major currencies, analyze the statistical properties of VND returns, test covered and uncovered interest rate parity, estimate the currency exposure of Vietnamese listed firms, model volatility regimes using GARCH, and evaluate hedging strategies for international investors.</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>Exchange rates sit at the intersection of macroeconomics and finance. For international investors considering Vietnamese equities, the VND/USD exchange rate is not a secondary concern; it is a first-order determinant of dollar-denominated returns. A Vietnamese stock portfolio that earns 15% in VND terms but coincides with a 5% VND depreciation delivers only about 10% in USD terms. Conversely, periods of VND stability or appreciation amplify returns for foreign investors. Understanding exchange rate dynamics is therefore essential for anyone working with Vietnamese financial data in an international context.</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>Vietnam presents a distinctive exchange rate regime. Unlike freely floating currencies such as the USD/EUR or USD/JPY, the VND operates under a managed float. The State Bank of Vietnam (SBV) sets a daily reference rate and allows trading within a band (currently $\pm$ 3% on the interbank market and $\pm$ 5% against the official rate for commercial banks). This regime creates specific patterns in VND returns that differ fundamentally from those observed in freely floating pairs: clustered movements near band boundaries, discrete adjustments when the SBV shifts the reference rate, and periods of near-zero volatility punctuated by sharp moves during policy changes.</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>This chapter develops tools for working with these dynamics. We progress from data construction through statistical characterization to economic applications: interest rate parity tests, firm-level exposure estimation, GARCH volatility modeling, and hedging strategy evaluation.</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a><span class="fu">## Theoretical Foundations {#sec-fx-theory}</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a><span class="fu">### Exchange Rate Determination</span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>The modern theory of exchange rate determination rests on several building blocks. @dornbusch1976expectations provides the canonical "overshooting" model: because goods prices are sticky while asset prices adjust instantly, a monetary shock causes the exchange rate to overshoot its long-run equilibrium. @frankel1979mark extends this to a real interest differential model where the exchange rate depends on relative money supplies, income levels, and interest rates across countries.</span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>Despite elegant theory, @meese1983empirical delivered a devastating empirical result: no structural model of exchange rates consistently outperforms a random walk in out-of-sample forecasting. This finding, confirmed repeatedly over four decades and surveyed by @rossi2013exchange, means that exchange rate changes are, to a first approximation, unpredictable. For practical purposes, the best forecast of tomorrow's VND/USD rate is today's rate.</span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a><span class="fu">### Interest Rate Parity</span></span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>Two parity conditions link exchange rates to interest rates:</span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a>**Covered Interest Rate Parity (CIP):** Arbitrage between spot and forward markets should equalize the forward premium with the interest rate differential:</span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a>F_{t,t+k} = S_t \cdot \frac{(1 + r^{VND}_{t,k})}{(1 + r^{USD}_{t,k})}</span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a>$$ {#eq-cip}</span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a>where $S_t$ is the spot rate (VND per USD), $F_{t,t+k}$ is the $k$-period forward rate, and $r^{VND}_{t,k}$ and $r^{USD}_{t,k}$ are the domestic and foreign interest rates for maturity $k$. CIP should hold exactly in the absence of transaction costs, credit risk, and capital controls. @du2018deviations document that CIP violations have widened significantly in major currency pairs since 2008, driven by post-crisis bank balance sheet constraints. In Vietnam, capital controls and limited forward market liquidity create additional CIP deviations.</span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-33"><a href="#cb29-33" aria-hidden="true" tabindex="-1"></a>**Uncovered Interest Rate Parity (UIP):** The expected depreciation should equal the interest rate differential:</span>
<span id="cb29-34"><a href="#cb29-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-35"><a href="#cb29-35" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb29-36"><a href="#cb29-36" aria-hidden="true" tabindex="-1"></a>\mathbb{E}_t[\Delta s_{t+k}] = r^{VND}_{t,k} - r^{USD}_{t,k}</span>
<span id="cb29-37"><a href="#cb29-37" aria-hidden="true" tabindex="-1"></a>$$ {#eq-uip}</span>
<span id="cb29-38"><a href="#cb29-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-39"><a href="#cb29-39" aria-hidden="true" tabindex="-1"></a>where $\Delta s_{t+k} = \ln(S_{t+k}/S_t)$. UIP is an equilibrium condition, not an arbitrage condition, it requires risk-neutral investors. @fama1984forward famously showed that the forward premium predicts exchange rate changes with the *wrong sign*: high-interest-rate currencies tend to appreciate rather than depreciate, contradicting UIP. This "forward premium anomaly" is the foundation of the carry trade.</span>
<span id="cb29-40"><a href="#cb29-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-41"><a href="#cb29-41" aria-hidden="true" tabindex="-1"></a><span class="fu">### The Carry Trade</span></span>
<span id="cb29-42"><a href="#cb29-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-43"><a href="#cb29-43" aria-hidden="true" tabindex="-1"></a>The carry trade exploits UIP violations by borrowing in low-interest-rate currencies and investing in high-interest-rate currencies. @lustig2007cross show that a portfolio of carry trade positions earns a significant risk premium, which they link to consumption growth risk. @menkhoff2012carry identify global FX volatility as the key risk factor: carry trades lose money precisely when global volatility spikes, a "crash risk" documented by @brunnermeier2008carry.</span>
<span id="cb29-44"><a href="#cb29-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-45"><a href="#cb29-45" aria-hidden="true" tabindex="-1"></a>Vietnam, with interest rates typically 3-8 percentage points above U.S. rates, is a natural candidate for carry trade inflows. The managed exchange rate regime provides an additional attraction: the SBV's implicit defense of the band reduces short-term volatility, increasing the Sharpe ratio of the carry position, until a band adjustment or devaluation erases accumulated gains in a single move.</span>
<span id="cb29-46"><a href="#cb29-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-47"><a href="#cb29-47" aria-hidden="true" tabindex="-1"></a><span class="fu">### The Trilemma</span></span>
<span id="cb29-48"><a href="#cb29-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-49"><a href="#cb29-49" aria-hidden="true" tabindex="-1"></a>@obstfeld2005trilemma formalize the "impossible trinity": a country cannot simultaneously maintain (i) a fixed exchange rate, (ii) an independent monetary policy, and (iii) free capital mobility. Vietnam navigates this trilemma by maintaining partial capital controls alongside its managed float, allowing some degree of monetary policy independence. Understanding where Vietnam sits on the trilemma at any given time is essential for interpreting exchange rate data: periods of tighter capital controls produce artificially low exchange rate volatility that does not reflect true economic uncertainty.</span>
<span id="cb29-50"><a href="#cb29-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-51"><a href="#cb29-51" aria-hidden="true" tabindex="-1"></a><span class="fu">## The VND Exchange Rate Regime {#sec-fx-regime}</span></span>
<span id="cb29-52"><a href="#cb29-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-53"><a href="#cb29-53" aria-hidden="true" tabindex="-1"></a><span class="fu">### Historical Evolution</span></span>
<span id="cb29-54"><a href="#cb29-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-55"><a href="#cb29-55" aria-hidden="true" tabindex="-1"></a>The VND/USD exchange rate has evolved through several distinct phases:</span>
<span id="cb29-56"><a href="#cb29-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-57"><a href="#cb29-57" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Period <span class="pp">|</span> Regime <span class="pp">|</span> Key Features <span class="pp">|</span></span>
<span id="cb29-58"><a href="#cb29-58" aria-hidden="true" tabindex="-1"></a><span class="pp">|------------------------|------------------------|------------------------|</span></span>
<span id="cb29-59"><a href="#cb29-59" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Pre-1999 <span class="pp">|</span> Narrow band <span class="pp">|</span> SBV set the rate with minimal flexibility <span class="pp">|</span></span>
<span id="cb29-60"><a href="#cb29-60" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> 1999-2007 <span class="pp">|</span> Gradual crawl <span class="pp">|</span> Slow, controlled depreciation (\~1-2% per year) <span class="pp">|</span></span>
<span id="cb29-61"><a href="#cb29-61" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> 2008-2011 <span class="pp">|</span> Crisis adjustments <span class="pp">|</span> Multiple discrete devaluations (2008, 2010, 2011) <span class="pp">|</span></span>
<span id="cb29-62"><a href="#cb29-62" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> 2012-2015 <span class="pp">|</span> Stabilization <span class="pp">|</span> Tight band, rare adjustments, building reserves <span class="pp">|</span></span>
<span id="cb29-63"><a href="#cb29-63" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> 2016-present <span class="pp">|</span> Reference rate mechanism <span class="pp">|</span> Daily reference rate based on a basket; $\pm$ 3% band <span class="pp">|</span></span>
<span id="cb29-64"><a href="#cb29-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-65"><a href="#cb29-65" aria-hidden="true" tabindex="-1"></a>: Evolution of the VND/USD exchange rate regime. {#tbl-regime-history}</span>
<span id="cb29-66"><a href="#cb29-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-67"><a href="#cb29-67" aria-hidden="true" tabindex="-1"></a>The 2016 reform, shifting from a fixed peg to a daily reference rate influenced by a currency basket, was a significant structural change. The reference rate now incorporates the previous day's closing interbank rate, supply-demand conditions, and movements in currencies of major trading partners (USD, EUR, CNY, JPY, KRW).</span>
<span id="cb29-68"><a href="#cb29-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-69"><a href="#cb29-69" aria-hidden="true" tabindex="-1"></a><span class="fu">### Band Mechanics</span></span>
<span id="cb29-70"><a href="#cb29-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-71"><a href="#cb29-71" aria-hidden="true" tabindex="-1"></a>The SBV announces a daily reference rate each morning. Commercial banks may quote rates within a band around this reference. The interbank market operates with a narrower $\pm$ 3% band. When the spot rate approaches the band ceiling, the SBV may intervene by selling USD from reserves, widening the band, or adjusting the reference rate.</span>
<span id="cb29-72"><a href="#cb29-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-73"><a href="#cb29-73" aria-hidden="true" tabindex="-1"></a>This regime creates distinctive statistical properties:</span>
<span id="cb29-74"><a href="#cb29-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-75"><a href="#cb29-75" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>**Return clustering near zero:** On most days, the VND/USD rate barely moves, producing a spike at zero in the return distribution.</span>
<span id="cb29-76"><a href="#cb29-76" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>**Discrete jumps:** Reference rate adjustments create large single-day moves that appear as outliers.</span>
<span id="cb29-77"><a href="#cb29-77" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>**Bounded volatility:** The band constrains daily moves, producing a return distribution with thinner tails than a freely floating currency.</span>
<span id="cb29-78"><a href="#cb29-78" aria-hidden="true" tabindex="-1"></a><span class="ss">4.  </span>**Asymmetric adjustment:** Depreciation pressure (VND weakening) is more common than appreciation, reflecting persistent inflation differentials.</span>
<span id="cb29-79"><a href="#cb29-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-80"><a href="#cb29-80" aria-hidden="true" tabindex="-1"></a><span class="fu">## Data Construction {#sec-fx-data}</span></span>
<span id="cb29-81"><a href="#cb29-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-82"><a href="#cb29-82" aria-hidden="true" tabindex="-1"></a><span class="fu">### Loading Libraries</span></span>
<span id="cb29-83"><a href="#cb29-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-86"><a href="#cb29-86" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-87"><a href="#cb29-87" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: setup</span></span>
<span id="cb29-88"><a href="#cb29-88" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Import libraries and configure environment"</span></span>
<span id="cb29-89"><a href="#cb29-89" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb29-90"><a href="#cb29-90" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb29-91"><a href="#cb29-91" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb29-92"><a href="#cb29-92" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb29-93"><a href="#cb29-93" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm</span>
<span id="cb29-94"><a href="#cb29-94" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.formula.api <span class="im">as</span> smf</span>
<span id="cb29-95"><a href="#cb29-95" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy <span class="im">import</span> stats</span>
<span id="cb29-96"><a href="#cb29-96" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> arch <span class="im">import</span> arch_model</span>
<span id="cb29-97"><a href="#cb29-97" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> linearmodels.panel <span class="im">import</span> PanelOLS</span>
<span id="cb29-98"><a href="#cb29-98" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> warnings</span>
<span id="cb29-99"><a href="#cb29-99" aria-hidden="true" tabindex="-1"></a>warnings.filterwarnings(<span class="st">'ignore'</span>)</span>
<span id="cb29-100"><a href="#cb29-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-101"><a href="#cb29-101" aria-hidden="true" tabindex="-1"></a>plt.rcParams.update({</span>
<span id="cb29-102"><a href="#cb29-102" aria-hidden="true" tabindex="-1"></a>    <span class="st">'figure.figsize'</span>: (<span class="dv">12</span>, <span class="dv">6</span>),</span>
<span id="cb29-103"><a href="#cb29-103" aria-hidden="true" tabindex="-1"></a>    <span class="st">'figure.dpi'</span>: <span class="dv">150</span>,</span>
<span id="cb29-104"><a href="#cb29-104" aria-hidden="true" tabindex="-1"></a>    <span class="st">'font.size'</span>: <span class="dv">11</span>,</span>
<span id="cb29-105"><a href="#cb29-105" aria-hidden="true" tabindex="-1"></a>    <span class="st">'axes.spines.top'</span>: <span class="va">False</span>,</span>
<span id="cb29-106"><a href="#cb29-106" aria-hidden="true" tabindex="-1"></a>    <span class="st">'axes.spines.right'</span>: <span class="va">False</span></span>
<span id="cb29-107"><a href="#cb29-107" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb29-108"><a href="#cb29-108" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-109"><a href="#cb29-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-110"><a href="#cb29-110" aria-hidden="true" tabindex="-1"></a><span class="fu">### Retrieving Exchange Rate Data</span></span>
<span id="cb29-111"><a href="#cb29-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-112"><a href="#cb29-112" aria-hidden="true" tabindex="-1"></a>We extract daily spot rates for the VND against all major currencies, along with the SBV reference rate and forward rates where available.</span>
<span id="cb29-113"><a href="#cb29-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-116"><a href="#cb29-116" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-117"><a href="#cb29-117" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: data-load</span></span>
<span id="cb29-118"><a href="#cb29-118" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Load exchange rate data"</span></span>
<span id="cb29-119"><a href="#cb29-119" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-120"><a href="#cb29-120" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datacore <span class="im">import</span> DataCoreClient</span>
<span id="cb29-121"><a href="#cb29-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-122"><a href="#cb29-122" aria-hidden="true" tabindex="-1"></a>client <span class="op">=</span> DataCoreClient()</span>
<span id="cb29-123"><a href="#cb29-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-124"><a href="#cb29-124" aria-hidden="true" tabindex="-1"></a><span class="co"># Spot exchange rates: VND per unit of foreign currency</span></span>
<span id="cb29-125"><a href="#cb29-125" aria-hidden="true" tabindex="-1"></a>fx_spot <span class="op">=</span> client.get_exchange_rates(</span>
<span id="cb29-126"><a href="#cb29-126" aria-hidden="true" tabindex="-1"></a>    base_currency<span class="op">=</span><span class="st">'VND'</span>,</span>
<span id="cb29-127"><a href="#cb29-127" aria-hidden="true" tabindex="-1"></a>    quote_currencies<span class="op">=</span>[<span class="st">'USD'</span>, <span class="st">'EUR'</span>, <span class="st">'JPY'</span>, <span class="st">'CNY'</span>, <span class="st">'KRW'</span>,</span>
<span id="cb29-128"><a href="#cb29-128" aria-hidden="true" tabindex="-1"></a>                      <span class="st">'SGD'</span>, <span class="st">'THB'</span>, <span class="st">'GBP'</span>, <span class="st">'AUD'</span>],</span>
<span id="cb29-129"><a href="#cb29-129" aria-hidden="true" tabindex="-1"></a>    start_date<span class="op">=</span><span class="st">'2005-01-01'</span>,</span>
<span id="cb29-130"><a href="#cb29-130" aria-hidden="true" tabindex="-1"></a>    end_date<span class="op">=</span><span class="st">'2024-12-31'</span>,</span>
<span id="cb29-131"><a href="#cb29-131" aria-hidden="true" tabindex="-1"></a>    fields<span class="op">=</span>[<span class="st">'date'</span>, <span class="st">'from_currency'</span>, <span class="st">'to_currency'</span>, <span class="st">'rate'</span>,</span>
<span id="cb29-132"><a href="#cb29-132" aria-hidden="true" tabindex="-1"></a>            <span class="st">'bid'</span>, <span class="st">'ask'</span>, <span class="st">'reference_rate'</span>]</span>
<span id="cb29-133"><a href="#cb29-133" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-134"><a href="#cb29-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-135"><a href="#cb29-135" aria-hidden="true" tabindex="-1"></a><span class="co"># Forward rates (VND/USD)</span></span>
<span id="cb29-136"><a href="#cb29-136" aria-hidden="true" tabindex="-1"></a>fx_forward <span class="op">=</span> client.get_fx_forwards(</span>
<span id="cb29-137"><a href="#cb29-137" aria-hidden="true" tabindex="-1"></a>    pair<span class="op">=</span><span class="st">'VND/USD'</span>,</span>
<span id="cb29-138"><a href="#cb29-138" aria-hidden="true" tabindex="-1"></a>    start_date<span class="op">=</span><span class="st">'2010-01-01'</span>,</span>
<span id="cb29-139"><a href="#cb29-139" aria-hidden="true" tabindex="-1"></a>    end_date<span class="op">=</span><span class="st">'2024-12-31'</span>,</span>
<span id="cb29-140"><a href="#cb29-140" aria-hidden="true" tabindex="-1"></a>    tenors<span class="op">=</span>[<span class="st">'1M'</span>, <span class="st">'3M'</span>, <span class="st">'6M'</span>, <span class="st">'12M'</span>],</span>
<span id="cb29-141"><a href="#cb29-141" aria-hidden="true" tabindex="-1"></a>    fields<span class="op">=</span>[<span class="st">'date'</span>, <span class="st">'tenor'</span>, <span class="st">'forward_rate'</span>, <span class="st">'forward_points'</span>]</span>
<span id="cb29-142"><a href="#cb29-142" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-143"><a href="#cb29-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-144"><a href="#cb29-144" aria-hidden="true" tabindex="-1"></a><span class="co"># Interest rates for parity tests</span></span>
<span id="cb29-145"><a href="#cb29-145" aria-hidden="true" tabindex="-1"></a>interest_rates <span class="op">=</span> client.get_interest_rates(</span>
<span id="cb29-146"><a href="#cb29-146" aria-hidden="true" tabindex="-1"></a>    countries<span class="op">=</span>[<span class="st">'VN'</span>, <span class="st">'US'</span>],</span>
<span id="cb29-147"><a href="#cb29-147" aria-hidden="true" tabindex="-1"></a>    start_date<span class="op">=</span><span class="st">'2005-01-01'</span>,</span>
<span id="cb29-148"><a href="#cb29-148" aria-hidden="true" tabindex="-1"></a>    end_date<span class="op">=</span><span class="st">'2024-12-31'</span>,</span>
<span id="cb29-149"><a href="#cb29-149" aria-hidden="true" tabindex="-1"></a>    instruments<span class="op">=</span>[<span class="st">'interbank_overnight'</span>, <span class="st">'deposit_3m'</span>,</span>
<span id="cb29-150"><a href="#cb29-150" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'government_bond_1y'</span>, <span class="st">'government_bond_10y'</span>]</span>
<span id="cb29-151"><a href="#cb29-151" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-152"><a href="#cb29-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-153"><a href="#cb29-153" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Spot observations: </span><span class="sc">{</span>fx_spot<span class="sc">.</span>shape[<span class="dv">0</span>]<span class="sc">:,}</span><span class="ss">"</span>)</span>
<span id="cb29-154"><a href="#cb29-154" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Forward observations: </span><span class="sc">{</span>fx_forward<span class="sc">.</span>shape[<span class="dv">0</span>]<span class="sc">:,}</span><span class="ss">"</span>)</span>
<span id="cb29-155"><a href="#cb29-155" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Interest rate observations: </span><span class="sc">{</span>interest_rates<span class="sc">.</span>shape[<span class="dv">0</span>]<span class="sc">:,}</span><span class="ss">"</span>)</span>
<span id="cb29-156"><a href="#cb29-156" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-157"><a href="#cb29-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-158"><a href="#cb29-158" aria-hidden="true" tabindex="-1"></a><span class="fu">### Constructing the VND/USD Time Series</span></span>
<span id="cb29-159"><a href="#cb29-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-160"><a href="#cb29-160" aria-hidden="true" tabindex="-1"></a>We focus primarily on the VND/USD pair, the dominant bilateral rate for Vietnam, while using other pairs for cross-rate analysis.</span>
<span id="cb29-161"><a href="#cb29-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-164"><a href="#cb29-164" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-165"><a href="#cb29-165" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: construct-vnd-usd</span></span>
<span id="cb29-166"><a href="#cb29-166" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-167"><a href="#cb29-167" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Construct clean VND/USD spot rate series with log returns"</span></span>
<span id="cb29-168"><a href="#cb29-168" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter VND/USD</span></span>
<span id="cb29-169"><a href="#cb29-169" aria-hidden="true" tabindex="-1"></a>vnd_usd <span class="op">=</span> fx_spot[</span>
<span id="cb29-170"><a href="#cb29-170" aria-hidden="true" tabindex="-1"></a>    (fx_spot[<span class="st">'from_currency'</span>] <span class="op">==</span> <span class="st">'VND'</span>) <span class="op">&amp;</span></span>
<span id="cb29-171"><a href="#cb29-171" aria-hidden="true" tabindex="-1"></a>    (fx_spot[<span class="st">'to_currency'</span>] <span class="op">==</span> <span class="st">'USD'</span>)</span>
<span id="cb29-172"><a href="#cb29-172" aria-hidden="true" tabindex="-1"></a>].copy()</span>
<span id="cb29-173"><a href="#cb29-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-174"><a href="#cb29-174" aria-hidden="true" tabindex="-1"></a>vnd_usd[<span class="st">'date'</span>] <span class="op">=</span> pd.to_datetime(vnd_usd[<span class="st">'date'</span>])</span>
<span id="cb29-175"><a href="#cb29-175" aria-hidden="true" tabindex="-1"></a>vnd_usd <span class="op">=</span> vnd_usd.sort_values(<span class="st">'date'</span>).set_index(<span class="st">'date'</span>)</span>
<span id="cb29-176"><a href="#cb29-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-177"><a href="#cb29-177" aria-hidden="true" tabindex="-1"></a><span class="co"># Log returns: positive = VND depreciation, negative = VND appreciation</span></span>
<span id="cb29-178"><a href="#cb29-178" aria-hidden="true" tabindex="-1"></a>vnd_usd[<span class="st">'log_return'</span>] <span class="op">=</span> np.log(vnd_usd[<span class="st">'rate'</span>] <span class="op">/</span> vnd_usd[<span class="st">'rate'</span>].shift(<span class="dv">1</span>))</span>
<span id="cb29-179"><a href="#cb29-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-180"><a href="#cb29-180" aria-hidden="true" tabindex="-1"></a><span class="co"># Bid-ask spread as fraction of mid rate</span></span>
<span id="cb29-181"><a href="#cb29-181" aria-hidden="true" tabindex="-1"></a>vnd_usd[<span class="st">'spread_pct'</span>] <span class="op">=</span> (vnd_usd[<span class="st">'ask'</span>] <span class="op">-</span> vnd_usd[<span class="st">'bid'</span>]) <span class="op">/</span> vnd_usd[<span class="st">'rate'</span>]</span>
<span id="cb29-182"><a href="#cb29-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-183"><a href="#cb29-183" aria-hidden="true" tabindex="-1"></a><span class="co"># Distance from reference rate (in %)</span></span>
<span id="cb29-184"><a href="#cb29-184" aria-hidden="true" tabindex="-1"></a>vnd_usd[<span class="st">'deviation_from_ref'</span>] <span class="op">=</span> (</span>
<span id="cb29-185"><a href="#cb29-185" aria-hidden="true" tabindex="-1"></a>    (vnd_usd[<span class="st">'rate'</span>] <span class="op">-</span> vnd_usd[<span class="st">'reference_rate'</span>])</span>
<span id="cb29-186"><a href="#cb29-186" aria-hidden="true" tabindex="-1"></a>    <span class="op">/</span> vnd_usd[<span class="st">'reference_rate'</span>] <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb29-187"><a href="#cb29-187" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-188"><a href="#cb29-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-189"><a href="#cb29-189" aria-hidden="true" tabindex="-1"></a><span class="co"># Rolling volatility measures</span></span>
<span id="cb29-190"><a href="#cb29-190" aria-hidden="true" tabindex="-1"></a>vnd_usd[<span class="st">'vol_30d'</span>] <span class="op">=</span> vnd_usd[<span class="st">'log_return'</span>].rolling(<span class="dv">30</span>).std() <span class="op">*</span> np.sqrt(<span class="dv">252</span>)</span>
<span id="cb29-191"><a href="#cb29-191" aria-hidden="true" tabindex="-1"></a>vnd_usd[<span class="st">'vol_90d'</span>] <span class="op">=</span> vnd_usd[<span class="st">'log_return'</span>].rolling(<span class="dv">90</span>).std() <span class="op">*</span> np.sqrt(<span class="dv">252</span>)</span>
<span id="cb29-192"><a href="#cb29-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-193"><a href="#cb29-193" aria-hidden="true" tabindex="-1"></a>vnd_usd <span class="op">=</span> vnd_usd.dropna(subset<span class="op">=</span>[<span class="st">'log_return'</span>])</span>
<span id="cb29-194"><a href="#cb29-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-195"><a href="#cb29-195" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"VND/USD series: </span><span class="sc">{</span><span class="bu">len</span>(vnd_usd)<span class="sc">}</span><span class="ss"> daily observations"</span>)</span>
<span id="cb29-196"><a href="#cb29-196" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Date range: </span><span class="sc">{</span>vnd_usd<span class="sc">.</span>index<span class="sc">.</span><span class="bu">min</span>()<span class="sc">}</span><span class="ss"> to </span><span class="sc">{</span>vnd_usd<span class="sc">.</span>index<span class="sc">.</span><span class="bu">max</span>()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb29-197"><a href="#cb29-197" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Summary of daily log returns:"</span>)</span>
<span id="cb29-198"><a href="#cb29-198" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(vnd_usd[<span class="st">'log_return'</span>].describe().<span class="bu">round</span>(<span class="dv">6</span>))</span>
<span id="cb29-199"><a href="#cb29-199" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-200"><a href="#cb29-200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-201"><a href="#cb29-201" aria-hidden="true" tabindex="-1"></a><span class="fu">### Multi-Currency Panel</span></span>
<span id="cb29-202"><a href="#cb29-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-203"><a href="#cb29-203" aria-hidden="true" tabindex="-1"></a>For cross-rate analysis and ASEAN comparisons, we construct a panel of log returns for all currency pairs.</span>
<span id="cb29-204"><a href="#cb29-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-207"><a href="#cb29-207" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-208"><a href="#cb29-208" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: multi-currency</span></span>
<span id="cb29-209"><a href="#cb29-209" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-210"><a href="#cb29-210" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Construct multi-currency return panel"</span></span>
<span id="cb29-211"><a href="#cb29-211" aria-hidden="true" tabindex="-1"></a><span class="co"># Pivot to wide format: one column per currency pair</span></span>
<span id="cb29-212"><a href="#cb29-212" aria-hidden="true" tabindex="-1"></a>fx_wide <span class="op">=</span> fx_spot.pivot_table(</span>
<span id="cb29-213"><a href="#cb29-213" aria-hidden="true" tabindex="-1"></a>    index<span class="op">=</span><span class="st">'date'</span>, columns<span class="op">=</span><span class="st">'to_currency'</span>, values<span class="op">=</span><span class="st">'rate'</span></span>
<span id="cb29-214"><a href="#cb29-214" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-215"><a href="#cb29-215" aria-hidden="true" tabindex="-1"></a>fx_wide.index <span class="op">=</span> pd.to_datetime(fx_wide.index)</span>
<span id="cb29-216"><a href="#cb29-216" aria-hidden="true" tabindex="-1"></a>fx_wide <span class="op">=</span> fx_wide.sort_index()</span>
<span id="cb29-217"><a href="#cb29-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-218"><a href="#cb29-218" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute log returns for all pairs</span></span>
<span id="cb29-219"><a href="#cb29-219" aria-hidden="true" tabindex="-1"></a>fx_returns <span class="op">=</span> np.log(fx_wide <span class="op">/</span> fx_wide.shift(<span class="dv">1</span>)).dropna()</span>
<span id="cb29-220"><a href="#cb29-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-221"><a href="#cb29-221" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary statistics</span></span>
<span id="cb29-222"><a href="#cb29-222" aria-hidden="true" tabindex="-1"></a>fx_summary <span class="op">=</span> pd.DataFrame({</span>
<span id="cb29-223"><a href="#cb29-223" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Mean (ann.)'</span>: fx_returns.mean() <span class="op">*</span> <span class="dv">252</span>,</span>
<span id="cb29-224"><a href="#cb29-224" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Vol (ann.)'</span>: fx_returns.std() <span class="op">*</span> np.sqrt(<span class="dv">252</span>),</span>
<span id="cb29-225"><a href="#cb29-225" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Skewness'</span>: fx_returns.skew(),</span>
<span id="cb29-226"><a href="#cb29-226" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Kurtosis'</span>: fx_returns.kurtosis(),</span>
<span id="cb29-227"><a href="#cb29-227" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Min'</span>: fx_returns.<span class="bu">min</span>(),</span>
<span id="cb29-228"><a href="#cb29-228" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Max'</span>: fx_returns.<span class="bu">max</span>()</span>
<span id="cb29-229"><a href="#cb29-229" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb29-230"><a href="#cb29-230" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"VND Cross-Rate Return Statistics (Daily):"</span>)</span>
<span id="cb29-231"><a href="#cb29-231" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(fx_summary.<span class="bu">round</span>(<span class="dv">4</span>))</span>
<span id="cb29-232"><a href="#cb29-232" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-233"><a href="#cb29-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-234"><a href="#cb29-234" aria-hidden="true" tabindex="-1"></a><span class="fu">## Statistical Properties of VND Returns {#sec-fx-statistics}</span></span>
<span id="cb29-235"><a href="#cb29-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-236"><a href="#cb29-236" aria-hidden="true" tabindex="-1"></a><span class="fu">### Return Distribution</span></span>
<span id="cb29-237"><a href="#cb29-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-238"><a href="#cb29-238" aria-hidden="true" tabindex="-1"></a>The distribution of VND/USD log returns deviates sharply from normality. The managed float regime produces a return distribution that is leptokurtic (fat-tailed) and concentrated near zero, with occasional large discrete jumps from reference rate adjustments.</span>
<span id="cb29-239"><a href="#cb29-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-242"><a href="#cb29-242" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-243"><a href="#cb29-243" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-return-distribution</span></span>
<span id="cb29-244"><a href="#cb29-244" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Distribution of daily VND/USD log returns compared to a fitted normal distribution. The empirical distribution shows excess kurtosis (fat tails) and a pronounced spike near zero, reflecting the managed float regime where the SBV constrains daily movements."</span></span>
<span id="cb29-245"><a href="#cb29-245" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-246"><a href="#cb29-246" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Plot VND/USD return distribution with normal overlay"</span></span>
<span id="cb29-247"><a href="#cb29-247" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">5</span>))</span>
<span id="cb29-248"><a href="#cb29-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-249"><a href="#cb29-249" aria-hidden="true" tabindex="-1"></a><span class="co"># Panel A: Histogram with normal overlay</span></span>
<span id="cb29-250"><a href="#cb29-250" aria-hidden="true" tabindex="-1"></a>returns <span class="op">=</span> vnd_usd[<span class="st">'log_return'</span>]</span>
<span id="cb29-251"><a href="#cb29-251" aria-hidden="true" tabindex="-1"></a>mu, sigma <span class="op">=</span> returns.mean(), returns.std()</span>
<span id="cb29-252"><a href="#cb29-252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-253"><a href="#cb29-253" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].hist(returns, bins<span class="op">=</span><span class="dv">100</span>, density<span class="op">=</span><span class="va">True</span>, color<span class="op">=</span><span class="st">'#2C5F8A'</span>,</span>
<span id="cb29-254"><a href="#cb29-254" aria-hidden="true" tabindex="-1"></a>             alpha<span class="op">=</span><span class="fl">0.7</span>, edgecolor<span class="op">=</span><span class="st">'white'</span>, label<span class="op">=</span><span class="st">'Empirical'</span>)</span>
<span id="cb29-255"><a href="#cb29-255" aria-hidden="true" tabindex="-1"></a>x_range <span class="op">=</span> np.linspace(returns.<span class="bu">min</span>(), returns.<span class="bu">max</span>(), <span class="dv">200</span>)</span>
<span id="cb29-256"><a href="#cb29-256" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].plot(x_range, stats.norm.pdf(x_range, mu, sigma),</span>
<span id="cb29-257"><a href="#cb29-257" aria-hidden="true" tabindex="-1"></a>             color<span class="op">=</span><span class="st">'#C0392B'</span>, linewidth<span class="op">=</span><span class="dv">2</span>, label<span class="op">=</span><span class="st">'Normal fit'</span>)</span>
<span id="cb29-258"><a href="#cb29-258" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_xlabel(<span class="st">'Daily Log Return'</span>)</span>
<span id="cb29-259"><a href="#cb29-259" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_ylabel(<span class="st">'Density'</span>)</span>
<span id="cb29-260"><a href="#cb29-260" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">'Panel A: Return Distribution'</span>)</span>
<span id="cb29-261"><a href="#cb29-261" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].legend()</span>
<span id="cb29-262"><a href="#cb29-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-263"><a href="#cb29-263" aria-hidden="true" tabindex="-1"></a><span class="co"># Panel B: QQ plot</span></span>
<span id="cb29-264"><a href="#cb29-264" aria-hidden="true" tabindex="-1"></a>stats.probplot(returns, dist<span class="op">=</span><span class="st">'norm'</span>, plot<span class="op">=</span>axes[<span class="dv">1</span>])</span>
<span id="cb29-265"><a href="#cb29-265" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">'Panel B: Normal Q-Q Plot'</span>)</span>
<span id="cb29-266"><a href="#cb29-266" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].get_lines()[<span class="dv">0</span>].set_color(<span class="st">'#2C5F8A'</span>)</span>
<span id="cb29-267"><a href="#cb29-267" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].get_lines()[<span class="dv">0</span>].set_markersize(<span class="dv">3</span>)</span>
<span id="cb29-268"><a href="#cb29-268" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].get_lines()[<span class="dv">1</span>].set_color(<span class="st">'#C0392B'</span>)</span>
<span id="cb29-269"><a href="#cb29-269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-270"><a href="#cb29-270" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb29-271"><a href="#cb29-271" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb29-272"><a href="#cb29-272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-273"><a href="#cb29-273" aria-hidden="true" tabindex="-1"></a><span class="co"># Formal tests</span></span>
<span id="cb29-274"><a href="#cb29-274" aria-hidden="true" tabindex="-1"></a>jb_stat, jb_p <span class="op">=</span> stats.jarque_bera(returns)</span>
<span id="cb29-275"><a href="#cb29-275" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Jarque-Bera test: statistic = </span><span class="sc">{</span>jb_stat<span class="sc">:.1f}</span><span class="ss">, p-value = </span><span class="sc">{</span>jb_p<span class="sc">:.2e}</span><span class="ss">"</span>)</span>
<span id="cb29-276"><a href="#cb29-276" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Skewness: </span><span class="sc">{</span>returns<span class="sc">.</span>skew()<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb29-277"><a href="#cb29-277" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Excess Kurtosis: </span><span class="sc">{</span>returns<span class="sc">.</span>kurtosis()<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb29-278"><a href="#cb29-278" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-279"><a href="#cb29-279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-280"><a href="#cb29-280" aria-hidden="true" tabindex="-1"></a><span class="fu">### Autocorrelation Structure</span></span>
<span id="cb29-281"><a href="#cb29-281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-282"><a href="#cb29-282" aria-hidden="true" tabindex="-1"></a>Freely floating exchange rate returns are approximately uncorrelated (consistent with the random walk result of @meese1983empirical). Managed exchange rates, however, may exhibit serial correlation because the central bank smooths adjustments over multiple days.</span>
<span id="cb29-283"><a href="#cb29-283" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-286"><a href="#cb29-286" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-287"><a href="#cb29-287" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-autocorrelation</span></span>
<span id="cb29-288"><a href="#cb29-288" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Autocorrelation function of VND/USD daily log returns (top) and squared returns (bottom). Returns show mild positive autocorrelation at short lags, reflecting the SBV's smoothing behavior. Squared returns show strong persistence, confirming the presence of volatility clustering."</span></span>
<span id="cb29-289"><a href="#cb29-289" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-290"><a href="#cb29-290" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Plot ACF of returns and squared returns"</span></span>
<span id="cb29-291"><a href="#cb29-291" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> statsmodels.graphics.tsaplots <span class="im">import</span> plot_acf</span>
<span id="cb29-292"><a href="#cb29-292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-293"><a href="#cb29-293" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">2</span>, <span class="dv">1</span>, figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">8</span>))</span>
<span id="cb29-294"><a href="#cb29-294" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-295"><a href="#cb29-295" aria-hidden="true" tabindex="-1"></a><span class="co"># ACF of returns</span></span>
<span id="cb29-296"><a href="#cb29-296" aria-hidden="true" tabindex="-1"></a>plot_acf(vnd_usd[<span class="st">'log_return'</span>].dropna(), lags<span class="op">=</span><span class="dv">40</span>, ax<span class="op">=</span>axes[<span class="dv">0</span>],</span>
<span id="cb29-297"><a href="#cb29-297" aria-hidden="true" tabindex="-1"></a>         color<span class="op">=</span><span class="st">'#2C5F8A'</span>, vlines_kwargs<span class="op">=</span>{<span class="st">'color'</span>: <span class="st">'#2C5F8A'</span>})</span>
<span id="cb29-298"><a href="#cb29-298" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">'Autocorrelation of Daily Returns'</span>)</span>
<span id="cb29-299"><a href="#cb29-299" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_ylabel(<span class="st">'ACF'</span>)</span>
<span id="cb29-300"><a href="#cb29-300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-301"><a href="#cb29-301" aria-hidden="true" tabindex="-1"></a><span class="co"># ACF of squared returns (volatility clustering)</span></span>
<span id="cb29-302"><a href="#cb29-302" aria-hidden="true" tabindex="-1"></a>plot_acf(vnd_usd[<span class="st">'log_return'</span>].dropna() <span class="op">**</span> <span class="dv">2</span>, lags<span class="op">=</span><span class="dv">40</span>, ax<span class="op">=</span>axes[<span class="dv">1</span>],</span>
<span id="cb29-303"><a href="#cb29-303" aria-hidden="true" tabindex="-1"></a>         color<span class="op">=</span><span class="st">'#C0392B'</span>, vlines_kwargs<span class="op">=</span>{<span class="st">'color'</span>: <span class="st">'#C0392B'</span>})</span>
<span id="cb29-304"><a href="#cb29-304" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">'Autocorrelation of Squared Returns (Volatility Clustering)'</span>)</span>
<span id="cb29-305"><a href="#cb29-305" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_ylabel(<span class="st">'ACF'</span>)</span>
<span id="cb29-306"><a href="#cb29-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-307"><a href="#cb29-307" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb29-308"><a href="#cb29-308" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb29-309"><a href="#cb29-309" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-310"><a href="#cb29-310" aria-hidden="true" tabindex="-1"></a><span class="co"># Ljung-Box test</span></span>
<span id="cb29-311"><a href="#cb29-311" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> statsmodels.stats.diagnostic <span class="im">import</span> acorr_ljungbox</span>
<span id="cb29-312"><a href="#cb29-312" aria-hidden="true" tabindex="-1"></a>lb_returns <span class="op">=</span> acorr_ljungbox(returns, lags<span class="op">=</span><span class="dv">10</span>, return_df<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb29-313"><a href="#cb29-313" aria-hidden="true" tabindex="-1"></a>lb_squared <span class="op">=</span> acorr_ljungbox(returns <span class="op">**</span> <span class="dv">2</span>, lags<span class="op">=</span><span class="dv">10</span>, return_df<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb29-314"><a href="#cb29-314" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Ljung-Box Test (Returns, lag 10):"</span>)</span>
<span id="cb29-315"><a href="#cb29-315" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Statistic: </span><span class="sc">{</span>lb_returns[<span class="st">'lb_stat'</span>]<span class="sc">.</span>iloc[<span class="op">-</span><span class="dv">1</span>]<span class="sc">:.2f}</span><span class="ss">, "</span></span>
<span id="cb29-316"><a href="#cb29-316" aria-hidden="true" tabindex="-1"></a>      <span class="ss">f"p-value: </span><span class="sc">{</span>lb_returns[<span class="st">'lb_pvalue'</span>]<span class="sc">.</span>iloc[<span class="op">-</span><span class="dv">1</span>]<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb29-317"><a href="#cb29-317" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Ljung-Box Test (Squared Returns, lag 10):"</span>)</span>
<span id="cb29-318"><a href="#cb29-318" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Statistic: </span><span class="sc">{</span>lb_squared[<span class="st">'lb_stat'</span>]<span class="sc">.</span>iloc[<span class="op">-</span><span class="dv">1</span>]<span class="sc">:.2f}</span><span class="ss">, "</span></span>
<span id="cb29-319"><a href="#cb29-319" aria-hidden="true" tabindex="-1"></a>      <span class="ss">f"p-value: </span><span class="sc">{</span>lb_squared[<span class="st">'lb_pvalue'</span>]<span class="sc">.</span>iloc[<span class="op">-</span><span class="dv">1</span>]<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb29-320"><a href="#cb29-320" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-321"><a href="#cb29-321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-322"><a href="#cb29-322" aria-hidden="true" tabindex="-1"></a><span class="fu">### Reference Rate Adjustments and Structural Breaks</span></span>
<span id="cb29-323"><a href="#cb29-323" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-324"><a href="#cb29-324" aria-hidden="true" tabindex="-1"></a>The SBV periodically adjusts the reference rate or the trading band width, events that create structural breaks in the exchange rate series. Identifying these breaks is essential for accurate modeling.</span>
<span id="cb29-325"><a href="#cb29-325" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-328"><a href="#cb29-328" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-329"><a href="#cb29-329" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-structural-breaks</span></span>
<span id="cb29-330"><a href="#cb29-330" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-331"><a href="#cb29-331" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "VND/USD spot rate with major SBV reference rate adjustments and band changes marked. These discrete policy events create structural breaks that standard time series models must accommodate."</span></span>
<span id="cb29-332"><a href="#cb29-332" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Identify and plot major exchange rate adjustments"</span></span>
<span id="cb29-333"><a href="#cb29-333" aria-hidden="true" tabindex="-1"></a><span class="co"># Detect large daily moves (proxy for policy adjustments)</span></span>
<span id="cb29-334"><a href="#cb29-334" aria-hidden="true" tabindex="-1"></a>threshold <span class="op">=</span> vnd_usd[<span class="st">'log_return'</span>].std() <span class="op">*</span> <span class="dv">3</span></span>
<span id="cb29-335"><a href="#cb29-335" aria-hidden="true" tabindex="-1"></a>large_moves <span class="op">=</span> vnd_usd[vnd_usd[<span class="st">'log_return'</span>].<span class="bu">abs</span>() <span class="op">&gt;</span> threshold].copy()</span>
<span id="cb29-336"><a href="#cb29-336" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-337"><a href="#cb29-337" aria-hidden="true" tabindex="-1"></a><span class="co"># Known major adjustment dates (approximate)</span></span>
<span id="cb29-338"><a href="#cb29-338" aria-hidden="true" tabindex="-1"></a>policy_events <span class="op">=</span> pd.DataFrame({</span>
<span id="cb29-339"><a href="#cb29-339" aria-hidden="true" tabindex="-1"></a>    <span class="st">'date'</span>: pd.to_datetime([</span>
<span id="cb29-340"><a href="#cb29-340" aria-hidden="true" tabindex="-1"></a>        <span class="st">'2008-06-10'</span>, <span class="st">'2008-12-25'</span>, <span class="st">'2009-11-25'</span>,</span>
<span id="cb29-341"><a href="#cb29-341" aria-hidden="true" tabindex="-1"></a>        <span class="st">'2010-02-11'</span>, <span class="st">'2010-08-18'</span>, <span class="st">'2011-02-11'</span>,</span>
<span id="cb29-342"><a href="#cb29-342" aria-hidden="true" tabindex="-1"></a>        <span class="st">'2011-08-10'</span>, <span class="st">'2015-08-12'</span>, <span class="st">'2015-08-19'</span>,</span>
<span id="cb29-343"><a href="#cb29-343" aria-hidden="true" tabindex="-1"></a>        <span class="st">'2016-01-04'</span></span>
<span id="cb29-344"><a href="#cb29-344" aria-hidden="true" tabindex="-1"></a>    ]),</span>
<span id="cb29-345"><a href="#cb29-345" aria-hidden="true" tabindex="-1"></a>    <span class="st">'event'</span>: [</span>
<span id="cb29-346"><a href="#cb29-346" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Band widened to +/-1%'</span>, <span class="st">'Band widened to +/-3%'</span>,</span>
<span id="cb29-347"><a href="#cb29-347" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Devaluation ~5.4%'</span>, <span class="st">'Devaluation ~3.4%'</span>,</span>
<span id="cb29-348"><a href="#cb29-348" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Band narrowed to +/-1%'</span>, <span class="st">'Devaluation ~8.5%'</span>,</span>
<span id="cb29-349"><a href="#cb29-349" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Band widened to +/-1%'</span>, <span class="st">'Devaluation ~1%'</span>,</span>
<span id="cb29-350"><a href="#cb29-350" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Devaluation ~1%'</span>, <span class="st">'New reference rate mechanism'</span></span>
<span id="cb29-351"><a href="#cb29-351" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb29-352"><a href="#cb29-352" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb29-353"><a href="#cb29-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-354"><a href="#cb29-354" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">6</span>))</span>
<span id="cb29-355"><a href="#cb29-355" aria-hidden="true" tabindex="-1"></a>ax.plot(vnd_usd.index, vnd_usd[<span class="st">'rate'</span>], color<span class="op">=</span><span class="st">'#2C5F8A'</span>,</span>
<span id="cb29-356"><a href="#cb29-356" aria-hidden="true" tabindex="-1"></a>        linewidth<span class="op">=</span><span class="fl">1.5</span>, label<span class="op">=</span><span class="st">'VND/USD Spot'</span>)</span>
<span id="cb29-357"><a href="#cb29-357" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-358"><a href="#cb29-358" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="st">'reference_rate'</span> <span class="kw">in</span> vnd_usd.columns:</span>
<span id="cb29-359"><a href="#cb29-359" aria-hidden="true" tabindex="-1"></a>    ref_clean <span class="op">=</span> vnd_usd[<span class="st">'reference_rate'</span>].dropna()</span>
<span id="cb29-360"><a href="#cb29-360" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(ref_clean) <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb29-361"><a href="#cb29-361" aria-hidden="true" tabindex="-1"></a>        ax.plot(ref_clean.index, ref_clean, color<span class="op">=</span><span class="st">'#E67E22'</span>,</span>
<span id="cb29-362"><a href="#cb29-362" aria-hidden="true" tabindex="-1"></a>                linewidth<span class="op">=</span><span class="dv">1</span>, alpha<span class="op">=</span><span class="fl">0.7</span>, label<span class="op">=</span><span class="st">'SBV Reference Rate'</span>)</span>
<span id="cb29-363"><a href="#cb29-363" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-364"><a href="#cb29-364" aria-hidden="true" tabindex="-1"></a><span class="co"># Mark policy events</span></span>
<span id="cb29-365"><a href="#cb29-365" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> _, event <span class="kw">in</span> policy_events.iterrows():</span>
<span id="cb29-366"><a href="#cb29-366" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> event[<span class="st">'date'</span>] <span class="op">&gt;=</span> vnd_usd.index.<span class="bu">min</span>():</span>
<span id="cb29-367"><a href="#cb29-367" aria-hidden="true" tabindex="-1"></a>        rate_at_event <span class="op">=</span> vnd_usd[<span class="st">'rate'</span>].asof(event[<span class="st">'date'</span>])</span>
<span id="cb29-368"><a href="#cb29-368" aria-hidden="true" tabindex="-1"></a>        ax.annotate(</span>
<span id="cb29-369"><a href="#cb29-369" aria-hidden="true" tabindex="-1"></a>            event[<span class="st">'event'</span>],</span>
<span id="cb29-370"><a href="#cb29-370" aria-hidden="true" tabindex="-1"></a>            xy<span class="op">=</span>(event[<span class="st">'date'</span>], rate_at_event),</span>
<span id="cb29-371"><a href="#cb29-371" aria-hidden="true" tabindex="-1"></a>            xytext<span class="op">=</span>(<span class="dv">0</span>, <span class="dv">30</span>), textcoords<span class="op">=</span><span class="st">'offset points'</span>,</span>
<span id="cb29-372"><a href="#cb29-372" aria-hidden="true" tabindex="-1"></a>            fontsize<span class="op">=</span><span class="dv">7</span>, rotation<span class="op">=</span><span class="dv">45</span>, ha<span class="op">=</span><span class="st">'left'</span>,</span>
<span id="cb29-373"><a href="#cb29-373" aria-hidden="true" tabindex="-1"></a>            arrowprops<span class="op">=</span><span class="bu">dict</span>(arrowstyle<span class="op">=</span><span class="st">'-&gt;'</span>, color<span class="op">=</span><span class="st">'#C0392B'</span>,</span>
<span id="cb29-374"><a href="#cb29-374" aria-hidden="true" tabindex="-1"></a>                           lw<span class="op">=</span><span class="fl">0.8</span>),</span>
<span id="cb29-375"><a href="#cb29-375" aria-hidden="true" tabindex="-1"></a>            color<span class="op">=</span><span class="st">'#C0392B'</span></span>
<span id="cb29-376"><a href="#cb29-376" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb29-377"><a href="#cb29-377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-378"><a href="#cb29-378" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">'VND per USD'</span>)</span>
<span id="cb29-379"><a href="#cb29-379" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">'VND/USD Exchange Rate with Policy Events'</span>)</span>
<span id="cb29-380"><a href="#cb29-380" aria-hidden="true" tabindex="-1"></a>ax.legend(loc<span class="op">=</span><span class="st">'upper left'</span>)</span>
<span id="cb29-381"><a href="#cb29-381" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb29-382"><a href="#cb29-382" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb29-383"><a href="#cb29-383" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-384"><a href="#cb29-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-385"><a href="#cb29-385" aria-hidden="true" tabindex="-1"></a><span class="fu">### Cross-Currency Correlations</span></span>
<span id="cb29-386"><a href="#cb29-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-387"><a href="#cb29-387" aria-hidden="true" tabindex="-1"></a>Understanding how VND co-moves with other currencies is important for diversification and for identifying common drivers (e.g., USD strength affects all Asian currencies).</span>
<span id="cb29-388"><a href="#cb29-388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-391"><a href="#cb29-391" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-392"><a href="#cb29-392" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-cross-correlations</span></span>
<span id="cb29-393"><a href="#cb29-393" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-394"><a href="#cb29-394" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Correlation matrix of daily VND cross-rate returns. VND movements against the USD are positively correlated with other Asian currency depreciation, reflecting common exposure to USD strength and global risk sentiment."</span></span>
<span id="cb29-395"><a href="#cb29-395" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Compute and visualize cross-currency return correlations"</span></span>
<span id="cb29-396"><a href="#cb29-396" aria-hidden="true" tabindex="-1"></a><span class="co"># Correlation matrix of daily returns</span></span>
<span id="cb29-397"><a href="#cb29-397" aria-hidden="true" tabindex="-1"></a>corr_matrix <span class="op">=</span> fx_returns.corr()</span>
<span id="cb29-398"><a href="#cb29-398" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-399"><a href="#cb29-399" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">9</span>, <span class="dv">8</span>))</span>
<span id="cb29-400"><a href="#cb29-400" aria-hidden="true" tabindex="-1"></a>mask <span class="op">=</span> np.triu(np.ones_like(corr_matrix, dtype<span class="op">=</span><span class="bu">bool</span>), k<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb29-401"><a href="#cb29-401" aria-hidden="true" tabindex="-1"></a>sns.heatmap(</span>
<span id="cb29-402"><a href="#cb29-402" aria-hidden="true" tabindex="-1"></a>    corr_matrix, mask<span class="op">=</span>mask, annot<span class="op">=</span><span class="va">True</span>, fmt<span class="op">=</span><span class="st">'.2f'</span>,</span>
<span id="cb29-403"><a href="#cb29-403" aria-hidden="true" tabindex="-1"></a>    cmap<span class="op">=</span><span class="st">'RdBu_r'</span>, center<span class="op">=</span><span class="dv">0</span>, vmin<span class="op">=-</span><span class="dv">1</span>, vmax<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb29-404"><a href="#cb29-404" aria-hidden="true" tabindex="-1"></a>    square<span class="op">=</span><span class="va">True</span>, linewidths<span class="op">=</span><span class="fl">0.5</span>, ax<span class="op">=</span>ax,</span>
<span id="cb29-405"><a href="#cb29-405" aria-hidden="true" tabindex="-1"></a>    cbar_kws<span class="op">=</span>{<span class="st">'label'</span>: <span class="st">'Correlation'</span>}</span>
<span id="cb29-406"><a href="#cb29-406" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-407"><a href="#cb29-407" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">'Cross-Rate Return Correlations (VND Base)'</span>)</span>
<span id="cb29-408"><a href="#cb29-408" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb29-409"><a href="#cb29-409" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb29-410"><a href="#cb29-410" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-411"><a href="#cb29-411" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-412"><a href="#cb29-412" aria-hidden="true" tabindex="-1"></a><span class="fu">## Interest Rate Parity Tests {#sec-fx-parity}</span></span>
<span id="cb29-413"><a href="#cb29-413" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-414"><a href="#cb29-414" aria-hidden="true" tabindex="-1"></a><span class="fu">### Testing Covered Interest Rate Parity</span></span>
<span id="cb29-415"><a href="#cb29-415" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-416"><a href="#cb29-416" aria-hidden="true" tabindex="-1"></a>CIP deviations are measured as the gap between the forward premium and the interest rate differential:</span>
<span id="cb29-417"><a href="#cb29-417" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-418"><a href="#cb29-418" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb29-419"><a href="#cb29-419" aria-hidden="true" tabindex="-1"></a>\text{CIP Deviation}_t = f_{t,k} - s_t - (r^{VND}_{t,k} - r^{USD}_{t,k})</span>
<span id="cb29-420"><a href="#cb29-420" aria-hidden="true" tabindex="-1"></a>$$ {#eq-cip-deviation}</span>
<span id="cb29-421"><a href="#cb29-421" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-422"><a href="#cb29-422" aria-hidden="true" tabindex="-1"></a>where $f_{t,k} = \ln F_{t,t+k}$ and $s_t = \ln S_t$ are log forward and spot rates. Under exact CIP, this deviation is zero.</span>
<span id="cb29-423"><a href="#cb29-423" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-426"><a href="#cb29-426" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-427"><a href="#cb29-427" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: cip-test</span></span>
<span id="cb29-428"><a href="#cb29-428" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Compute CIP deviations for VND/USD"</span></span>
<span id="cb29-429"><a href="#cb29-429" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-430"><a href="#cb29-430" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge spot, forward, and interest rate data</span></span>
<span id="cb29-431"><a href="#cb29-431" aria-hidden="true" tabindex="-1"></a>vnd_usd_monthly <span class="op">=</span> vnd_usd[<span class="st">'rate'</span>].resample(<span class="st">'M'</span>).last().to_frame(<span class="st">'spot'</span>)</span>
<span id="cb29-432"><a href="#cb29-432" aria-hidden="true" tabindex="-1"></a>vnd_usd_monthly.index <span class="op">=</span> vnd_usd_monthly.index.to_period(<span class="st">'M'</span>).to_timestamp()</span>
<span id="cb29-433"><a href="#cb29-433" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-434"><a href="#cb29-434" aria-hidden="true" tabindex="-1"></a><span class="co"># Forward rates (3-month tenor)</span></span>
<span id="cb29-435"><a href="#cb29-435" aria-hidden="true" tabindex="-1"></a>fwd_3m <span class="op">=</span> fx_forward[fx_forward[<span class="st">'tenor'</span>] <span class="op">==</span> <span class="st">'3M'</span>].copy()</span>
<span id="cb29-436"><a href="#cb29-436" aria-hidden="true" tabindex="-1"></a>fwd_3m[<span class="st">'date'</span>] <span class="op">=</span> pd.to_datetime(fwd_3m[<span class="st">'date'</span>])</span>
<span id="cb29-437"><a href="#cb29-437" aria-hidden="true" tabindex="-1"></a>fwd_3m <span class="op">=</span> fwd_3m.set_index(<span class="st">'date'</span>).resample(<span class="st">'M'</span>).last()</span>
<span id="cb29-438"><a href="#cb29-438" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-439"><a href="#cb29-439" aria-hidden="true" tabindex="-1"></a><span class="co"># Interest rate differential</span></span>
<span id="cb29-440"><a href="#cb29-440" aria-hidden="true" tabindex="-1"></a>vn_rates <span class="op">=</span> interest_rates[</span>
<span id="cb29-441"><a href="#cb29-441" aria-hidden="true" tabindex="-1"></a>    (interest_rates[<span class="st">'country'</span>] <span class="op">==</span> <span class="st">'VN'</span>) <span class="op">&amp;</span></span>
<span id="cb29-442"><a href="#cb29-442" aria-hidden="true" tabindex="-1"></a>    (interest_rates[<span class="st">'instrument'</span>] <span class="op">==</span> <span class="st">'deposit_3m'</span>)</span>
<span id="cb29-443"><a href="#cb29-443" aria-hidden="true" tabindex="-1"></a>].set_index(<span class="st">'date'</span>)[<span class="st">'rate'</span>].resample(<span class="st">'M'</span>).last()</span>
<span id="cb29-444"><a href="#cb29-444" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-445"><a href="#cb29-445" aria-hidden="true" tabindex="-1"></a>us_rates <span class="op">=</span> interest_rates[</span>
<span id="cb29-446"><a href="#cb29-446" aria-hidden="true" tabindex="-1"></a>    (interest_rates[<span class="st">'country'</span>] <span class="op">==</span> <span class="st">'US'</span>) <span class="op">&amp;</span></span>
<span id="cb29-447"><a href="#cb29-447" aria-hidden="true" tabindex="-1"></a>    (interest_rates[<span class="st">'instrument'</span>] <span class="op">==</span> <span class="st">'deposit_3m'</span>)</span>
<span id="cb29-448"><a href="#cb29-448" aria-hidden="true" tabindex="-1"></a>].set_index(<span class="st">'date'</span>)[<span class="st">'rate'</span>].resample(<span class="st">'M'</span>).last()</span>
<span id="cb29-449"><a href="#cb29-449" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-450"><a href="#cb29-450" aria-hidden="true" tabindex="-1"></a><span class="co"># Align and compute CIP deviation</span></span>
<span id="cb29-451"><a href="#cb29-451" aria-hidden="true" tabindex="-1"></a>cip_data <span class="op">=</span> pd.DataFrame({</span>
<span id="cb29-452"><a href="#cb29-452" aria-hidden="true" tabindex="-1"></a>    <span class="st">'spot'</span>: vnd_usd_monthly[<span class="st">'spot'</span>],</span>
<span id="cb29-453"><a href="#cb29-453" aria-hidden="true" tabindex="-1"></a>    <span class="st">'forward'</span>: fwd_3m[<span class="st">'forward_rate'</span>],</span>
<span id="cb29-454"><a href="#cb29-454" aria-hidden="true" tabindex="-1"></a>    <span class="st">'r_vnd'</span>: vn_rates <span class="op">/</span> <span class="dv">100</span>,</span>
<span id="cb29-455"><a href="#cb29-455" aria-hidden="true" tabindex="-1"></a>    <span class="st">'r_usd'</span>: us_rates <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb29-456"><a href="#cb29-456" aria-hidden="true" tabindex="-1"></a>}).dropna()</span>
<span id="cb29-457"><a href="#cb29-457" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-458"><a href="#cb29-458" aria-hidden="true" tabindex="-1"></a><span class="co"># CIP deviation (annualized, in basis points)</span></span>
<span id="cb29-459"><a href="#cb29-459" aria-hidden="true" tabindex="-1"></a>cip_data[<span class="st">'log_spot'</span>] <span class="op">=</span> np.log(cip_data[<span class="st">'spot'</span>])</span>
<span id="cb29-460"><a href="#cb29-460" aria-hidden="true" tabindex="-1"></a>cip_data[<span class="st">'log_forward'</span>] <span class="op">=</span> np.log(cip_data[<span class="st">'forward'</span>])</span>
<span id="cb29-461"><a href="#cb29-461" aria-hidden="true" tabindex="-1"></a>cip_data[<span class="st">'forward_premium'</span>] <span class="op">=</span> (</span>
<span id="cb29-462"><a href="#cb29-462" aria-hidden="true" tabindex="-1"></a>    (cip_data[<span class="st">'log_forward'</span>] <span class="op">-</span> cip_data[<span class="st">'log_spot'</span>]) <span class="op">*</span> <span class="dv">4</span></span>
<span id="cb29-463"><a href="#cb29-463" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-464"><a href="#cb29-464" aria-hidden="true" tabindex="-1"></a>cip_data[<span class="st">'rate_diff'</span>] <span class="op">=</span> cip_data[<span class="st">'r_vnd'</span>] <span class="op">-</span> cip_data[<span class="st">'r_usd'</span>]</span>
<span id="cb29-465"><a href="#cb29-465" aria-hidden="true" tabindex="-1"></a>cip_data[<span class="st">'cip_deviation'</span>] <span class="op">=</span> (</span>
<span id="cb29-466"><a href="#cb29-466" aria-hidden="true" tabindex="-1"></a>    (cip_data[<span class="st">'forward_premium'</span>] <span class="op">-</span> cip_data[<span class="st">'rate_diff'</span>]) <span class="op">*</span> <span class="dv">10000</span></span>
<span id="cb29-467"><a href="#cb29-467" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-468"><a href="#cb29-468" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-469"><a href="#cb29-469" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"CIP Deviation Summary (basis points, annualized):"</span>)</span>
<span id="cb29-470"><a href="#cb29-470" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(cip_data[<span class="st">'cip_deviation'</span>].describe().<span class="bu">round</span>(<span class="dv">1</span>))</span>
<span id="cb29-471"><a href="#cb29-471" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Mean deviation: </span><span class="sc">{</span>cip_data[<span class="st">'cip_deviation'</span>]<span class="sc">.</span>mean()<span class="sc">:.1f}</span><span class="ss"> bps"</span>)</span>
<span id="cb29-472"><a href="#cb29-472" aria-hidden="true" tabindex="-1"></a>t_stat, p_val <span class="op">=</span> stats.ttest_1samp(cip_data[<span class="st">'cip_deviation'</span>].dropna(), <span class="dv">0</span>)</span>
<span id="cb29-473"><a href="#cb29-473" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"One-sample t-test: t = </span><span class="sc">{</span>t_stat<span class="sc">:.2f}</span><span class="ss">, p = </span><span class="sc">{</span>p_val<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb29-474"><a href="#cb29-474" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-475"><a href="#cb29-475" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-478"><a href="#cb29-478" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-479"><a href="#cb29-479" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-cip-deviation</span></span>
<span id="cb29-480"><a href="#cb29-480" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-481"><a href="#cb29-481" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "CIP deviations for VND/USD over time (annualized, basis points). Persistent positive deviations reflect capital controls and limited arbitrage capital in the Vietnamese forward market. Deviations widened during global stress episodes (2008--2009, 2011, 2020), consistent with the findings of @du2018deviations for major currencies."</span></span>
<span id="cb29-482"><a href="#cb29-482" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Plot CIP deviations over time"</span></span>
<span id="cb29-483"><a href="#cb29-483" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">2</span>, <span class="dv">1</span>, figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">8</span>), height_ratios<span class="op">=</span>[<span class="dv">2</span>, <span class="dv">1</span>])</span>
<span id="cb29-484"><a href="#cb29-484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-485"><a href="#cb29-485" aria-hidden="true" tabindex="-1"></a><span class="co"># Panel A: CIP deviation time series</span></span>
<span id="cb29-486"><a href="#cb29-486" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].fill_between(</span>
<span id="cb29-487"><a href="#cb29-487" aria-hidden="true" tabindex="-1"></a>    cip_data.index, <span class="dv">0</span>, cip_data[<span class="st">'cip_deviation'</span>],</span>
<span id="cb29-488"><a href="#cb29-488" aria-hidden="true" tabindex="-1"></a>    where<span class="op">=</span>cip_data[<span class="st">'cip_deviation'</span>] <span class="op">&gt;</span> <span class="dv">0</span>,</span>
<span id="cb29-489"><a href="#cb29-489" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">'#C0392B'</span>, alpha<span class="op">=</span><span class="fl">0.4</span>, label<span class="op">=</span><span class="st">'Positive (VND forward expensive)'</span></span>
<span id="cb29-490"><a href="#cb29-490" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-491"><a href="#cb29-491" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].fill_between(</span>
<span id="cb29-492"><a href="#cb29-492" aria-hidden="true" tabindex="-1"></a>    cip_data.index, <span class="dv">0</span>, cip_data[<span class="st">'cip_deviation'</span>],</span>
<span id="cb29-493"><a href="#cb29-493" aria-hidden="true" tabindex="-1"></a>    where<span class="op">=</span>cip_data[<span class="st">'cip_deviation'</span>] <span class="op">&lt;=</span> <span class="dv">0</span>,</span>
<span id="cb29-494"><a href="#cb29-494" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">'#27AE60'</span>, alpha<span class="op">=</span><span class="fl">0.4</span>, label<span class="op">=</span><span class="st">'Negative'</span></span>
<span id="cb29-495"><a href="#cb29-495" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-496"><a href="#cb29-496" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].axhline(y<span class="op">=</span><span class="dv">0</span>, color<span class="op">=</span><span class="st">'black'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb29-497"><a href="#cb29-497" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_ylabel(<span class="st">'CIP Deviation (bps)'</span>)</span>
<span id="cb29-498"><a href="#cb29-498" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">'Panel A: CIP Deviations for VND/USD'</span>)</span>
<span id="cb29-499"><a href="#cb29-499" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].legend()</span>
<span id="cb29-500"><a href="#cb29-500" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-501"><a href="#cb29-501" aria-hidden="true" tabindex="-1"></a><span class="co"># Panel B: Interest rate differential</span></span>
<span id="cb29-502"><a href="#cb29-502" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].plot(cip_data.index, cip_data[<span class="st">'r_vnd'</span>] <span class="op">*</span> <span class="dv">100</span>,</span>
<span id="cb29-503"><a href="#cb29-503" aria-hidden="true" tabindex="-1"></a>             color<span class="op">=</span><span class="st">'#C0392B'</span>, label<span class="op">=</span><span class="st">'Vietnam 3M'</span>)</span>
<span id="cb29-504"><a href="#cb29-504" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].plot(cip_data.index, cip_data[<span class="st">'r_usd'</span>] <span class="op">*</span> <span class="dv">100</span>,</span>
<span id="cb29-505"><a href="#cb29-505" aria-hidden="true" tabindex="-1"></a>             color<span class="op">=</span><span class="st">'#2C5F8A'</span>, label<span class="op">=</span><span class="st">'US 3M'</span>)</span>
<span id="cb29-506"><a href="#cb29-506" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_ylabel(<span class="st">'Interest Rate (%)'</span>)</span>
<span id="cb29-507"><a href="#cb29-507" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_xlabel(<span class="st">'Date'</span>)</span>
<span id="cb29-508"><a href="#cb29-508" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">'Panel B: Interest Rate Differential'</span>)</span>
<span id="cb29-509"><a href="#cb29-509" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].legend()</span>
<span id="cb29-510"><a href="#cb29-510" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-511"><a href="#cb29-511" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb29-512"><a href="#cb29-512" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb29-513"><a href="#cb29-513" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-514"><a href="#cb29-514" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-515"><a href="#cb29-515" aria-hidden="true" tabindex="-1"></a><span class="fu">### Testing Uncovered Interest Rate Parity</span></span>
<span id="cb29-516"><a href="#cb29-516" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-517"><a href="#cb29-517" aria-hidden="true" tabindex="-1"></a>The standard UIP regression is:</span>
<span id="cb29-518"><a href="#cb29-518" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-519"><a href="#cb29-519" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb29-520"><a href="#cb29-520" aria-hidden="true" tabindex="-1"></a>\Delta s_{t+k} = \alpha + \beta (r^{VND}_{t,k} - r^{USD}_{t,k}) + \varepsilon_{t+k}</span>
<span id="cb29-521"><a href="#cb29-521" aria-hidden="true" tabindex="-1"></a>$$ {#eq-uip-regression}</span>
<span id="cb29-522"><a href="#cb29-522" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-523"><a href="#cb29-523" aria-hidden="true" tabindex="-1"></a>Under UIP, $\alpha = 0$ and $\beta = 1$. The @fama1984forward anomaly corresponds to $\beta &lt; 1$ (often $\beta &lt; 0$), implying that high-interest-rate currencies appreciate rather than depreciate.</span>
<span id="cb29-524"><a href="#cb29-524" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-527"><a href="#cb29-527" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-528"><a href="#cb29-528" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: uip-test</span></span>
<span id="cb29-529"><a href="#cb29-529" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Fama regression test of UIP for VND/USD"</span></span>
<span id="cb29-530"><a href="#cb29-530" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-531"><a href="#cb29-531" aria-hidden="true" tabindex="-1"></a><span class="co"># Monthly exchange rate changes</span></span>
<span id="cb29-532"><a href="#cb29-532" aria-hidden="true" tabindex="-1"></a>cip_data[<span class="st">'delta_s'</span>] <span class="op">=</span> (</span>
<span id="cb29-533"><a href="#cb29-533" aria-hidden="true" tabindex="-1"></a>    np.log(cip_data[<span class="st">'spot'</span>].shift(<span class="op">-</span><span class="dv">3</span>) <span class="op">/</span> cip_data[<span class="st">'spot'</span>])</span>
<span id="cb29-534"><a href="#cb29-534" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-535"><a href="#cb29-535" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-536"><a href="#cb29-536" aria-hidden="true" tabindex="-1"></a><span class="co"># Fama regression</span></span>
<span id="cb29-537"><a href="#cb29-537" aria-hidden="true" tabindex="-1"></a>uip_data <span class="op">=</span> cip_data[[<span class="st">'delta_s'</span>, <span class="st">'rate_diff'</span>]].dropna()</span>
<span id="cb29-538"><a href="#cb29-538" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-539"><a href="#cb29-539" aria-hidden="true" tabindex="-1"></a>uip_model <span class="op">=</span> sm.OLS(</span>
<span id="cb29-540"><a href="#cb29-540" aria-hidden="true" tabindex="-1"></a>    uip_data[<span class="st">'delta_s'</span>],</span>
<span id="cb29-541"><a href="#cb29-541" aria-hidden="true" tabindex="-1"></a>    sm.add_constant(uip_data[<span class="st">'rate_diff'</span>])</span>
<span id="cb29-542"><a href="#cb29-542" aria-hidden="true" tabindex="-1"></a>).fit(cov_type<span class="op">=</span><span class="st">'HAC'</span>, cov_kwds<span class="op">=</span>{<span class="st">'maxlags'</span>: <span class="dv">4</span>})</span>
<span id="cb29-543"><a href="#cb29-543" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-544"><a href="#cb29-544" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"UIP (Fama) Regression: delta_s_{t+3m} = alpha + beta(r_VND - r_USD) + eps"</span>)</span>
<span id="cb29-545"><a href="#cb29-545" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">alpha = </span><span class="sc">{</span>uip_model<span class="sc">.</span>params[<span class="st">'const'</span>]<span class="sc">:.4f}</span><span class="ss"> "</span></span>
<span id="cb29-546"><a href="#cb29-546" aria-hidden="true" tabindex="-1"></a>      <span class="ss">f"(t = </span><span class="sc">{</span>uip_model<span class="sc">.</span>tvalues[<span class="st">'const'</span>]<span class="sc">:.2f}</span><span class="ss">)"</span>)</span>
<span id="cb29-547"><a href="#cb29-547" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"beta = </span><span class="sc">{</span>uip_model<span class="sc">.</span>params[<span class="st">'rate_diff'</span>]<span class="sc">:.4f}</span><span class="ss"> "</span></span>
<span id="cb29-548"><a href="#cb29-548" aria-hidden="true" tabindex="-1"></a>      <span class="ss">f"(t = </span><span class="sc">{</span>uip_model<span class="sc">.</span>tvalues[<span class="st">'rate_diff'</span>]<span class="sc">:.2f}</span><span class="ss">)"</span>)</span>
<span id="cb29-549"><a href="#cb29-549" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"R-squared = </span><span class="sc">{</span>uip_model<span class="sc">.</span>rsquared<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb29-550"><a href="#cb29-550" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">H0: beta = 1 (Wald test):"</span>)</span>
<span id="cb29-551"><a href="#cb29-551" aria-hidden="true" tabindex="-1"></a>wald_stat <span class="op">=</span> ((uip_model.params[<span class="st">'rate_diff'</span>] <span class="op">-</span> <span class="dv">1</span>) <span class="op">/</span></span>
<span id="cb29-552"><a href="#cb29-552" aria-hidden="true" tabindex="-1"></a>             uip_model.bse[<span class="st">'rate_diff'</span>]) <span class="op">**</span> <span class="dv">2</span></span>
<span id="cb29-553"><a href="#cb29-553" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  Chi2 = </span><span class="sc">{</span>wald_stat<span class="sc">:.2f}</span><span class="ss">, p = </span><span class="sc">{</span><span class="dv">1</span> <span class="op">-</span> stats<span class="sc">.</span>chi2<span class="sc">.</span>cdf(wald_stat, <span class="dv">1</span>)<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb29-554"><a href="#cb29-554" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-555"><a href="#cb29-555" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-556"><a href="#cb29-556" aria-hidden="true" tabindex="-1"></a>::: callout-note</span>
<span id="cb29-557"><a href="#cb29-557" aria-hidden="true" tabindex="-1"></a><span class="fu">## Interpreting UIP Failures in Vietnam</span></span>
<span id="cb29-558"><a href="#cb29-558" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-559"><a href="#cb29-559" aria-hidden="true" tabindex="-1"></a>A managed exchange rate complicates UIP tests. When the SBV successfully defends the VND within a narrow band, realized exchange rate changes are artificially compressed regardless of interest rate differentials. The resulting beta estimate reflects the credibility of the peg as much as it reflects the risk premium. Periods of active SBV intervention should be treated separately from periods of relative flexibility.</span>
<span id="cb29-560"><a href="#cb29-560" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb29-561"><a href="#cb29-561" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-562"><a href="#cb29-562" aria-hidden="true" tabindex="-1"></a><span class="fu">### Carry Trade Returns</span></span>
<span id="cb29-563"><a href="#cb29-563" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-564"><a href="#cb29-564" aria-hidden="true" tabindex="-1"></a>We construct a simple VND carry trade strategy: borrow USD at the U.S. short rate, convert to VND, invest at the Vietnamese short rate, and convert back at maturity. The excess return is:</span>
<span id="cb29-565"><a href="#cb29-565" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-566"><a href="#cb29-566" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb29-567"><a href="#cb29-567" aria-hidden="true" tabindex="-1"></a>\text{Carry}_{t \to t+k} = (r^{VND}_{t,k} - r^{USD}_{t,k}) - \Delta s_{t+k}</span>
<span id="cb29-568"><a href="#cb29-568" aria-hidden="true" tabindex="-1"></a>$$ {#eq-carry}</span>
<span id="cb29-569"><a href="#cb29-569" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-570"><a href="#cb29-570" aria-hidden="true" tabindex="-1"></a>A positive carry return means the interest rate differential more than compensated for any VND depreciation.</span>
<span id="cb29-571"><a href="#cb29-571" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-574"><a href="#cb29-574" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-575"><a href="#cb29-575" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: carry-trade</span></span>
<span id="cb29-576"><a href="#cb29-576" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-577"><a href="#cb29-577" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Compute and analyze VND carry trade returns"</span></span>
<span id="cb29-578"><a href="#cb29-578" aria-hidden="true" tabindex="-1"></a>carry <span class="op">=</span> cip_data.copy()</span>
<span id="cb29-579"><a href="#cb29-579" aria-hidden="true" tabindex="-1"></a>carry[<span class="st">'carry_return'</span>] <span class="op">=</span> carry[<span class="st">'rate_diff'</span>] <span class="op">/</span> <span class="dv">4</span> <span class="op">-</span> carry[<span class="st">'delta_s'</span>]</span>
<span id="cb29-580"><a href="#cb29-580" aria-hidden="true" tabindex="-1"></a>carry <span class="op">=</span> carry.dropna(subset<span class="op">=</span>[<span class="st">'carry_return'</span>])</span>
<span id="cb29-581"><a href="#cb29-581" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-582"><a href="#cb29-582" aria-hidden="true" tabindex="-1"></a><span class="co"># Annualize</span></span>
<span id="cb29-583"><a href="#cb29-583" aria-hidden="true" tabindex="-1"></a>ann_carry <span class="op">=</span> carry[<span class="st">'carry_return'</span>].mean() <span class="op">*</span> <span class="dv">4</span></span>
<span id="cb29-584"><a href="#cb29-584" aria-hidden="true" tabindex="-1"></a>ann_vol <span class="op">=</span> carry[<span class="st">'carry_return'</span>].std() <span class="op">*</span> <span class="dv">2</span></span>
<span id="cb29-585"><a href="#cb29-585" aria-hidden="true" tabindex="-1"></a>sharpe <span class="op">=</span> ann_carry <span class="op">/</span> ann_vol</span>
<span id="cb29-586"><a href="#cb29-586" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-587"><a href="#cb29-587" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"VND/USD Carry Trade Performance (3-Month Rolling):"</span>)</span>
<span id="cb29-588"><a href="#cb29-588" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Annualized return: </span><span class="sc">{</span>ann_carry<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>ann_carry<span class="op">*</span><span class="dv">100</span><span class="sc">:.2f}</span><span class="ss">%)"</span>)</span>
<span id="cb29-589"><a href="#cb29-589" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Annualized volatility: </span><span class="sc">{</span>ann_vol<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>ann_vol<span class="op">*</span><span class="dv">100</span><span class="sc">:.2f}</span><span class="ss">%)"</span>)</span>
<span id="cb29-590"><a href="#cb29-590" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Sharpe ratio: </span><span class="sc">{</span>sharpe<span class="sc">:.2f}</span><span class="ss">"</span>)</span>
<span id="cb29-591"><a href="#cb29-591" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Skewness: </span><span class="sc">{</span>carry[<span class="st">'carry_return'</span>]<span class="sc">.</span>skew()<span class="sc">:.2f}</span><span class="ss">"</span>)</span>
<span id="cb29-592"><a href="#cb29-592" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Kurtosis: </span><span class="sc">{</span>carry[<span class="st">'carry_return'</span>]<span class="sc">.</span>kurtosis()<span class="sc">:.2f}</span><span class="ss">"</span>)</span>
<span id="cb29-593"><a href="#cb29-593" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Max quarterly loss: </span><span class="sc">{</span>carry[<span class="st">'carry_return'</span>]<span class="sc">.</span><span class="bu">min</span>()<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb29-594"><a href="#cb29-594" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Max quarterly gain: </span><span class="sc">{</span>carry[<span class="st">'carry_return'</span>]<span class="sc">.</span><span class="bu">max</span>()<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb29-595"><a href="#cb29-595" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-596"><a href="#cb29-596" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-599"><a href="#cb29-599" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-600"><a href="#cb29-600" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-carry-cumulative</span></span>
<span id="cb29-601"><a href="#cb29-601" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-602"><a href="#cb29-602" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Cumulative returns of the VND carry trade strategy. The strategy earns steady positive returns during stable periods, punctuated by sharp losses during VND devaluations. This pattern is characteristic of carry trades in managed exchange rate regimes, as documented by @brunnermeier2008carry."</span></span>
<span id="cb29-603"><a href="#cb29-603" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Plot cumulative carry trade returns"</span></span>
<span id="cb29-604"><a href="#cb29-604" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">2</span>, <span class="dv">1</span>, figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">8</span>), height_ratios<span class="op">=</span>[<span class="dv">2</span>, <span class="dv">1</span>])</span>
<span id="cb29-605"><a href="#cb29-605" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-606"><a href="#cb29-606" aria-hidden="true" tabindex="-1"></a><span class="co"># Panel A: Cumulative return</span></span>
<span id="cb29-607"><a href="#cb29-607" aria-hidden="true" tabindex="-1"></a>cum_carry <span class="op">=</span> (<span class="dv">1</span> <span class="op">+</span> carry[<span class="st">'carry_return'</span>]).cumprod()</span>
<span id="cb29-608"><a href="#cb29-608" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].plot(carry.index, cum_carry, color<span class="op">=</span><span class="st">'#2C5F8A'</span>, linewidth<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb29-609"><a href="#cb29-609" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].fill_between(carry.index, <span class="dv">1</span>, cum_carry,</span>
<span id="cb29-610"><a href="#cb29-610" aria-hidden="true" tabindex="-1"></a>                     where<span class="op">=</span>cum_carry <span class="op">&gt;</span> <span class="dv">1</span>, color<span class="op">=</span><span class="st">'#27AE60'</span>, alpha<span class="op">=</span><span class="fl">0.2</span>)</span>
<span id="cb29-611"><a href="#cb29-611" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].fill_between(carry.index, <span class="dv">1</span>, cum_carry,</span>
<span id="cb29-612"><a href="#cb29-612" aria-hidden="true" tabindex="-1"></a>                     where<span class="op">=</span>cum_carry <span class="op">&lt;</span> <span class="dv">1</span>, color<span class="op">=</span><span class="st">'#C0392B'</span>, alpha<span class="op">=</span><span class="fl">0.2</span>)</span>
<span id="cb29-613"><a href="#cb29-613" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].axhline(y<span class="op">=</span><span class="dv">1</span>, color<span class="op">=</span><span class="st">'gray'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb29-614"><a href="#cb29-614" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_ylabel(<span class="st">'Cumulative Return (VND 1 invested)'</span>)</span>
<span id="cb29-615"><a href="#cb29-615" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">'Panel A: VND/USD Carry Trade Cumulative Return'</span>)</span>
<span id="cb29-616"><a href="#cb29-616" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-617"><a href="#cb29-617" aria-hidden="true" tabindex="-1"></a><span class="co"># Panel B: Quarterly returns</span></span>
<span id="cb29-618"><a href="#cb29-618" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].bar(carry.index, carry[<span class="st">'carry_return'</span>] <span class="op">*</span> <span class="dv">100</span>,</span>
<span id="cb29-619"><a href="#cb29-619" aria-hidden="true" tabindex="-1"></a>            color<span class="op">=</span>[<span class="st">'#27AE60'</span> <span class="cf">if</span> x <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">else</span> <span class="st">'#C0392B'</span></span>
<span id="cb29-620"><a href="#cb29-620" aria-hidden="true" tabindex="-1"></a>                   <span class="cf">for</span> x <span class="kw">in</span> carry[<span class="st">'carry_return'</span>]],</span>
<span id="cb29-621"><a href="#cb29-621" aria-hidden="true" tabindex="-1"></a>            alpha<span class="op">=</span><span class="fl">0.7</span>, width<span class="op">=</span><span class="dv">60</span>)</span>
<span id="cb29-622"><a href="#cb29-622" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].axhline(y<span class="op">=</span><span class="dv">0</span>, color<span class="op">=</span><span class="st">'black'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb29-623"><a href="#cb29-623" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_ylabel(<span class="st">'Quarterly Return (%)'</span>)</span>
<span id="cb29-624"><a href="#cb29-624" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_xlabel(<span class="st">'Date'</span>)</span>
<span id="cb29-625"><a href="#cb29-625" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">'Panel B: Quarterly Carry Returns'</span>)</span>
<span id="cb29-626"><a href="#cb29-626" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-627"><a href="#cb29-627" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb29-628"><a href="#cb29-628" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb29-629"><a href="#cb29-629" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-630"><a href="#cb29-630" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-631"><a href="#cb29-631" aria-hidden="true" tabindex="-1"></a><span class="fu">## Volatility Modeling {#sec-fx-volatility}</span></span>
<span id="cb29-632"><a href="#cb29-632" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-633"><a href="#cb29-633" aria-hidden="true" tabindex="-1"></a><span class="fu">### GARCH Estimation</span></span>
<span id="cb29-634"><a href="#cb29-634" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-635"><a href="#cb29-635" aria-hidden="true" tabindex="-1"></a>The strong autocorrelation in squared VND/USD returns (@fig-autocorrelation) motivates GARCH modeling <span class="co">[</span><span class="ot">@bollerslev1986generalized</span><span class="co">]</span>. We estimate a GARCH(1,1) model for daily VND/USD log returns:</span>
<span id="cb29-636"><a href="#cb29-636" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-637"><a href="#cb29-637" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb29-638"><a href="#cb29-638" aria-hidden="true" tabindex="-1"></a>r_t = \mu + \varepsilon_t, \quad \varepsilon_t = \sigma_t z_t, \quad z_t \sim D(0,1)</span>
<span id="cb29-639"><a href="#cb29-639" aria-hidden="true" tabindex="-1"></a>$$ {#eq-garch-mean}</span>
<span id="cb29-640"><a href="#cb29-640" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-641"><a href="#cb29-641" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb29-642"><a href="#cb29-642" aria-hidden="true" tabindex="-1"></a>\sigma_t^2 = \omega + \alpha \varepsilon_{t-1}^2 + \beta \sigma_{t-1}^2</span>
<span id="cb29-643"><a href="#cb29-643" aria-hidden="true" tabindex="-1"></a>$$ {#eq-garch-var}</span>
<span id="cb29-644"><a href="#cb29-644" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-645"><a href="#cb29-645" aria-hidden="true" tabindex="-1"></a>where $\alpha$ captures the ARCH effect (impact of yesterday's shock on today's variance) and $\beta$ captures persistence (how slowly volatility reverts to its long-run mean). The unconditional variance is $\bar{\sigma}^2 = \omega / (1 - \alpha - \beta)$.</span>
<span id="cb29-646"><a href="#cb29-646" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-649"><a href="#cb29-649" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-650"><a href="#cb29-650" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: garch-estimation</span></span>
<span id="cb29-651"><a href="#cb29-651" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-652"><a href="#cb29-652" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Estimate GARCH(1,1) models with normal and Student-t innovations"</span></span>
<span id="cb29-653"><a href="#cb29-653" aria-hidden="true" tabindex="-1"></a>returns_bps <span class="op">=</span> vnd_usd[<span class="st">'log_return'</span>] <span class="op">*</span> <span class="dv">10000</span>  <span class="co"># Scale to basis points</span></span>
<span id="cb29-654"><a href="#cb29-654" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-655"><a href="#cb29-655" aria-hidden="true" tabindex="-1"></a><span class="co"># GARCH(1,1) with normal innovations</span></span>
<span id="cb29-656"><a href="#cb29-656" aria-hidden="true" tabindex="-1"></a>garch_norm <span class="op">=</span> arch_model(</span>
<span id="cb29-657"><a href="#cb29-657" aria-hidden="true" tabindex="-1"></a>    returns_bps, vol<span class="op">=</span><span class="st">'Garch'</span>, p<span class="op">=</span><span class="dv">1</span>, q<span class="op">=</span><span class="dv">1</span>, dist<span class="op">=</span><span class="st">'normal'</span></span>
<span id="cb29-658"><a href="#cb29-658" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-659"><a href="#cb29-659" aria-hidden="true" tabindex="-1"></a>res_norm <span class="op">=</span> garch_norm.fit(disp<span class="op">=</span><span class="st">'off'</span>)</span>
<span id="cb29-660"><a href="#cb29-660" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-661"><a href="#cb29-661" aria-hidden="true" tabindex="-1"></a><span class="co"># GARCH(1,1) with Student-t innovations</span></span>
<span id="cb29-662"><a href="#cb29-662" aria-hidden="true" tabindex="-1"></a>garch_t <span class="op">=</span> arch_model(</span>
<span id="cb29-663"><a href="#cb29-663" aria-hidden="true" tabindex="-1"></a>    returns_bps, vol<span class="op">=</span><span class="st">'Garch'</span>, p<span class="op">=</span><span class="dv">1</span>, q<span class="op">=</span><span class="dv">1</span>, dist<span class="op">=</span><span class="st">'t'</span></span>
<span id="cb29-664"><a href="#cb29-664" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-665"><a href="#cb29-665" aria-hidden="true" tabindex="-1"></a>res_t <span class="op">=</span> garch_t.fit(disp<span class="op">=</span><span class="st">'off'</span>)</span>
<span id="cb29-666"><a href="#cb29-666" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-667"><a href="#cb29-667" aria-hidden="true" tabindex="-1"></a><span class="co"># GJR-GARCH (asymmetric: depreciation shocks may increase vol more)</span></span>
<span id="cb29-668"><a href="#cb29-668" aria-hidden="true" tabindex="-1"></a>gjr <span class="op">=</span> arch_model(</span>
<span id="cb29-669"><a href="#cb29-669" aria-hidden="true" tabindex="-1"></a>    returns_bps, vol<span class="op">=</span><span class="st">'Garch'</span>, p<span class="op">=</span><span class="dv">1</span>, o<span class="op">=</span><span class="dv">1</span>, q<span class="op">=</span><span class="dv">1</span>, dist<span class="op">=</span><span class="st">'t'</span></span>
<span id="cb29-670"><a href="#cb29-670" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-671"><a href="#cb29-671" aria-hidden="true" tabindex="-1"></a>res_gjr <span class="op">=</span> gjr.fit(disp<span class="op">=</span><span class="st">'off'</span>)</span>
<span id="cb29-672"><a href="#cb29-672" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-673"><a href="#cb29-673" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb29-674"><a href="#cb29-674" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"GARCH(1,1) - Normal Innovations"</span>)</span>
<span id="cb29-675"><a href="#cb29-675" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb29-676"><a href="#cb29-676" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(res_norm.summary().tables[<span class="dv">1</span>])</span>
<span id="cb29-677"><a href="#cb29-677" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-678"><a href="#cb29-678" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span> <span class="op">+</span> <span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb29-679"><a href="#cb29-679" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"GARCH(1,1) - Student-t Innovations"</span>)</span>
<span id="cb29-680"><a href="#cb29-680" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb29-681"><a href="#cb29-681" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(res_t.summary().tables[<span class="dv">1</span>])</span>
<span id="cb29-682"><a href="#cb29-682" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-683"><a href="#cb29-683" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span> <span class="op">+</span> <span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb29-684"><a href="#cb29-684" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"GJR-GARCH(1,1,1) - Student-t Innovations"</span>)</span>
<span id="cb29-685"><a href="#cb29-685" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb29-686"><a href="#cb29-686" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(res_gjr.summary().tables[<span class="dv">1</span>])</span>
<span id="cb29-687"><a href="#cb29-687" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-688"><a href="#cb29-688" aria-hidden="true" tabindex="-1"></a><span class="co"># Model comparison</span></span>
<span id="cb29-689"><a href="#cb29-689" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Model Comparison:"</span>)</span>
<span id="cb29-690"><a href="#cb29-690" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span><span class="st">'Model'</span><span class="sc">:&lt;25}</span><span class="ss"> </span><span class="sc">{</span><span class="st">'AIC'</span><span class="sc">:&gt;10}</span><span class="ss"> </span><span class="sc">{</span><span class="st">'BIC'</span><span class="sc">:&gt;10}</span><span class="ss"> </span><span class="sc">{</span><span class="st">'LogLik'</span><span class="sc">:&gt;12}</span><span class="ss">"</span>)</span>
<span id="cb29-691"><a href="#cb29-691" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> name, res <span class="kw">in</span> [(<span class="st">'GARCH-Normal'</span>, res_norm),</span>
<span id="cb29-692"><a href="#cb29-692" aria-hidden="true" tabindex="-1"></a>                   (<span class="st">'GARCH-t'</span>, res_t),</span>
<span id="cb29-693"><a href="#cb29-693" aria-hidden="true" tabindex="-1"></a>                   (<span class="st">'GJR-GARCH-t'</span>, res_gjr)]:</span>
<span id="cb29-694"><a href="#cb29-694" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>name<span class="sc">:&lt;25}</span><span class="ss"> </span><span class="sc">{</span>res<span class="sc">.</span>aic<span class="sc">:&gt;10.1f}</span><span class="ss"> </span><span class="sc">{</span>res<span class="sc">.</span>bic<span class="sc">:&gt;10.1f}</span><span class="ss"> "</span></span>
<span id="cb29-695"><a href="#cb29-695" aria-hidden="true" tabindex="-1"></a>          <span class="ss">f"</span><span class="sc">{</span>res<span class="sc">.</span>loglikelihood<span class="sc">:&gt;12.1f}</span><span class="ss">"</span>)</span>
<span id="cb29-696"><a href="#cb29-696" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-697"><a href="#cb29-697" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-700"><a href="#cb29-700" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-701"><a href="#cb29-701" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-garch-volatility</span></span>
<span id="cb29-702"><a href="#cb29-702" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-703"><a href="#cb29-703" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Conditional volatility from the GARCH(1,1) model with Student-t innovations, alongside realized volatility (30-day rolling standard deviation, annualized). The GARCH model captures the clustering of high-volatility episodes around SBV policy adjustments and global stress events."</span></span>
<span id="cb29-704"><a href="#cb29-704" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Plot GARCH conditional volatility versus realized volatility"</span></span>
<span id="cb29-705"><a href="#cb29-705" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">6</span>))</span>
<span id="cb29-706"><a href="#cb29-706" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-707"><a href="#cb29-707" aria-hidden="true" tabindex="-1"></a><span class="co"># GARCH conditional volatility (annualized, from basis points)</span></span>
<span id="cb29-708"><a href="#cb29-708" aria-hidden="true" tabindex="-1"></a>cond_vol <span class="op">=</span> res_t.conditional_volatility <span class="op">/</span> <span class="dv">10000</span> <span class="op">*</span> np.sqrt(<span class="dv">252</span>)</span>
<span id="cb29-709"><a href="#cb29-709" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-710"><a href="#cb29-710" aria-hidden="true" tabindex="-1"></a>ax.plot(vnd_usd.index[<span class="op">-</span><span class="bu">len</span>(cond_vol):], cond_vol,</span>
<span id="cb29-711"><a href="#cb29-711" aria-hidden="true" tabindex="-1"></a>        color<span class="op">=</span><span class="st">'#C0392B'</span>, linewidth<span class="op">=</span><span class="fl">1.2</span>, alpha<span class="op">=</span><span class="fl">0.9</span>,</span>
<span id="cb29-712"><a href="#cb29-712" aria-hidden="true" tabindex="-1"></a>        label<span class="op">=</span><span class="st">'GARCH(1,1) Conditional Vol'</span>)</span>
<span id="cb29-713"><a href="#cb29-713" aria-hidden="true" tabindex="-1"></a>ax.plot(vnd_usd.index, vnd_usd[<span class="st">'vol_30d'</span>],</span>
<span id="cb29-714"><a href="#cb29-714" aria-hidden="true" tabindex="-1"></a>        color<span class="op">=</span><span class="st">'#2C5F8A'</span>, linewidth<span class="op">=</span><span class="dv">1</span>, alpha<span class="op">=</span><span class="fl">0.6</span>,</span>
<span id="cb29-715"><a href="#cb29-715" aria-hidden="true" tabindex="-1"></a>        label<span class="op">=</span><span class="st">'30-Day Realized Vol'</span>)</span>
<span id="cb29-716"><a href="#cb29-716" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-717"><a href="#cb29-717" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">'Annualized Volatility'</span>)</span>
<span id="cb29-718"><a href="#cb29-718" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">'Date'</span>)</span>
<span id="cb29-719"><a href="#cb29-719" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">'VND/USD Volatility: GARCH vs Realized'</span>)</span>
<span id="cb29-720"><a href="#cb29-720" aria-hidden="true" tabindex="-1"></a>ax.legend()</span>
<span id="cb29-721"><a href="#cb29-721" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb29-722"><a href="#cb29-722" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb29-723"><a href="#cb29-723" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-724"><a href="#cb29-724" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-725"><a href="#cb29-725" aria-hidden="true" tabindex="-1"></a><span class="fu">### Volatility Regime Identification</span></span>
<span id="cb29-726"><a href="#cb29-726" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-727"><a href="#cb29-727" aria-hidden="true" tabindex="-1"></a>We classify the VND/USD market into volatility regimes using the GARCH conditional volatility:</span>
<span id="cb29-728"><a href="#cb29-728" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-731"><a href="#cb29-731" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-732"><a href="#cb29-732" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: volatility-regimes</span></span>
<span id="cb29-733"><a href="#cb29-733" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-734"><a href="#cb29-734" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Classify volatility regimes and analyze their properties"</span></span>
<span id="cb29-735"><a href="#cb29-735" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge conditional volatility back to main DataFrame</span></span>
<span id="cb29-736"><a href="#cb29-736" aria-hidden="true" tabindex="-1"></a>vol_series <span class="op">=</span> pd.Series(</span>
<span id="cb29-737"><a href="#cb29-737" aria-hidden="true" tabindex="-1"></a>    cond_vol.values,</span>
<span id="cb29-738"><a href="#cb29-738" aria-hidden="true" tabindex="-1"></a>    index<span class="op">=</span>vnd_usd.index[<span class="op">-</span><span class="bu">len</span>(cond_vol):]</span>
<span id="cb29-739"><a href="#cb29-739" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-740"><a href="#cb29-740" aria-hidden="true" tabindex="-1"></a>vnd_usd[<span class="st">'cond_vol'</span>] <span class="op">=</span> vol_series</span>
<span id="cb29-741"><a href="#cb29-741" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-742"><a href="#cb29-742" aria-hidden="true" tabindex="-1"></a><span class="co"># Classify regimes based on percentiles</span></span>
<span id="cb29-743"><a href="#cb29-743" aria-hidden="true" tabindex="-1"></a>vnd_usd[<span class="st">'vol_regime'</span>] <span class="op">=</span> pd.cut(</span>
<span id="cb29-744"><a href="#cb29-744" aria-hidden="true" tabindex="-1"></a>    vnd_usd[<span class="st">'cond_vol'</span>],</span>
<span id="cb29-745"><a href="#cb29-745" aria-hidden="true" tabindex="-1"></a>    bins<span class="op">=</span>[<span class="dv">0</span>, vnd_usd[<span class="st">'cond_vol'</span>].quantile(<span class="fl">0.33</span>),</span>
<span id="cb29-746"><a href="#cb29-746" aria-hidden="true" tabindex="-1"></a>          vnd_usd[<span class="st">'cond_vol'</span>].quantile(<span class="fl">0.67</span>), np.inf],</span>
<span id="cb29-747"><a href="#cb29-747" aria-hidden="true" tabindex="-1"></a>    labels<span class="op">=</span>[<span class="st">'Low'</span>, <span class="st">'Medium'</span>, <span class="st">'High'</span>]</span>
<span id="cb29-748"><a href="#cb29-748" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-749"><a href="#cb29-749" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-750"><a href="#cb29-750" aria-hidden="true" tabindex="-1"></a><span class="co"># Regime statistics</span></span>
<span id="cb29-751"><a href="#cb29-751" aria-hidden="true" tabindex="-1"></a>regime_stats <span class="op">=</span> (</span>
<span id="cb29-752"><a href="#cb29-752" aria-hidden="true" tabindex="-1"></a>    vnd_usd.groupby(<span class="st">'vol_regime'</span>)</span>
<span id="cb29-753"><a href="#cb29-753" aria-hidden="true" tabindex="-1"></a>    .agg(</span>
<span id="cb29-754"><a href="#cb29-754" aria-hidden="true" tabindex="-1"></a>        n_days<span class="op">=</span>(<span class="st">'log_return'</span>, <span class="st">'count'</span>),</span>
<span id="cb29-755"><a href="#cb29-755" aria-hidden="true" tabindex="-1"></a>        mean_return<span class="op">=</span>(<span class="st">'log_return'</span>, <span class="kw">lambda</span> x: x.mean() <span class="op">*</span> <span class="dv">252</span>),</span>
<span id="cb29-756"><a href="#cb29-756" aria-hidden="true" tabindex="-1"></a>        volatility<span class="op">=</span>(<span class="st">'log_return'</span>, <span class="kw">lambda</span> x: x.std() <span class="op">*</span> np.sqrt(<span class="dv">252</span>)),</span>
<span id="cb29-757"><a href="#cb29-757" aria-hidden="true" tabindex="-1"></a>        mean_spread<span class="op">=</span>(<span class="st">'spread_pct'</span>, <span class="st">'mean'</span>),</span>
<span id="cb29-758"><a href="#cb29-758" aria-hidden="true" tabindex="-1"></a>        skewness<span class="op">=</span>(<span class="st">'log_return'</span>, <span class="st">'skew'</span>)</span>
<span id="cb29-759"><a href="#cb29-759" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-760"><a href="#cb29-760" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">round</span>(<span class="dv">4</span>)</span>
<span id="cb29-761"><a href="#cb29-761" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-762"><a href="#cb29-762" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Volatility Regime Characteristics:"</span>)</span>
<span id="cb29-763"><a href="#cb29-763" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(regime_stats)</span>
<span id="cb29-764"><a href="#cb29-764" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-765"><a href="#cb29-765" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-768"><a href="#cb29-768" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-769"><a href="#cb29-769" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-regime-scatter</span></span>
<span id="cb29-770"><a href="#cb29-770" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-771"><a href="#cb29-771" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Return-volatility scatter plot by volatility regime. High-volatility regimes are associated with larger (and more negative) returns, higher bid-ask spreads, and more negative skewness, consistent with the idea that VND depreciation episodes coincide with market stress."</span></span>
<span id="cb29-772"><a href="#cb29-772" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Scatter plot of returns vs conditional volatility by regime"</span></span>
<span id="cb29-773"><a href="#cb29-773" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb29-774"><a href="#cb29-774" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-775"><a href="#cb29-775" aria-hidden="true" tabindex="-1"></a>colors_regime <span class="op">=</span> {<span class="st">'Low'</span>: <span class="st">'#27AE60'</span>, <span class="st">'Medium'</span>: <span class="st">'#F1C40F'</span>, <span class="st">'High'</span>: <span class="st">'#C0392B'</span>}</span>
<span id="cb29-776"><a href="#cb29-776" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> regime <span class="kw">in</span> [<span class="st">'Low'</span>, <span class="st">'Medium'</span>, <span class="st">'High'</span>]:</span>
<span id="cb29-777"><a href="#cb29-777" aria-hidden="true" tabindex="-1"></a>    subset <span class="op">=</span> vnd_usd[vnd_usd[<span class="st">'vol_regime'</span>] <span class="op">==</span> regime]</span>
<span id="cb29-778"><a href="#cb29-778" aria-hidden="true" tabindex="-1"></a>    ax.scatter(</span>
<span id="cb29-779"><a href="#cb29-779" aria-hidden="true" tabindex="-1"></a>        subset[<span class="st">'cond_vol'</span>] <span class="op">*</span> <span class="dv">100</span>,</span>
<span id="cb29-780"><a href="#cb29-780" aria-hidden="true" tabindex="-1"></a>        subset[<span class="st">'log_return'</span>] <span class="op">*</span> <span class="dv">100</span>,</span>
<span id="cb29-781"><a href="#cb29-781" aria-hidden="true" tabindex="-1"></a>        color<span class="op">=</span>colors_regime[regime], alpha<span class="op">=</span><span class="fl">0.3</span>, s<span class="op">=</span><span class="dv">8</span>, label<span class="op">=</span>regime</span>
<span id="cb29-782"><a href="#cb29-782" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-783"><a href="#cb29-783" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-784"><a href="#cb29-784" aria-hidden="true" tabindex="-1"></a>ax.axhline(y<span class="op">=</span><span class="dv">0</span>, color<span class="op">=</span><span class="st">'gray'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb29-785"><a href="#cb29-785" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">'Conditional Volatility (% annualized)'</span>)</span>
<span id="cb29-786"><a href="#cb29-786" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">'Daily Return (%)'</span>)</span>
<span id="cb29-787"><a href="#cb29-787" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">'VND/USD Returns by Volatility Regime'</span>)</span>
<span id="cb29-788"><a href="#cb29-788" aria-hidden="true" tabindex="-1"></a>ax.legend(title<span class="op">=</span><span class="st">'Regime'</span>)</span>
<span id="cb29-789"><a href="#cb29-789" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb29-790"><a href="#cb29-790" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb29-791"><a href="#cb29-791" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-792"><a href="#cb29-792" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-793"><a href="#cb29-793" aria-hidden="true" tabindex="-1"></a><span class="fu">## Exchange Rate Exposure of Vietnamese Firms {#sec-fx-exposure}</span></span>
<span id="cb29-794"><a href="#cb29-794" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-795"><a href="#cb29-795" aria-hidden="true" tabindex="-1"></a><span class="fu">### The Jorion Framework</span></span>
<span id="cb29-796"><a href="#cb29-796" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-797"><a href="#cb29-797" aria-hidden="true" tabindex="-1"></a>@jorion1990exchange introduced the standard two-factor model for estimating firm-level exchange rate exposure:</span>
<span id="cb29-798"><a href="#cb29-798" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-799"><a href="#cb29-799" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb29-800"><a href="#cb29-800" aria-hidden="true" tabindex="-1"></a>R_{i,t} = \alpha_i + \beta_i^{MKT} R_{m,t} + \gamma_i \Delta s_t + \varepsilon_{i,t}</span>
<span id="cb29-801"><a href="#cb29-801" aria-hidden="true" tabindex="-1"></a>$$ {#eq-jorion}</span>
<span id="cb29-802"><a href="#cb29-802" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-803"><a href="#cb29-803" aria-hidden="true" tabindex="-1"></a>where $R_{i,t}$ is the stock return of firm $i$, $R_{m,t}$ is the market return, and $\Delta s_t$ is the exchange rate change (VND/USD log return, where positive = VND depreciation). The coefficient $\gamma_i$ is the **residual exchange rate exposure**, the sensitivity of firm $i$'s returns to currency movements after controlling for market-wide effects.</span>
<span id="cb29-804"><a href="#cb29-804" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-805"><a href="#cb29-805" aria-hidden="true" tabindex="-1"></a>A positive $\gamma_i$ means the firm benefits from VND depreciation (typical for exporters), while a negative $\gamma_i$ means the firm is hurt by depreciation (typical for importers or firms with USD-denominated debt).</span>
<span id="cb29-806"><a href="#cb29-806" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-809"><a href="#cb29-809" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-810"><a href="#cb29-810" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: exposure-estimation</span></span>
<span id="cb29-811"><a href="#cb29-811" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-812"><a href="#cb29-812" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Estimate firm-level exchange rate exposure using the Jorion model"</span></span>
<span id="cb29-813"><a href="#cb29-813" aria-hidden="true" tabindex="-1"></a><span class="co"># Load equity returns</span></span>
<span id="cb29-814"><a href="#cb29-814" aria-hidden="true" tabindex="-1"></a>equity <span class="op">=</span> client.get_monthly_returns(</span>
<span id="cb29-815"><a href="#cb29-815" aria-hidden="true" tabindex="-1"></a>    exchanges<span class="op">=</span>[<span class="st">'HOSE'</span>, <span class="st">'HNX'</span>],</span>
<span id="cb29-816"><a href="#cb29-816" aria-hidden="true" tabindex="-1"></a>    start_date<span class="op">=</span><span class="st">'2012-01-01'</span>,</span>
<span id="cb29-817"><a href="#cb29-817" aria-hidden="true" tabindex="-1"></a>    end_date<span class="op">=</span><span class="st">'2024-12-31'</span>,</span>
<span id="cb29-818"><a href="#cb29-818" aria-hidden="true" tabindex="-1"></a>    fields<span class="op">=</span>[<span class="st">'ticker'</span>, <span class="st">'month_end'</span>, <span class="st">'monthly_return'</span>, <span class="st">'market_cap'</span>]</span>
<span id="cb29-819"><a href="#cb29-819" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-820"><a href="#cb29-820" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-821"><a href="#cb29-821" aria-hidden="true" tabindex="-1"></a><span class="co"># Market return (VW)</span></span>
<span id="cb29-822"><a href="#cb29-822" aria-hidden="true" tabindex="-1"></a>market_ret <span class="op">=</span> (</span>
<span id="cb29-823"><a href="#cb29-823" aria-hidden="true" tabindex="-1"></a>    equity</span>
<span id="cb29-824"><a href="#cb29-824" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">'month_end'</span>)</span>
<span id="cb29-825"><a href="#cb29-825" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">apply</span>(<span class="kw">lambda</span> g: np.average(g[<span class="st">'monthly_return'</span>],</span>
<span id="cb29-826"><a href="#cb29-826" aria-hidden="true" tabindex="-1"></a>                                 weights<span class="op">=</span>g[<span class="st">'market_cap'</span>]))</span>
<span id="cb29-827"><a href="#cb29-827" aria-hidden="true" tabindex="-1"></a>    .reset_index(name<span class="op">=</span><span class="st">'market_return'</span>)</span>
<span id="cb29-828"><a href="#cb29-828" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-829"><a href="#cb29-829" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-830"><a href="#cb29-830" aria-hidden="true" tabindex="-1"></a><span class="co"># Monthly VND/USD returns</span></span>
<span id="cb29-831"><a href="#cb29-831" aria-hidden="true" tabindex="-1"></a>fx_monthly <span class="op">=</span> (</span>
<span id="cb29-832"><a href="#cb29-832" aria-hidden="true" tabindex="-1"></a>    vnd_usd[<span class="st">'log_return'</span>]</span>
<span id="cb29-833"><a href="#cb29-833" aria-hidden="true" tabindex="-1"></a>    .resample(<span class="st">'M'</span>).<span class="bu">sum</span>()</span>
<span id="cb29-834"><a href="#cb29-834" aria-hidden="true" tabindex="-1"></a>    .to_frame(<span class="st">'fx_return'</span>)</span>
<span id="cb29-835"><a href="#cb29-835" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-836"><a href="#cb29-836" aria-hidden="true" tabindex="-1"></a>fx_monthly.index <span class="op">=</span> fx_monthly.index.to_period(<span class="st">'M'</span>).to_timestamp()</span>
<span id="cb29-837"><a href="#cb29-837" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-838"><a href="#cb29-838" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge all data</span></span>
<span id="cb29-839"><a href="#cb29-839" aria-hidden="true" tabindex="-1"></a>exposure_data <span class="op">=</span> (</span>
<span id="cb29-840"><a href="#cb29-840" aria-hidden="true" tabindex="-1"></a>    equity</span>
<span id="cb29-841"><a href="#cb29-841" aria-hidden="true" tabindex="-1"></a>    .merge(market_ret, on<span class="op">=</span><span class="st">'month_end'</span>)</span>
<span id="cb29-842"><a href="#cb29-842" aria-hidden="true" tabindex="-1"></a>    .merge(fx_monthly, left_on<span class="op">=</span><span class="st">'month_end'</span>, right_index<span class="op">=</span><span class="va">True</span>, how<span class="op">=</span><span class="st">'inner'</span>)</span>
<span id="cb29-843"><a href="#cb29-843" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-844"><a href="#cb29-844" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-845"><a href="#cb29-845" aria-hidden="true" tabindex="-1"></a><span class="co"># Estimate exposure for each firm</span></span>
<span id="cb29-846"><a href="#cb29-846" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> estimate_exposure(group, min_obs<span class="op">=</span><span class="dv">36</span>):</span>
<span id="cb29-847"><a href="#cb29-847" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Estimate Jorion exposure model for a single firm."""</span></span>
<span id="cb29-848"><a href="#cb29-848" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(group) <span class="op">&lt;</span> min_obs:</span>
<span id="cb29-849"><a href="#cb29-849" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">None</span></span>
<span id="cb29-850"><a href="#cb29-850" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb29-851"><a href="#cb29-851" aria-hidden="true" tabindex="-1"></a>    y <span class="op">=</span> group[<span class="st">'monthly_return'</span>]</span>
<span id="cb29-852"><a href="#cb29-852" aria-hidden="true" tabindex="-1"></a>    X <span class="op">=</span> sm.add_constant(group[[<span class="st">'market_return'</span>, <span class="st">'fx_return'</span>]])</span>
<span id="cb29-853"><a href="#cb29-853" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb29-854"><a href="#cb29-854" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb29-855"><a href="#cb29-855" aria-hidden="true" tabindex="-1"></a>        model <span class="op">=</span> sm.OLS(y, X).fit(cov_type<span class="op">=</span><span class="st">'HC1'</span>)</span>
<span id="cb29-856"><a href="#cb29-856" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> pd.Series({</span>
<span id="cb29-857"><a href="#cb29-857" aria-hidden="true" tabindex="-1"></a>            <span class="st">'gamma'</span>: model.params[<span class="st">'fx_return'</span>],</span>
<span id="cb29-858"><a href="#cb29-858" aria-hidden="true" tabindex="-1"></a>            <span class="st">'gamma_se'</span>: model.bse[<span class="st">'fx_return'</span>],</span>
<span id="cb29-859"><a href="#cb29-859" aria-hidden="true" tabindex="-1"></a>            <span class="st">'gamma_t'</span>: model.tvalues[<span class="st">'fx_return'</span>],</span>
<span id="cb29-860"><a href="#cb29-860" aria-hidden="true" tabindex="-1"></a>            <span class="st">'gamma_p'</span>: model.pvalues[<span class="st">'fx_return'</span>],</span>
<span id="cb29-861"><a href="#cb29-861" aria-hidden="true" tabindex="-1"></a>            <span class="st">'beta_mkt'</span>: model.params[<span class="st">'market_return'</span>],</span>
<span id="cb29-862"><a href="#cb29-862" aria-hidden="true" tabindex="-1"></a>            <span class="st">'r_squared'</span>: model.rsquared,</span>
<span id="cb29-863"><a href="#cb29-863" aria-hidden="true" tabindex="-1"></a>            <span class="st">'n_obs'</span>: model.nobs</span>
<span id="cb29-864"><a href="#cb29-864" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb29-865"><a href="#cb29-865" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> <span class="pp">Exception</span>:</span>
<span id="cb29-866"><a href="#cb29-866" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">None</span></span>
<span id="cb29-867"><a href="#cb29-867" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-868"><a href="#cb29-868" aria-hidden="true" tabindex="-1"></a>exposures <span class="op">=</span> (</span>
<span id="cb29-869"><a href="#cb29-869" aria-hidden="true" tabindex="-1"></a>    exposure_data</span>
<span id="cb29-870"><a href="#cb29-870" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">'ticker'</span>)</span>
<span id="cb29-871"><a href="#cb29-871" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">apply</span>(estimate_exposure)</span>
<span id="cb29-872"><a href="#cb29-872" aria-hidden="true" tabindex="-1"></a>    .dropna()</span>
<span id="cb29-873"><a href="#cb29-873" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-874"><a href="#cb29-874" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-875"><a href="#cb29-875" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Estimated exposure for </span><span class="sc">{</span><span class="bu">len</span>(exposures)<span class="sc">}</span><span class="ss"> firms"</span>)</span>
<span id="cb29-876"><a href="#cb29-876" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Exposure (gamma) Summary:"</span>)</span>
<span id="cb29-877"><a href="#cb29-877" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(exposures[<span class="st">'gamma'</span>].describe().<span class="bu">round</span>(<span class="dv">4</span>))</span>
<span id="cb29-878"><a href="#cb29-878" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Significant at 5%: "</span></span>
<span id="cb29-879"><a href="#cb29-879" aria-hidden="true" tabindex="-1"></a>      <span class="ss">f"</span><span class="sc">{</span>(exposures[<span class="st">'gamma_p'</span>] <span class="op">&lt;</span> <span class="fl">0.05</span>)<span class="sc">.</span><span class="bu">sum</span>()<span class="sc">}</span><span class="ss"> / </span><span class="sc">{</span><span class="bu">len</span>(exposures)<span class="sc">}</span><span class="ss"> "</span></span>
<span id="cb29-880"><a href="#cb29-880" aria-hidden="true" tabindex="-1"></a>      <span class="ss">f"(</span><span class="sc">{</span>(exposures[<span class="st">'gamma_p'</span>] <span class="op">&lt;</span> <span class="fl">0.05</span>)<span class="sc">.</span>mean()<span class="sc">:.1%}</span><span class="ss">)"</span>)</span>
<span id="cb29-881"><a href="#cb29-881" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-882"><a href="#cb29-882" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-885"><a href="#cb29-885" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-886"><a href="#cb29-886" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-exposure-distribution</span></span>
<span id="cb29-887"><a href="#cb29-887" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-888"><a href="#cb29-888" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Distribution of firm-level VND/USD exchange rate exposures from the Jorion model. The distribution is centered near zero with substantial cross-sectional dispersion. Approximately 15-25% of firms have statistically significant exposure at the 5% level, consistent with international evidence that many firms hedge or have naturally offsetting currency positions."</span></span>
<span id="cb29-889"><a href="#cb29-889" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Plot distribution of exchange rate exposures"</span></span>
<span id="cb29-890"><a href="#cb29-890" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">5</span>))</span>
<span id="cb29-891"><a href="#cb29-891" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-892"><a href="#cb29-892" aria-hidden="true" tabindex="-1"></a><span class="co"># Panel A: Distribution of gamma</span></span>
<span id="cb29-893"><a href="#cb29-893" aria-hidden="true" tabindex="-1"></a>sig <span class="op">=</span> exposures[<span class="st">'gamma_p'</span>] <span class="op">&lt;</span> <span class="fl">0.05</span></span>
<span id="cb29-894"><a href="#cb29-894" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].hist(exposures.loc[<span class="op">~</span>sig, <span class="st">'gamma'</span>], bins<span class="op">=</span><span class="dv">40</span>, color<span class="op">=</span><span class="st">'#BDC3C7'</span>,</span>
<span id="cb29-895"><a href="#cb29-895" aria-hidden="true" tabindex="-1"></a>             alpha<span class="op">=</span><span class="fl">0.7</span>, label<span class="op">=</span><span class="st">'Insignificant'</span>, edgecolor<span class="op">=</span><span class="st">'white'</span>)</span>
<span id="cb29-896"><a href="#cb29-896" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].hist(exposures.loc[sig <span class="op">&amp;</span> (exposures[<span class="st">'gamma'</span>] <span class="op">&gt;</span> <span class="dv">0</span>), <span class="st">'gamma'</span>],</span>
<span id="cb29-897"><a href="#cb29-897" aria-hidden="true" tabindex="-1"></a>             bins<span class="op">=</span><span class="dv">20</span>, color<span class="op">=</span><span class="st">'#27AE60'</span>, alpha<span class="op">=</span><span class="fl">0.8</span>,</span>
<span id="cb29-898"><a href="#cb29-898" aria-hidden="true" tabindex="-1"></a>             label<span class="op">=</span><span class="st">'Significant positive'</span>, edgecolor<span class="op">=</span><span class="st">'white'</span>)</span>
<span id="cb29-899"><a href="#cb29-899" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].hist(exposures.loc[sig <span class="op">&amp;</span> (exposures[<span class="st">'gamma'</span>] <span class="op">&lt;</span> <span class="dv">0</span>), <span class="st">'gamma'</span>],</span>
<span id="cb29-900"><a href="#cb29-900" aria-hidden="true" tabindex="-1"></a>             bins<span class="op">=</span><span class="dv">20</span>, color<span class="op">=</span><span class="st">'#C0392B'</span>, alpha<span class="op">=</span><span class="fl">0.8</span>,</span>
<span id="cb29-901"><a href="#cb29-901" aria-hidden="true" tabindex="-1"></a>             label<span class="op">=</span><span class="st">'Significant negative'</span>, edgecolor<span class="op">=</span><span class="st">'white'</span>)</span>
<span id="cb29-902"><a href="#cb29-902" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].axvline(x<span class="op">=</span><span class="dv">0</span>, color<span class="op">=</span><span class="st">'black'</span>, linewidth<span class="op">=</span><span class="fl">0.8</span>)</span>
<span id="cb29-903"><a href="#cb29-903" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_xlabel(<span class="st">'Exchange Rate Exposure (gamma)'</span>)</span>
<span id="cb29-904"><a href="#cb29-904" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_ylabel(<span class="st">'Number of Firms'</span>)</span>
<span id="cb29-905"><a href="#cb29-905" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">'Panel A: Cross-Sectional Distribution'</span>)</span>
<span id="cb29-906"><a href="#cb29-906" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].legend(fontsize<span class="op">=</span><span class="dv">9</span>)</span>
<span id="cb29-907"><a href="#cb29-907" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-908"><a href="#cb29-908" aria-hidden="true" tabindex="-1"></a><span class="co"># Panel B: Exposure vs market beta</span></span>
<span id="cb29-909"><a href="#cb29-909" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].scatter(exposures[<span class="st">'beta_mkt'</span>], exposures[<span class="st">'gamma'</span>],</span>
<span id="cb29-910"><a href="#cb29-910" aria-hidden="true" tabindex="-1"></a>                c<span class="op">=</span>exposures[<span class="st">'gamma_t'</span>].clip(<span class="op">-</span><span class="dv">3</span>, <span class="dv">3</span>),</span>
<span id="cb29-911"><a href="#cb29-911" aria-hidden="true" tabindex="-1"></a>                cmap<span class="op">=</span><span class="st">'RdBu_r'</span>, s<span class="op">=</span><span class="dv">15</span>, alpha<span class="op">=</span><span class="fl">0.6</span>)</span>
<span id="cb29-912"><a href="#cb29-912" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].axhline(y<span class="op">=</span><span class="dv">0</span>, color<span class="op">=</span><span class="st">'gray'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb29-913"><a href="#cb29-913" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].axvline(x<span class="op">=</span><span class="dv">1</span>, color<span class="op">=</span><span class="st">'gray'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, linestyle<span class="op">=</span><span class="st">'--'</span>)</span>
<span id="cb29-914"><a href="#cb29-914" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_xlabel(<span class="st">'Market Beta'</span>)</span>
<span id="cb29-915"><a href="#cb29-915" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_ylabel(<span class="st">'FX Exposure (gamma)'</span>)</span>
<span id="cb29-916"><a href="#cb29-916" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">'Panel B: Market Beta vs FX Exposure'</span>)</span>
<span id="cb29-917"><a href="#cb29-917" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-918"><a href="#cb29-918" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb29-919"><a href="#cb29-919" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb29-920"><a href="#cb29-920" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-921"><a href="#cb29-921" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-922"><a href="#cb29-922" aria-hidden="true" tabindex="-1"></a><span class="fu">### Industry-Level Exposure</span></span>
<span id="cb29-923"><a href="#cb29-923" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-924"><a href="#cb29-924" aria-hidden="true" tabindex="-1"></a>Exchange rate exposure varies systematically across industries. Export-oriented sectors (textiles, seafood, electronics) should have positive exposure (benefiting from VND weakness), while import-dependent sectors (oil and gas, machinery, consumer goods) should have negative exposure.</span>
<span id="cb29-925"><a href="#cb29-925" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-928"><a href="#cb29-928" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-929"><a href="#cb29-929" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: industry-exposure</span></span>
<span id="cb29-930"><a href="#cb29-930" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-931"><a href="#cb29-931" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Compute and compare exposure by industry"</span></span>
<span id="cb29-932"><a href="#cb29-932" aria-hidden="true" tabindex="-1"></a><span class="co"># Get industry classification</span></span>
<span id="cb29-933"><a href="#cb29-933" aria-hidden="true" tabindex="-1"></a>industry <span class="op">=</span> client.get_firm_info(</span>
<span id="cb29-934"><a href="#cb29-934" aria-hidden="true" tabindex="-1"></a>    exchanges<span class="op">=</span>[<span class="st">'HOSE'</span>, <span class="st">'HNX'</span>],</span>
<span id="cb29-935"><a href="#cb29-935" aria-hidden="true" tabindex="-1"></a>    fields<span class="op">=</span>[<span class="st">'ticker'</span>, <span class="st">'icb_sector'</span>, <span class="st">'icb_industry'</span>]</span>
<span id="cb29-936"><a href="#cb29-936" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-937"><a href="#cb29-937" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-938"><a href="#cb29-938" aria-hidden="true" tabindex="-1"></a>exposure_industry <span class="op">=</span> exposures.reset_index().merge(</span>
<span id="cb29-939"><a href="#cb29-939" aria-hidden="true" tabindex="-1"></a>    industry, on<span class="op">=</span><span class="st">'ticker'</span>, how<span class="op">=</span><span class="st">'left'</span></span>
<span id="cb29-940"><a href="#cb29-940" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-941"><a href="#cb29-941" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-942"><a href="#cb29-942" aria-hidden="true" tabindex="-1"></a><span class="co"># Industry-level average exposure</span></span>
<span id="cb29-943"><a href="#cb29-943" aria-hidden="true" tabindex="-1"></a>industry_avg <span class="op">=</span> (</span>
<span id="cb29-944"><a href="#cb29-944" aria-hidden="true" tabindex="-1"></a>    exposure_industry</span>
<span id="cb29-945"><a href="#cb29-945" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">'icb_sector'</span>)</span>
<span id="cb29-946"><a href="#cb29-946" aria-hidden="true" tabindex="-1"></a>    .agg(</span>
<span id="cb29-947"><a href="#cb29-947" aria-hidden="true" tabindex="-1"></a>        n_firms<span class="op">=</span>(<span class="st">'gamma'</span>, <span class="st">'count'</span>),</span>
<span id="cb29-948"><a href="#cb29-948" aria-hidden="true" tabindex="-1"></a>        mean_gamma<span class="op">=</span>(<span class="st">'gamma'</span>, <span class="st">'mean'</span>),</span>
<span id="cb29-949"><a href="#cb29-949" aria-hidden="true" tabindex="-1"></a>        median_gamma<span class="op">=</span>(<span class="st">'gamma'</span>, <span class="st">'median'</span>),</span>
<span id="cb29-950"><a href="#cb29-950" aria-hidden="true" tabindex="-1"></a>        pct_significant<span class="op">=</span>(<span class="st">'gamma_p'</span>, <span class="kw">lambda</span> x: (x <span class="op">&lt;</span> <span class="fl">0.05</span>).mean())</span>
<span id="cb29-951"><a href="#cb29-951" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-952"><a href="#cb29-952" aria-hidden="true" tabindex="-1"></a>    .sort_values(<span class="st">'mean_gamma'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb29-953"><a href="#cb29-953" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">round</span>(<span class="dv">3</span>)</span>
<span id="cb29-954"><a href="#cb29-954" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-955"><a href="#cb29-955" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-956"><a href="#cb29-956" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Exchange Rate Exposure by Industry:"</span>)</span>
<span id="cb29-957"><a href="#cb29-957" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(industry_avg.to_string())</span>
<span id="cb29-958"><a href="#cb29-958" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-959"><a href="#cb29-959" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-962"><a href="#cb29-962" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-963"><a href="#cb29-963" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-industry-exposure</span></span>
<span id="cb29-964"><a href="#cb29-964" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-965"><a href="#cb29-965" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Average exchange rate exposure by industry sector. Export-oriented sectors (Basic Materials, Industrials) show positive exposure (benefit from VND depreciation), while import-dependent sectors (Energy, Consumer Staples) show negative exposure. The pattern is consistent with trade-channel effects documented by @vo2016exchange."</span></span>
<span id="cb29-966"><a href="#cb29-966" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Bar chart of industry-level FX exposure"</span></span>
<span id="cb29-967"><a href="#cb29-967" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">6</span>))</span>
<span id="cb29-968"><a href="#cb29-968" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-969"><a href="#cb29-969" aria-hidden="true" tabindex="-1"></a>colors_bar <span class="op">=</span> [<span class="st">'#27AE60'</span> <span class="cf">if</span> x <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">else</span> <span class="st">'#C0392B'</span></span>
<span id="cb29-970"><a href="#cb29-970" aria-hidden="true" tabindex="-1"></a>              <span class="cf">for</span> x <span class="kw">in</span> industry_avg[<span class="st">'mean_gamma'</span>]]</span>
<span id="cb29-971"><a href="#cb29-971" aria-hidden="true" tabindex="-1"></a>bars <span class="op">=</span> ax.barh(<span class="bu">range</span>(<span class="bu">len</span>(industry_avg)), industry_avg[<span class="st">'mean_gamma'</span>],</span>
<span id="cb29-972"><a href="#cb29-972" aria-hidden="true" tabindex="-1"></a>               color<span class="op">=</span>colors_bar, alpha<span class="op">=</span><span class="fl">0.85</span>)</span>
<span id="cb29-973"><a href="#cb29-973" aria-hidden="true" tabindex="-1"></a>ax.set_yticks(<span class="bu">range</span>(<span class="bu">len</span>(industry_avg)))</span>
<span id="cb29-974"><a href="#cb29-974" aria-hidden="true" tabindex="-1"></a>ax.set_yticklabels(industry_avg.index, fontsize<span class="op">=</span><span class="dv">9</span>)</span>
<span id="cb29-975"><a href="#cb29-975" aria-hidden="true" tabindex="-1"></a>ax.axvline(x<span class="op">=</span><span class="dv">0</span>, color<span class="op">=</span><span class="st">'black'</span>, linewidth<span class="op">=</span><span class="fl">0.8</span>)</span>
<span id="cb29-976"><a href="#cb29-976" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">'Average Exchange Rate Exposure (gamma)'</span>)</span>
<span id="cb29-977"><a href="#cb29-977" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">'Exchange Rate Exposure by Industry'</span>)</span>
<span id="cb29-978"><a href="#cb29-978" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-979"><a href="#cb29-979" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i, (_, row) <span class="kw">in</span> <span class="bu">enumerate</span>(industry_avg.iterrows()):</span>
<span id="cb29-980"><a href="#cb29-980" aria-hidden="true" tabindex="-1"></a>    label <span class="op">=</span> <span class="ss">f"(</span><span class="sc">{</span>row[<span class="st">'pct_significant'</span>]<span class="sc">:.0%}</span><span class="ss"> sig.)"</span></span>
<span id="cb29-981"><a href="#cb29-981" aria-hidden="true" tabindex="-1"></a>    ax.text(row[<span class="st">'mean_gamma'</span>] <span class="op">+</span> <span class="fl">0.01</span> <span class="op">*</span> np.sign(row[<span class="st">'mean_gamma'</span>]),</span>
<span id="cb29-982"><a href="#cb29-982" aria-hidden="true" tabindex="-1"></a>            i, label, va<span class="op">=</span><span class="st">'center'</span>, fontsize<span class="op">=</span><span class="dv">8</span>, color<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb29-983"><a href="#cb29-983" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-984"><a href="#cb29-984" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb29-985"><a href="#cb29-985" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb29-986"><a href="#cb29-986" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-987"><a href="#cb29-987" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-988"><a href="#cb29-988" aria-hidden="true" tabindex="-1"></a><span class="fu">### Time-Varying Exposure</span></span>
<span id="cb29-989"><a href="#cb29-989" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-990"><a href="#cb29-990" aria-hidden="true" tabindex="-1"></a>Exchange rate exposure is not constant, firms adjust hedging strategies, trade patterns shift, and the exchange rate regime itself evolves. We estimate rolling 36-month exposures:</span>
<span id="cb29-991"><a href="#cb29-991" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-994"><a href="#cb29-994" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-995"><a href="#cb29-995" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: rolling-exposure</span></span>
<span id="cb29-996"><a href="#cb29-996" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-997"><a href="#cb29-997" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Estimate rolling 36-month exchange rate exposures"</span></span>
<span id="cb29-998"><a href="#cb29-998" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> rolling_exposure(group, window<span class="op">=</span><span class="dv">36</span>, min_obs<span class="op">=</span><span class="dv">24</span>):</span>
<span id="cb29-999"><a href="#cb29-999" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Estimate rolling FX exposure with 36-month windows."""</span></span>
<span id="cb29-1000"><a href="#cb29-1000" aria-hidden="true" tabindex="-1"></a>    results <span class="op">=</span> []</span>
<span id="cb29-1001"><a href="#cb29-1001" aria-hidden="true" tabindex="-1"></a>    group <span class="op">=</span> group.sort_values(<span class="st">'month_end'</span>)</span>
<span id="cb29-1002"><a href="#cb29-1002" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb29-1003"><a href="#cb29-1003" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(window, <span class="bu">len</span>(group) <span class="op">+</span> <span class="dv">1</span>):</span>
<span id="cb29-1004"><a href="#cb29-1004" aria-hidden="true" tabindex="-1"></a>        sub <span class="op">=</span> group.iloc[i <span class="op">-</span> window:i]</span>
<span id="cb29-1005"><a href="#cb29-1005" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">len</span>(sub) <span class="op">&lt;</span> min_obs:</span>
<span id="cb29-1006"><a href="#cb29-1006" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb29-1007"><a href="#cb29-1007" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb29-1008"><a href="#cb29-1008" aria-hidden="true" tabindex="-1"></a>        y <span class="op">=</span> sub[<span class="st">'monthly_return'</span>]</span>
<span id="cb29-1009"><a href="#cb29-1009" aria-hidden="true" tabindex="-1"></a>        X <span class="op">=</span> sm.add_constant(sub[[<span class="st">'market_return'</span>, <span class="st">'fx_return'</span>]])</span>
<span id="cb29-1010"><a href="#cb29-1010" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb29-1011"><a href="#cb29-1011" aria-hidden="true" tabindex="-1"></a>        <span class="cf">try</span>:</span>
<span id="cb29-1012"><a href="#cb29-1012" aria-hidden="true" tabindex="-1"></a>            model <span class="op">=</span> sm.OLS(y, X).fit()</span>
<span id="cb29-1013"><a href="#cb29-1013" aria-hidden="true" tabindex="-1"></a>            results.append({</span>
<span id="cb29-1014"><a href="#cb29-1014" aria-hidden="true" tabindex="-1"></a>                <span class="st">'month_end'</span>: sub[<span class="st">'month_end'</span>].iloc[<span class="op">-</span><span class="dv">1</span>],</span>
<span id="cb29-1015"><a href="#cb29-1015" aria-hidden="true" tabindex="-1"></a>                <span class="st">'gamma'</span>: model.params[<span class="st">'fx_return'</span>],</span>
<span id="cb29-1016"><a href="#cb29-1016" aria-hidden="true" tabindex="-1"></a>                <span class="st">'gamma_se'</span>: model.bse[<span class="st">'fx_return'</span>]</span>
<span id="cb29-1017"><a href="#cb29-1017" aria-hidden="true" tabindex="-1"></a>            })</span>
<span id="cb29-1018"><a href="#cb29-1018" aria-hidden="true" tabindex="-1"></a>        <span class="cf">except</span> <span class="pp">Exception</span>:</span>
<span id="cb29-1019"><a href="#cb29-1019" aria-hidden="true" tabindex="-1"></a>            <span class="cf">pass</span></span>
<span id="cb29-1020"><a href="#cb29-1020" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb29-1021"><a href="#cb29-1021" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pd.DataFrame(results)</span>
<span id="cb29-1022"><a href="#cb29-1022" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1023"><a href="#cb29-1023" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute for a sample of large firms</span></span>
<span id="cb29-1024"><a href="#cb29-1024" aria-hidden="true" tabindex="-1"></a>large_firms <span class="op">=</span> (</span>
<span id="cb29-1025"><a href="#cb29-1025" aria-hidden="true" tabindex="-1"></a>    equity.groupby(<span class="st">'ticker'</span>)[<span class="st">'market_cap'</span>]</span>
<span id="cb29-1026"><a href="#cb29-1026" aria-hidden="true" tabindex="-1"></a>    .last().nlargest(<span class="dv">20</span>).index</span>
<span id="cb29-1027"><a href="#cb29-1027" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-1028"><a href="#cb29-1028" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1029"><a href="#cb29-1029" aria-hidden="true" tabindex="-1"></a>rolling_results <span class="op">=</span> {}</span>
<span id="cb29-1030"><a href="#cb29-1030" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> ticker <span class="kw">in</span> large_firms:</span>
<span id="cb29-1031"><a href="#cb29-1031" aria-hidden="true" tabindex="-1"></a>    firm_data <span class="op">=</span> exposure_data[exposure_data[<span class="st">'ticker'</span>] <span class="op">==</span> ticker]</span>
<span id="cb29-1032"><a href="#cb29-1032" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> rolling_exposure(firm_data)</span>
<span id="cb29-1033"><a href="#cb29-1033" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(result) <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb29-1034"><a href="#cb29-1034" aria-hidden="true" tabindex="-1"></a>        rolling_results[ticker] <span class="op">=</span> result</span>
<span id="cb29-1035"><a href="#cb29-1035" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1036"><a href="#cb29-1036" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Rolling exposures computed for </span><span class="sc">{</span><span class="bu">len</span>(rolling_results)<span class="sc">}</span><span class="ss"> firms"</span>)</span>
<span id="cb29-1037"><a href="#cb29-1037" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-1038"><a href="#cb29-1038" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1041"><a href="#cb29-1041" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-1042"><a href="#cb29-1042" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-rolling-exposure</span></span>
<span id="cb29-1043"><a href="#cb29-1043" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-1044"><a href="#cb29-1044" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Time-varying exchange rate exposure for selected large-cap Vietnamese firms. Exposures evolve over time as firms adjust hedging strategies, trade patterns shift, and the exchange rate regime changes. The 2016 shift to the reference rate mechanism is associated with exposure changes for several firms."</span></span>
<span id="cb29-1045"><a href="#cb29-1045" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Plot rolling FX exposures for selected firms"</span></span>
<span id="cb29-1046"><a href="#cb29-1046" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">6</span>))</span>
<span id="cb29-1047"><a href="#cb29-1047" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1048"><a href="#cb29-1048" aria-hidden="true" tabindex="-1"></a>plot_colors <span class="op">=</span> plt.cm.Set1(np.linspace(<span class="dv">0</span>, <span class="dv">1</span>, <span class="bu">min</span>(<span class="dv">6</span>, <span class="bu">len</span>(rolling_results))))</span>
<span id="cb29-1049"><a href="#cb29-1049" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i, (ticker, df) <span class="kw">in</span> <span class="bu">enumerate</span>(<span class="bu">list</span>(rolling_results.items())[:<span class="dv">6</span>]):</span>
<span id="cb29-1050"><a href="#cb29-1050" aria-hidden="true" tabindex="-1"></a>    ax.plot(pd.to_datetime(df[<span class="st">'month_end'</span>]), df[<span class="st">'gamma'</span>],</span>
<span id="cb29-1051"><a href="#cb29-1051" aria-hidden="true" tabindex="-1"></a>            linewidth<span class="op">=</span><span class="fl">1.5</span>, label<span class="op">=</span>ticker, color<span class="op">=</span>plot_colors[i])</span>
<span id="cb29-1052"><a href="#cb29-1052" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> i <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb29-1053"><a href="#cb29-1053" aria-hidden="true" tabindex="-1"></a>        ax.fill_between(</span>
<span id="cb29-1054"><a href="#cb29-1054" aria-hidden="true" tabindex="-1"></a>            pd.to_datetime(df[<span class="st">'month_end'</span>]),</span>
<span id="cb29-1055"><a href="#cb29-1055" aria-hidden="true" tabindex="-1"></a>            df[<span class="st">'gamma'</span>] <span class="op">-</span> <span class="fl">1.96</span> <span class="op">*</span> df[<span class="st">'gamma_se'</span>],</span>
<span id="cb29-1056"><a href="#cb29-1056" aria-hidden="true" tabindex="-1"></a>            df[<span class="st">'gamma'</span>] <span class="op">+</span> <span class="fl">1.96</span> <span class="op">*</span> df[<span class="st">'gamma_se'</span>],</span>
<span id="cb29-1057"><a href="#cb29-1057" aria-hidden="true" tabindex="-1"></a>            alpha<span class="op">=</span><span class="fl">0.1</span>, color<span class="op">=</span>plot_colors[i]</span>
<span id="cb29-1058"><a href="#cb29-1058" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb29-1059"><a href="#cb29-1059" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1060"><a href="#cb29-1060" aria-hidden="true" tabindex="-1"></a>ax.axhline(y<span class="op">=</span><span class="dv">0</span>, color<span class="op">=</span><span class="st">'gray'</span>, linewidth<span class="op">=</span><span class="fl">0.8</span>)</span>
<span id="cb29-1061"><a href="#cb29-1061" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">'Exchange Rate Exposure (gamma)'</span>)</span>
<span id="cb29-1062"><a href="#cb29-1062" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">'Date'</span>)</span>
<span id="cb29-1063"><a href="#cb29-1063" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">'Rolling 36-Month Exchange Rate Exposure'</span>)</span>
<span id="cb29-1064"><a href="#cb29-1064" aria-hidden="true" tabindex="-1"></a>ax.legend(ncol<span class="op">=</span><span class="dv">3</span>, fontsize<span class="op">=</span><span class="dv">9</span>)</span>
<span id="cb29-1065"><a href="#cb29-1065" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb29-1066"><a href="#cb29-1066" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb29-1067"><a href="#cb29-1067" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-1068"><a href="#cb29-1068" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1069"><a href="#cb29-1069" aria-hidden="true" tabindex="-1"></a><span class="fu">## Currency Hedging for International Investors {#sec-fx-hedging}</span></span>
<span id="cb29-1070"><a href="#cb29-1070" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1071"><a href="#cb29-1071" aria-hidden="true" tabindex="-1"></a><span class="fu">### The Hedging Decision</span></span>
<span id="cb29-1072"><a href="#cb29-1072" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1073"><a href="#cb29-1073" aria-hidden="true" tabindex="-1"></a>For a foreign investor holding Vietnamese equities, the unhedged USD-denominated return is:</span>
<span id="cb29-1074"><a href="#cb29-1074" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1075"><a href="#cb29-1075" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb29-1076"><a href="#cb29-1076" aria-hidden="true" tabindex="-1"></a>R^{USD}_{i,t} \approx R^{VND}_{i,t} + \Delta s_t + R^{VND}_{i,t} \cdot \Delta s_t</span>
<span id="cb29-1077"><a href="#cb29-1077" aria-hidden="true" tabindex="-1"></a>$$ {#eq-unhedged-return}</span>
<span id="cb29-1078"><a href="#cb29-1078" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1079"><a href="#cb29-1079" aria-hidden="true" tabindex="-1"></a>where the cross-product term is usually small. Under a full hedge using forward contracts, the return becomes:</span>
<span id="cb29-1080"><a href="#cb29-1080" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1081"><a href="#cb29-1081" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb29-1082"><a href="#cb29-1082" aria-hidden="true" tabindex="-1"></a>R^{USD,\text{hedged}}_{i,t} \approx R^{VND}_{i,t} + (f_t - s_t)</span>
<span id="cb29-1083"><a href="#cb29-1083" aria-hidden="true" tabindex="-1"></a>$$ {#eq-hedged-return}</span>
<span id="cb29-1084"><a href="#cb29-1084" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1085"><a href="#cb29-1085" aria-hidden="true" tabindex="-1"></a>where $f_t - s_t$ is the forward premium (which, by CIP, approximately equals $r^{USD}_t - r^{VND}_t$). In Vietnam, where VND rates exceed USD rates, the forward premium is negative, hedging costs money because the investor forgoes the interest rate differential.</span>
<span id="cb29-1086"><a href="#cb29-1086" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1087"><a href="#cb29-1087" aria-hidden="true" tabindex="-1"></a>@campbell2010global show that the optimal hedge ratio depends on the correlation between equity returns and currency returns. When the correlation is positive (VND depreciation coincides with equity losses), hedging reduces overall portfolio variance more effectively.</span>
<span id="cb29-1088"><a href="#cb29-1088" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1091"><a href="#cb29-1091" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-1092"><a href="#cb29-1092" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: hedging-analysis</span></span>
<span id="cb29-1093"><a href="#cb29-1093" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-1094"><a href="#cb29-1094" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Compare hedged vs unhedged portfolio returns for a foreign investor"</span></span>
<span id="cb29-1095"><a href="#cb29-1095" aria-hidden="true" tabindex="-1"></a><span class="co"># Construct VW equity index in VND</span></span>
<span id="cb29-1096"><a href="#cb29-1096" aria-hidden="true" tabindex="-1"></a>equity_index <span class="op">=</span> (</span>
<span id="cb29-1097"><a href="#cb29-1097" aria-hidden="true" tabindex="-1"></a>    equity</span>
<span id="cb29-1098"><a href="#cb29-1098" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">'month_end'</span>)</span>
<span id="cb29-1099"><a href="#cb29-1099" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">apply</span>(<span class="kw">lambda</span> g: np.average(g[<span class="st">'monthly_return'</span>],</span>
<span id="cb29-1100"><a href="#cb29-1100" aria-hidden="true" tabindex="-1"></a>                                 weights<span class="op">=</span>g[<span class="st">'market_cap'</span>]))</span>
<span id="cb29-1101"><a href="#cb29-1101" aria-hidden="true" tabindex="-1"></a>    .reset_index(name<span class="op">=</span><span class="st">'equity_vnd'</span>)</span>
<span id="cb29-1102"><a href="#cb29-1102" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-1103"><a href="#cb29-1103" aria-hidden="true" tabindex="-1"></a>equity_index[<span class="st">'month_end'</span>] <span class="op">=</span> pd.to_datetime(equity_index[<span class="st">'month_end'</span>])</span>
<span id="cb29-1104"><a href="#cb29-1104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1105"><a href="#cb29-1105" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge with FX returns and forward premium</span></span>
<span id="cb29-1106"><a href="#cb29-1106" aria-hidden="true" tabindex="-1"></a>hedge_data <span class="op">=</span> (</span>
<span id="cb29-1107"><a href="#cb29-1107" aria-hidden="true" tabindex="-1"></a>    equity_index</span>
<span id="cb29-1108"><a href="#cb29-1108" aria-hidden="true" tabindex="-1"></a>    .merge(fx_monthly, left_on<span class="op">=</span><span class="st">'month_end'</span>, right_index<span class="op">=</span><span class="va">True</span>, how<span class="op">=</span><span class="st">'inner'</span>)</span>
<span id="cb29-1109"><a href="#cb29-1109" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-1110"><a href="#cb29-1110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1111"><a href="#cb29-1111" aria-hidden="true" tabindex="-1"></a><span class="co"># Forward premium</span></span>
<span id="cb29-1112"><a href="#cb29-1112" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="bu">len</span>(cip_data) <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb29-1113"><a href="#cb29-1113" aria-hidden="true" tabindex="-1"></a>    fwd_premium_monthly <span class="op">=</span> (</span>
<span id="cb29-1114"><a href="#cb29-1114" aria-hidden="true" tabindex="-1"></a>        cip_data[<span class="st">'forward_premium'</span>]</span>
<span id="cb29-1115"><a href="#cb29-1115" aria-hidden="true" tabindex="-1"></a>        .resample(<span class="st">'M'</span>).last() <span class="op">/</span> <span class="dv">12</span></span>
<span id="cb29-1116"><a href="#cb29-1116" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-1117"><a href="#cb29-1117" aria-hidden="true" tabindex="-1"></a>    hedge_data <span class="op">=</span> hedge_data.merge(</span>
<span id="cb29-1118"><a href="#cb29-1118" aria-hidden="true" tabindex="-1"></a>        fwd_premium_monthly.to_frame(<span class="st">'fwd_premium'</span>),</span>
<span id="cb29-1119"><a href="#cb29-1119" aria-hidden="true" tabindex="-1"></a>        left_on<span class="op">=</span><span class="st">'month_end'</span>, right_index<span class="op">=</span><span class="va">True</span>, how<span class="op">=</span><span class="st">'left'</span></span>
<span id="cb29-1120"><a href="#cb29-1120" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-1121"><a href="#cb29-1121" aria-hidden="true" tabindex="-1"></a>    hedge_data[<span class="st">'fwd_premium'</span>] <span class="op">=</span> hedge_data[<span class="st">'fwd_premium'</span>].fillna(</span>
<span id="cb29-1122"><a href="#cb29-1122" aria-hidden="true" tabindex="-1"></a>        hedge_data[<span class="st">'fwd_premium'</span>].mean()</span>
<span id="cb29-1123"><a href="#cb29-1123" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-1124"><a href="#cb29-1124" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb29-1125"><a href="#cb29-1125" aria-hidden="true" tabindex="-1"></a>    hedge_data[<span class="st">'fwd_premium'</span>] <span class="op">=</span> <span class="op">-</span><span class="fl">0.003</span></span>
<span id="cb29-1126"><a href="#cb29-1126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1127"><a href="#cb29-1127" aria-hidden="true" tabindex="-1"></a><span class="co"># Unhedged USD return</span></span>
<span id="cb29-1128"><a href="#cb29-1128" aria-hidden="true" tabindex="-1"></a>hedge_data[<span class="st">'return_unhedged'</span>] <span class="op">=</span> (</span>
<span id="cb29-1129"><a href="#cb29-1129" aria-hidden="true" tabindex="-1"></a>    hedge_data[<span class="st">'equity_vnd'</span>] <span class="op">+</span> hedge_data[<span class="st">'fx_return'</span>]</span>
<span id="cb29-1130"><a href="#cb29-1130" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> hedge_data[<span class="st">'equity_vnd'</span>] <span class="op">*</span> hedge_data[<span class="st">'fx_return'</span>]</span>
<span id="cb29-1131"><a href="#cb29-1131" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-1132"><a href="#cb29-1132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1133"><a href="#cb29-1133" aria-hidden="true" tabindex="-1"></a><span class="co"># Fully hedged USD return</span></span>
<span id="cb29-1134"><a href="#cb29-1134" aria-hidden="true" tabindex="-1"></a>hedge_data[<span class="st">'return_hedged'</span>] <span class="op">=</span> (</span>
<span id="cb29-1135"><a href="#cb29-1135" aria-hidden="true" tabindex="-1"></a>    hedge_data[<span class="st">'equity_vnd'</span>] <span class="op">+</span> hedge_data[<span class="st">'fwd_premium'</span>]</span>
<span id="cb29-1136"><a href="#cb29-1136" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-1137"><a href="#cb29-1137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1138"><a href="#cb29-1138" aria-hidden="true" tabindex="-1"></a><span class="co"># 50% hedge ratio</span></span>
<span id="cb29-1139"><a href="#cb29-1139" aria-hidden="true" tabindex="-1"></a>hedge_data[<span class="st">'return_50pct'</span>] <span class="op">=</span> (</span>
<span id="cb29-1140"><a href="#cb29-1140" aria-hidden="true" tabindex="-1"></a>    <span class="fl">0.5</span> <span class="op">*</span> hedge_data[<span class="st">'return_hedged'</span>]</span>
<span id="cb29-1141"><a href="#cb29-1141" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> <span class="fl">0.5</span> <span class="op">*</span> hedge_data[<span class="st">'return_unhedged'</span>]</span>
<span id="cb29-1142"><a href="#cb29-1142" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-1143"><a href="#cb29-1143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1144"><a href="#cb29-1144" aria-hidden="true" tabindex="-1"></a><span class="co"># Performance comparison</span></span>
<span id="cb29-1145"><a href="#cb29-1145" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> strategy, col <span class="kw">in</span> [(<span class="st">'VND (Local)'</span>, <span class="st">'equity_vnd'</span>),</span>
<span id="cb29-1146"><a href="#cb29-1146" aria-hidden="true" tabindex="-1"></a>                       (<span class="st">'USD Unhedged'</span>, <span class="st">'return_unhedged'</span>),</span>
<span id="cb29-1147"><a href="#cb29-1147" aria-hidden="true" tabindex="-1"></a>                       (<span class="st">'USD 50% Hedged'</span>, <span class="st">'return_50pct'</span>),</span>
<span id="cb29-1148"><a href="#cb29-1148" aria-hidden="true" tabindex="-1"></a>                       (<span class="st">'USD Fully Hedged'</span>, <span class="st">'return_hedged'</span>)]:</span>
<span id="cb29-1149"><a href="#cb29-1149" aria-hidden="true" tabindex="-1"></a>    r <span class="op">=</span> hedge_data[col]</span>
<span id="cb29-1150"><a href="#cb29-1150" aria-hidden="true" tabindex="-1"></a>    ann_ret <span class="op">=</span> (<span class="dv">1</span> <span class="op">+</span> r).prod() <span class="op">**</span> (<span class="dv">12</span> <span class="op">/</span> <span class="bu">len</span>(r)) <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb29-1151"><a href="#cb29-1151" aria-hidden="true" tabindex="-1"></a>    ann_vol <span class="op">=</span> r.std() <span class="op">*</span> np.sqrt(<span class="dv">12</span>)</span>
<span id="cb29-1152"><a href="#cb29-1152" aria-hidden="true" tabindex="-1"></a>    sharpe <span class="op">=</span> r.mean() <span class="op">/</span> r.std() <span class="op">*</span> np.sqrt(<span class="dv">12</span>)</span>
<span id="cb29-1153"><a href="#cb29-1153" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>strategy<span class="sc">:&lt;22}</span><span class="ss"> Return: </span><span class="sc">{</span>ann_ret<span class="sc">:&gt;7.2%}</span><span class="ss">  Vol: </span><span class="sc">{</span>ann_vol<span class="sc">:&gt;7.2%}</span><span class="ss">  "</span></span>
<span id="cb29-1154"><a href="#cb29-1154" aria-hidden="true" tabindex="-1"></a>          <span class="ss">f"Sharpe: </span><span class="sc">{</span>sharpe<span class="sc">:&gt;5.2f}</span><span class="ss">"</span>)</span>
<span id="cb29-1155"><a href="#cb29-1155" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-1156"><a href="#cb29-1156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1159"><a href="#cb29-1159" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-1160"><a href="#cb29-1160" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-hedging-comparison</span></span>
<span id="cb29-1161"><a href="#cb29-1161" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-1162"><a href="#cb29-1162" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Cumulative wealth paths for a foreign investor in Vietnamese equities under different hedging strategies. Full hedging eliminates currency risk but incurs the cost of the negative forward premium. The optimal partial hedge depends on the investor's risk aversion and the equity-currency correlation."</span></span>
<span id="cb29-1163"><a href="#cb29-1163" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Plot cumulative returns for different hedging strategies"</span></span>
<span id="cb29-1164"><a href="#cb29-1164" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">6</span>))</span>
<span id="cb29-1165"><a href="#cb29-1165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1166"><a href="#cb29-1166" aria-hidden="true" tabindex="-1"></a>strategies <span class="op">=</span> {</span>
<span id="cb29-1167"><a href="#cb29-1167" aria-hidden="true" tabindex="-1"></a>    <span class="st">'VND (Local)'</span>: (<span class="st">'equity_vnd'</span>, <span class="st">'#2C5F8A'</span>, <span class="st">'-'</span>),</span>
<span id="cb29-1168"><a href="#cb29-1168" aria-hidden="true" tabindex="-1"></a>    <span class="st">'USD Unhedged'</span>: (<span class="st">'return_unhedged'</span>, <span class="st">'#C0392B'</span>, <span class="st">'-'</span>),</span>
<span id="cb29-1169"><a href="#cb29-1169" aria-hidden="true" tabindex="-1"></a>    <span class="st">'USD 50% Hedged'</span>: (<span class="st">'return_50pct'</span>, <span class="st">'#E67E22'</span>, <span class="st">'--'</span>),</span>
<span id="cb29-1170"><a href="#cb29-1170" aria-hidden="true" tabindex="-1"></a>    <span class="st">'USD Fully Hedged'</span>: (<span class="st">'return_hedged'</span>, <span class="st">'#27AE60'</span>, <span class="st">'-'</span>),</span>
<span id="cb29-1171"><a href="#cb29-1171" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-1172"><a href="#cb29-1172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1173"><a href="#cb29-1173" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> label, (col, color, ls) <span class="kw">in</span> strategies.items():</span>
<span id="cb29-1174"><a href="#cb29-1174" aria-hidden="true" tabindex="-1"></a>    cum <span class="op">=</span> (<span class="dv">1</span> <span class="op">+</span> hedge_data.set_index(<span class="st">'month_end'</span>)[col]).cumprod()</span>
<span id="cb29-1175"><a href="#cb29-1175" aria-hidden="true" tabindex="-1"></a>    ax.plot(cum.index, cum, label<span class="op">=</span>label, color<span class="op">=</span>color,</span>
<span id="cb29-1176"><a href="#cb29-1176" aria-hidden="true" tabindex="-1"></a>            linewidth<span class="op">=</span><span class="dv">2</span>, linestyle<span class="op">=</span>ls)</span>
<span id="cb29-1177"><a href="#cb29-1177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1178"><a href="#cb29-1178" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">'Cumulative Wealth'</span>)</span>
<span id="cb29-1179"><a href="#cb29-1179" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">'Date'</span>)</span>
<span id="cb29-1180"><a href="#cb29-1180" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">'Vietnamese Equity Returns: Hedging Comparison'</span>)</span>
<span id="cb29-1181"><a href="#cb29-1181" aria-hidden="true" tabindex="-1"></a>ax.legend()</span>
<span id="cb29-1182"><a href="#cb29-1182" aria-hidden="true" tabindex="-1"></a>ax.set_yscale(<span class="st">'log'</span>)</span>
<span id="cb29-1183"><a href="#cb29-1183" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb29-1184"><a href="#cb29-1184" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb29-1185"><a href="#cb29-1185" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-1186"><a href="#cb29-1186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1187"><a href="#cb29-1187" aria-hidden="true" tabindex="-1"></a><span class="fu">### Optimal Hedge Ratio</span></span>
<span id="cb29-1188"><a href="#cb29-1188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1189"><a href="#cb29-1189" aria-hidden="true" tabindex="-1"></a>The minimum-variance hedge ratio is:</span>
<span id="cb29-1190"><a href="#cb29-1190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1191"><a href="#cb29-1191" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb29-1192"><a href="#cb29-1192" aria-hidden="true" tabindex="-1"></a>h^* = \frac{\text{Cov}(R^{VND}_t, \Delta s_t)}{\text{Var}(\Delta s_t)}</span>
<span id="cb29-1193"><a href="#cb29-1193" aria-hidden="true" tabindex="-1"></a>$$ {#eq-optimal-hedge}</span>
<span id="cb29-1194"><a href="#cb29-1194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1195"><a href="#cb29-1195" aria-hidden="true" tabindex="-1"></a>This is the OLS slope from regressing local equity returns on exchange rate changes. When the correlation between equity and currency is positive (bad for unhedged investors), $h^* &gt; 0$ and hedging reduces variance.</span>
<span id="cb29-1196"><a href="#cb29-1196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1199"><a href="#cb29-1199" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-1200"><a href="#cb29-1200" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: optimal-hedge</span></span>
<span id="cb29-1201"><a href="#cb29-1201" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-1202"><a href="#cb29-1202" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Estimate optimal hedge ratio and rolling hedge ratio"</span></span>
<span id="cb29-1203"><a href="#cb29-1203" aria-hidden="true" tabindex="-1"></a><span class="co"># Full-sample optimal hedge ratio</span></span>
<span id="cb29-1204"><a href="#cb29-1204" aria-hidden="true" tabindex="-1"></a>hedge_reg <span class="op">=</span> sm.OLS(</span>
<span id="cb29-1205"><a href="#cb29-1205" aria-hidden="true" tabindex="-1"></a>    hedge_data[<span class="st">'equity_vnd'</span>],</span>
<span id="cb29-1206"><a href="#cb29-1206" aria-hidden="true" tabindex="-1"></a>    sm.add_constant(hedge_data[<span class="st">'fx_return'</span>])</span>
<span id="cb29-1207"><a href="#cb29-1207" aria-hidden="true" tabindex="-1"></a>).fit()</span>
<span id="cb29-1208"><a href="#cb29-1208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1209"><a href="#cb29-1209" aria-hidden="true" tabindex="-1"></a>h_star <span class="op">=</span> hedge_reg.params[<span class="st">'fx_return'</span>]</span>
<span id="cb29-1210"><a href="#cb29-1210" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Optimal hedge ratio (full sample): </span><span class="sc">{</span>h_star<span class="sc">:.3f}</span><span class="ss">"</span>)</span>
<span id="cb29-1211"><a href="#cb29-1211" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Equity-currency correlation: "</span></span>
<span id="cb29-1212"><a href="#cb29-1212" aria-hidden="true" tabindex="-1"></a>      <span class="ss">f"</span><span class="sc">{</span>hedge_data[<span class="st">'equity_vnd'</span>]<span class="sc">.</span>corr(hedge_data[<span class="st">'fx_return'</span>])<span class="sc">:.3f}</span><span class="ss">"</span>)</span>
<span id="cb29-1213"><a href="#cb29-1213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1214"><a href="#cb29-1214" aria-hidden="true" tabindex="-1"></a><span class="co"># Rolling 36-month optimal hedge ratio</span></span>
<span id="cb29-1215"><a href="#cb29-1215" aria-hidden="true" tabindex="-1"></a>rolling_cov <span class="op">=</span> hedge_data[<span class="st">'equity_vnd'</span>].rolling(<span class="dv">36</span>).cov(</span>
<span id="cb29-1216"><a href="#cb29-1216" aria-hidden="true" tabindex="-1"></a>    hedge_data[<span class="st">'fx_return'</span>]</span>
<span id="cb29-1217"><a href="#cb29-1217" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-1218"><a href="#cb29-1218" aria-hidden="true" tabindex="-1"></a>rolling_var <span class="op">=</span> hedge_data[<span class="st">'fx_return'</span>].rolling(<span class="dv">36</span>).var()</span>
<span id="cb29-1219"><a href="#cb29-1219" aria-hidden="true" tabindex="-1"></a>hedge_data[<span class="st">'h_star_rolling'</span>] <span class="op">=</span> rolling_cov <span class="op">/</span> rolling_var</span>
<span id="cb29-1220"><a href="#cb29-1220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1221"><a href="#cb29-1221" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Rolling hedge ratio range: "</span></span>
<span id="cb29-1222"><a href="#cb29-1222" aria-hidden="true" tabindex="-1"></a>      <span class="ss">f"[</span><span class="sc">{</span>hedge_data[<span class="st">'h_star_rolling'</span>]<span class="sc">.</span><span class="bu">min</span>()<span class="sc">:.2f}</span><span class="ss">, "</span></span>
<span id="cb29-1223"><a href="#cb29-1223" aria-hidden="true" tabindex="-1"></a>      <span class="ss">f"</span><span class="sc">{</span>hedge_data[<span class="st">'h_star_rolling'</span>]<span class="sc">.</span><span class="bu">max</span>()<span class="sc">:.2f}</span><span class="ss">]"</span>)</span>
<span id="cb29-1224"><a href="#cb29-1224" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-1225"><a href="#cb29-1225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1226"><a href="#cb29-1226" aria-hidden="true" tabindex="-1"></a><span class="fu">## ASEAN Currency Comparison {#sec-fx-asean}</span></span>
<span id="cb29-1227"><a href="#cb29-1227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1228"><a href="#cb29-1228" aria-hidden="true" tabindex="-1"></a>To put the VND in perspective, we compare its properties with other ASEAN currencies and the Chinese Yuan.</span>
<span id="cb29-1229"><a href="#cb29-1229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1232"><a href="#cb29-1232" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-1233"><a href="#cb29-1233" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-asean-comparison</span></span>
<span id="cb29-1234"><a href="#cb29-1234" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-1235"><a href="#cb29-1235" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Annualized volatility and mean depreciation of ASEAN currencies against the USD (2012--2024). The VND stands out for its low volatility (reflecting the managed float) combined with gradual depreciation. Freely floating currencies (THB, SGD) show higher volatility but more variable depreciation patterns."</span></span>
<span id="cb29-1236"><a href="#cb29-1236" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Compare VND with ASEAN and Asian currency pairs"</span></span>
<span id="cb29-1237"><a href="#cb29-1237" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute annual statistics for each currency</span></span>
<span id="cb29-1238"><a href="#cb29-1238" aria-hidden="true" tabindex="-1"></a>comparison <span class="op">=</span> pd.DataFrame()</span>
<span id="cb29-1239"><a href="#cb29-1239" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> currency <span class="kw">in</span> fx_returns.columns:</span>
<span id="cb29-1240"><a href="#cb29-1240" aria-hidden="true" tabindex="-1"></a>    r <span class="op">=</span> fx_returns[currency].dropna()</span>
<span id="cb29-1241"><a href="#cb29-1241" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(r) <span class="op">&gt;</span> <span class="dv">252</span>:</span>
<span id="cb29-1242"><a href="#cb29-1242" aria-hidden="true" tabindex="-1"></a>        comparison.loc[currency, <span class="st">'Ann. Depreciation (%)'</span>] <span class="op">=</span> r.mean() <span class="op">*</span> <span class="dv">252</span> <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb29-1243"><a href="#cb29-1243" aria-hidden="true" tabindex="-1"></a>        comparison.loc[currency, <span class="st">'Ann. Volatility (%)'</span>] <span class="op">=</span> r.std() <span class="op">*</span> np.sqrt(<span class="dv">252</span>) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb29-1244"><a href="#cb29-1244" aria-hidden="true" tabindex="-1"></a>        comparison.loc[currency, <span class="st">'Skewness'</span>] <span class="op">=</span> r.skew()</span>
<span id="cb29-1245"><a href="#cb29-1245" aria-hidden="true" tabindex="-1"></a>        comparison.loc[currency, <span class="st">'Kurtosis'</span>] <span class="op">=</span> r.kurtosis()</span>
<span id="cb29-1246"><a href="#cb29-1246" aria-hidden="true" tabindex="-1"></a>        comparison.loc[currency, <span class="st">'Max Daily Loss (%)'</span>] <span class="op">=</span> r.<span class="bu">max</span>() <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb29-1247"><a href="#cb29-1247" aria-hidden="true" tabindex="-1"></a>        comparison.loc[currency, <span class="st">'Sharpe (Carry)'</span>] <span class="op">=</span> (</span>
<span id="cb29-1248"><a href="#cb29-1248" aria-hidden="true" tabindex="-1"></a>            r.mean() <span class="op">*</span> <span class="dv">252</span> <span class="op">/</span> (r.std() <span class="op">*</span> np.sqrt(<span class="dv">252</span>))</span>
<span id="cb29-1249"><a href="#cb29-1249" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb29-1250"><a href="#cb29-1250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1251"><a href="#cb29-1251" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"ASEAN + Asian Currency Comparison (VND base, vs USD):"</span>)</span>
<span id="cb29-1252"><a href="#cb29-1252" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(comparison.<span class="bu">round</span>(<span class="dv">2</span>).to_string())</span>
<span id="cb29-1253"><a href="#cb29-1253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1254"><a href="#cb29-1254" aria-hidden="true" tabindex="-1"></a><span class="co"># Risk-return scatter</span></span>
<span id="cb29-1255"><a href="#cb29-1255" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">9</span>, <span class="dv">7</span>))</span>
<span id="cb29-1256"><a href="#cb29-1256" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> currency <span class="kw">in</span> comparison.index:</span>
<span id="cb29-1257"><a href="#cb29-1257" aria-hidden="true" tabindex="-1"></a>    ax.scatter(</span>
<span id="cb29-1258"><a href="#cb29-1258" aria-hidden="true" tabindex="-1"></a>        comparison.loc[currency, <span class="st">'Ann. Volatility (%)'</span>],</span>
<span id="cb29-1259"><a href="#cb29-1259" aria-hidden="true" tabindex="-1"></a>        comparison.loc[currency, <span class="st">'Ann. Depreciation (%)'</span>],</span>
<span id="cb29-1260"><a href="#cb29-1260" aria-hidden="true" tabindex="-1"></a>        s<span class="op">=</span><span class="dv">120</span>, zorder<span class="op">=</span><span class="dv">5</span></span>
<span id="cb29-1261"><a href="#cb29-1261" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-1262"><a href="#cb29-1262" aria-hidden="true" tabindex="-1"></a>    ax.annotate(</span>
<span id="cb29-1263"><a href="#cb29-1263" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f'VND/</span><span class="sc">{</span>currency<span class="sc">}</span><span class="ss">'</span>,</span>
<span id="cb29-1264"><a href="#cb29-1264" aria-hidden="true" tabindex="-1"></a>        (comparison.loc[currency, <span class="st">'Ann. Volatility (%)'</span>] <span class="op">+</span> <span class="fl">0.15</span>,</span>
<span id="cb29-1265"><a href="#cb29-1265" aria-hidden="true" tabindex="-1"></a>         comparison.loc[currency, <span class="st">'Ann. Depreciation (%)'</span>]),</span>
<span id="cb29-1266"><a href="#cb29-1266" aria-hidden="true" tabindex="-1"></a>        fontsize<span class="op">=</span><span class="dv">10</span></span>
<span id="cb29-1267"><a href="#cb29-1267" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-1268"><a href="#cb29-1268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1269"><a href="#cb29-1269" aria-hidden="true" tabindex="-1"></a>ax.axhline(y<span class="op">=</span><span class="dv">0</span>, color<span class="op">=</span><span class="st">'gray'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb29-1270"><a href="#cb29-1270" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">'Annualized Volatility (%)'</span>)</span>
<span id="cb29-1271"><a href="#cb29-1271" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">'Annualized Depreciation (%)'</span>)</span>
<span id="cb29-1272"><a href="#cb29-1272" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">'ASEAN Currency Risk-Return Characteristics'</span>)</span>
<span id="cb29-1273"><a href="#cb29-1273" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb29-1274"><a href="#cb29-1274" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb29-1275"><a href="#cb29-1275" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-1276"><a href="#cb29-1276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1277"><a href="#cb29-1277" aria-hidden="true" tabindex="-1"></a><span class="fu">## Exchange Rate and Equity Market Co-Movement {#sec-fx-comovement}</span></span>
<span id="cb29-1278"><a href="#cb29-1278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1279"><a href="#cb29-1279" aria-hidden="true" tabindex="-1"></a>The relationship between VND/USD movements and the Vietnamese equity market is central to portfolio construction. We examine this at both the aggregate and conditional levels.</span>
<span id="cb29-1280"><a href="#cb29-1280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1283"><a href="#cb29-1283" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb29-1284"><a href="#cb29-1284" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-equity-fx-comovement</span></span>
<span id="cb29-1285"><a href="#cb29-1285" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb29-1286"><a href="#cb29-1286" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Scatter plot of monthly VN-Index returns against VND/USD changes. The relationship is modestly negative (VND depreciation hurts equities), but with substantial noise. The correlation is stronger during crisis episodes when capital outflows simultaneously depress equities and the currency."</span></span>
<span id="cb29-1287"><a href="#cb29-1287" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Analyze equity-FX co-movement at the aggregate level"</span></span>
<span id="cb29-1288"><a href="#cb29-1288" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">5</span>))</span>
<span id="cb29-1289"><a href="#cb29-1289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1290"><a href="#cb29-1290" aria-hidden="true" tabindex="-1"></a><span class="co"># Panel A: Scatter plot</span></span>
<span id="cb29-1291"><a href="#cb29-1291" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].scatter(</span>
<span id="cb29-1292"><a href="#cb29-1292" aria-hidden="true" tabindex="-1"></a>    hedge_data[<span class="st">'fx_return'</span>] <span class="op">*</span> <span class="dv">100</span>,</span>
<span id="cb29-1293"><a href="#cb29-1293" aria-hidden="true" tabindex="-1"></a>    hedge_data[<span class="st">'equity_vnd'</span>] <span class="op">*</span> <span class="dv">100</span>,</span>
<span id="cb29-1294"><a href="#cb29-1294" aria-hidden="true" tabindex="-1"></a>    c<span class="op">=</span>hedge_data.index, cmap<span class="op">=</span><span class="st">'viridis'</span>, s<span class="op">=</span><span class="dv">20</span>, alpha<span class="op">=</span><span class="fl">0.7</span></span>
<span id="cb29-1295"><a href="#cb29-1295" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-1296"><a href="#cb29-1296" aria-hidden="true" tabindex="-1"></a>z <span class="op">=</span> np.polyfit(hedge_data[<span class="st">'fx_return'</span>], hedge_data[<span class="st">'equity_vnd'</span>], <span class="dv">1</span>)</span>
<span id="cb29-1297"><a href="#cb29-1297" aria-hidden="true" tabindex="-1"></a>x_line <span class="op">=</span> np.linspace(hedge_data[<span class="st">'fx_return'</span>].<span class="bu">min</span>(),</span>
<span id="cb29-1298"><a href="#cb29-1298" aria-hidden="true" tabindex="-1"></a>                     hedge_data[<span class="st">'fx_return'</span>].<span class="bu">max</span>(), <span class="dv">100</span>)</span>
<span id="cb29-1299"><a href="#cb29-1299" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].plot(x_line <span class="op">*</span> <span class="dv">100</span>, np.polyval(z, x_line) <span class="op">*</span> <span class="dv">100</span>,</span>
<span id="cb29-1300"><a href="#cb29-1300" aria-hidden="true" tabindex="-1"></a>             color<span class="op">=</span><span class="st">'#C0392B'</span>, linewidth<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb29-1301"><a href="#cb29-1301" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].axhline(y<span class="op">=</span><span class="dv">0</span>, color<span class="op">=</span><span class="st">'gray'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb29-1302"><a href="#cb29-1302" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].axvline(x<span class="op">=</span><span class="dv">0</span>, color<span class="op">=</span><span class="st">'gray'</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb29-1303"><a href="#cb29-1303" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_xlabel(<span class="st">'VND/USD Change (%)'</span>)</span>
<span id="cb29-1304"><a href="#cb29-1304" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_ylabel(<span class="st">'VN-Index Return (%)'</span>)</span>
<span id="cb29-1305"><a href="#cb29-1305" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">'Panel A: Monthly Equity-FX Relationship'</span>)</span>
<span id="cb29-1306"><a href="#cb29-1306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1307"><a href="#cb29-1307" aria-hidden="true" tabindex="-1"></a>rho <span class="op">=</span> hedge_data[<span class="st">'equity_vnd'</span>].corr(hedge_data[<span class="st">'fx_return'</span>])</span>
<span id="cb29-1308"><a href="#cb29-1308" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].text(<span class="fl">0.05</span>, <span class="fl">0.95</span>, <span class="ss">f'rho = </span><span class="sc">{</span>rho<span class="sc">:.3f}</span><span class="ss">'</span>, transform<span class="op">=</span>axes[<span class="dv">0</span>].transAxes,</span>
<span id="cb29-1309"><a href="#cb29-1309" aria-hidden="true" tabindex="-1"></a>             fontsize<span class="op">=</span><span class="dv">12</span>, verticalalignment<span class="op">=</span><span class="st">'top'</span>,</span>
<span id="cb29-1310"><a href="#cb29-1310" aria-hidden="true" tabindex="-1"></a>             bbox<span class="op">=</span><span class="bu">dict</span>(boxstyle<span class="op">=</span><span class="st">'round'</span>, facecolor<span class="op">=</span><span class="st">'white'</span>, alpha<span class="op">=</span><span class="fl">0.8</span>))</span>
<span id="cb29-1311"><a href="#cb29-1311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1312"><a href="#cb29-1312" aria-hidden="true" tabindex="-1"></a><span class="co"># Panel B: Rolling 36-month correlation</span></span>
<span id="cb29-1313"><a href="#cb29-1313" aria-hidden="true" tabindex="-1"></a>rolling_corr <span class="op">=</span> (</span>
<span id="cb29-1314"><a href="#cb29-1314" aria-hidden="true" tabindex="-1"></a>    hedge_data[<span class="st">'equity_vnd'</span>]</span>
<span id="cb29-1315"><a href="#cb29-1315" aria-hidden="true" tabindex="-1"></a>    .rolling(<span class="dv">36</span>)</span>
<span id="cb29-1316"><a href="#cb29-1316" aria-hidden="true" tabindex="-1"></a>    .corr(hedge_data[<span class="st">'fx_return'</span>])</span>
<span id="cb29-1317"><a href="#cb29-1317" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-1318"><a href="#cb29-1318" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].plot(hedge_data[<span class="st">'month_end'</span>], rolling_corr,</span>
<span id="cb29-1319"><a href="#cb29-1319" aria-hidden="true" tabindex="-1"></a>             color<span class="op">=</span><span class="st">'#2C5F8A'</span>, linewidth<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb29-1320"><a href="#cb29-1320" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].axhline(y<span class="op">=</span><span class="dv">0</span>, color<span class="op">=</span><span class="st">'gray'</span>, linewidth<span class="op">=</span><span class="fl">0.8</span>, linestyle<span class="op">=</span><span class="st">'--'</span>)</span>
<span id="cb29-1321"><a href="#cb29-1321" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].fill_between(</span>
<span id="cb29-1322"><a href="#cb29-1322" aria-hidden="true" tabindex="-1"></a>    hedge_data[<span class="st">'month_end'</span>], <span class="dv">0</span>, rolling_corr,</span>
<span id="cb29-1323"><a href="#cb29-1323" aria-hidden="true" tabindex="-1"></a>    where<span class="op">=</span>rolling_corr <span class="op">&lt;</span> <span class="dv">0</span>, color<span class="op">=</span><span class="st">'#C0392B'</span>, alpha<span class="op">=</span><span class="fl">0.2</span></span>
<span id="cb29-1324"><a href="#cb29-1324" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-1325"><a href="#cb29-1325" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].fill_between(</span>
<span id="cb29-1326"><a href="#cb29-1326" aria-hidden="true" tabindex="-1"></a>    hedge_data[<span class="st">'month_end'</span>], <span class="dv">0</span>, rolling_corr,</span>
<span id="cb29-1327"><a href="#cb29-1327" aria-hidden="true" tabindex="-1"></a>    where<span class="op">=</span>rolling_corr <span class="op">&gt;</span> <span class="dv">0</span>, color<span class="op">=</span><span class="st">'#27AE60'</span>, alpha<span class="op">=</span><span class="fl">0.2</span></span>
<span id="cb29-1328"><a href="#cb29-1328" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-1329"><a href="#cb29-1329" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_xlabel(<span class="st">'Date'</span>)</span>
<span id="cb29-1330"><a href="#cb29-1330" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_ylabel(<span class="st">'Rolling Correlation'</span>)</span>
<span id="cb29-1331"><a href="#cb29-1331" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">'Panel B: 36-Month Rolling Equity-FX Correlation'</span>)</span>
<span id="cb29-1332"><a href="#cb29-1332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1333"><a href="#cb29-1333" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb29-1334"><a href="#cb29-1334" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb29-1335"><a href="#cb29-1335" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb29-1336"><a href="#cb29-1336" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1337"><a href="#cb29-1337" aria-hidden="true" tabindex="-1"></a><span class="fu">## Summary {#sec-fx-summary}</span></span>
<span id="cb29-1338"><a href="#cb29-1338" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1339"><a href="#cb29-1339" aria-hidden="true" tabindex="-1"></a>This chapter has developed a comprehensive toolkit for working with exchange rate data in the Vietnamese context. The key findings and methods are in @tbl-fx-summary.</span>
<span id="cb29-1340"><a href="#cb29-1340" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1341"><a href="#cb29-1341" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Topic <span class="pp">|</span> Finding <span class="pp">|</span> Implication <span class="pp">|</span></span>
<span id="cb29-1342"><a href="#cb29-1342" aria-hidden="true" tabindex="-1"></a><span class="pp">|-------------------|------------------------|------------------------|</span></span>
<span id="cb29-1343"><a href="#cb29-1343" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> VND regime <span class="pp">|</span> Managed float with +/-3% band, daily reference rate <span class="pp">|</span> Returns are non-normal; clustered near zero with discrete jumps <span class="pp">|</span></span>
<span id="cb29-1344"><a href="#cb29-1344" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Return distribution <span class="pp">|</span> Fat tails, excess kurtosis, positive skewness <span class="pp">|</span> Standard normal-based risk models underestimate tail risk <span class="pp">|</span></span>
<span id="cb29-1345"><a href="#cb29-1345" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> CIP <span class="pp">|</span> Persistent positive deviations (\~50-200 bps) <span class="pp">|</span> Capital controls and limited arbitrage; hedging is expensive <span class="pp">|</span></span>
<span id="cb29-1346"><a href="#cb29-1346" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> UIP <span class="pp">|</span> beta <span class="sc">\&lt;</span> 1 in Fama regression <span class="pp">|</span> Carry trade is profitable on average; crash risk in devaluations <span class="pp">|</span></span>
<span id="cb29-1347"><a href="#cb29-1347" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Carry trade <span class="pp">|</span> Positive Sharpe but negative skewness <span class="pp">|</span> Steady gains punctuated by sharp losses during devaluations <span class="pp">|</span></span>
<span id="cb29-1348"><a href="#cb29-1348" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> GARCH <span class="pp">|</span> Strong persistence (alpha + beta approx 0.99); Student-t preferred <span class="pp">|</span> Volatility clustering; regime switches around policy events <span class="pp">|</span></span>
<span id="cb29-1349"><a href="#cb29-1349" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Firm exposure <span class="pp">|</span> \~15-25% significant; systematic industry patterns <span class="pp">|</span> Exporters benefit from depreciation; importers hurt <span class="pp">|</span></span>
<span id="cb29-1350"><a href="#cb29-1350" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Hedging <span class="pp">|</span> Full hedge eliminates FX risk but costs \~3-5% p.a. <span class="pp">|</span> Optimal partial hedge depends on equity-FX correlation <span class="pp">|</span></span>
<span id="cb29-1351"><a href="#cb29-1351" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> ASEAN comparison <span class="pp">|</span> VND has lowest volatility but steady depreciation <span class="pp">|</span> Managed float compresses vol; does not eliminate trend risk <span class="pp">|</span></span>
<span id="cb29-1352"><a href="#cb29-1352" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1353"><a href="#cb29-1353" aria-hidden="true" tabindex="-1"></a>: Summary of findings on VND exchange rate dynamics. {#tbl-fx-summary}</span>
<span id="cb29-1354"><a href="#cb29-1354" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1355"><a href="#cb29-1355" aria-hidden="true" tabindex="-1"></a>For researchers using Vietnamese equity data, the exchange rate dimension is not optional. Any study that converts VND returns to USD, uses international factor models, or examines firms with trade exposure must account for the distinctive properties of the VND regime. The tools developed in this chapter, from GARCH volatility modeling to rolling exposure estimation, provide the building blocks for incorporating exchange rate dynamics into broader empirical asset pricing work.</span>
<span id="cb29-1356"><a href="#cb29-1356" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1357"><a href="#cb29-1357" aria-hidden="true" tabindex="-1"></a><span class="in">```{=html}</span></span>
<span id="cb29-1358"><a href="#cb29-1358" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;!-- ## Exercises {#sec-fx-exercises}</span></span>
<span id="cb29-1359"><a href="#cb29-1359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1360"><a href="#cb29-1360" aria-hidden="true" tabindex="-1"></a><span class="in">1. **Real effective exchange rate.** Construct a trade-weighted real exchange rate for Vietnam using bilateral rates against the top 10 trading partners, weighted by trade shares, and deflated by relative CPI. Does the REER predict future VND/USD movements?</span></span>
<span id="cb29-1361"><a href="#cb29-1361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1362"><a href="#cb29-1362" aria-hidden="true" tabindex="-1"></a><span class="in">2. **SBV intervention detection.** Using reserve data from the SBV (or proxies from the balance of payments), estimate a probit model for the probability of SBV intervention as a function of the deviation from the reference rate, reserve levels, and global risk indicators. How do intervention episodes affect subsequent exchange rate volatility?</span></span>
<span id="cb29-1363"><a href="#cb29-1363" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1364"><a href="#cb29-1364" aria-hidden="true" tabindex="-1"></a><span class="in">3. **Currency factor in asset pricing.** Add a currency factor (VND/USD return) to the Vietnamese Fama-French model. Does the currency factor carry a significant risk premium in the cross-section of Vietnamese stocks? Use Fama-MacBeth cross-sectional regressions.</span></span>
<span id="cb29-1365"><a href="#cb29-1365" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1366"><a href="#cb29-1366" aria-hidden="true" tabindex="-1"></a><span class="in">4. **Regime-switching GARCH.** Estimate a Markov-switching GARCH model with two states (high and low volatility). Do the regime probabilities align with known SBV policy changes? How does the model compare to standard GARCH in out-of-sample volatility forecasting?</span></span>
<span id="cb29-1367"><a href="#cb29-1367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1368"><a href="#cb29-1368" aria-hidden="true" tabindex="-1"></a><span class="in">5. **Carry trade with risk management.** Augment the simple carry trade with a stop-loss rule: close the position when the trailing 20-day realized volatility exceeds the 90th percentile of its historical distribution. How does this rule affect the return, volatility, and Sharpe ratio of the carry trade?</span></span>
<span id="cb29-1369"><a href="#cb29-1369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1370"><a href="#cb29-1370" aria-hidden="true" tabindex="-1"></a><span class="in">6. **Cross-listing premium and FX exposure.** Some Vietnamese firms issue depositary receipts or are cross-listed abroad. Compare their exchange rate exposure to purely domestic-listed peers. Does cross-listing reduce exposure, consistent with broader hedging opportunities?</span></span>
<span id="cb29-1371"><a href="#cb29-1371" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1372"><a href="#cb29-1372" aria-hidden="true" tabindex="-1"></a><span class="in">7. **Forward premium decomposition.** Decompose the VND/USD forward premium into an expected depreciation component (from a survey or random walk forecast) and a risk premium component (the residual). How does the risk premium vary with global risk aversion proxies (VIX, MOVE)?</span></span>
<span id="cb29-1373"><a href="#cb29-1373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-1374"><a href="#cb29-1374" aria-hidden="true" tabindex="-1"></a><span class="in">8. **Conditional exposure.** Estimate @jorion1990exchange exposures separately in appreciation months (VND strengthens) and depreciation months. Is exposure asymmetric, do firms react differently to appreciation vs. depreciation? What industries show the strongest asymmetry? --&gt;</span></span>
<span id="cb29-1375"><a href="#cb29-1375" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code></pre></div><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p><span id="copyright"></span> Mike. All rights reserved.</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/mikenguyen13/tidy_finance_vn_vi/edit/main/57_exchange_rate.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/mikenguyen13/tidy_finance_vn_vi/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>