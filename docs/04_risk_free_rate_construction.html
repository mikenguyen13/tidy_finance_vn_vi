<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>5&nbsp; Risk-Free Rate Construction in Vietnam – Applying Tidy Finance with Python to Vietnam</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./05_working_with_stock_returns.html" rel="next">
<link href="./03_market_microstructure.html" rel="prev">
<link href="./favicon.ico" rel="icon">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-b758ccaa5987ceb1b75504551e579abf.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-50a4fa9e9ef121803c2355a2deb1af4d.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark-d8431037eefe704a1e7a103aa5b75ea7.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="site_libs/bootstrap/bootstrap-50a4fa9e9ef121803c2355a2deb1af4d.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js" integrity="sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="5&nbsp; Risk-Free Rate Construction in Vietnam – Applying Tidy Finance with Python to Vietnam">
<meta property="og:description" content="">
<meta property="og:site_name" content="Applying Tidy Finance with Python to Vietnam">
<meta name="twitter:title" content="5&nbsp; Risk-Free Rate Construction in Vietnam – Applying Tidy Finance with Python to Vietnam">
<meta name="twitter:description" content="">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-sidebar floating quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./00_institutional_background.html">Vietnam Financial Markets, Institutions, and Data</a></li><li class="breadcrumb-item"><a href="./04_risk_free_rate_construction.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Risk-Free Rate Construction in Vietnam</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Applying Tidy Finance with Python to Vietnam</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/mikenguyen13/tidy_finance_vn" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Vietnam Financial Markets, Institutions, and Data</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00_institutional_background.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Institutional Background and Market Structure of Vietnam’s Equity Market</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01_accessing_and_managing_financial_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Accessing and Managing VN Financial Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02_datacore_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Datacore Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_market_microstructure.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Market Microstructure in Vietnam</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04_risk_free_rate_construction.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Risk-Free Rate Construction in Vietnam</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05_working_with_stock_returns.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Constructing and Analyzing Equity Return Series</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06_compound_return.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Compound Returns</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Portfolio Construction, Risk, and Empirical Mechanics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10_modern_portfolio_theory.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Modern Portfolio Theory</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11_univariate_portfolio_sort.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Univariate Portfolio Sorts</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12_size_sorts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Size Sorts</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13_value_bivariate.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Value and Bivariate Sorts</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14_portfolio_weighting_and_rebalancing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Portfolio Weighting and Rebalancing</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17_beta_estimation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Beta Estimation</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Asset Pricing Models and Cross-Sectional Tests</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./20_capm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">The Capital Asset Pricing Model</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./21_fama_french.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Fama-French Factors</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./22_momentum.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Momentum Strategies</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./24_fama_macbeth.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Fama-MacBeth Regressions</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Firm Fundamentals, Valuation, and Corporate Signals</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./30_financial_statement_analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Financial Statement Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./31_discounted_cash_flow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Discounted Cash Flow Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./32_info_earnings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Information Content of Earnings Announcements</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./33_accruals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Accruals, Earnings Persistence, and Market Efficiency</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./34_earning_management.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Earnings Management: Detection and Measurement</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./35_pe_ratio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">P/E Ratio</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./36_valuation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Firm Valuation, Financial Distress, and Company Maturity</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./37_disclosure_quality_and_timing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Disclosure Quality and Timing</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./38_sue.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Standardized Earnings Surprises (SUE)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./39_divop.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Measuring Divergence of Investor Opinion</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Ownership, Market Frictions, and International Exposure</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./50_institutional_ownership.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Institutional Ownership Analytics in Vietnam</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./52_institutional_trade_flow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Institutional Trades, Flows, and Turnover Ratios</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./53_governance.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Corporate Governance</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./54_return_gaps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Return Gap: Measuring Unobserved Actions of Fund Managers</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Advanced Data, Research Design, and Frontiers</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./60_textual.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Textual Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./65_event_studies.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Event Studies in Finance</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./99_conclusion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Conclusion</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="-1">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#the-role-of-the-risk-free-rate-in-finance" id="toc-the-role-of-the-risk-free-rate-in-finance" class="nav-link active" data-scroll-target="#the-role-of-the-risk-free-rate-in-finance"><span class="header-section-number">5.1</span> The Role of the Risk-Free Rate in Finance</a>
  <ul class="collapse">
  <li><a href="#excess-returns" id="toc-excess-returns" class="nav-link" data-scroll-target="#excess-returns"><span class="header-section-number">5.1.1</span> Excess Returns</a></li>
  <li><a href="#factor-premiums" id="toc-factor-premiums" class="nav-link" data-scroll-target="#factor-premiums"><span class="header-section-number">5.1.2</span> Factor Premiums</a></li>
  <li><a href="#discount-rates-and-valuation" id="toc-discount-rates-and-valuation" class="nav-link" data-scroll-target="#discount-rates-and-valuation"><span class="header-section-number">5.1.3</span> Discount Rates and Valuation</a></li>
  <li><a href="#performance-evaluation" id="toc-performance-evaluation" class="nav-link" data-scroll-target="#performance-evaluation"><span class="header-section-number">5.1.4</span> Performance Evaluation</a></li>
  </ul></li>
  <li><a href="#what-does-risk-free-mean-in-practice" id="toc-what-does-risk-free-mean-in-practice" class="nav-link" data-scroll-target="#what-does-risk-free-mean-in-practice"><span class="header-section-number">5.2</span> What Does “Risk-Free” Mean in Practice?</a>
  <ul class="collapse">
  <li><a href="#the-ideal-proxy" id="toc-the-ideal-proxy" class="nav-link" data-scroll-target="#the-ideal-proxy"><span class="header-section-number">5.2.1</span> The Ideal Proxy</a></li>
  </ul></li>
  <li><a href="#available-proxies-in-vietnam" id="toc-available-proxies-in-vietnam" class="nav-link" data-scroll-target="#available-proxies-in-vietnam"><span class="header-section-number">5.3</span> Available Proxies in Vietnam</a>
  <ul class="collapse">
  <li><a href="#government-bond-yields" id="toc-government-bond-yields" class="nav-link" data-scroll-target="#government-bond-yields"><span class="header-section-number">5.3.1</span> Government Bond Yields</a></li>
  <li><a href="#interbank-overnight-rate" id="toc-interbank-overnight-rate" class="nav-link" data-scroll-target="#interbank-overnight-rate"><span class="header-section-number">5.3.2</span> Interbank Overnight Rate</a></li>
  <li><a href="#sbv-policy-rates" id="toc-sbv-policy-rates" class="nav-link" data-scroll-target="#sbv-policy-rates"><span class="header-section-number">5.3.3</span> SBV Policy Rates</a></li>
  <li><a href="#savings-deposit-rates" id="toc-savings-deposit-rates" class="nav-link" data-scroll-target="#savings-deposit-rates"><span class="header-section-number">5.3.4</span> Savings Deposit Rates</a></li>
  <li><a href="#summary-comparison" id="toc-summary-comparison" class="nav-link" data-scroll-target="#summary-comparison"><span class="header-section-number">5.3.5</span> Summary Comparison</a></li>
  </ul></li>
  <li><a href="#constructing-the-risk-free-rate-series" id="toc-constructing-the-risk-free-rate-series" class="nav-link" data-scroll-target="#constructing-the-risk-free-rate-series"><span class="header-section-number">5.4</span> Constructing the Risk-Free Rate Series</a>
  <ul class="collapse">
  <li><a href="#loading-and-cleaning-rate-data" id="toc-loading-and-cleaning-rate-data" class="nav-link" data-scroll-target="#loading-and-cleaning-rate-data"><span class="header-section-number">5.4.1</span> Loading and Cleaning Rate Data</a></li>
  <li><a href="#frequency-alignment" id="toc-frequency-alignment" class="nav-link" data-scroll-target="#frequency-alignment"><span class="header-section-number">5.4.2</span> Frequency Alignment</a></li>
  <li><a href="#handling-missing-data-and-structural-breaks" id="toc-handling-missing-data-and-structural-breaks" class="nav-link" data-scroll-target="#handling-missing-data-and-structural-breaks"><span class="header-section-number">5.4.3</span> Handling Missing Data and Structural Breaks</a></li>
  <li><a href="#properties-of-the-constructed-series" id="toc-properties-of-the-constructed-series" class="nav-link" data-scroll-target="#properties-of-the-constructed-series"><span class="header-section-number">5.4.4</span> Properties of the Constructed Series</a></li>
  <li><a href="#correlation-across-proxies" id="toc-correlation-across-proxies" class="nav-link" data-scroll-target="#correlation-across-proxies"><span class="header-section-number">5.4.5</span> Correlation Across Proxies</a></li>
  </ul></li>
  <li><a href="#excess-return-construction" id="toc-excess-return-construction" class="nav-link" data-scroll-target="#excess-return-construction"><span class="header-section-number">5.5</span> Excess Return Construction</a>
  <ul class="collapse">
  <li><a href="#matching-conventions" id="toc-matching-conventions" class="nav-link" data-scroll-target="#matching-conventions"><span class="header-section-number">5.5.1</span> Matching Conventions</a></li>
  <li><a href="#market-excess-return" id="toc-market-excess-return" class="nav-link" data-scroll-target="#market-excess-return"><span class="header-section-number">5.5.2</span> Market Excess Return</a></li>
  </ul></li>
  <li><a href="#sensitivity-analysis-how-much-does-the-proxy-choice-matter" id="toc-sensitivity-analysis-how-much-does-the-proxy-choice-matter" class="nav-link" data-scroll-target="#sensitivity-analysis-how-much-does-the-proxy-choice-matter"><span class="header-section-number">5.6</span> Sensitivity Analysis: How Much Does the Proxy Choice Matter?</a>
  <ul class="collapse">
  <li><a href="#effect-on-the-equity-premium" id="toc-effect-on-the-equity-premium" class="nav-link" data-scroll-target="#effect-on-the-equity-premium"><span class="header-section-number">5.6.1</span> Effect on the Equity Premium</a></li>
  <li><a href="#effect-on-factor-premiums" id="toc-effect-on-factor-premiums" class="nav-link" data-scroll-target="#effect-on-factor-premiums"><span class="header-section-number">5.6.2</span> Effect on Factor Premiums</a></li>
  <li><a href="#effect-on-alpha-estimates" id="toc-effect-on-alpha-estimates" class="nav-link" data-scroll-target="#effect-on-alpha-estimates"><span class="header-section-number">5.6.3</span> Effect on Alpha Estimates</a></li>
  <li><a href="#effect-on-valuation" id="toc-effect-on-valuation" class="nav-link" data-scroll-target="#effect-on-valuation"><span class="header-section-number">5.6.4</span> Effect on Valuation</a></li>
  </ul></li>
  <li><a href="#term-structure-considerations" id="toc-term-structure-considerations" class="nav-link" data-scroll-target="#term-structure-considerations"><span class="header-section-number">5.7</span> Term Structure Considerations</a>
  <ul class="collapse">
  <li><a href="#yield-curve-estimation" id="toc-yield-curve-estimation" class="nav-link" data-scroll-target="#yield-curve-estimation"><span class="header-section-number">5.7.1</span> Yield Curve Estimation</a></li>
  <li><a href="#extracting-the-short-rate-from-the-yield-curve" id="toc-extracting-the-short-rate-from-the-yield-curve" class="nav-link" data-scroll-target="#extracting-the-short-rate-from-the-yield-curve"><span class="header-section-number">5.7.2</span> Extracting the Short-Rate from the Yield Curve</a></li>
  </ul></li>
  <li><a href="#real-vs.-nominal-risk-free-rates" id="toc-real-vs.-nominal-risk-free-rates" class="nav-link" data-scroll-target="#real-vs.-nominal-risk-free-rates"><span class="header-section-number">5.8</span> Real vs.&nbsp;Nominal Risk-Free Rates</a></li>
  <li><a href="#international-comparison" id="toc-international-comparison" class="nav-link" data-scroll-target="#international-comparison"><span class="header-section-number">5.9</span> International Comparison</a></li>
  <li><a href="#best-practices-checklist" id="toc-best-practices-checklist" class="nav-link" data-scroll-target="#best-practices-checklist"><span class="header-section-number">5.10</span> Best Practices Checklist</a></li>
  <li><a href="#saving-the-risk-free-rate-for-downstream-use" id="toc-saving-the-risk-free-rate-for-downstream-use" class="nav-link" data-scroll-target="#saving-the-risk-free-rate-for-downstream-use"><span class="header-section-number">5.11</span> Saving the Risk-Free Rate for Downstream Use</a></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary"><span class="header-section-number">5.12</span> Summary</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/mikenguyen13/tidy_finance_vn/edit/main/04_risk_free_rate_construction.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/mikenguyen13/tidy_finance_vn/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">


<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./00_institutional_background.html">Vietnam Financial Markets, Institutions, and Data</a></li><li class="breadcrumb-item"><a href="./04_risk_free_rate_construction.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Risk-Free Rate Construction in Vietnam</span></a></li></ol></nav>
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Risk-Free Rate Construction in Vietnam</span></h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>In this chapter, we address a simple but consequential problem: how to construct a risk-free rate series for empirical finance in Vietnam. We evaluate available proxies, such as government bond yields, interbank overnight rates, and State Bank of Vietnam (SBV) policy rates, develop interpolation and frequency-alignment procedures, and quantify the sensitivity of key asset pricing outputs to the choice of risk-free proxy.</p>
</div>
</div>
<p>The risk-free rate is the most important single number in finance. It anchors excess returns, discount rates, factor premiums, the cost of equity, performance evaluation, and derivative pricing. Despite its foundational role, the risk-free rate is often treated as a given: a number downloaded from a database and plugged into formulas without further thought. In developed markets with deep, liquid government securities markets, this casual approach is usually harmless. In Vietnam, it is not.</p>
<p>Vietnam’s fixed-income market is thin, fragmented, and characterized by irregular issuance of short-term government securities. There is no single, universally accepted risk-free rate analogous to the 1-month Treasury bill rate that anchors virtually all asset pricing research in mature markets. Instead, researchers face a choice among imperfect proxies, each with distinct advantages and limitations. This choice is not innocuous: different proxies can produce meaningfully different excess returns, factor premiums, and valuation estimates.</p>
<p>This chapter develops a systematic approach to risk-free rate construction. We begin with the theoretical requirements for a risk-free asset, then evaluate available Vietnamese proxies against these requirements. We construct monthly risk-free rate series under alternative specifications, demonstrate frequency alignment and interpolation techniques, and conduct sensitivity analysis to quantify how the choice of proxy affects downstream results.</p>
<section id="the-role-of-the-risk-free-rate-in-finance" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="the-role-of-the-risk-free-rate-in-finance"><span class="header-section-number">5.1</span> The Role of the Risk-Free Rate in Finance</h2>
<section id="excess-returns" class="level3" data-number="5.1.1">
<h3 data-number="5.1.1" class="anchored" data-anchor-id="excess-returns"><span class="header-section-number">5.1.1</span> Excess Returns</h3>
<p>The most fundamental use of the risk-free rate is in the computation of excess returns. The excess return on asset <span class="math inline">\(i\)</span> in period <span class="math inline">\(t\)</span> is:</p>
<p><span id="eq-excess-return"><span class="math display">\[
r_{i,t}^{e} = r_{i,t} - r_{f,t}
\tag{5.1}\]</span></span></p>
<p>where <span class="math inline">\(r_{i,t}\)</span> is the raw return and <span class="math inline">\(r_{f,t}\)</span> is the risk-free rate over the same period, in the same currency, and under the same compounding convention. Excess returns isolate the compensation for bearing risk, removing the return that could be earned without risk exposure.</p>
<p>Mismeasurement of <span class="math inline">\(r_{f,t}\)</span> directly contaminates every excess return observation and, by extension, every quantity derived from excess returns. If <span class="math inline">\(r_{f,t}\)</span> is systematically biased upward, excess returns are systematically understated, factor premiums are compressed, and the cost of equity is overstated.</p>
</section>
<section id="factor-premiums" class="level3" data-number="5.1.2">
<h3 data-number="5.1.2" class="anchored" data-anchor-id="factor-premiums"><span class="header-section-number">5.1.2</span> Factor Premiums</h3>
<p>In the <span class="citation" data-cites="Fama1993">Fama and French (<a href="references.html#ref-Fama1993" role="doc-biblioref">1993</a>)</span> three-factor model, the market risk premium is:</p>
<p><span id="eq-mktrf"><span class="math display">\[
\text{MKTRF}_t = r_{m,t} - r_{f,t}
\tag{5.2}\]</span></span></p>
<p>where <span class="math inline">\(r_{m,t}\)</span> is the value-weighted market return. The size (SMB) and value (HML) premiums are defined as returns on long-short portfolios and do not directly depend on <span class="math inline">\(r_{f,t}\)</span>. However, the intercept (alpha) from a time-series regression of any portfolio’s excess return on the factors does depend on <span class="math inline">\(r_{f,t}\)</span> through the dependent variable. A biased risk-free rate shifts all alphas uniformly.</p>
</section>
<section id="discount-rates-and-valuation" class="level3" data-number="5.1.3">
<h3 data-number="5.1.3" class="anchored" data-anchor-id="discount-rates-and-valuation"><span class="header-section-number">5.1.3</span> Discount Rates and Valuation</h3>
<p>The discounted cash flow model values a firm as:</p>
<p><span id="eq-dcf"><span class="math display">\[
V_0 = \sum_{t=1}^{\infty} \frac{E[CF_t]}{(1 + r_{WACC})^t}
\tag{5.3}\]</span></span></p>
<p>where the weighted average cost of capital (WACC) depends on the cost of equity, which in turn depends on the risk-free rate through the Capital Asset Pricing Model:</p>
<p><span id="eq-capm-cost"><span class="math display">\[
r_{e} = r_f + \beta_i (\bar{r}_m - r_f)
\tag{5.4}\]</span></span></p>
<p>A 100 basis point error in <span class="math inline">\(r_f\)</span> flows through to the cost of equity and can change the present value of a long-duration cash flow stream by 10-20%, depending on the duration profile.</p>
</section>
<section id="performance-evaluation" class="level3" data-number="5.1.4">
<h3 data-number="5.1.4" class="anchored" data-anchor-id="performance-evaluation"><span class="header-section-number">5.1.4</span> Performance Evaluation</h3>
<p>Risk-adjusted performance measures such as the Sharpe ratio:</p>
<p><span id="eq-sharpe"><span class="math display">\[
\text{SR} = \frac{\bar{r}_p - \bar{r}_f}{\sigma(r_p - r_f)}
\tag{5.5}\]</span></span></p>
<p>and Jensen’s alpha:</p>
<p><span id="eq-jensen"><span class="math display">\[
\alpha = \bar{r}_p - r_f - \hat{\beta}_p (\bar{r}_m - r_f)
\tag{5.6}\]</span></span></p>
<p>both depend directly on <span class="math inline">\(r_f\)</span>. The Sharpe ratio is particularly sensitive because the denominator (excess return volatility) is also affected by the level and variability of <span class="math inline">\(r_f\)</span>.</p>
</section>
</section>
<section id="what-does-risk-free-mean-in-practice" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="what-does-risk-free-mean-in-practice"><span class="header-section-number">5.2</span> What Does “Risk-Free” Mean in Practice?</h2>
<p>A truly risk-free asset must satisfy four conditions simultaneously (<a href="#tbl-rf-requirements" class="quarto-xref">Table&nbsp;<span>5.1</span></a>).</p>
<div id="tbl-rf-requirements" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-rf-requirements-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;5.1: Requirements for a Risk-Free Asset
</figcaption>
<div aria-describedby="tbl-rf-requirements-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 27%">
<col style="width: 27%">
<col style="width: 44%">
</colgroup>
<thead>
<tr class="header">
<th>Condition</th>
<th>Definition</th>
<th>Practical Challenge</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>No default risk</td>
<td>The issuer cannot fail to pay</td>
<td>Only sovereign debt in one’s own currency qualifies</td>
</tr>
<tr class="even">
<td>Known cash flows</td>
<td>Payoff is certain ex ante</td>
<td>Rules out floating-rate instruments</td>
</tr>
<tr class="odd">
<td>No reinvestment risk</td>
<td>Maturity matches the investment horizon</td>
<td>Requires zero-coupon securities of exact maturity</td>
</tr>
<tr class="even">
<td>High liquidity</td>
<td>Can be traded at a low cost</td>
<td>Thin government bond markets fail this test</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>No real-world asset perfectly satisfies all four conditions. Even in the deepest government bond markets, there is a liquidity premium in off-the-run securities and a convenience yield in on-the-run issues <span class="citation" data-cites="krishnamurthy2012aggregate">(<a href="references.html#ref-krishnamurthy2012aggregate" role="doc-biblioref">Krishnamurthy and Vissing-Jorgensen 2012</a>)</span>. The practical question is: which available instrument comes closest?</p>
<section id="the-ideal-proxy" class="level3" data-number="5.2.1">
<h3 data-number="5.2.1" class="anchored" data-anchor-id="the-ideal-proxy"><span class="header-section-number">5.2.1</span> The Ideal Proxy</h3>
<p>The ideal risk-free rate proxy for empirical asset pricing research has the following properties:</p>
<ol type="1">
<li><strong>Short maturity</strong>: Minimizes reinvestment risk and term premium contamination. The conventional choice is 1-month maturity.</li>
<li><strong>Government-backed</strong>: Eliminates credit risk (in domestic currency).</li>
<li><strong>Actively traded</strong>: Ensures that the observed yield reflects current market conditions.</li>
<li><strong>Regular issuance</strong>: Provides a continuous time series without gaps.</li>
<li><strong>Consistent methodology</strong>: Yield computation is unambiguous and comparable over time.</li>
</ol>
</section>
</section>
<section id="available-proxies-in-vietnam" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="available-proxies-in-vietnam"><span class="header-section-number">5.3</span> Available Proxies in Vietnam</h2>
<p>Vietnam’s financial infrastructure provides several candidate instruments, none of which perfectly satisfies all criteria. We evaluate each in turn.</p>
<section id="government-bond-yields" class="level3" data-number="5.3.1">
<h3 data-number="5.3.1" class="anchored" data-anchor-id="government-bond-yields"><span class="header-section-number">5.3.1</span> Government Bond Yields</h3>
<p>The Vietnamese government issues bonds across a range of maturities through the State Treasury and the Vietnam Bond Market (VBM). Key characteristics:</p>
<p>The primary limitation of government bond yields as a risk-free proxy is the scarcity of short-maturity securities. One-year bonds are the shortest regularly issued benchmark, and their yield includes a term premium that is absent from a true risk-free rate. Treasury bills (maturity &lt; 1 year) are issued irregularly and in small volumes, making them unsuitable as a continuous series.</p>
</section>
<section id="interbank-overnight-rate" class="level3" data-number="5.3.2">
<h3 data-number="5.3.2" class="anchored" data-anchor-id="interbank-overnight-rate"><span class="header-section-number">5.3.2</span> Interbank Overnight Rate</h3>
<p>The Vietnam interbank market sets overnight lending rates between commercial banks. The overnight rate is reported by the SBV.</p>
<p><strong>Advantages</strong>: Very short maturity (overnight), high frequency (daily), reflects actual borrowing costs in the financial system.</p>
<p><strong>Limitations</strong>: Reflects banking sector credit risk (interbank default risk, though small), can be volatile during liquidity crunches, and does not correspond to a tradeable zero-coupon instrument.</p>
</section>
<section id="sbv-policy-rates" class="level3" data-number="5.3.3">
<h3 data-number="5.3.3" class="anchored" data-anchor-id="sbv-policy-rates"><span class="header-section-number">5.3.3</span> SBV Policy Rates</h3>
<p>The State Bank of Vietnam sets several administered rates (<a href="#tbl-sbv-rates" class="quarto-xref">Table&nbsp;<span>5.2</span></a>).</p>
<div id="tbl-sbv-rates" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-sbv-rates-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;5.2: SBV Policy Rates
</figcaption>
<div aria-describedby="tbl-sbv-rates-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Rate</th>
<th>Role</th>
<th>Frequency of Change</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Refinancing rate</td>
<td>Rate at which SBV lends to banks</td>
<td>Infrequent (policy meetings)</td>
</tr>
<tr class="even">
<td>Discount rate</td>
<td>Rate for rediscounting eligible paper</td>
<td>Infrequent</td>
</tr>
<tr class="odd">
<td>Overnight lending rate</td>
<td>Ceiling for interbank overnight</td>
<td>Infrequent</td>
</tr>
<tr class="even">
<td>Deposit rate cap</td>
<td>Maximum rate banks can pay on deposits</td>
<td>Infrequent</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p><strong>Advantages</strong>: Stable (changes infrequently), reflects the monetary policy stance, available for the entire sample period.</p>
<p><strong>Limitations</strong>: Not a traded return (i.e., no investor can actually earn the policy rate). Represents an administrative target, not a market-clearing price. Responds to macroeconomic conditions with a lag.</p>
</section>
<section id="savings-deposit-rates" class="level3" data-number="5.3.4">
<h3 data-number="5.3.4" class="anchored" data-anchor-id="savings-deposit-rates"><span class="header-section-number">5.3.4</span> Savings Deposit Rates</h3>
<p>Commercial banks offer term deposits at rates subject to SBV caps. Short-term (1-month or 3-month) deposit rates are sometimes used as informal risk-free proxies in practitioner contexts.</p>
<p><strong>Advantages</strong>: Represent an investable return for small investors, widely available.</p>
<p><strong>Limitations</strong>: Subject to bank credit risk, vary across banks, caps create a ceiling that may not reflect true equilibrium rates, not standardized for research use.</p>
</section>
<section id="summary-comparison" class="level3" data-number="5.3.5">
<h3 data-number="5.3.5" class="anchored" data-anchor-id="summary-comparison"><span class="header-section-number">5.3.5</span> Summary Comparison</h3>
</section>
</section>
<section id="constructing-the-risk-free-rate-series" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="constructing-the-risk-free-rate-series"><span class="header-section-number">5.4</span> Constructing the Risk-Free Rate Series</h2>
<p>We now construct alternative monthly risk-free rate series and examine their properties.</p>
<section id="loading-and-cleaning-rate-data" class="level3" data-number="5.4.1">
<h3 data-number="5.4.1" class="anchored" data-anchor-id="loading-and-cleaning-rate-data"><span class="header-section-number">5.4.1</span> Loading and Cleaning Rate Data</h3>
<div id="load-rf-data" class="cell" data-execution_count="3">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Assume rf_data contains: date, rate_type, rate_annual (annualized, in %)</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>rf_raw <span class="op">=</span> pd.read_parquet(<span class="st">"data/risk_free_rates.parquet"</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview available rate types</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Available rate types:"</span>)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(rf_raw[<span class="st">"rate_type"</span>].value_counts())</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="fig-rf-raw-series" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="4">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-rf-raw-series-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="fl">4.5</span>))</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>colors <span class="op">=</span> {</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"govt_bond_1y"</span>: <span class="st">"#2C73D2"</span>,</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"interbank_overnight"</span>: <span class="st">"#FF6B6B"</span>,</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"sbv_refinancing"</span>: <span class="st">"#5DCEAF"</span>,</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"tbill_3m"</span>: <span class="st">"#FFB347"</span>,</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"deposit_1m"</span>: <span class="st">"#B19CD9"</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> rate_type, color <span class="kw">in</span> colors.items():</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    subset <span class="op">=</span> rf_raw[rf_raw[<span class="st">"rate_type"</span>] <span class="op">==</span> rate_type].sort_values(<span class="st">"date"</span>)</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(subset) <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>        ax.plot(</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>            subset[<span class="st">"date"</span>], subset[<span class="st">"rate_annual"</span>],</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>            label<span class="op">=</span>rate_type.replace(<span class="st">"_"</span>, <span class="st">" "</span>).title(),</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>            color<span class="op">=</span>color, linewidth<span class="op">=</span><span class="fl">1.2</span>, alpha<span class="op">=</span><span class="fl">0.85</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Annualized Rate (%)"</span>)</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">""</span>)</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>ax.legend(frameon<span class="op">=</span><span class="va">False</span>, fontsize<span class="op">=</span><span class="dv">9</span>, loc<span class="op">=</span><span class="st">"upper right"</span>)</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>ax.spines[<span class="st">"top"</span>].set_visible(<span class="va">False</span>)</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>ax.spines[<span class="st">"right"</span>].set_visible(<span class="va">False</span>)</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-rf-raw-series-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.1
</figcaption>
</figure>
</div>
</section>
<section id="frequency-alignment" class="level3" data-number="5.4.2">
<h3 data-number="5.4.2" class="anchored" data-anchor-id="frequency-alignment"><span class="header-section-number">5.4.2</span> Frequency Alignment</h3>
<p>Asset pricing tests require monthly risk-free rates. Raw data may arrive at daily, weekly, or irregular frequencies. We use the following conversion logic:</p>
<p><strong>Daily to monthly</strong>: Take the average of daily rates within each month, then convert from annualized to monthly.</p>
<p><strong>Irregular to monthly</strong>: For series with gaps (e.g., treasury bills), forward-fill the most recent observation, then average within each month.</p>
<p><strong>Annualized to monthly</strong>: Under simple compounding, <span class="math inline">\(r_f^{monthly} = r_f^{annual} / 12\)</span>. Under continuous compounding, <span class="math inline">\(r_f^{monthly} = r_f^{annual} / 12\)</span> (since continuous rates are additive). We use simple compounding for consistency with the convention that stock returns are computed as arithmetic returns.</p>
<div id="construct-monthly-rf" class="cell" data-execution_count="5">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Construct monthly risk-free rates from each proxy</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> construct_monthly_rf(rf_raw, rate_type, method<span class="op">=</span><span class="st">"mean"</span>):</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co">    Convert raw rate data to monthly frequency.</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co">    rf_raw : pd.DataFrame</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co">        Raw rate data with columns: date, rate_type, rate_annual</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co">    rate_type : str</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="co">        Which rate proxy to use</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="co">    method : str</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="co">        Aggregation method: 'mean', 'last', or 'first'</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="co">    -------</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="co">    pd.DataFrame</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="co">        Monthly risk-free rate with columns: date, rf_monthly</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>    subset <span class="op">=</span> (</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>        rf_raw[rf_raw[<span class="st">"rate_type"</span>] <span class="op">==</span> rate_type]</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>        .sort_values(<span class="st">"date"</span>)</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>        .set_index(<span class="st">"date"</span>)</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Forward-fill gaps (for irregular series)</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>    subset <span class="op">=</span> subset.resample(<span class="st">"D"</span>).ffill()</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Aggregate to monthly</span></span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> method <span class="op">==</span> <span class="st">"mean"</span>:</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>        monthly <span class="op">=</span> subset.resample(<span class="st">"ME"</span>)[<span class="st">"rate_annual"</span>].mean()</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> method <span class="op">==</span> <span class="st">"last"</span>:</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>        monthly <span class="op">=</span> subset.resample(<span class="st">"ME"</span>)[<span class="st">"rate_annual"</span>].last()</span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>        monthly <span class="op">=</span> subset.resample(<span class="st">"ME"</span>)[<span class="st">"rate_annual"</span>].first()</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>    monthly <span class="op">=</span> monthly.reset_index()</span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>    monthly.columns <span class="op">=</span> [<span class="st">"date"</span>, <span class="st">"rf_annual"</span>]</span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert annualized rate (%) to monthly decimal</span></span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>    monthly[<span class="st">"rf_monthly"</span>] <span class="op">=</span> monthly[<span class="st">"rf_annual"</span>] <span class="op">/</span> <span class="dv">100</span> <span class="op">/</span> <span class="dv">12</span></span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> monthly[[<span class="st">"date"</span>, <span class="st">"rf_monthly"</span>, <span class="st">"rf_annual"</span>]]</span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a><span class="co"># Construct series for each proxy</span></span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>rf_proxies <span class="op">=</span> {}</span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> proxy <span class="kw">in</span> [<span class="st">"govt_bond_1y"</span>, <span class="st">"interbank_overnight"</span>, <span class="st">"sbv_refinancing"</span>]:</span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>    rf_proxies[proxy] <span class="op">=</span> construct_monthly_rf(rf_raw, proxy)</span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a>    rf_proxies[proxy][<span class="st">"proxy"</span>] <span class="op">=</span> proxy</span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a>rf_all <span class="op">=</span> pd.concat(rf_proxies.values(), ignore_index<span class="op">=</span><span class="va">True</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="handling-missing-data-and-structural-breaks" class="level3" data-number="5.4.3">
<h3 data-number="5.4.3" class="anchored" data-anchor-id="handling-missing-data-and-structural-breaks"><span class="header-section-number">5.4.3</span> Handling Missing Data and Structural Breaks</h3>
<p>Vietnamese rate data may contain gaps due to market closures, reporting changes, or the introduction of new instruments. We handle these systematically:</p>
<div id="check-missing" class="cell" data-execution_count="6">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check coverage for each proxy</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>coverage <span class="op">=</span> (</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    rf_all</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">"proxy"</span>)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    .agg(</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>        start_date<span class="op">=</span>(<span class="st">"date"</span>, <span class="st">"min"</span>),</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>        end_date<span class="op">=</span>(<span class="st">"date"</span>, <span class="st">"max"</span>),</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>        n_months<span class="op">=</span>(<span class="st">"rf_monthly"</span>, <span class="st">"count"</span>),</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>        n_missing<span class="op">=</span>(<span class="st">"rf_monthly"</span>, <span class="kw">lambda</span> x: x.isna().<span class="bu">sum</span>()),</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>        avg_rate_pct<span class="op">=</span>(<span class="st">"rf_annual"</span>, <span class="st">"mean"</span>)</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">round</span>(<span class="dv">2</span>)</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(coverage)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>For periods where the primary proxy is unavailable, we construct a blended series using a priority hierarchy:</p>
<div id="construct-blended-rf" class="cell" data-execution_count="7">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> construct_blended_rf(rf_proxies, priority<span class="op">=</span><span class="va">None</span>):</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Construct a blended monthly risk-free rate using proxy priority.</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co">    Priority order (default):</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co">    1. Treasury bills (shortest maturity, sovereign)</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co">    2. Interbank overnight (short maturity, high frequency)</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co">    3. 1-year government bond (sovereign, regular)</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="co">    4. SBV refinancing rate (fallback)</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> priority <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>        priority <span class="op">=</span> [</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>            <span class="st">"tbill_3m"</span>,</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>            <span class="st">"interbank_overnight"</span>,</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>            <span class="st">"govt_bond_1y"</span>,</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>            <span class="st">"sbv_refinancing"</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create full date range</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>    all_dates <span class="op">=</span> pd.date_range(</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>        start<span class="op">=</span><span class="bu">min</span>(df[<span class="st">"date"</span>].<span class="bu">min</span>() <span class="cf">for</span> df <span class="kw">in</span> rf_proxies.values()),</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>        end<span class="op">=</span><span class="bu">max</span>(df[<span class="st">"date"</span>].<span class="bu">max</span>() <span class="cf">for</span> df <span class="kw">in</span> rf_proxies.values()),</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>        freq<span class="op">=</span><span class="st">"ME"</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>    blended <span class="op">=</span> pd.DataFrame({<span class="st">"date"</span>: all_dates})</span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>    blended[<span class="st">"rf_monthly"</span>] <span class="op">=</span> np.nan</span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>    blended[<span class="st">"source"</span>] <span class="op">=</span> <span class="st">""</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> proxy <span class="kw">in</span> priority:</span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> proxy <span class="kw">in</span> rf_proxies:</span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>            proxy_df <span class="op">=</span> rf_proxies[proxy][[<span class="st">"date"</span>, <span class="st">"rf_monthly"</span>]].rename(</span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>                columns<span class="op">=</span>{<span class="st">"rf_monthly"</span>: <span class="ss">f"rf_</span><span class="sc">{</span>proxy<span class="sc">}</span><span class="ss">"</span>}</span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>            blended <span class="op">=</span> blended.merge(proxy_df, on<span class="op">=</span><span class="st">"date"</span>, how<span class="op">=</span><span class="st">"left"</span>)</span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Fill missing values from this proxy</span></span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>            mask <span class="op">=</span> blended[<span class="st">"rf_monthly"</span>].isna() <span class="op">&amp;</span> blended[<span class="ss">f"rf_</span><span class="sc">{</span>proxy<span class="sc">}</span><span class="ss">"</span>].notna()</span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>            blended.loc[mask, <span class="st">"rf_monthly"</span>] <span class="op">=</span> blended.loc[mask, <span class="ss">f"rf_</span><span class="sc">{</span>proxy<span class="sc">}</span><span class="ss">"</span>]</span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>            blended.loc[mask, <span class="st">"source"</span>] <span class="op">=</span> proxy</span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a>            blended <span class="op">=</span> blended.drop(columns<span class="op">=</span>[<span class="ss">f"rf_</span><span class="sc">{</span>proxy<span class="sc">}</span><span class="ss">"</span>])</span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> blended</span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a>rf_blended <span class="op">=</span> construct_blended_rf(rf_proxies)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="tbl-blended-source" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="8">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-blended-source-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;5.3: Data Source Composition of Blended Risk-Free Rate Series
</figcaption>
<div aria-describedby="tbl-blended-source-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>source_comp <span class="op">=</span> (</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    rf_blended</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">"source"</span>)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    .agg(</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>        n_months<span class="op">=</span>(<span class="st">"date"</span>, <span class="st">"count"</span>),</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>        pct<span class="op">=</span>(<span class="st">"date"</span>, <span class="kw">lambda</span> x: <span class="bu">len</span>(x) <span class="op">/</span> <span class="bu">len</span>(rf_blended) <span class="op">*</span> <span class="dv">100</span>)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">round</span>(<span class="dv">1</span>)</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    .sort_values(<span class="st">"n_months"</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>source_comp</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</figure>
</div>
</section>
<section id="properties-of-the-constructed-series" class="level3" data-number="5.4.4">
<h3 data-number="5.4.4" class="anchored" data-anchor-id="properties-of-the-constructed-series"><span class="header-section-number">5.4.4</span> Properties of the Constructed Series</h3>
<div id="tbl-rf-summary-stats" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="9">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-rf-summary-stats-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;5.4: Summary Statistics of Monthly Risk-Free Rate Proxies
</figcaption>
<div aria-describedby="tbl-rf-summary-stats-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>rf_wide <span class="op">=</span> rf_all.pivot_table(</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    index<span class="op">=</span><span class="st">"date"</span>, columns<span class="op">=</span><span class="st">"proxy"</span>, values<span class="op">=</span><span class="st">"rf_monthly"</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>summary <span class="op">=</span> rf_wide.describe(percentiles<span class="op">=</span>[<span class="fl">0.10</span>, <span class="fl">0.25</span>, <span class="fl">0.50</span>, <span class="fl">0.75</span>, <span class="fl">0.90</span>]).T</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>summary <span class="op">=</span> summary[[<span class="st">"mean"</span>, <span class="st">"std"</span>, <span class="st">"min"</span>, <span class="st">"10%"</span>, <span class="st">"50%"</span>, <span class="st">"90%"</span>, <span class="st">"max"</span>]]</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>summary.columns <span class="op">=</span> [</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Mean"</span>, <span class="st">"Std"</span>, <span class="st">"Min"</span>, <span class="st">"P10"</span>, <span class="st">"Median"</span>, <span class="st">"P90"</span>, <span class="st">"Max"</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to annualized percentage for interpretability</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>(summary <span class="op">*</span> <span class="dv">12</span> <span class="op">*</span> <span class="dv">100</span>).<span class="bu">round</span>(<span class="dv">2</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</figure>
</div>
<div id="fig-rf-monthly-comparison" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="10">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-rf-monthly-comparison-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">2</span>, <span class="dv">1</span>, figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">6</span>), sharex<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Level</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> proxy, color <span class="kw">in</span> [</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    (<span class="st">"govt_bond_1y"</span>, <span class="st">"#2C73D2"</span>),</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    (<span class="st">"interbank_overnight"</span>, <span class="st">"#FF6B6B"</span>),</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    (<span class="st">"sbv_refinancing"</span>, <span class="st">"#5DCEAF"</span>)</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>]:</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    subset <span class="op">=</span> rf_proxies[proxy].sort_values(<span class="st">"date"</span>)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    axes[<span class="dv">0</span>].plot(</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>        subset[<span class="st">"date"</span>], subset[<span class="st">"rf_monthly"</span>] <span class="op">*</span> <span class="dv">100</span>,</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>        label<span class="op">=</span>proxy.replace(<span class="st">"_"</span>, <span class="st">" "</span>).title(),</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>        color<span class="op">=</span>color, linewidth<span class="op">=</span><span class="dv">1</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_ylabel(<span class="st">"Monthly Rate (%)"</span>)</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].legend(frameon<span class="op">=</span><span class="va">False</span>, fontsize<span class="op">=</span><span class="dv">9</span>)</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].spines[<span class="st">"top"</span>].set_visible(<span class="va">False</span>)</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].spines[<span class="st">"right"</span>].set_visible(<span class="va">False</span>)</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Pairwise spread: govt bond - interbank</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>merged <span class="op">=</span> rf_proxies[<span class="st">"govt_bond_1y"</span>][[<span class="st">"date"</span>, <span class="st">"rf_monthly"</span>]].merge(</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>    rf_proxies[<span class="st">"interbank_overnight"</span>][[<span class="st">"date"</span>, <span class="st">"rf_monthly"</span>]],</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>    on<span class="op">=</span><span class="st">"date"</span>, suffixes<span class="op">=</span>(<span class="st">"_bond"</span>, <span class="st">"_interbank"</span>)</span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>merged[<span class="st">"spread"</span>] <span class="op">=</span> (merged[<span class="st">"rf_monthly_bond"</span>] <span class="op">-</span> merged[<span class="st">"rf_monthly_interbank"</span>]) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].fill_between(</span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>    merged[<span class="st">"date"</span>], merged[<span class="st">"spread"</span>], <span class="dv">0</span>,</span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>    where<span class="op">=</span>merged[<span class="st">"spread"</span>] <span class="op">&gt;</span> <span class="dv">0</span>, alpha<span class="op">=</span><span class="fl">0.4</span>, color<span class="op">=</span><span class="st">"#2C73D2"</span>, label<span class="op">=</span><span class="st">"Bond &gt; Interbank"</span></span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].fill_between(</span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>    merged[<span class="st">"date"</span>], merged[<span class="st">"spread"</span>], <span class="dv">0</span>,</span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>    where<span class="op">=</span>merged[<span class="st">"spread"</span>] <span class="op">&lt;=</span> <span class="dv">0</span>, alpha<span class="op">=</span><span class="fl">0.4</span>, color<span class="op">=</span><span class="st">"#FF6B6B"</span>, label<span class="op">=</span><span class="st">"Bond &lt; Interbank"</span></span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].axhline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"black"</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_ylabel(<span class="st">"Spread (% monthly)"</span>)</span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_xlabel(<span class="st">""</span>)</span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].legend(frameon<span class="op">=</span><span class="va">False</span>, fontsize<span class="op">=</span><span class="dv">9</span>)</span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].spines[<span class="st">"top"</span>].set_visible(<span class="va">False</span>)</span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].spines[<span class="st">"right"</span>].set_visible(<span class="va">False</span>)</span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-rf-monthly-comparison-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.2
</figcaption>
</figure>
</div>
<p>The spread between proxies is informative. A consistently positive spread (bond yield &gt; interbank rate) reflects the term premium embedded in the 1-year bond. Periods where the interbank rate spikes above the bond yield typically correspond to liquidity crunches in the banking system.</p>
</section>
<section id="correlation-across-proxies" class="level3" data-number="5.4.5">
<h3 data-number="5.4.5" class="anchored" data-anchor-id="correlation-across-proxies"><span class="header-section-number">5.4.5</span> Correlation Across Proxies</h3>
<div id="tbl-rf-correlation" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="11">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-rf-correlation-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;5.5: Pairwise Correlation of Monthly Risk-Free Rate Proxies
</figcaption>
<div aria-describedby="tbl-rf-correlation-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>rf_corr <span class="op">=</span> rf_wide.corr().<span class="bu">round</span>(<span class="dv">3</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>rf_corr.index <span class="op">=</span> [x.replace(<span class="st">"_"</span>, <span class="st">" "</span>).title() <span class="cf">for</span> x <span class="kw">in</span> rf_corr.index]</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>rf_corr.columns <span class="op">=</span> [x.replace(<span class="st">"_"</span>, <span class="st">" "</span>).title() <span class="cf">for</span> x <span class="kw">in</span> rf_corr.columns]</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>rf_corr</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</figure>
</div>
<p>High correlation (&gt; 0.8) between proxies suggests that the level and direction of interest rate movements are captured similarly by all proxies. Low correlation would indicate that the choice of proxy introduces substantial idiosyncratic variation into excess returns.</p>
</section>
</section>
<section id="excess-return-construction" class="level2" data-number="5.5">
<h2 data-number="5.5" class="anchored" data-anchor-id="excess-return-construction"><span class="header-section-number">5.5</span> Excess Return Construction</h2>
<p>With the risk-free rate series in hand, we now construct excess returns for individual stocks and for the market portfolio.</p>
<section id="matching-conventions" class="level3" data-number="5.5.1">
<h3 data-number="5.5.1" class="anchored" data-anchor-id="matching-conventions"><span class="header-section-number">5.5.1</span> Matching Conventions</h3>
<p>Excess return construction requires strict consistency across three dimensions (<a href="#tbl-rf-consistency" class="quarto-xref">Table&nbsp;<span>5.6</span></a>).</p>
<div id="tbl-rf-consistency" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-rf-consistency-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;5.6: Consistency Requirements for Excess Returns
</figcaption>
<div aria-describedby="tbl-rf-consistency-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 30%">
<col style="width: 33%">
<col style="width: 36%">
</colgroup>
<thead>
<tr class="header">
<th>Dimension</th>
<th>Requirement</th>
<th>Common Error</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Currency</td>
<td>Same currency for <span class="math inline">\(r_i\)</span> and <span class="math inline">\(r_f\)</span></td>
<td>Using USD rate for VND-denominated returns</td>
</tr>
<tr class="even">
<td>Frequency</td>
<td>Same holding period</td>
<td>Using annualized <span class="math inline">\(r_f\)</span> with monthly <span class="math inline">\(r_i\)</span></td>
</tr>
<tr class="odd">
<td>Compounding</td>
<td>Same convention</td>
<td>Mixing log and arithmetic returns</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<div id="construct-excess-returns" class="cell" data-execution_count="12">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load monthly stock returns</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>stock_returns <span class="op">=</span> pd.read_parquet(<span class="st">"data/monthly_returns.parquet"</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Assume columns: symbol, date (month-end), ret</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge with risk-free rate</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Use the blended series as the baseline</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>rf_for_merge <span class="op">=</span> rf_blended[[<span class="st">"date"</span>, <span class="st">"rf_monthly"</span>]].rename(</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    columns<span class="op">=</span>{<span class="st">"rf_monthly"</span>: <span class="st">"rf"</span>}</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>stock_returns <span class="op">=</span> stock_returns.merge(rf_for_merge, on<span class="op">=</span><span class="st">"date"</span>, how<span class="op">=</span><span class="st">"left"</span>)</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute excess returns</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>stock_returns[<span class="st">"ret_excess"</span>] <span class="op">=</span> stock_returns[<span class="st">"ret"</span>] <span class="op">-</span> stock_returns[<span class="st">"rf"</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="market-excess-return" class="level3" data-number="5.5.2">
<h3 data-number="5.5.2" class="anchored" data-anchor-id="market-excess-return"><span class="header-section-number">5.5.2</span> Market Excess Return</h3>
<div id="compute-mktrf" class="cell" data-execution_count="13">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Value-weighted market return</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>market_monthly <span class="op">=</span> (</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    stock_returns</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">"date"</span>)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">apply</span>(</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">lambda</span> g: np.average(</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>            g[<span class="st">"ret"</span>].dropna(),</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>            weights<span class="op">=</span>g[<span class="st">"mktcap"</span>].loc[g[<span class="st">"ret"</span>].dropna().index]</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>        ) <span class="cf">if</span> g[<span class="st">"ret"</span>].dropna().shape[<span class="dv">0</span>] <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">else</span> np.nan,</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>        include_groups<span class="op">=</span><span class="va">False</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>    .reset_index(name<span class="op">=</span><span class="st">"rm"</span>)</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>market_monthly <span class="op">=</span> market_monthly.merge(rf_for_merge, on<span class="op">=</span><span class="st">"date"</span>, how<span class="op">=</span><span class="st">"left"</span>)</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>market_monthly[<span class="st">"mktrf"</span>] <span class="op">=</span> market_monthly[<span class="st">"rm"</span>] <span class="op">-</span> market_monthly[<span class="st">"rf"</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="fig-mktrf-timeseries" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="14">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mktrf-timeseries-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="fl">3.5</span>))</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>ax.bar(</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    market_monthly[<span class="st">"date"</span>], market_monthly[<span class="st">"mktrf"</span>] <span class="op">*</span> <span class="dv">100</span>,</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span>np.where(market_monthly[<span class="st">"mktrf"</span>] <span class="op">&gt;=</span> <span class="dv">0</span>, <span class="st">"#2C73D2"</span>, <span class="st">"#FF6B6B"</span>),</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    width<span class="op">=</span><span class="dv">25</span>, alpha<span class="op">=</span><span class="fl">0.8</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>ax.axhline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"black"</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Market Excess Return (%)"</span>)</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">""</span>)</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>ax.spines[<span class="st">"top"</span>].set_visible(<span class="va">False</span>)</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>ax.spines[<span class="st">"right"</span>].set_visible(<span class="va">False</span>)</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-mktrf-timeseries-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.3
</figcaption>
</figure>
</div>
</section>
</section>
<section id="sensitivity-analysis-how-much-does-the-proxy-choice-matter" class="level2" data-number="5.6">
<h2 data-number="5.6" class="anchored" data-anchor-id="sensitivity-analysis-how-much-does-the-proxy-choice-matter"><span class="header-section-number">5.6</span> Sensitivity Analysis: How Much Does the Proxy Choice Matter?</h2>
<p>This is the central empirical question of the chapter. If different risk-free proxies produce essentially the same downstream results, the choice is inconsequential. If they produce different results, researchers must justify their choice and report robustness.</p>
<section id="effect-on-the-equity-premium" class="level3" data-number="5.6.1">
<h3 data-number="5.6.1" class="anchored" data-anchor-id="effect-on-the-equity-premium"><span class="header-section-number">5.6.1</span> Effect on the Equity Premium</h3>
<div id="tbl-equity-premium-sensitivity" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="15">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-equity-premium-sensitivity-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;5.7: Annualized Equity Premium Under Alternative Risk-Free Proxies
</figcaption>
<div aria-describedby="tbl-equity-premium-sensitivity-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>results <span class="op">=</span> []</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> proxy_name, proxy_df <span class="kw">in</span> rf_proxies.items():</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    rf_merge <span class="op">=</span> proxy_df[[<span class="st">"date"</span>, <span class="st">"rf_monthly"</span>]].rename(</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>        columns<span class="op">=</span>{<span class="st">"rf_monthly"</span>: <span class="st">"rf_proxy"</span>}</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    merged <span class="op">=</span> market_monthly[[<span class="st">"date"</span>, <span class="st">"rm"</span>]].merge(rf_merge, on<span class="op">=</span><span class="st">"date"</span>, how<span class="op">=</span><span class="st">"inner"</span>)</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    merged[<span class="st">"mktrf_proxy"</span>] <span class="op">=</span> merged[<span class="st">"rm"</span>] <span class="op">-</span> merged[<span class="st">"rf_proxy"</span>]</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    n_months <span class="op">=</span> merged[<span class="st">"mktrf_proxy"</span>].count()</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    mean_monthly <span class="op">=</span> merged[<span class="st">"mktrf_proxy"</span>].mean()</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>    std_monthly <span class="op">=</span> merged[<span class="st">"mktrf_proxy"</span>].std()</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>    sharpe <span class="op">=</span> mean_monthly <span class="op">/</span> std_monthly <span class="cf">if</span> std_monthly <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">else</span> np.nan</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>    t_stat <span class="op">=</span> mean_monthly <span class="op">/</span> (std_monthly <span class="op">/</span> np.sqrt(n_months))</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>    results.append({</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Proxy"</span>: proxy_name.replace(<span class="st">"_"</span>, <span class="st">" "</span>).title(),</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>        <span class="st">"N Months"</span>: n_months,</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Mean (% ann.)"</span>: <span class="bu">round</span>(mean_monthly <span class="op">*</span> <span class="dv">12</span> <span class="op">*</span> <span class="dv">100</span>, <span class="dv">2</span>),</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Std (% ann.)"</span>: <span class="bu">round</span>(std_monthly <span class="op">*</span> np.sqrt(<span class="dv">12</span>) <span class="op">*</span> <span class="dv">100</span>, <span class="dv">2</span>),</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Sharpe (ann.)"</span>: <span class="bu">round</span>(sharpe <span class="op">*</span> np.sqrt(<span class="dv">12</span>), <span class="dv">3</span>),</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>        <span class="st">"t-stat"</span>: <span class="bu">round</span>(t_stat, <span class="dv">2</span>)</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>pd.DataFrame(results).style.hide(axis<span class="op">=</span><span class="st">"index"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</figure>
</div>
</section>
<section id="effect-on-factor-premiums" class="level3" data-number="5.6.2">
<h3 data-number="5.6.2" class="anchored" data-anchor-id="effect-on-factor-premiums"><span class="header-section-number">5.6.2</span> Effect on Factor Premiums</h3>
<div id="tbl-factor-premium-sensitivity" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="16">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-factor-premium-sensitivity-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;5.8: Factor Premium Sensitivity to Risk-Free Proxy (Annualized %)
</figcaption>
<div aria-describedby="tbl-factor-premium-sensitivity-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load or construct factor returns</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Assume factors_monthly has: date, smb, hml (these are long-short, rf-independent)</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Only MKTRF changes with the proxy</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>factors_monthly <span class="op">=</span> pd.read_parquet(<span class="st">"data/factors_monthly.parquet"</span>)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> proxy_name, proxy_df <span class="kw">in</span> rf_proxies.items():</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    rf_merge <span class="op">=</span> proxy_df[[<span class="st">"date"</span>, <span class="st">"rf_monthly"</span>]].rename(</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>        columns<span class="op">=</span>{<span class="st">"rf_monthly"</span>: <span class="st">"rf_proxy"</span>}</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>    factors_merged <span class="op">=</span> factors_monthly.merge(rf_merge, on<span class="op">=</span><span class="st">"date"</span>, how<span class="op">=</span><span class="st">"inner"</span>)</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>    factors_merged <span class="op">=</span> factors_merged.merge(</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>        market_monthly[[<span class="st">"date"</span>, <span class="st">"rm"</span>]], on<span class="op">=</span><span class="st">"date"</span>, how<span class="op">=</span><span class="st">"inner"</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>    factors_merged[<span class="ss">f"mktrf_</span><span class="sc">{</span>proxy_name<span class="sc">}</span><span class="ss">"</span>] <span class="op">=</span> (</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>        factors_merged[<span class="st">"rm"</span>] <span class="op">-</span> factors_merged[<span class="st">"rf_proxy"</span>]</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>    mean_mktrf <span class="op">=</span> factors_merged[<span class="ss">f"mktrf_</span><span class="sc">{</span>proxy_name<span class="sc">}</span><span class="ss">"</span>].mean() <span class="op">*</span> <span class="dv">12</span> <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>    mean_smb <span class="op">=</span> factors_merged[<span class="st">"smb"</span>].mean() <span class="op">*</span> <span class="dv">12</span> <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>    mean_hml <span class="op">=</span> factors_merged[<span class="st">"hml"</span>].mean() <span class="op">*</span> <span class="dv">12</span> <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(</span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"</span><span class="sc">{</span>proxy_name<span class="sc">:&gt;25s}</span><span class="ss">: MKTRF = </span><span class="sc">{</span>mean_mktrf<span class="sc">:6.2f}</span><span class="ss">%, "</span></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"SMB = </span><span class="sc">{</span>mean_smb<span class="sc">:6.2f}</span><span class="ss">%, HML = </span><span class="sc">{</span>mean_hml<span class="sc">:6.2f}</span><span class="ss">%"</span></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</figure>
</div>
<p>Note that SMB and HML are constructed as long-short portfolio returns and should be identical regardless of the risk-free proxy. Only MKTRF differs. However, if the researcher uses the risk-free rate to compute individual stock excess returns before sorting into factor portfolios, small differences in sorting may arise.</p>
</section>
<section id="effect-on-alpha-estimates" class="level3" data-number="5.6.3">
<h3 data-number="5.6.3" class="anchored" data-anchor-id="effect-on-alpha-estimates"><span class="header-section-number">5.6.3</span> Effect on Alpha Estimates</h3>
<p>The choice of risk-free proxy affects alpha estimates for any portfolio evaluated against a factor model. We illustrate this by estimating the alpha of a momentum portfolio under each proxy.</p>
<div id="tbl-alpha-sensitivity" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="17">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-alpha-sensitivity-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;5.9: Momentum Portfolio Alpha Sensitivity to Risk-Free Proxy
</figcaption>
<div aria-describedby="tbl-alpha-sensitivity-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Assume momentum_ret contains: date, mom_ret (raw return of WML portfolio)</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>momentum_ret <span class="op">=</span> pd.read_parquet(<span class="st">"data/momentum_returns.parquet"</span>)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>alpha_results <span class="op">=</span> []</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> proxy_name, proxy_df <span class="kw">in</span> rf_proxies.items():</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    rf_merge <span class="op">=</span> proxy_df[[<span class="st">"date"</span>, <span class="st">"rf_monthly"</span>]].rename(</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>        columns<span class="op">=</span>{<span class="st">"rf_monthly"</span>: <span class="st">"rf_proxy"</span>}</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>    merged <span class="op">=</span> (</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>        momentum_ret</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>        .merge(rf_merge, on<span class="op">=</span><span class="st">"date"</span>, how<span class="op">=</span><span class="st">"inner"</span>)</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>        .merge(market_monthly[[<span class="st">"date"</span>, <span class="st">"rm"</span>]], on<span class="op">=</span><span class="st">"date"</span>, how<span class="op">=</span><span class="st">"inner"</span>)</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>        .merge(factors_monthly[[<span class="st">"date"</span>, <span class="st">"smb"</span>, <span class="st">"hml"</span>]], on<span class="op">=</span><span class="st">"date"</span>, how<span class="op">=</span><span class="st">"inner"</span>)</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>    merged[<span class="st">"mom_excess"</span>] <span class="op">=</span> merged[<span class="st">"mom_ret"</span>] <span class="op">-</span> merged[<span class="st">"rf_proxy"</span>]</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>    merged[<span class="st">"mktrf"</span>] <span class="op">=</span> merged[<span class="st">"rm"</span>] <span class="op">-</span> merged[<span class="st">"rf_proxy"</span>]</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>    X <span class="op">=</span> sm.add_constant(merged[[<span class="st">"mktrf"</span>, <span class="st">"smb"</span>, <span class="st">"hml"</span>]])</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>    y <span class="op">=</span> merged[<span class="st">"mom_excess"</span>]</span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>    model <span class="op">=</span> sm.OLS(y, X).fit(cov_type<span class="op">=</span><span class="st">"HAC"</span>, cov_kwds<span class="op">=</span>{<span class="st">"maxlags"</span>: <span class="dv">6</span>})</span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>    alpha_results.append({</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Proxy"</span>: proxy_name.replace(<span class="st">"_"</span>, <span class="st">" "</span>).title(),</span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Alpha (% monthly)"</span>: <span class="bu">round</span>(model.params[<span class="st">"const"</span>] <span class="op">*</span> <span class="dv">100</span>, <span class="dv">3</span>),</span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>        <span class="st">"t-stat"</span>: <span class="bu">round</span>(model.tvalues[<span class="st">"const"</span>], <span class="dv">2</span>),</span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>        <span class="st">"R²"</span>: <span class="bu">round</span>(model.rsquared, <span class="dv">3</span>)</span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a>pd.DataFrame(alpha_results).style.hide(axis<span class="op">=</span><span class="st">"index"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</figure>
</div>
</section>
<section id="effect-on-valuation" class="level3" data-number="5.6.4">
<h3 data-number="5.6.4" class="anchored" data-anchor-id="effect-on-valuation"><span class="header-section-number">5.6.4</span> Effect on Valuation</h3>
<p>To illustrate the valuation impact, consider a simple DCF exercise where the cost of equity is estimated via the CAPM.</p>
<div id="tbl-valuation-sensitivity" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="18">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-valuation-sensitivity-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;5.10: Cost of Equity and Terminal Value Sensitivity to Risk-Free Proxy
</figcaption>
<div aria-describedby="tbl-valuation-sensitivity-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example: firm with beta = 1.0, expected CF = 1 billion VND, growth = 3%</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>beta_example <span class="op">=</span> <span class="fl">1.0</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>cf <span class="op">=</span> <span class="fl">1e9</span>  <span class="co"># VND</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>growth <span class="op">=</span> <span class="fl">0.03</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>valuation_results <span class="op">=</span> []</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> proxy_name, proxy_df <span class="kw">in</span> rf_proxies.items():</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>    rf_ann <span class="op">=</span> proxy_df[<span class="st">"rf_annual"</span>].dropna().iloc[<span class="op">-</span><span class="dv">12</span>:].mean() <span class="op">/</span> <span class="dv">100</span>  <span class="co"># Latest year avg</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>    rf_merge <span class="op">=</span> proxy_df[[<span class="st">"date"</span>, <span class="st">"rf_monthly"</span>]].rename(</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>        columns<span class="op">=</span>{<span class="st">"rf_monthly"</span>: <span class="st">"rf_proxy"</span>}</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>    mkt_merged <span class="op">=</span> market_monthly[[<span class="st">"date"</span>, <span class="st">"rm"</span>]].merge(</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>        rf_merge, on<span class="op">=</span><span class="st">"date"</span>, how<span class="op">=</span><span class="st">"inner"</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>    mkt_merged[<span class="st">"mktrf"</span>] <span class="op">=</span> mkt_merged[<span class="st">"rm"</span>] <span class="op">-</span> mkt_merged[<span class="st">"rf_proxy"</span>]</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>    erp <span class="op">=</span> mkt_merged[<span class="st">"mktrf"</span>].mean() <span class="op">*</span> <span class="dv">12</span>  <span class="co"># Annualized equity premium</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>    cost_equity <span class="op">=</span> rf_ann <span class="op">+</span> beta_example <span class="op">*</span> erp</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>    terminal_value <span class="op">=</span> cf <span class="op">/</span> (cost_equity <span class="op">-</span> growth) <span class="cf">if</span> cost_equity <span class="op">&gt;</span> growth <span class="cf">else</span> np.nan</span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>    valuation_results.append({</span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Proxy"</span>: proxy_name.replace(<span class="st">"_"</span>, <span class="st">" "</span>).title(),</span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Rf (% ann.)"</span>: <span class="bu">round</span>(rf_ann <span class="op">*</span> <span class="dv">100</span>, <span class="dv">2</span>),</span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>        <span class="st">"ERP (% ann.)"</span>: <span class="bu">round</span>(erp <span class="op">*</span> <span class="dv">100</span>, <span class="dv">2</span>),</span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Cost of Equity (%)"</span>: <span class="bu">round</span>(cost_equity <span class="op">*</span> <span class="dv">100</span>, <span class="dv">2</span>),</span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Terminal Value (B VND)"</span>: <span class="bu">round</span>(terminal_value <span class="op">/</span> <span class="fl">1e9</span>, <span class="dv">1</span>) <span class="cf">if</span> terminal_value <span class="cf">else</span> <span class="st">"N/A"</span></span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a>pd.DataFrame(valuation_results).style.hide(axis<span class="op">=</span><span class="st">"index"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</figure>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Important</span>Key Finding
</div>
</div>
<div class="callout-body-container callout-body">
<p>Even modest differences in the risk-free rate (50-150 basis points across proxies) can produce terminal value differences of 10-30%. Researchers and practitioners must document their risk-free rate choice explicitly and report sensitivity to alternatives.</p>
</div>
</div>
</section>
</section>
<section id="term-structure-considerations" class="level2" data-number="5.7">
<h2 data-number="5.7" class="anchored" data-anchor-id="term-structure-considerations"><span class="header-section-number">5.7</span> Term Structure Considerations</h2>
<p>When longer-horizon discount rates are needed (e.g., for multi-year DCF or cost of capital estimation), the risk-free rate should be maturity-matched. This requires constructing a yield curve from available government bond data.</p>
<section id="yield-curve-estimation" class="level3" data-number="5.7.1">
<h3 data-number="5.7.1" class="anchored" data-anchor-id="yield-curve-estimation"><span class="header-section-number">5.7.1</span> Yield Curve Estimation</h3>
<p><span class="citation" data-cites="gurkaynak2007us">Gürkaynak, Sack, and Wright (<a href="references.html#ref-gurkaynak2007us" role="doc-biblioref">2007</a>)</span> develop a parametric approach to yield curve estimation using the <span class="citation" data-cites="nelson1987parsimonious">Nelson and Siegel (<a href="references.html#ref-nelson1987parsimonious" role="doc-biblioref">1987</a>)</span> and <span class="citation" data-cites="svensson1994estimating">Svensson (<a href="references.html#ref-svensson1994estimating" role="doc-biblioref">1994</a>)</span> models. The Nelson-Siegel model parameterizes the instantaneous forward rate as:</p>
<p><span id="eq-nelson-siegel"><span class="math display">\[
f(\tau) = \beta_0 + \beta_1 \exp\left(-\frac{\tau}{\lambda}\right) + \beta_2 \frac{\tau}{\lambda} \exp\left(-\frac{\tau}{\lambda}\right)
\tag{5.7}\]</span></span></p>
<p>where <span class="math inline">\(\tau\)</span> is the maturity, <span class="math inline">\(\beta_0\)</span> is the long-run level, <span class="math inline">\(\beta_1\)</span> determines the slope, <span class="math inline">\(\beta_2\)</span> determines the curvature, and <span class="math inline">\(\lambda\)</span> controls the location of the hump.</p>
<p>The corresponding yield is:</p>
<p><span id="eq-ns-yield"><span class="math display">\[
y(\tau) = \beta_0 + \beta_1 \frac{1 - \exp(-\tau/\lambda)}{\tau/\lambda} + \beta_2 \left[\frac{1 - \exp(-\tau/\lambda)}{\tau/\lambda} - \exp(-\tau/\lambda)\right]
\tag{5.8}\]</span></span></p>
<div id="nelson-siegel-estimation" class="cell" data-execution_count="19">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.optimize <span class="im">import</span> minimize</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> nelson_siegel_yield(tau, beta0, beta1, beta2, lam):</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Nelson-Siegel yield curve model."""</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    tau_lam <span class="op">=</span> tau <span class="op">/</span> lam</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    factor1 <span class="op">=</span> (<span class="dv">1</span> <span class="op">-</span> np.exp(<span class="op">-</span>tau_lam)) <span class="op">/</span> tau_lam</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>    factor2 <span class="op">=</span> factor1 <span class="op">-</span> np.exp(<span class="op">-</span>tau_lam)</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> beta0 <span class="op">+</span> beta1 <span class="op">*</span> factor1 <span class="op">+</span> beta2 <span class="op">*</span> factor2</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fit_nelson_siegel(maturities, yields):</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Fit Nelson-Siegel model to observed yields."""</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> objective(params):</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>        beta0, beta1, beta2, lam <span class="op">=</span> params</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> lam <span class="op">&lt;=</span> <span class="dv">0</span>:</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="fl">1e10</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>        fitted <span class="op">=</span> nelson_siegel_yield(maturities, beta0, beta1, beta2, lam)</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> np.<span class="bu">sum</span>((yields <span class="op">-</span> fitted) <span class="op">**</span> <span class="dv">2</span>)</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> minimize(</span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>        objective,</span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>        x0<span class="op">=</span>[yields[<span class="op">-</span><span class="dv">1</span>], yields[<span class="dv">0</span>] <span class="op">-</span> yields[<span class="op">-</span><span class="dv">1</span>], <span class="dv">0</span>, <span class="fl">2.0</span>],</span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>        method<span class="op">=</span><span class="st">"Nelder-Mead"</span>,</span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>        options<span class="op">=</span>{<span class="st">"maxiter"</span>: <span class="dv">10000</span>}</span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result.x</span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Example: fit to latest available government bond yields</span></span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Assume govt_yields contains: date, maturity_years, yield_pct</span></span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>govt_yields <span class="op">=</span> pd.read_parquet(<span class="st">"data/govt_bond_yields.parquet"</span>)</span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>latest_date <span class="op">=</span> govt_yields[<span class="st">"date"</span>].<span class="bu">max</span>()</span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>latest_yields <span class="op">=</span> govt_yields[govt_yields[<span class="st">"date"</span>] <span class="op">==</span> latest_date].sort_values(<span class="st">"maturity_years"</span>)</span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a>maturities <span class="op">=</span> latest_yields[<span class="st">"maturity_years"</span>].values</span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a>yields <span class="op">=</span> latest_yields[<span class="st">"yield_pct"</span>].values</span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a>params <span class="op">=</span> fit_nelson_siegel(maturities, yields)</span>
<span id="cb17-38"><a href="#cb17-38" aria-hidden="true" tabindex="-1"></a>beta0, beta1, beta2, lam <span class="op">=</span> params</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="fig-yield-curve" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="20">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-yield-curve-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>tau_fine <span class="op">=</span> np.linspace(<span class="fl">0.25</span>, <span class="dv">30</span>, <span class="dv">200</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>fitted_yields <span class="op">=</span> nelson_siegel_yield(tau_fine, <span class="op">*</span>params)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">7</span>, <span class="dv">4</span>))</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>ax.scatter(</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    maturities, yields, color<span class="op">=</span><span class="st">"#FF6B6B"</span>, s<span class="op">=</span><span class="dv">60</span>, zorder<span class="op">=</span><span class="dv">5</span>,</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>    label<span class="op">=</span><span class="st">"Observed yields"</span>, edgecolors<span class="op">=</span><span class="st">"white"</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>ax.plot(</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>    tau_fine, fitted_yields, color<span class="op">=</span><span class="st">"#2C73D2"</span>, linewidth<span class="op">=</span><span class="dv">2</span>,</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>    label<span class="op">=</span><span class="st">"Nelson-Siegel fit"</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Maturity (Years)"</span>)</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Yield (%)"</span>)</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>ax.legend(frameon<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>ax.spines[<span class="st">"top"</span>].set_visible(<span class="va">False</span>)</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>ax.spines[<span class="st">"right"</span>].set_visible(<span class="va">False</span>)</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Nelson-Siegel parameters:"</span>)</span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  β₀ (level)     = </span><span class="sc">{</span>beta0<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  β₁ (slope)     = </span><span class="sc">{</span>beta1<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  β₂ (curvature) = </span><span class="sc">{</span>beta2<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  λ (decay)      = </span><span class="sc">{</span>lam<span class="sc">:.4f}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-yield-curve-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.4
</figcaption>
</figure>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>The Nelson-Siegel yield curve allows extraction of a risk-free rate at any maturity. For monthly asset pricing, evaluate the curve at <span class="math inline">\(\tau = 1/12\)</span> (one month). For DCF valuation with a 10-year horizon, evaluate at <span class="math inline">\(\tau = 10\)</span>. This maturity-matching approach is superior to using a single proxy for all purposes.</p>
</div>
</div>
</section>
<section id="extracting-the-short-rate-from-the-yield-curve" class="level3" data-number="5.7.2">
<h3 data-number="5.7.2" class="anchored" data-anchor-id="extracting-the-short-rate-from-the-yield-curve"><span class="header-section-number">5.7.2</span> Extracting the Short-Rate from the Yield Curve</h3>
<div id="extract-short-rate" class="cell" data-execution_count="21">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract 1-month rate from Nelson-Siegel curve at each date</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> extract_ns_short_rate(govt_yields, target_maturity<span class="op">=</span><span class="dv">1</span><span class="op">/</span><span class="dv">12</span>):</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co">    For each date, fit Nelson-Siegel and extract the yield</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="co">    at the target maturity.</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>    dates <span class="op">=</span> govt_yields[<span class="st">"date"</span>].unique()</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>    short_rates <span class="op">=</span> []</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> d <span class="kw">in</span> dates:</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>        obs <span class="op">=</span> govt_yields[govt_yields[<span class="st">"date"</span>] <span class="op">==</span> d].sort_values(<span class="st">"maturity_years"</span>)</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">len</span>(obs) <span class="op">&lt;</span> <span class="dv">3</span>:  <span class="co"># Need at least 3 points to fit</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>            short_rates.append({<span class="st">"date"</span>: d, <span class="st">"rf_ns"</span>: np.nan})</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">try</span>:</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>            params <span class="op">=</span> fit_nelson_siegel(</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>                obs[<span class="st">"maturity_years"</span>].values,</span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>                obs[<span class="st">"yield_pct"</span>].values</span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>            rf_ns <span class="op">=</span> nelson_siegel_yield(target_maturity, <span class="op">*</span>params)</span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>            short_rates.append({<span class="st">"date"</span>: d, <span class="st">"rf_ns"</span>: rf_ns})</span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>        <span class="cf">except</span> <span class="pp">Exception</span>:</span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>            short_rates.append({<span class="st">"date"</span>: d, <span class="st">"rf_ns"</span>: np.nan})</span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pd.DataFrame(short_rates)</span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>ns_short_rates <span class="op">=</span> extract_ns_short_rate(govt_yields)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
</section>
<section id="real-vs.-nominal-risk-free-rates" class="level2" data-number="5.8">
<h2 data-number="5.8" class="anchored" data-anchor-id="real-vs.-nominal-risk-free-rates"><span class="header-section-number">5.8</span> Real vs.&nbsp;Nominal Risk-Free Rates</h2>
<p>For certain applications, particularly long-horizon valuation and real return analysis, the real (inflation-adjusted) risk-free rate is more appropriate than the nominal rate. The Fisher equation relates them:</p>
<p><span id="eq-fisher"><span class="math display">\[
r_f^{real} \approx r_f^{nominal} - \pi^{e}
\tag{5.9}\]</span></span></p>
<p>where <span class="math inline">\(\pi^e\)</span> is expected inflation. In practice, we can use realized CPI inflation as a proxy for expected inflation (under the assumption of rational expectations, or as an ex-post adjustment).</p>
<div id="compute-real-rf" class="cell" data-execution_count="22">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load CPI data</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Assume cpi_data contains: date, cpi_index (or inflation_mom for month-over-month)</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>cpi_data <span class="op">=</span> pd.read_parquet(<span class="st">"data/cpi_monthly.parquet"</span>)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>cpi_data <span class="op">=</span> cpi_data.sort_values(<span class="st">"date"</span>)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>cpi_data[<span class="st">"inflation_monthly"</span>] <span class="op">=</span> cpi_data[<span class="st">"cpi_index"</span>].pct_change()</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>rf_real <span class="op">=</span> rf_blended[[<span class="st">"date"</span>, <span class="st">"rf_monthly"</span>]].merge(</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    cpi_data[[<span class="st">"date"</span>, <span class="st">"inflation_monthly"</span>]], on<span class="op">=</span><span class="st">"date"</span>, how<span class="op">=</span><span class="st">"inner"</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>rf_real[<span class="st">"rf_real"</span>] <span class="op">=</span> rf_real[<span class="st">"rf_monthly"</span>] <span class="op">-</span> rf_real[<span class="st">"inflation_monthly"</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="fig-real-vs-nominal" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="23">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-real-vs-nominal-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">4</span>))</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>ax.plot(</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    rf_real[<span class="st">"date"</span>], rf_real[<span class="st">"rf_monthly"</span>] <span class="op">*</span> <span class="dv">100</span>,</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"#2C73D2"</span>, label<span class="op">=</span><span class="st">"Nominal"</span>, linewidth<span class="op">=</span><span class="dv">1</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>ax.plot(</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>    rf_real[<span class="st">"date"</span>], rf_real[<span class="st">"rf_real"</span>] <span class="op">*</span> <span class="dv">100</span>,</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"#FF6B6B"</span>, label<span class="op">=</span><span class="st">"Real"</span>, linewidth<span class="op">=</span><span class="dv">1</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>ax.axhline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"black"</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, linestyle<span class="op">=</span><span class="st">"--"</span>)</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Monthly Rate (%)"</span>)</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">""</span>)</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>ax.legend(frameon<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>ax.spines[<span class="st">"top"</span>].set_visible(<span class="va">False</span>)</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>ax.spines[<span class="st">"right"</span>].set_visible(<span class="va">False</span>)</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-real-vs-nominal-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.5
</figcaption>
</figure>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>In periods of high inflation, the real risk-free rate can be substantially negative. This has implications for real excess return computation and for interpreting the equity premium in real terms. A negative real risk-free rate implies that nominal government securities do not preserve purchasing power, which strengthens the case for equity investment from a real-return perspective.</p>
</div>
</div>
</section>
<section id="international-comparison" class="level2" data-number="5.9">
<h2 data-number="5.9" class="anchored" data-anchor-id="international-comparison"><span class="header-section-number">5.9</span> International Comparison</h2>
<p>It is instructive to compare Vietnam’s risk-free rate environment with that of other emerging and developed markets to contextualize the magnitudes involved.</p>
<p>Vietnam’s risk-free rate environment is characterized by relatively high nominal rates (reflecting inflation and growth dynamics), limited availability of very-short-maturity sovereign instruments, and greater reliance on interbank rates as the operational proxy. This is broadly similar to other ASEAN frontier markets but contrasts sharply with developed Asian markets, where deep government securities markets provide clean short-term benchmarks.</p>
</section>
<section id="best-practices-checklist" class="level2" data-number="5.10">
<h2 data-number="5.10" class="anchored" data-anchor-id="best-practices-checklist"><span class="header-section-number">5.10</span> Best Practices Checklist</h2>
<p>Based on the analysis in this chapter, we summarize the recommended practices for risk-free rate construction in Vietnamese financial research:</p>
</section>
<section id="saving-the-risk-free-rate-for-downstream-use" class="level2" data-number="5.11">
<h2 data-number="5.11" class="anchored" data-anchor-id="saving-the-risk-free-rate-for-downstream-use"><span class="header-section-number">5.11</span> Saving the Risk-Free Rate for Downstream Use</h2>
<p>The final step is to save the constructed risk-free rate series for use in subsequent chapters.</p>
<div id="save-rf-series" class="cell" data-execution_count="26">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Save all variants for flexibility</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>rf_output <span class="op">=</span> rf_blended[[<span class="st">"date"</span>, <span class="st">"rf_monthly"</span>, <span class="st">"source"</span>]].copy()</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>rf_output[<span class="st">"rf_annual_pct"</span>] <span class="op">=</span> rf_output[<span class="st">"rf_monthly"</span>] <span class="op">*</span> <span class="dv">12</span> <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Also save individual proxies</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> proxy_name, proxy_df <span class="kw">in</span> rf_proxies.items():</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    col_name <span class="op">=</span> <span class="ss">f"rf_</span><span class="sc">{</span>proxy_name<span class="sc">}</span><span class="ss">"</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>    rf_output <span class="op">=</span> rf_output.merge(</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>        proxy_df[[<span class="st">"date"</span>, <span class="st">"rf_monthly"</span>]].rename(</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>            columns<span class="op">=</span>{<span class="st">"rf_monthly"</span>: col_name}</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>        on<span class="op">=</span><span class="st">"date"</span>,</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>        how<span class="op">=</span><span class="st">"left"</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Save to parquet for use in later chapters</span></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>rf_output.to_parquet(<span class="st">"data/risk_free_rate.parquet"</span>, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Risk-free rate series saved: </span><span class="sc">{</span><span class="bu">len</span>(rf_output)<span class="sc">}</span><span class="ss"> months"</span>)</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Date range: </span><span class="sc">{</span>rf_output[<span class="st">'date'</span>]<span class="sc">.</span><span class="bu">min</span>()<span class="sc">}</span><span class="ss"> to </span><span class="sc">{</span>rf_output[<span class="st">'date'</span>]<span class="sc">.</span><span class="bu">max</span>()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Columns: </span><span class="sc">{</span><span class="bu">list</span>(rf_output.columns)<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>By saving the risk-free rate as a separate, well-documented file, all downstream chapters can merge it consistently. This avoids the common pitfall of reconstructing the risk-free rate differently in different analyses within the same study.</p>
</div>
</div>
</section>
<section id="summary" class="level2" data-number="5.12">
<h2 data-number="5.12" class="anchored" data-anchor-id="summary"><span class="header-section-number">5.12</span> Summary</h2>
<p>This chapter has established that risk-free rate construction is a first-order modeling decision in Vietnamese financial research, not a technical afterthought. The key takeaways are:</p>
<ol type="1">
<li><p><strong>No perfect proxy exists</strong> in Vietnam. The interbank overnight rate, 1-year government bond yield, and SBV policy rate each have distinct strengths and limitations. A blended series using a documented priority hierarchy provides the most robust baseline.</p></li>
<li><p><strong>The choice of proxy matters quantitatively</strong>. Different proxies can shift the estimated equity premium by 50-200 basis points annually, alter portfolio alphas, and change DCF terminal values by 10-30%.</p></li>
<li><p><strong>Frequency alignment and compounding conventions</strong> must be handled with care. Converting annualized rates to monthly requires specifying the compounding convention. Gaps in the data require documented interpolation.</p></li>
<li><p><strong>The Nelson-Siegel yield curve model</strong> enables the extraction of any-maturity risk-free rate from sparse government bond data, which is particularly valuable for maturity-matched discount rate estimation.</p></li>
<li><p><strong>Sensitivity analysis is mandatory</strong>. Any study that reports results under a single risk-free proxy without reporting robustness to alternatives has an unquantified source of specification uncertainty.</p></li>
</ol>
<!-- ## Exercises

1.  **Proxy substitution test**: Re-estimate the Fama-French three-factor model for the Vietnamese market using each of the three risk-free proxies. Report the market premium, SMB, and HML under each specification. Are the cross-sectional patterns in factor loadings sensitive to the proxy choice?

2.  **Breakpoint analysis**: Identify structural breaks in the interbank overnight rate series using the @bai2003critical sequential break detection procedure. Do these breaks correspond to known monetary policy regime changes (e.g., SBV rate adjustments, regulatory changes)?

3.  **Inflation-adjusted equity premium**: Compute the real equity premium by subtracting realized CPI inflation from both the market return and the nominal risk-free rate. Compare the Sharpe ratio of the market portfolio in nominal vs. real terms.

4.  **Yield curve dynamics**: Estimate the Nelson-Siegel model at monthly frequency and track the time series of $\beta_0$ (level), $\beta_1$ (slope), and $\beta_2$ (curvature). Do these factors predict future stock market returns or macroeconomic variables, following @Ang2006 @ang2006does?

5.  **Currency-adjusted risk-free rate**: For foreign investors, the relevant risk-free rate includes currency hedging costs. Construct a USD-hedged risk-free rate using the VND/USD forward premium (covered interest parity) and compare it to the local-currency risk-free rate. How does this affect the equity premium from a foreign investor's perspective?

6.  **Deposit rate ceiling effects**: During periods when the SBV imposes binding deposit rate ceilings, the observed deposit rate may be below the market-clearing rate. Identify such periods and test whether the deposit-rate-based risk-free proxy produces systematically different excess returns compared to the interbank rate during ceiling-binding vs. non-binding periods. -->


<!-- -->

<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-Fama1993" class="csl-entry" role="listitem">
Fama, Eugene F., and Kenneth R. French. 1993. <span>“<span class="nocase">Common risk factors in the returns on stocks and bonds</span>.”</span> <em><span>Journal of Financial Economics</span></em> 33 (1): 3–56. <a href="https://doi.org/10.1016/0304-405X(93)90023-5">https://doi.org/10.1016/0304-405X(93)90023-5</a>.
</div>
<div id="ref-gurkaynak2007us" class="csl-entry" role="listitem">
Gürkaynak, Refet S, Brian Sack, and Jonathan H Wright. 2007. <span>“The US Treasury Yield Curve: 1961 to the Present.”</span> <em>Journal of Monetary Economics</em> 54 (8): 2291–2304.
</div>
<div id="ref-krishnamurthy2012aggregate" class="csl-entry" role="listitem">
Krishnamurthy, Arvind, and Annette Vissing-Jorgensen. 2012. <span>“The Aggregate Demand for Treasury Debt.”</span> <em>Journal of Political Economy</em> 120 (2): 233–67.
</div>
<div id="ref-nelson1987parsimonious" class="csl-entry" role="listitem">
Nelson, Charles R, and Andrew F Siegel. 1987. <span>“Parsimonious Modeling of Yield Curves.”</span> <em>Journal of Business</em>, 473–89.
</div>
<div id="ref-svensson1994estimating" class="csl-entry" role="listitem">
Svensson, Lars EO. 1994. <span>“Estimating and Interpreting Forward Interest Rates: Sweden 1992-1994.”</span> National bureau of economic research Cambridge, Mass., USA.
</div>
</div>
</section>

</main> <!-- /main -->
<script>
document.addEventListener("DOMContentLoaded", function () {
  const year = new Date().getFullYear();
  document.getElementById("copyright").textContent = "© " + year;
});
</script>
<script>
(function () {
  const GA_ID = "G-LMDLDJXXSC";   // your real GA4 ID
  const CONSENT_KEY = "cookie_consent_v1";

  function log(msg) {
    console.log("[GA Loader]", msg);
  }

  function loadGtag() {
    if (window.__gtag_loaded__) {
      log("GA already loaded, skipping");
      return;
    }

    log("Loading Google Analytics...");

    window.__gtag_loaded__ = true;

    const script = document.createElement("script");
    script.async = true;
    script.src = "https://www.googletagmanager.com/gtag/js?id=" + encodeURIComponent(GA_ID);

    script.onload = function () {
      log("gtag.js loaded");

      window.dataLayer = window.dataLayer || [];
      function gtag(){ dataLayer.push(arguments); }
      window.gtag = gtag;

      gtag("js", new Date());
      gtag("config", GA_ID, {
        anonymize_ip: true,
        transport_type: "beacon"
      });

      log("GA initialized successfully");
    };

    script.onerror = function () {
      log("FAILED to load gtag.js. Likely blocked by ad blocker or network.");
    };

    document.head.appendChild(script);
  }

  function checkConsentAndLoad() {
    const consent = localStorage.getItem(CONSENT_KEY);
    log("Stored consent value = " + consent);

    if (consent === "accepted") {
      loadGtag();
    } else {
      log("Analytics blocked due to missing or declined consent");
    }
  }

  // Run on page load
  checkConsentAndLoad();

  // Listen for cookie banner decisions
  window.addEventListener("cookie-consent-changed", function (e) {
    log("Consent event received: " + e.detail);
    if (e.detail === "accepted") {
      loadGtag();
    }
  });

})();
</script>
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/github\.com\/mikenguyen13\/tidy_finance_vn");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./03_market_microstructure.html" class="pagination-link" aria-label="Market Microstructure in Vietnam">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Market Microstructure in Vietnam</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./05_working_with_stock_returns.html" class="pagination-link" aria-label="Constructing and Analyzing Equity Return Series">
        <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Constructing and Analyzing Equity Return Series</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb23" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># Risk-Free Rate Construction in Vietnam</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>::: callout-note</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>In this chapter, we address a simple but consequential problem: how to construct a risk-free rate series for empirical finance in Vietnam. We evaluate available proxies, such as government bond yields, interbank overnight rates, and State Bank of Vietnam (SBV) policy rates, develop interpolation and frequency-alignment procedures, and quantify the sensitivity of key asset pricing outputs to the choice of risk-free proxy.</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>The risk-free rate is the most important single number in finance. It anchors excess returns, discount rates, factor premiums, the cost of equity, performance evaluation, and derivative pricing. Despite its foundational role, the risk-free rate is often treated as a given: a number downloaded from a database and plugged into formulas without further thought. In developed markets with deep, liquid government securities markets, this casual approach is usually harmless. In Vietnam, it is not.</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>Vietnam's fixed-income market is thin, fragmented, and characterized by irregular issuance of short-term government securities. There is no single, universally accepted risk-free rate analogous to the 1-month Treasury bill rate that anchors virtually all asset pricing research in mature markets. Instead, researchers face a choice among imperfect proxies, each with distinct advantages and limitations. This choice is not innocuous: different proxies can produce meaningfully different excess returns, factor premiums, and valuation estimates.</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>This chapter develops a systematic approach to risk-free rate construction. We begin with the theoretical requirements for a risk-free asset, then evaluate available Vietnamese proxies against these requirements. We construct monthly risk-free rate series under alternative specifications, demonstrate frequency alignment and interpolation techniques, and conduct sensitivity analysis to quantify how the choice of proxy affects downstream results.</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a><span class="fu">## The Role of the Risk-Free Rate in Finance</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a><span class="fu">### Excess Returns</span></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>The most fundamental use of the risk-free rate is in the computation of excess returns. The excess return on asset $i$ in period $t$ is:</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>r_{i,t}^{e} = r_{i,t} - r_{f,t}</span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>$$ {#eq-excess-return}</span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a>where $r_{i,t}$ is the raw return and $r_{f,t}$ is the risk-free rate over the same period, in the same currency, and under the same compounding convention. Excess returns isolate the compensation for bearing risk, removing the return that could be earned without risk exposure.</span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>Mismeasurement of $r_{f,t}$ directly contaminates every excess return observation and, by extension, every quantity derived from excess returns. If $r_{f,t}$ is systematically biased upward, excess returns are systematically understated, factor premiums are compressed, and the cost of equity is overstated.</span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a><span class="fu">### Factor Premiums</span></span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a>In the @Fama1993 three-factor model, the market risk premium is:</span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-31"><a href="#cb23-31" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb23-32"><a href="#cb23-32" aria-hidden="true" tabindex="-1"></a>\text{MKTRF}_t = r_{m,t} - r_{f,t}</span>
<span id="cb23-33"><a href="#cb23-33" aria-hidden="true" tabindex="-1"></a>$$ {#eq-mktrf}</span>
<span id="cb23-34"><a href="#cb23-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-35"><a href="#cb23-35" aria-hidden="true" tabindex="-1"></a>where $r_{m,t}$ is the value-weighted market return. The size (SMB) and value (HML) premiums are defined as returns on long-short portfolios and do not directly depend on $r_{f,t}$. However, the intercept (alpha) from a time-series regression of any portfolio's excess return on the factors does depend on $r_{f,t}$ through the dependent variable. A biased risk-free rate shifts all alphas uniformly.</span>
<span id="cb23-36"><a href="#cb23-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-37"><a href="#cb23-37" aria-hidden="true" tabindex="-1"></a><span class="fu">### Discount Rates and Valuation</span></span>
<span id="cb23-38"><a href="#cb23-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-39"><a href="#cb23-39" aria-hidden="true" tabindex="-1"></a>The discounted cash flow model values a firm as:</span>
<span id="cb23-40"><a href="#cb23-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-41"><a href="#cb23-41" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb23-42"><a href="#cb23-42" aria-hidden="true" tabindex="-1"></a>V_0 = \sum_{t=1}^{\infty} \frac{E<span class="co">[</span><span class="ot">CF_t</span><span class="co">]</span>}{(1 + r_{WACC})^t}</span>
<span id="cb23-43"><a href="#cb23-43" aria-hidden="true" tabindex="-1"></a>$$ {#eq-dcf}</span>
<span id="cb23-44"><a href="#cb23-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-45"><a href="#cb23-45" aria-hidden="true" tabindex="-1"></a>where the weighted average cost of capital (WACC) depends on the cost of equity, which in turn depends on the risk-free rate through the Capital Asset Pricing Model:</span>
<span id="cb23-46"><a href="#cb23-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-47"><a href="#cb23-47" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb23-48"><a href="#cb23-48" aria-hidden="true" tabindex="-1"></a>r_{e} = r_f + \beta_i (\bar{r}_m - r_f)</span>
<span id="cb23-49"><a href="#cb23-49" aria-hidden="true" tabindex="-1"></a>$$ {#eq-capm-cost}</span>
<span id="cb23-50"><a href="#cb23-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-51"><a href="#cb23-51" aria-hidden="true" tabindex="-1"></a>A 100 basis point error in $r_f$ flows through to the cost of equity and can change the present value of a long-duration cash flow stream by 10-20%, depending on the duration profile.</span>
<span id="cb23-52"><a href="#cb23-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-53"><a href="#cb23-53" aria-hidden="true" tabindex="-1"></a><span class="fu">### Performance Evaluation</span></span>
<span id="cb23-54"><a href="#cb23-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-55"><a href="#cb23-55" aria-hidden="true" tabindex="-1"></a>Risk-adjusted performance measures such as the Sharpe ratio:</span>
<span id="cb23-56"><a href="#cb23-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-57"><a href="#cb23-57" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb23-58"><a href="#cb23-58" aria-hidden="true" tabindex="-1"></a>\text{SR} = \frac{\bar{r}_p - \bar{r}_f}{\sigma(r_p - r_f)}</span>
<span id="cb23-59"><a href="#cb23-59" aria-hidden="true" tabindex="-1"></a>$$ {#eq-sharpe}</span>
<span id="cb23-60"><a href="#cb23-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-61"><a href="#cb23-61" aria-hidden="true" tabindex="-1"></a>and Jensen's alpha:</span>
<span id="cb23-62"><a href="#cb23-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-63"><a href="#cb23-63" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb23-64"><a href="#cb23-64" aria-hidden="true" tabindex="-1"></a>\alpha = \bar{r}_p - r_f - \hat{\beta}_p (\bar{r}_m - r_f)</span>
<span id="cb23-65"><a href="#cb23-65" aria-hidden="true" tabindex="-1"></a>$$ {#eq-jensen}</span>
<span id="cb23-66"><a href="#cb23-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-67"><a href="#cb23-67" aria-hidden="true" tabindex="-1"></a>both depend directly on $r_f$. The Sharpe ratio is particularly sensitive because the denominator (excess return volatility) is also affected by the level and variability of $r_f$.</span>
<span id="cb23-68"><a href="#cb23-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-69"><a href="#cb23-69" aria-hidden="true" tabindex="-1"></a><span class="fu">## What Does "Risk-Free" Mean in Practice?</span></span>
<span id="cb23-70"><a href="#cb23-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-71"><a href="#cb23-71" aria-hidden="true" tabindex="-1"></a>A truly risk-free asset must satisfy four conditions simultaneously (@tbl-rf-requirements).</span>
<span id="cb23-72"><a href="#cb23-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-73"><a href="#cb23-73" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Condition <span class="pp">|</span> Definition <span class="pp">|</span> Practical Challenge <span class="pp">|</span></span>
<span id="cb23-74"><a href="#cb23-74" aria-hidden="true" tabindex="-1"></a><span class="pp">|--------------------|--------------------|--------------------------------|</span></span>
<span id="cb23-75"><a href="#cb23-75" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> No default risk <span class="pp">|</span> The issuer cannot fail to pay <span class="pp">|</span> Only sovereign debt in one's own currency qualifies <span class="pp">|</span></span>
<span id="cb23-76"><a href="#cb23-76" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Known cash flows <span class="pp">|</span> Payoff is certain ex ante <span class="pp">|</span> Rules out floating-rate instruments <span class="pp">|</span></span>
<span id="cb23-77"><a href="#cb23-77" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> No reinvestment risk <span class="pp">|</span> Maturity matches the investment horizon <span class="pp">|</span> Requires zero-coupon securities of exact maturity <span class="pp">|</span></span>
<span id="cb23-78"><a href="#cb23-78" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> High liquidity <span class="pp">|</span> Can be traded at a low cost <span class="pp">|</span> Thin government bond markets fail this test <span class="pp">|</span></span>
<span id="cb23-79"><a href="#cb23-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-80"><a href="#cb23-80" aria-hidden="true" tabindex="-1"></a>: Requirements for a Risk-Free Asset {#tbl-rf-requirements}</span>
<span id="cb23-81"><a href="#cb23-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-82"><a href="#cb23-82" aria-hidden="true" tabindex="-1"></a>No real-world asset perfectly satisfies all four conditions. Even in the deepest government bond markets, there is a liquidity premium in off-the-run securities and a convenience yield in on-the-run issues <span class="co">[</span><span class="ot">@krishnamurthy2012aggregate</span><span class="co">]</span>. The practical question is: which available instrument comes closest?</span>
<span id="cb23-83"><a href="#cb23-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-84"><a href="#cb23-84" aria-hidden="true" tabindex="-1"></a><span class="fu">### The Ideal Proxy</span></span>
<span id="cb23-85"><a href="#cb23-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-86"><a href="#cb23-86" aria-hidden="true" tabindex="-1"></a>The ideal risk-free rate proxy for empirical asset pricing research has the following properties:</span>
<span id="cb23-87"><a href="#cb23-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-88"><a href="#cb23-88" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>**Short maturity**: Minimizes reinvestment risk and term premium contamination. The conventional choice is 1-month maturity.</span>
<span id="cb23-89"><a href="#cb23-89" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>**Government-backed**: Eliminates credit risk (in domestic currency).</span>
<span id="cb23-90"><a href="#cb23-90" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>**Actively traded**: Ensures that the observed yield reflects current market conditions.</span>
<span id="cb23-91"><a href="#cb23-91" aria-hidden="true" tabindex="-1"></a><span class="ss">4.  </span>**Regular issuance**: Provides a continuous time series without gaps.</span>
<span id="cb23-92"><a href="#cb23-92" aria-hidden="true" tabindex="-1"></a><span class="ss">5.  </span>**Consistent methodology**: Yield computation is unambiguous and comparable over time.</span>
<span id="cb23-93"><a href="#cb23-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-94"><a href="#cb23-94" aria-hidden="true" tabindex="-1"></a><span class="fu">## Available Proxies in Vietnam</span></span>
<span id="cb23-95"><a href="#cb23-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-96"><a href="#cb23-96" aria-hidden="true" tabindex="-1"></a>Vietnam's financial infrastructure provides several candidate instruments, none of which perfectly satisfies all criteria. We evaluate each in turn.</span>
<span id="cb23-97"><a href="#cb23-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-98"><a href="#cb23-98" aria-hidden="true" tabindex="-1"></a><span class="fu">### Government Bond Yields</span></span>
<span id="cb23-99"><a href="#cb23-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-100"><a href="#cb23-100" aria-hidden="true" tabindex="-1"></a>The Vietnamese government issues bonds across a range of maturities through the State Treasury and the Vietnam Bond Market (VBM). Key characteristics:</span>
<span id="cb23-101"><a href="#cb23-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-104"><a href="#cb23-104" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-105"><a href="#cb23-105" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-govt-bond-characteristics</span></span>
<span id="cb23-106"><a href="#cb23-106" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb23-107"><a href="#cb23-107" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Vietnamese Government Bond Characteristics"</span></span>
<span id="cb23-108"><a href="#cb23-108" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb23-109"><a href="#cb23-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-110"><a href="#cb23-110" aria-hidden="true" tabindex="-1"></a>bond_chars <span class="op">=</span> pd.DataFrame({</span>
<span id="cb23-111"><a href="#cb23-111" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Feature"</span>: [</span>
<span id="cb23-112"><a href="#cb23-112" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Issuer"</span>,</span>
<span id="cb23-113"><a href="#cb23-113" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Primary market"</span>,</span>
<span id="cb23-114"><a href="#cb23-114" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Available maturities"</span>,</span>
<span id="cb23-115"><a href="#cb23-115" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Shortest benchmark"</span>,</span>
<span id="cb23-116"><a href="#cb23-116" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Coupon structure"</span>,</span>
<span id="cb23-117"><a href="#cb23-117" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Issuance frequency"</span>,</span>
<span id="cb23-118"><a href="#cb23-118" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Secondary market liquidity"</span>,</span>
<span id="cb23-119"><a href="#cb23-119" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Data availability"</span></span>
<span id="cb23-120"><a href="#cb23-120" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb23-121"><a href="#cb23-121" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Description"</span>: [</span>
<span id="cb23-122"><a href="#cb23-122" aria-hidden="true" tabindex="-1"></a>        <span class="st">"State Treasury of Vietnam"</span>,</span>
<span id="cb23-123"><a href="#cb23-123" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Auction through HNX"</span>,</span>
<span id="cb23-124"><a href="#cb23-124" aria-hidden="true" tabindex="-1"></a>        <span class="st">"1, 2, 3, 5, 7, 10, 15, 20, 30 years"</span>,</span>
<span id="cb23-125"><a href="#cb23-125" aria-hidden="true" tabindex="-1"></a>        <span class="st">"1-year (sometimes shorter tenors via T-bills)"</span>,</span>
<span id="cb23-126"><a href="#cb23-126" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Fixed, semi-annual"</span>,</span>
<span id="cb23-127"><a href="#cb23-127" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Regular weekly/bi-weekly auctions"</span>,</span>
<span id="cb23-128"><a href="#cb23-128" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Concentrated in 3-5 year segment; short end is thin"</span>,</span>
<span id="cb23-129"><a href="#cb23-129" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Available through DataCore.vn"</span></span>
<span id="cb23-130"><a href="#cb23-130" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb23-131"><a href="#cb23-131" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb23-132"><a href="#cb23-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-133"><a href="#cb23-133" aria-hidden="true" tabindex="-1"></a>bond_chars.style.hide(axis<span class="op">=</span><span class="st">"index"</span>)</span>
<span id="cb23-134"><a href="#cb23-134" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-135"><a href="#cb23-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-136"><a href="#cb23-136" aria-hidden="true" tabindex="-1"></a>The primary limitation of government bond yields as a risk-free proxy is the scarcity of short-maturity securities. One-year bonds are the shortest regularly issued benchmark, and their yield includes a term premium that is absent from a true risk-free rate. Treasury bills (maturity <span class="sc">\&lt;</span> 1 year) are issued irregularly and in small volumes, making them unsuitable as a continuous series.</span>
<span id="cb23-137"><a href="#cb23-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-138"><a href="#cb23-138" aria-hidden="true" tabindex="-1"></a><span class="fu">### Interbank Overnight Rate</span></span>
<span id="cb23-139"><a href="#cb23-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-140"><a href="#cb23-140" aria-hidden="true" tabindex="-1"></a>The Vietnam interbank market sets overnight lending rates between commercial banks. The overnight rate is reported by the SBV.</span>
<span id="cb23-141"><a href="#cb23-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-142"><a href="#cb23-142" aria-hidden="true" tabindex="-1"></a>**Advantages**: Very short maturity (overnight), high frequency (daily), reflects actual borrowing costs in the financial system.</span>
<span id="cb23-143"><a href="#cb23-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-144"><a href="#cb23-144" aria-hidden="true" tabindex="-1"></a>**Limitations**: Reflects banking sector credit risk (interbank default risk, though small), can be volatile during liquidity crunches, and does not correspond to a tradeable zero-coupon instrument.</span>
<span id="cb23-145"><a href="#cb23-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-146"><a href="#cb23-146" aria-hidden="true" tabindex="-1"></a><span class="fu">### SBV Policy Rates</span></span>
<span id="cb23-147"><a href="#cb23-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-148"><a href="#cb23-148" aria-hidden="true" tabindex="-1"></a>The State Bank of Vietnam sets several administered rates (@tbl-sbv-rates).</span>
<span id="cb23-149"><a href="#cb23-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-150"><a href="#cb23-150" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Rate <span class="pp">|</span> Role <span class="pp">|</span> Frequency of Change <span class="pp">|</span></span>
<span id="cb23-151"><a href="#cb23-151" aria-hidden="true" tabindex="-1"></a><span class="pp">|------------------|------------------|------------------------------------|</span></span>
<span id="cb23-152"><a href="#cb23-152" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Refinancing rate <span class="pp">|</span> Rate at which SBV lends to banks <span class="pp">|</span> Infrequent (policy meetings) <span class="pp">|</span></span>
<span id="cb23-153"><a href="#cb23-153" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Discount rate <span class="pp">|</span> Rate for rediscounting eligible paper <span class="pp">|</span> Infrequent <span class="pp">|</span></span>
<span id="cb23-154"><a href="#cb23-154" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Overnight lending rate <span class="pp">|</span> Ceiling for interbank overnight <span class="pp">|</span> Infrequent <span class="pp">|</span></span>
<span id="cb23-155"><a href="#cb23-155" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Deposit rate cap <span class="pp">|</span> Maximum rate banks can pay on deposits <span class="pp">|</span> Infrequent <span class="pp">|</span></span>
<span id="cb23-156"><a href="#cb23-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-157"><a href="#cb23-157" aria-hidden="true" tabindex="-1"></a>: SBV Policy Rates {#tbl-sbv-rates}</span>
<span id="cb23-158"><a href="#cb23-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-159"><a href="#cb23-159" aria-hidden="true" tabindex="-1"></a>**Advantages**: Stable (changes infrequently), reflects the monetary policy stance, available for the entire sample period.</span>
<span id="cb23-160"><a href="#cb23-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-161"><a href="#cb23-161" aria-hidden="true" tabindex="-1"></a>**Limitations**: Not a traded return (i.e., no investor can actually earn the policy rate). Represents an administrative target, not a market-clearing price. Responds to macroeconomic conditions with a lag.</span>
<span id="cb23-162"><a href="#cb23-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-163"><a href="#cb23-163" aria-hidden="true" tabindex="-1"></a><span class="fu">### Savings Deposit Rates</span></span>
<span id="cb23-164"><a href="#cb23-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-165"><a href="#cb23-165" aria-hidden="true" tabindex="-1"></a>Commercial banks offer term deposits at rates subject to SBV caps. Short-term (1-month or 3-month) deposit rates are sometimes used as informal risk-free proxies in practitioner contexts.</span>
<span id="cb23-166"><a href="#cb23-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-167"><a href="#cb23-167" aria-hidden="true" tabindex="-1"></a>**Advantages**: Represent an investable return for small investors, widely available.</span>
<span id="cb23-168"><a href="#cb23-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-169"><a href="#cb23-169" aria-hidden="true" tabindex="-1"></a>**Limitations**: Subject to bank credit risk, vary across banks, caps create a ceiling that may not reflect true equilibrium rates, not standardized for research use.</span>
<span id="cb23-170"><a href="#cb23-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-171"><a href="#cb23-171" aria-hidden="true" tabindex="-1"></a><span class="fu">### Summary Comparison</span></span>
<span id="cb23-172"><a href="#cb23-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-175"><a href="#cb23-175" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-176"><a href="#cb23-176" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-proxy-comparison</span></span>
<span id="cb23-177"><a href="#cb23-177" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb23-178"><a href="#cb23-178" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Comparison of Risk-Free Rate Proxies for Vietnam"</span></span>
<span id="cb23-179"><a href="#cb23-179" aria-hidden="true" tabindex="-1"></a>comparison <span class="op">=</span> pd.DataFrame({</span>
<span id="cb23-180"><a href="#cb23-180" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Proxy"</span>: [</span>
<span id="cb23-181"><a href="#cb23-181" aria-hidden="true" tabindex="-1"></a>        <span class="st">"1-Year Government Bond"</span>,</span>
<span id="cb23-182"><a href="#cb23-182" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Treasury Bills (&lt; 1Y)"</span>,</span>
<span id="cb23-183"><a href="#cb23-183" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Interbank Overnight Rate"</span>,</span>
<span id="cb23-184"><a href="#cb23-184" aria-hidden="true" tabindex="-1"></a>        <span class="st">"SBV Refinancing Rate"</span>,</span>
<span id="cb23-185"><a href="#cb23-185" aria-hidden="true" tabindex="-1"></a>        <span class="st">"1-Month Bank Deposit Rate"</span></span>
<span id="cb23-186"><a href="#cb23-186" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb23-187"><a href="#cb23-187" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Default Risk"</span>: [</span>
<span id="cb23-188"><a href="#cb23-188" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Minimal (sovereign)"</span>,</span>
<span id="cb23-189"><a href="#cb23-189" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Minimal (sovereign)"</span>,</span>
<span id="cb23-190"><a href="#cb23-190" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Low (interbank)"</span>,</span>
<span id="cb23-191"><a href="#cb23-191" aria-hidden="true" tabindex="-1"></a>        <span class="st">"None (administered)"</span>,</span>
<span id="cb23-192"><a href="#cb23-192" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Low-moderate (bank)"</span></span>
<span id="cb23-193"><a href="#cb23-193" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb23-194"><a href="#cb23-194" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Maturity Match"</span>: [</span>
<span id="cb23-195"><a href="#cb23-195" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Poor (1Y vs 1M)"</span>,</span>
<span id="cb23-196"><a href="#cb23-196" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Good (when available)"</span>,</span>
<span id="cb23-197"><a href="#cb23-197" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Very short (overnight)"</span>,</span>
<span id="cb23-198"><a href="#cb23-198" aria-hidden="true" tabindex="-1"></a>        <span class="st">"N/A (not traded)"</span>,</span>
<span id="cb23-199"><a href="#cb23-199" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Good (1M)"</span></span>
<span id="cb23-200"><a href="#cb23-200" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb23-201"><a href="#cb23-201" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Continuity"</span>: [</span>
<span id="cb23-202"><a href="#cb23-202" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Good"</span>,</span>
<span id="cb23-203"><a href="#cb23-203" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Poor (irregular issuance)"</span>,</span>
<span id="cb23-204"><a href="#cb23-204" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Excellent"</span>,</span>
<span id="cb23-205"><a href="#cb23-205" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Excellent"</span>,</span>
<span id="cb23-206"><a href="#cb23-206" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Good"</span></span>
<span id="cb23-207"><a href="#cb23-207" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb23-208"><a href="#cb23-208" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Liquidity"</span>: [</span>
<span id="cb23-209"><a href="#cb23-209" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Moderate"</span>,</span>
<span id="cb23-210"><a href="#cb23-210" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Low"</span>,</span>
<span id="cb23-211"><a href="#cb23-211" aria-hidden="true" tabindex="-1"></a>        <span class="st">"High (interbank)"</span>,</span>
<span id="cb23-212"><a href="#cb23-212" aria-hidden="true" tabindex="-1"></a>        <span class="st">"N/A"</span>,</span>
<span id="cb23-213"><a href="#cb23-213" aria-hidden="true" tabindex="-1"></a>        <span class="st">"N/A"</span></span>
<span id="cb23-214"><a href="#cb23-214" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb23-215"><a href="#cb23-215" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Recommended Use"</span>: [</span>
<span id="cb23-216"><a href="#cb23-216" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Annual/quarterly analysis"</span>,</span>
<span id="cb23-217"><a href="#cb23-217" aria-hidden="true" tabindex="-1"></a>        <span class="st">"When available, preferred"</span>,</span>
<span id="cb23-218"><a href="#cb23-218" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Daily/monthly analysis"</span>,</span>
<span id="cb23-219"><a href="#cb23-219" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Long-run comparisons only"</span>,</span>
<span id="cb23-220"><a href="#cb23-220" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Practitioner DCF"</span></span>
<span id="cb23-221"><a href="#cb23-221" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb23-222"><a href="#cb23-222" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb23-223"><a href="#cb23-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-224"><a href="#cb23-224" aria-hidden="true" tabindex="-1"></a>comparison.style.hide(axis<span class="op">=</span><span class="st">"index"</span>)</span>
<span id="cb23-225"><a href="#cb23-225" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-226"><a href="#cb23-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-227"><a href="#cb23-227" aria-hidden="true" tabindex="-1"></a><span class="fu">## Constructing the Risk-Free Rate Series</span></span>
<span id="cb23-228"><a href="#cb23-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-229"><a href="#cb23-229" aria-hidden="true" tabindex="-1"></a>We now construct alternative monthly risk-free rate series and examine their properties.</span>
<span id="cb23-230"><a href="#cb23-230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-231"><a href="#cb23-231" aria-hidden="true" tabindex="-1"></a><span class="fu">### Loading and Cleaning Rate Data</span></span>
<span id="cb23-232"><a href="#cb23-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-235"><a href="#cb23-235" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-236"><a href="#cb23-236" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: load-rf-data</span></span>
<span id="cb23-237"><a href="#cb23-237" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb23-238"><a href="#cb23-238" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb23-239"><a href="#cb23-239" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb23-240"><a href="#cb23-240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-241"><a href="#cb23-241" aria-hidden="true" tabindex="-1"></a><span class="co"># Assume rf_data contains: date, rate_type, rate_annual (annualized, in %)</span></span>
<span id="cb23-242"><a href="#cb23-242" aria-hidden="true" tabindex="-1"></a>rf_raw <span class="op">=</span> pd.read_parquet(<span class="st">"data/risk_free_rates.parquet"</span>)</span>
<span id="cb23-243"><a href="#cb23-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-244"><a href="#cb23-244" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview available rate types</span></span>
<span id="cb23-245"><a href="#cb23-245" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Available rate types:"</span>)</span>
<span id="cb23-246"><a href="#cb23-246" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(rf_raw[<span class="st">"rate_type"</span>].value_counts())</span>
<span id="cb23-247"><a href="#cb23-247" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-248"><a href="#cb23-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-251"><a href="#cb23-251" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-252"><a href="#cb23-252" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-rf-raw-series</span></span>
<span id="cb23-253"><a href="#cb23-253" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb23-254"><a href="#cb23-254" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Raw Risk-Free Rate Proxies (Annualized, %)"</span></span>
<span id="cb23-255"><a href="#cb23-255" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb23-256"><a href="#cb23-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-257"><a href="#cb23-257" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="fl">4.5</span>))</span>
<span id="cb23-258"><a href="#cb23-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-259"><a href="#cb23-259" aria-hidden="true" tabindex="-1"></a>colors <span class="op">=</span> {</span>
<span id="cb23-260"><a href="#cb23-260" aria-hidden="true" tabindex="-1"></a>    <span class="st">"govt_bond_1y"</span>: <span class="st">"#2C73D2"</span>,</span>
<span id="cb23-261"><a href="#cb23-261" aria-hidden="true" tabindex="-1"></a>    <span class="st">"interbank_overnight"</span>: <span class="st">"#FF6B6B"</span>,</span>
<span id="cb23-262"><a href="#cb23-262" aria-hidden="true" tabindex="-1"></a>    <span class="st">"sbv_refinancing"</span>: <span class="st">"#5DCEAF"</span>,</span>
<span id="cb23-263"><a href="#cb23-263" aria-hidden="true" tabindex="-1"></a>    <span class="st">"tbill_3m"</span>: <span class="st">"#FFB347"</span>,</span>
<span id="cb23-264"><a href="#cb23-264" aria-hidden="true" tabindex="-1"></a>    <span class="st">"deposit_1m"</span>: <span class="st">"#B19CD9"</span></span>
<span id="cb23-265"><a href="#cb23-265" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb23-266"><a href="#cb23-266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-267"><a href="#cb23-267" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> rate_type, color <span class="kw">in</span> colors.items():</span>
<span id="cb23-268"><a href="#cb23-268" aria-hidden="true" tabindex="-1"></a>    subset <span class="op">=</span> rf_raw[rf_raw[<span class="st">"rate_type"</span>] <span class="op">==</span> rate_type].sort_values(<span class="st">"date"</span>)</span>
<span id="cb23-269"><a href="#cb23-269" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(subset) <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb23-270"><a href="#cb23-270" aria-hidden="true" tabindex="-1"></a>        ax.plot(</span>
<span id="cb23-271"><a href="#cb23-271" aria-hidden="true" tabindex="-1"></a>            subset[<span class="st">"date"</span>], subset[<span class="st">"rate_annual"</span>],</span>
<span id="cb23-272"><a href="#cb23-272" aria-hidden="true" tabindex="-1"></a>            label<span class="op">=</span>rate_type.replace(<span class="st">"_"</span>, <span class="st">" "</span>).title(),</span>
<span id="cb23-273"><a href="#cb23-273" aria-hidden="true" tabindex="-1"></a>            color<span class="op">=</span>color, linewidth<span class="op">=</span><span class="fl">1.2</span>, alpha<span class="op">=</span><span class="fl">0.85</span></span>
<span id="cb23-274"><a href="#cb23-274" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb23-275"><a href="#cb23-275" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-276"><a href="#cb23-276" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Annualized Rate (%)"</span>)</span>
<span id="cb23-277"><a href="#cb23-277" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">""</span>)</span>
<span id="cb23-278"><a href="#cb23-278" aria-hidden="true" tabindex="-1"></a>ax.legend(frameon<span class="op">=</span><span class="va">False</span>, fontsize<span class="op">=</span><span class="dv">9</span>, loc<span class="op">=</span><span class="st">"upper right"</span>)</span>
<span id="cb23-279"><a href="#cb23-279" aria-hidden="true" tabindex="-1"></a>ax.spines[<span class="st">"top"</span>].set_visible(<span class="va">False</span>)</span>
<span id="cb23-280"><a href="#cb23-280" aria-hidden="true" tabindex="-1"></a>ax.spines[<span class="st">"right"</span>].set_visible(<span class="va">False</span>)</span>
<span id="cb23-281"><a href="#cb23-281" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb23-282"><a href="#cb23-282" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb23-283"><a href="#cb23-283" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-284"><a href="#cb23-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-285"><a href="#cb23-285" aria-hidden="true" tabindex="-1"></a><span class="fu">### Frequency Alignment</span></span>
<span id="cb23-286"><a href="#cb23-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-287"><a href="#cb23-287" aria-hidden="true" tabindex="-1"></a>Asset pricing tests require monthly risk-free rates. Raw data may arrive at daily, weekly, or irregular frequencies. We use the following conversion logic:</span>
<span id="cb23-288"><a href="#cb23-288" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-289"><a href="#cb23-289" aria-hidden="true" tabindex="-1"></a>**Daily to monthly**: Take the average of daily rates within each month, then convert from annualized to monthly.</span>
<span id="cb23-290"><a href="#cb23-290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-291"><a href="#cb23-291" aria-hidden="true" tabindex="-1"></a>**Irregular to monthly**: For series with gaps (e.g., treasury bills), forward-fill the most recent observation, then average within each month.</span>
<span id="cb23-292"><a href="#cb23-292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-293"><a href="#cb23-293" aria-hidden="true" tabindex="-1"></a>**Annualized to monthly**: Under simple compounding, $r_f^{monthly} = r_f^{annual} / 12$. Under continuous compounding, $r_f^{monthly} = r_f^{annual} / 12$ (since continuous rates are additive). We use simple compounding for consistency with the convention that stock returns are computed as arithmetic returns.</span>
<span id="cb23-294"><a href="#cb23-294" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-297"><a href="#cb23-297" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-298"><a href="#cb23-298" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: construct-monthly-rf</span></span>
<span id="cb23-299"><a href="#cb23-299" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb23-300"><a href="#cb23-300" aria-hidden="true" tabindex="-1"></a><span class="co"># Construct monthly risk-free rates from each proxy</span></span>
<span id="cb23-301"><a href="#cb23-301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-302"><a href="#cb23-302" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> construct_monthly_rf(rf_raw, rate_type, method<span class="op">=</span><span class="st">"mean"</span>):</span>
<span id="cb23-303"><a href="#cb23-303" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb23-304"><a href="#cb23-304" aria-hidden="true" tabindex="-1"></a><span class="co">    Convert raw rate data to monthly frequency.</span></span>
<span id="cb23-305"><a href="#cb23-305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-306"><a href="#cb23-306" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters</span></span>
<span id="cb23-307"><a href="#cb23-307" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb23-308"><a href="#cb23-308" aria-hidden="true" tabindex="-1"></a><span class="co">    rf_raw : pd.DataFrame</span></span>
<span id="cb23-309"><a href="#cb23-309" aria-hidden="true" tabindex="-1"></a><span class="co">        Raw rate data with columns: date, rate_type, rate_annual</span></span>
<span id="cb23-310"><a href="#cb23-310" aria-hidden="true" tabindex="-1"></a><span class="co">    rate_type : str</span></span>
<span id="cb23-311"><a href="#cb23-311" aria-hidden="true" tabindex="-1"></a><span class="co">        Which rate proxy to use</span></span>
<span id="cb23-312"><a href="#cb23-312" aria-hidden="true" tabindex="-1"></a><span class="co">    method : str</span></span>
<span id="cb23-313"><a href="#cb23-313" aria-hidden="true" tabindex="-1"></a><span class="co">        Aggregation method: 'mean', 'last', or 'first'</span></span>
<span id="cb23-314"><a href="#cb23-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-315"><a href="#cb23-315" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns</span></span>
<span id="cb23-316"><a href="#cb23-316" aria-hidden="true" tabindex="-1"></a><span class="co">    -------</span></span>
<span id="cb23-317"><a href="#cb23-317" aria-hidden="true" tabindex="-1"></a><span class="co">    pd.DataFrame</span></span>
<span id="cb23-318"><a href="#cb23-318" aria-hidden="true" tabindex="-1"></a><span class="co">        Monthly risk-free rate with columns: date, rf_monthly</span></span>
<span id="cb23-319"><a href="#cb23-319" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb23-320"><a href="#cb23-320" aria-hidden="true" tabindex="-1"></a>    subset <span class="op">=</span> (</span>
<span id="cb23-321"><a href="#cb23-321" aria-hidden="true" tabindex="-1"></a>        rf_raw[rf_raw[<span class="st">"rate_type"</span>] <span class="op">==</span> rate_type]</span>
<span id="cb23-322"><a href="#cb23-322" aria-hidden="true" tabindex="-1"></a>        .sort_values(<span class="st">"date"</span>)</span>
<span id="cb23-323"><a href="#cb23-323" aria-hidden="true" tabindex="-1"></a>        .set_index(<span class="st">"date"</span>)</span>
<span id="cb23-324"><a href="#cb23-324" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb23-325"><a href="#cb23-325" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-326"><a href="#cb23-326" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Forward-fill gaps (for irregular series)</span></span>
<span id="cb23-327"><a href="#cb23-327" aria-hidden="true" tabindex="-1"></a>    subset <span class="op">=</span> subset.resample(<span class="st">"D"</span>).ffill()</span>
<span id="cb23-328"><a href="#cb23-328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-329"><a href="#cb23-329" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Aggregate to monthly</span></span>
<span id="cb23-330"><a href="#cb23-330" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> method <span class="op">==</span> <span class="st">"mean"</span>:</span>
<span id="cb23-331"><a href="#cb23-331" aria-hidden="true" tabindex="-1"></a>        monthly <span class="op">=</span> subset.resample(<span class="st">"ME"</span>)[<span class="st">"rate_annual"</span>].mean()</span>
<span id="cb23-332"><a href="#cb23-332" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> method <span class="op">==</span> <span class="st">"last"</span>:</span>
<span id="cb23-333"><a href="#cb23-333" aria-hidden="true" tabindex="-1"></a>        monthly <span class="op">=</span> subset.resample(<span class="st">"ME"</span>)[<span class="st">"rate_annual"</span>].last()</span>
<span id="cb23-334"><a href="#cb23-334" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb23-335"><a href="#cb23-335" aria-hidden="true" tabindex="-1"></a>        monthly <span class="op">=</span> subset.resample(<span class="st">"ME"</span>)[<span class="st">"rate_annual"</span>].first()</span>
<span id="cb23-336"><a href="#cb23-336" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-337"><a href="#cb23-337" aria-hidden="true" tabindex="-1"></a>    monthly <span class="op">=</span> monthly.reset_index()</span>
<span id="cb23-338"><a href="#cb23-338" aria-hidden="true" tabindex="-1"></a>    monthly.columns <span class="op">=</span> [<span class="st">"date"</span>, <span class="st">"rf_annual"</span>]</span>
<span id="cb23-339"><a href="#cb23-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-340"><a href="#cb23-340" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert annualized rate (%) to monthly decimal</span></span>
<span id="cb23-341"><a href="#cb23-341" aria-hidden="true" tabindex="-1"></a>    monthly[<span class="st">"rf_monthly"</span>] <span class="op">=</span> monthly[<span class="st">"rf_annual"</span>] <span class="op">/</span> <span class="dv">100</span> <span class="op">/</span> <span class="dv">12</span></span>
<span id="cb23-342"><a href="#cb23-342" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-343"><a href="#cb23-343" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> monthly[[<span class="st">"date"</span>, <span class="st">"rf_monthly"</span>, <span class="st">"rf_annual"</span>]]</span>
<span id="cb23-344"><a href="#cb23-344" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-345"><a href="#cb23-345" aria-hidden="true" tabindex="-1"></a><span class="co"># Construct series for each proxy</span></span>
<span id="cb23-346"><a href="#cb23-346" aria-hidden="true" tabindex="-1"></a>rf_proxies <span class="op">=</span> {}</span>
<span id="cb23-347"><a href="#cb23-347" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> proxy <span class="kw">in</span> [<span class="st">"govt_bond_1y"</span>, <span class="st">"interbank_overnight"</span>, <span class="st">"sbv_refinancing"</span>]:</span>
<span id="cb23-348"><a href="#cb23-348" aria-hidden="true" tabindex="-1"></a>    rf_proxies[proxy] <span class="op">=</span> construct_monthly_rf(rf_raw, proxy)</span>
<span id="cb23-349"><a href="#cb23-349" aria-hidden="true" tabindex="-1"></a>    rf_proxies[proxy][<span class="st">"proxy"</span>] <span class="op">=</span> proxy</span>
<span id="cb23-350"><a href="#cb23-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-351"><a href="#cb23-351" aria-hidden="true" tabindex="-1"></a>rf_all <span class="op">=</span> pd.concat(rf_proxies.values(), ignore_index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb23-352"><a href="#cb23-352" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-353"><a href="#cb23-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-354"><a href="#cb23-354" aria-hidden="true" tabindex="-1"></a><span class="fu">### Handling Missing Data and Structural Breaks</span></span>
<span id="cb23-355"><a href="#cb23-355" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-356"><a href="#cb23-356" aria-hidden="true" tabindex="-1"></a>Vietnamese rate data may contain gaps due to market closures, reporting changes, or the introduction of new instruments. We handle these systematically:</span>
<span id="cb23-357"><a href="#cb23-357" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-360"><a href="#cb23-360" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-361"><a href="#cb23-361" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: check-missing</span></span>
<span id="cb23-362"><a href="#cb23-362" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb23-363"><a href="#cb23-363" aria-hidden="true" tabindex="-1"></a><span class="co"># Check coverage for each proxy</span></span>
<span id="cb23-364"><a href="#cb23-364" aria-hidden="true" tabindex="-1"></a>coverage <span class="op">=</span> (</span>
<span id="cb23-365"><a href="#cb23-365" aria-hidden="true" tabindex="-1"></a>    rf_all</span>
<span id="cb23-366"><a href="#cb23-366" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">"proxy"</span>)</span>
<span id="cb23-367"><a href="#cb23-367" aria-hidden="true" tabindex="-1"></a>    .agg(</span>
<span id="cb23-368"><a href="#cb23-368" aria-hidden="true" tabindex="-1"></a>        start_date<span class="op">=</span>(<span class="st">"date"</span>, <span class="st">"min"</span>),</span>
<span id="cb23-369"><a href="#cb23-369" aria-hidden="true" tabindex="-1"></a>        end_date<span class="op">=</span>(<span class="st">"date"</span>, <span class="st">"max"</span>),</span>
<span id="cb23-370"><a href="#cb23-370" aria-hidden="true" tabindex="-1"></a>        n_months<span class="op">=</span>(<span class="st">"rf_monthly"</span>, <span class="st">"count"</span>),</span>
<span id="cb23-371"><a href="#cb23-371" aria-hidden="true" tabindex="-1"></a>        n_missing<span class="op">=</span>(<span class="st">"rf_monthly"</span>, <span class="kw">lambda</span> x: x.isna().<span class="bu">sum</span>()),</span>
<span id="cb23-372"><a href="#cb23-372" aria-hidden="true" tabindex="-1"></a>        avg_rate_pct<span class="op">=</span>(<span class="st">"rf_annual"</span>, <span class="st">"mean"</span>)</span>
<span id="cb23-373"><a href="#cb23-373" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb23-374"><a href="#cb23-374" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">round</span>(<span class="dv">2</span>)</span>
<span id="cb23-375"><a href="#cb23-375" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-376"><a href="#cb23-376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-377"><a href="#cb23-377" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(coverage)</span>
<span id="cb23-378"><a href="#cb23-378" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-379"><a href="#cb23-379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-380"><a href="#cb23-380" aria-hidden="true" tabindex="-1"></a>For periods where the primary proxy is unavailable, we construct a blended series using a priority hierarchy:</span>
<span id="cb23-381"><a href="#cb23-381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-384"><a href="#cb23-384" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-385"><a href="#cb23-385" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: construct-blended-rf</span></span>
<span id="cb23-386"><a href="#cb23-386" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb23-387"><a href="#cb23-387" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> construct_blended_rf(rf_proxies, priority<span class="op">=</span><span class="va">None</span>):</span>
<span id="cb23-388"><a href="#cb23-388" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb23-389"><a href="#cb23-389" aria-hidden="true" tabindex="-1"></a><span class="co">    Construct a blended monthly risk-free rate using proxy priority.</span></span>
<span id="cb23-390"><a href="#cb23-390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-391"><a href="#cb23-391" aria-hidden="true" tabindex="-1"></a><span class="co">    Priority order (default):</span></span>
<span id="cb23-392"><a href="#cb23-392" aria-hidden="true" tabindex="-1"></a><span class="co">    1. Treasury bills (shortest maturity, sovereign)</span></span>
<span id="cb23-393"><a href="#cb23-393" aria-hidden="true" tabindex="-1"></a><span class="co">    2. Interbank overnight (short maturity, high frequency)</span></span>
<span id="cb23-394"><a href="#cb23-394" aria-hidden="true" tabindex="-1"></a><span class="co">    3. 1-year government bond (sovereign, regular)</span></span>
<span id="cb23-395"><a href="#cb23-395" aria-hidden="true" tabindex="-1"></a><span class="co">    4. SBV refinancing rate (fallback)</span></span>
<span id="cb23-396"><a href="#cb23-396" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb23-397"><a href="#cb23-397" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> priority <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb23-398"><a href="#cb23-398" aria-hidden="true" tabindex="-1"></a>        priority <span class="op">=</span> [</span>
<span id="cb23-399"><a href="#cb23-399" aria-hidden="true" tabindex="-1"></a>            <span class="st">"tbill_3m"</span>,</span>
<span id="cb23-400"><a href="#cb23-400" aria-hidden="true" tabindex="-1"></a>            <span class="st">"interbank_overnight"</span>,</span>
<span id="cb23-401"><a href="#cb23-401" aria-hidden="true" tabindex="-1"></a>            <span class="st">"govt_bond_1y"</span>,</span>
<span id="cb23-402"><a href="#cb23-402" aria-hidden="true" tabindex="-1"></a>            <span class="st">"sbv_refinancing"</span></span>
<span id="cb23-403"><a href="#cb23-403" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb23-404"><a href="#cb23-404" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-405"><a href="#cb23-405" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create full date range</span></span>
<span id="cb23-406"><a href="#cb23-406" aria-hidden="true" tabindex="-1"></a>    all_dates <span class="op">=</span> pd.date_range(</span>
<span id="cb23-407"><a href="#cb23-407" aria-hidden="true" tabindex="-1"></a>        start<span class="op">=</span><span class="bu">min</span>(df[<span class="st">"date"</span>].<span class="bu">min</span>() <span class="cf">for</span> df <span class="kw">in</span> rf_proxies.values()),</span>
<span id="cb23-408"><a href="#cb23-408" aria-hidden="true" tabindex="-1"></a>        end<span class="op">=</span><span class="bu">max</span>(df[<span class="st">"date"</span>].<span class="bu">max</span>() <span class="cf">for</span> df <span class="kw">in</span> rf_proxies.values()),</span>
<span id="cb23-409"><a href="#cb23-409" aria-hidden="true" tabindex="-1"></a>        freq<span class="op">=</span><span class="st">"ME"</span></span>
<span id="cb23-410"><a href="#cb23-410" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb23-411"><a href="#cb23-411" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-412"><a href="#cb23-412" aria-hidden="true" tabindex="-1"></a>    blended <span class="op">=</span> pd.DataFrame({<span class="st">"date"</span>: all_dates})</span>
<span id="cb23-413"><a href="#cb23-413" aria-hidden="true" tabindex="-1"></a>    blended[<span class="st">"rf_monthly"</span>] <span class="op">=</span> np.nan</span>
<span id="cb23-414"><a href="#cb23-414" aria-hidden="true" tabindex="-1"></a>    blended[<span class="st">"source"</span>] <span class="op">=</span> <span class="st">""</span></span>
<span id="cb23-415"><a href="#cb23-415" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-416"><a href="#cb23-416" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> proxy <span class="kw">in</span> priority:</span>
<span id="cb23-417"><a href="#cb23-417" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> proxy <span class="kw">in</span> rf_proxies:</span>
<span id="cb23-418"><a href="#cb23-418" aria-hidden="true" tabindex="-1"></a>            proxy_df <span class="op">=</span> rf_proxies[proxy][[<span class="st">"date"</span>, <span class="st">"rf_monthly"</span>]].rename(</span>
<span id="cb23-419"><a href="#cb23-419" aria-hidden="true" tabindex="-1"></a>                columns<span class="op">=</span>{<span class="st">"rf_monthly"</span>: <span class="ss">f"rf_</span><span class="sc">{</span>proxy<span class="sc">}</span><span class="ss">"</span>}</span>
<span id="cb23-420"><a href="#cb23-420" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb23-421"><a href="#cb23-421" aria-hidden="true" tabindex="-1"></a>            blended <span class="op">=</span> blended.merge(proxy_df, on<span class="op">=</span><span class="st">"date"</span>, how<span class="op">=</span><span class="st">"left"</span>)</span>
<span id="cb23-422"><a href="#cb23-422" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-423"><a href="#cb23-423" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Fill missing values from this proxy</span></span>
<span id="cb23-424"><a href="#cb23-424" aria-hidden="true" tabindex="-1"></a>            mask <span class="op">=</span> blended[<span class="st">"rf_monthly"</span>].isna() <span class="op">&amp;</span> blended[<span class="ss">f"rf_</span><span class="sc">{</span>proxy<span class="sc">}</span><span class="ss">"</span>].notna()</span>
<span id="cb23-425"><a href="#cb23-425" aria-hidden="true" tabindex="-1"></a>            blended.loc[mask, <span class="st">"rf_monthly"</span>] <span class="op">=</span> blended.loc[mask, <span class="ss">f"rf_</span><span class="sc">{</span>proxy<span class="sc">}</span><span class="ss">"</span>]</span>
<span id="cb23-426"><a href="#cb23-426" aria-hidden="true" tabindex="-1"></a>            blended.loc[mask, <span class="st">"source"</span>] <span class="op">=</span> proxy</span>
<span id="cb23-427"><a href="#cb23-427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-428"><a href="#cb23-428" aria-hidden="true" tabindex="-1"></a>            blended <span class="op">=</span> blended.drop(columns<span class="op">=</span>[<span class="ss">f"rf_</span><span class="sc">{</span>proxy<span class="sc">}</span><span class="ss">"</span>])</span>
<span id="cb23-429"><a href="#cb23-429" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-430"><a href="#cb23-430" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> blended</span>
<span id="cb23-431"><a href="#cb23-431" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-432"><a href="#cb23-432" aria-hidden="true" tabindex="-1"></a>rf_blended <span class="op">=</span> construct_blended_rf(rf_proxies)</span>
<span id="cb23-433"><a href="#cb23-433" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-434"><a href="#cb23-434" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-437"><a href="#cb23-437" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-438"><a href="#cb23-438" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-blended-source</span></span>
<span id="cb23-439"><a href="#cb23-439" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb23-440"><a href="#cb23-440" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Data Source Composition of Blended Risk-Free Rate Series"</span></span>
<span id="cb23-441"><a href="#cb23-441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-442"><a href="#cb23-442" aria-hidden="true" tabindex="-1"></a>source_comp <span class="op">=</span> (</span>
<span id="cb23-443"><a href="#cb23-443" aria-hidden="true" tabindex="-1"></a>    rf_blended</span>
<span id="cb23-444"><a href="#cb23-444" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">"source"</span>)</span>
<span id="cb23-445"><a href="#cb23-445" aria-hidden="true" tabindex="-1"></a>    .agg(</span>
<span id="cb23-446"><a href="#cb23-446" aria-hidden="true" tabindex="-1"></a>        n_months<span class="op">=</span>(<span class="st">"date"</span>, <span class="st">"count"</span>),</span>
<span id="cb23-447"><a href="#cb23-447" aria-hidden="true" tabindex="-1"></a>        pct<span class="op">=</span>(<span class="st">"date"</span>, <span class="kw">lambda</span> x: <span class="bu">len</span>(x) <span class="op">/</span> <span class="bu">len</span>(rf_blended) <span class="op">*</span> <span class="dv">100</span>)</span>
<span id="cb23-448"><a href="#cb23-448" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb23-449"><a href="#cb23-449" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">round</span>(<span class="dv">1</span>)</span>
<span id="cb23-450"><a href="#cb23-450" aria-hidden="true" tabindex="-1"></a>    .sort_values(<span class="st">"n_months"</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb23-451"><a href="#cb23-451" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-452"><a href="#cb23-452" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-453"><a href="#cb23-453" aria-hidden="true" tabindex="-1"></a>source_comp</span>
<span id="cb23-454"><a href="#cb23-454" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-455"><a href="#cb23-455" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-456"><a href="#cb23-456" aria-hidden="true" tabindex="-1"></a><span class="fu">### Properties of the Constructed Series</span></span>
<span id="cb23-457"><a href="#cb23-457" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-460"><a href="#cb23-460" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-461"><a href="#cb23-461" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-rf-summary-stats</span></span>
<span id="cb23-462"><a href="#cb23-462" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb23-463"><a href="#cb23-463" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Summary Statistics of Monthly Risk-Free Rate Proxies"</span></span>
<span id="cb23-464"><a href="#cb23-464" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-465"><a href="#cb23-465" aria-hidden="true" tabindex="-1"></a>rf_wide <span class="op">=</span> rf_all.pivot_table(</span>
<span id="cb23-466"><a href="#cb23-466" aria-hidden="true" tabindex="-1"></a>    index<span class="op">=</span><span class="st">"date"</span>, columns<span class="op">=</span><span class="st">"proxy"</span>, values<span class="op">=</span><span class="st">"rf_monthly"</span></span>
<span id="cb23-467"><a href="#cb23-467" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-468"><a href="#cb23-468" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-469"><a href="#cb23-469" aria-hidden="true" tabindex="-1"></a>summary <span class="op">=</span> rf_wide.describe(percentiles<span class="op">=</span>[<span class="fl">0.10</span>, <span class="fl">0.25</span>, <span class="fl">0.50</span>, <span class="fl">0.75</span>, <span class="fl">0.90</span>]).T</span>
<span id="cb23-470"><a href="#cb23-470" aria-hidden="true" tabindex="-1"></a>summary <span class="op">=</span> summary[[<span class="st">"mean"</span>, <span class="st">"std"</span>, <span class="st">"min"</span>, <span class="st">"10%"</span>, <span class="st">"50%"</span>, <span class="st">"90%"</span>, <span class="st">"max"</span>]]</span>
<span id="cb23-471"><a href="#cb23-471" aria-hidden="true" tabindex="-1"></a>summary.columns <span class="op">=</span> [</span>
<span id="cb23-472"><a href="#cb23-472" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Mean"</span>, <span class="st">"Std"</span>, <span class="st">"Min"</span>, <span class="st">"P10"</span>, <span class="st">"Median"</span>, <span class="st">"P90"</span>, <span class="st">"Max"</span></span>
<span id="cb23-473"><a href="#cb23-473" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb23-474"><a href="#cb23-474" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-475"><a href="#cb23-475" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to annualized percentage for interpretability</span></span>
<span id="cb23-476"><a href="#cb23-476" aria-hidden="true" tabindex="-1"></a>(summary <span class="op">*</span> <span class="dv">12</span> <span class="op">*</span> <span class="dv">100</span>).<span class="bu">round</span>(<span class="dv">2</span>)</span>
<span id="cb23-477"><a href="#cb23-477" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-478"><a href="#cb23-478" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-481"><a href="#cb23-481" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-482"><a href="#cb23-482" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-rf-monthly-comparison</span></span>
<span id="cb23-483"><a href="#cb23-483" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb23-484"><a href="#cb23-484" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Monthly Risk-Free Rate Across Proxies"</span></span>
<span id="cb23-485"><a href="#cb23-485" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-486"><a href="#cb23-486" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">2</span>, <span class="dv">1</span>, figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">6</span>), sharex<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb23-487"><a href="#cb23-487" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-488"><a href="#cb23-488" aria-hidden="true" tabindex="-1"></a><span class="co"># Level</span></span>
<span id="cb23-489"><a href="#cb23-489" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> proxy, color <span class="kw">in</span> [</span>
<span id="cb23-490"><a href="#cb23-490" aria-hidden="true" tabindex="-1"></a>    (<span class="st">"govt_bond_1y"</span>, <span class="st">"#2C73D2"</span>),</span>
<span id="cb23-491"><a href="#cb23-491" aria-hidden="true" tabindex="-1"></a>    (<span class="st">"interbank_overnight"</span>, <span class="st">"#FF6B6B"</span>),</span>
<span id="cb23-492"><a href="#cb23-492" aria-hidden="true" tabindex="-1"></a>    (<span class="st">"sbv_refinancing"</span>, <span class="st">"#5DCEAF"</span>)</span>
<span id="cb23-493"><a href="#cb23-493" aria-hidden="true" tabindex="-1"></a>]:</span>
<span id="cb23-494"><a href="#cb23-494" aria-hidden="true" tabindex="-1"></a>    subset <span class="op">=</span> rf_proxies[proxy].sort_values(<span class="st">"date"</span>)</span>
<span id="cb23-495"><a href="#cb23-495" aria-hidden="true" tabindex="-1"></a>    axes[<span class="dv">0</span>].plot(</span>
<span id="cb23-496"><a href="#cb23-496" aria-hidden="true" tabindex="-1"></a>        subset[<span class="st">"date"</span>], subset[<span class="st">"rf_monthly"</span>] <span class="op">*</span> <span class="dv">100</span>,</span>
<span id="cb23-497"><a href="#cb23-497" aria-hidden="true" tabindex="-1"></a>        label<span class="op">=</span>proxy.replace(<span class="st">"_"</span>, <span class="st">" "</span>).title(),</span>
<span id="cb23-498"><a href="#cb23-498" aria-hidden="true" tabindex="-1"></a>        color<span class="op">=</span>color, linewidth<span class="op">=</span><span class="dv">1</span></span>
<span id="cb23-499"><a href="#cb23-499" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb23-500"><a href="#cb23-500" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_ylabel(<span class="st">"Monthly Rate (%)"</span>)</span>
<span id="cb23-501"><a href="#cb23-501" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].legend(frameon<span class="op">=</span><span class="va">False</span>, fontsize<span class="op">=</span><span class="dv">9</span>)</span>
<span id="cb23-502"><a href="#cb23-502" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].spines[<span class="st">"top"</span>].set_visible(<span class="va">False</span>)</span>
<span id="cb23-503"><a href="#cb23-503" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].spines[<span class="st">"right"</span>].set_visible(<span class="va">False</span>)</span>
<span id="cb23-504"><a href="#cb23-504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-505"><a href="#cb23-505" aria-hidden="true" tabindex="-1"></a><span class="co"># Pairwise spread: govt bond - interbank</span></span>
<span id="cb23-506"><a href="#cb23-506" aria-hidden="true" tabindex="-1"></a>merged <span class="op">=</span> rf_proxies[<span class="st">"govt_bond_1y"</span>][[<span class="st">"date"</span>, <span class="st">"rf_monthly"</span>]].merge(</span>
<span id="cb23-507"><a href="#cb23-507" aria-hidden="true" tabindex="-1"></a>    rf_proxies[<span class="st">"interbank_overnight"</span>][[<span class="st">"date"</span>, <span class="st">"rf_monthly"</span>]],</span>
<span id="cb23-508"><a href="#cb23-508" aria-hidden="true" tabindex="-1"></a>    on<span class="op">=</span><span class="st">"date"</span>, suffixes<span class="op">=</span>(<span class="st">"_bond"</span>, <span class="st">"_interbank"</span>)</span>
<span id="cb23-509"><a href="#cb23-509" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-510"><a href="#cb23-510" aria-hidden="true" tabindex="-1"></a>merged[<span class="st">"spread"</span>] <span class="op">=</span> (merged[<span class="st">"rf_monthly_bond"</span>] <span class="op">-</span> merged[<span class="st">"rf_monthly_interbank"</span>]) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb23-511"><a href="#cb23-511" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-512"><a href="#cb23-512" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].fill_between(</span>
<span id="cb23-513"><a href="#cb23-513" aria-hidden="true" tabindex="-1"></a>    merged[<span class="st">"date"</span>], merged[<span class="st">"spread"</span>], <span class="dv">0</span>,</span>
<span id="cb23-514"><a href="#cb23-514" aria-hidden="true" tabindex="-1"></a>    where<span class="op">=</span>merged[<span class="st">"spread"</span>] <span class="op">&gt;</span> <span class="dv">0</span>, alpha<span class="op">=</span><span class="fl">0.4</span>, color<span class="op">=</span><span class="st">"#2C73D2"</span>, label<span class="op">=</span><span class="st">"Bond &gt; Interbank"</span></span>
<span id="cb23-515"><a href="#cb23-515" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-516"><a href="#cb23-516" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].fill_between(</span>
<span id="cb23-517"><a href="#cb23-517" aria-hidden="true" tabindex="-1"></a>    merged[<span class="st">"date"</span>], merged[<span class="st">"spread"</span>], <span class="dv">0</span>,</span>
<span id="cb23-518"><a href="#cb23-518" aria-hidden="true" tabindex="-1"></a>    where<span class="op">=</span>merged[<span class="st">"spread"</span>] <span class="op">&lt;=</span> <span class="dv">0</span>, alpha<span class="op">=</span><span class="fl">0.4</span>, color<span class="op">=</span><span class="st">"#FF6B6B"</span>, label<span class="op">=</span><span class="st">"Bond &lt; Interbank"</span></span>
<span id="cb23-519"><a href="#cb23-519" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-520"><a href="#cb23-520" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].axhline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"black"</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb23-521"><a href="#cb23-521" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_ylabel(<span class="st">"Spread (% monthly)"</span>)</span>
<span id="cb23-522"><a href="#cb23-522" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_xlabel(<span class="st">""</span>)</span>
<span id="cb23-523"><a href="#cb23-523" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].legend(frameon<span class="op">=</span><span class="va">False</span>, fontsize<span class="op">=</span><span class="dv">9</span>)</span>
<span id="cb23-524"><a href="#cb23-524" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].spines[<span class="st">"top"</span>].set_visible(<span class="va">False</span>)</span>
<span id="cb23-525"><a href="#cb23-525" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].spines[<span class="st">"right"</span>].set_visible(<span class="va">False</span>)</span>
<span id="cb23-526"><a href="#cb23-526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-527"><a href="#cb23-527" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb23-528"><a href="#cb23-528" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb23-529"><a href="#cb23-529" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-530"><a href="#cb23-530" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-531"><a href="#cb23-531" aria-hidden="true" tabindex="-1"></a>The spread between proxies is informative. A consistently positive spread (bond yield <span class="sc">\&gt;</span> interbank rate) reflects the term premium embedded in the 1-year bond. Periods where the interbank rate spikes above the bond yield typically correspond to liquidity crunches in the banking system.</span>
<span id="cb23-532"><a href="#cb23-532" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-533"><a href="#cb23-533" aria-hidden="true" tabindex="-1"></a><span class="fu">### Correlation Across Proxies</span></span>
<span id="cb23-534"><a href="#cb23-534" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-537"><a href="#cb23-537" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-538"><a href="#cb23-538" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-rf-correlation</span></span>
<span id="cb23-539"><a href="#cb23-539" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb23-540"><a href="#cb23-540" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Pairwise Correlation of Monthly Risk-Free Rate Proxies"</span></span>
<span id="cb23-541"><a href="#cb23-541" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-542"><a href="#cb23-542" aria-hidden="true" tabindex="-1"></a>rf_corr <span class="op">=</span> rf_wide.corr().<span class="bu">round</span>(<span class="dv">3</span>)</span>
<span id="cb23-543"><a href="#cb23-543" aria-hidden="true" tabindex="-1"></a>rf_corr.index <span class="op">=</span> [x.replace(<span class="st">"_"</span>, <span class="st">" "</span>).title() <span class="cf">for</span> x <span class="kw">in</span> rf_corr.index]</span>
<span id="cb23-544"><a href="#cb23-544" aria-hidden="true" tabindex="-1"></a>rf_corr.columns <span class="op">=</span> [x.replace(<span class="st">"_"</span>, <span class="st">" "</span>).title() <span class="cf">for</span> x <span class="kw">in</span> rf_corr.columns]</span>
<span id="cb23-545"><a href="#cb23-545" aria-hidden="true" tabindex="-1"></a>rf_corr</span>
<span id="cb23-546"><a href="#cb23-546" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-547"><a href="#cb23-547" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-548"><a href="#cb23-548" aria-hidden="true" tabindex="-1"></a>High correlation (<span class="sc">\&gt;</span> 0.8) between proxies suggests that the level and direction of interest rate movements are captured similarly by all proxies. Low correlation would indicate that the choice of proxy introduces substantial idiosyncratic variation into excess returns.</span>
<span id="cb23-549"><a href="#cb23-549" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-550"><a href="#cb23-550" aria-hidden="true" tabindex="-1"></a><span class="fu">## Excess Return Construction</span></span>
<span id="cb23-551"><a href="#cb23-551" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-552"><a href="#cb23-552" aria-hidden="true" tabindex="-1"></a>With the risk-free rate series in hand, we now construct excess returns for individual stocks and for the market portfolio.</span>
<span id="cb23-553"><a href="#cb23-553" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-554"><a href="#cb23-554" aria-hidden="true" tabindex="-1"></a><span class="fu">### Matching Conventions</span></span>
<span id="cb23-555"><a href="#cb23-555" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-556"><a href="#cb23-556" aria-hidden="true" tabindex="-1"></a>Excess return construction requires strict consistency across three dimensions (@tbl-rf-consistency).</span>
<span id="cb23-557"><a href="#cb23-557" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-558"><a href="#cb23-558" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Dimension <span class="pp">|</span> Requirement <span class="pp">|</span> Common Error <span class="pp">|</span></span>
<span id="cb23-559"><a href="#cb23-559" aria-hidden="true" tabindex="-1"></a><span class="pp">|----------------------|------------------------|--------------------------|</span></span>
<span id="cb23-560"><a href="#cb23-560" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Currency <span class="pp">|</span> Same currency for $r_i$ and $r_f$ <span class="pp">|</span> Using USD rate for VND-denominated returns <span class="pp">|</span></span>
<span id="cb23-561"><a href="#cb23-561" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Frequency <span class="pp">|</span> Same holding period <span class="pp">|</span> Using annualized $r_f$ with monthly $r_i$ <span class="pp">|</span></span>
<span id="cb23-562"><a href="#cb23-562" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Compounding <span class="pp">|</span> Same convention <span class="pp">|</span> Mixing log and arithmetic returns <span class="pp">|</span></span>
<span id="cb23-563"><a href="#cb23-563" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-564"><a href="#cb23-564" aria-hidden="true" tabindex="-1"></a>: Consistency Requirements for Excess Returns {#tbl-rf-consistency}</span>
<span id="cb23-565"><a href="#cb23-565" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-568"><a href="#cb23-568" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-569"><a href="#cb23-569" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: construct-excess-returns</span></span>
<span id="cb23-570"><a href="#cb23-570" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb23-571"><a href="#cb23-571" aria-hidden="true" tabindex="-1"></a><span class="co"># Load monthly stock returns</span></span>
<span id="cb23-572"><a href="#cb23-572" aria-hidden="true" tabindex="-1"></a>stock_returns <span class="op">=</span> pd.read_parquet(<span class="st">"data/monthly_returns.parquet"</span>)</span>
<span id="cb23-573"><a href="#cb23-573" aria-hidden="true" tabindex="-1"></a><span class="co"># Assume columns: symbol, date (month-end), ret</span></span>
<span id="cb23-574"><a href="#cb23-574" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-575"><a href="#cb23-575" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge with risk-free rate</span></span>
<span id="cb23-576"><a href="#cb23-576" aria-hidden="true" tabindex="-1"></a><span class="co"># Use the blended series as the baseline</span></span>
<span id="cb23-577"><a href="#cb23-577" aria-hidden="true" tabindex="-1"></a>rf_for_merge <span class="op">=</span> rf_blended[[<span class="st">"date"</span>, <span class="st">"rf_monthly"</span>]].rename(</span>
<span id="cb23-578"><a href="#cb23-578" aria-hidden="true" tabindex="-1"></a>    columns<span class="op">=</span>{<span class="st">"rf_monthly"</span>: <span class="st">"rf"</span>}</span>
<span id="cb23-579"><a href="#cb23-579" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-580"><a href="#cb23-580" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-581"><a href="#cb23-581" aria-hidden="true" tabindex="-1"></a>stock_returns <span class="op">=</span> stock_returns.merge(rf_for_merge, on<span class="op">=</span><span class="st">"date"</span>, how<span class="op">=</span><span class="st">"left"</span>)</span>
<span id="cb23-582"><a href="#cb23-582" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-583"><a href="#cb23-583" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute excess returns</span></span>
<span id="cb23-584"><a href="#cb23-584" aria-hidden="true" tabindex="-1"></a>stock_returns[<span class="st">"ret_excess"</span>] <span class="op">=</span> stock_returns[<span class="st">"ret"</span>] <span class="op">-</span> stock_returns[<span class="st">"rf"</span>]</span>
<span id="cb23-585"><a href="#cb23-585" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-586"><a href="#cb23-586" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-587"><a href="#cb23-587" aria-hidden="true" tabindex="-1"></a><span class="fu">### Market Excess Return</span></span>
<span id="cb23-588"><a href="#cb23-588" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-591"><a href="#cb23-591" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-592"><a href="#cb23-592" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: compute-mktrf</span></span>
<span id="cb23-593"><a href="#cb23-593" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb23-594"><a href="#cb23-594" aria-hidden="true" tabindex="-1"></a><span class="co"># Value-weighted market return</span></span>
<span id="cb23-595"><a href="#cb23-595" aria-hidden="true" tabindex="-1"></a>market_monthly <span class="op">=</span> (</span>
<span id="cb23-596"><a href="#cb23-596" aria-hidden="true" tabindex="-1"></a>    stock_returns</span>
<span id="cb23-597"><a href="#cb23-597" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">"date"</span>)</span>
<span id="cb23-598"><a href="#cb23-598" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">apply</span>(</span>
<span id="cb23-599"><a href="#cb23-599" aria-hidden="true" tabindex="-1"></a>        <span class="kw">lambda</span> g: np.average(</span>
<span id="cb23-600"><a href="#cb23-600" aria-hidden="true" tabindex="-1"></a>            g[<span class="st">"ret"</span>].dropna(),</span>
<span id="cb23-601"><a href="#cb23-601" aria-hidden="true" tabindex="-1"></a>            weights<span class="op">=</span>g[<span class="st">"mktcap"</span>].loc[g[<span class="st">"ret"</span>].dropna().index]</span>
<span id="cb23-602"><a href="#cb23-602" aria-hidden="true" tabindex="-1"></a>        ) <span class="cf">if</span> g[<span class="st">"ret"</span>].dropna().shape[<span class="dv">0</span>] <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">else</span> np.nan,</span>
<span id="cb23-603"><a href="#cb23-603" aria-hidden="true" tabindex="-1"></a>        include_groups<span class="op">=</span><span class="va">False</span></span>
<span id="cb23-604"><a href="#cb23-604" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb23-605"><a href="#cb23-605" aria-hidden="true" tabindex="-1"></a>    .reset_index(name<span class="op">=</span><span class="st">"rm"</span>)</span>
<span id="cb23-606"><a href="#cb23-606" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-607"><a href="#cb23-607" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-608"><a href="#cb23-608" aria-hidden="true" tabindex="-1"></a>market_monthly <span class="op">=</span> market_monthly.merge(rf_for_merge, on<span class="op">=</span><span class="st">"date"</span>, how<span class="op">=</span><span class="st">"left"</span>)</span>
<span id="cb23-609"><a href="#cb23-609" aria-hidden="true" tabindex="-1"></a>market_monthly[<span class="st">"mktrf"</span>] <span class="op">=</span> market_monthly[<span class="st">"rm"</span>] <span class="op">-</span> market_monthly[<span class="st">"rf"</span>]</span>
<span id="cb23-610"><a href="#cb23-610" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-611"><a href="#cb23-611" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-614"><a href="#cb23-614" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-615"><a href="#cb23-615" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-mktrf-timeseries</span></span>
<span id="cb23-616"><a href="#cb23-616" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Monthly Market Excess Return (MKTRF)"</span></span>
<span id="cb23-617"><a href="#cb23-617" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb23-618"><a href="#cb23-618" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-619"><a href="#cb23-619" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="fl">3.5</span>))</span>
<span id="cb23-620"><a href="#cb23-620" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-621"><a href="#cb23-621" aria-hidden="true" tabindex="-1"></a>ax.bar(</span>
<span id="cb23-622"><a href="#cb23-622" aria-hidden="true" tabindex="-1"></a>    market_monthly[<span class="st">"date"</span>], market_monthly[<span class="st">"mktrf"</span>] <span class="op">*</span> <span class="dv">100</span>,</span>
<span id="cb23-623"><a href="#cb23-623" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span>np.where(market_monthly[<span class="st">"mktrf"</span>] <span class="op">&gt;=</span> <span class="dv">0</span>, <span class="st">"#2C73D2"</span>, <span class="st">"#FF6B6B"</span>),</span>
<span id="cb23-624"><a href="#cb23-624" aria-hidden="true" tabindex="-1"></a>    width<span class="op">=</span><span class="dv">25</span>, alpha<span class="op">=</span><span class="fl">0.8</span></span>
<span id="cb23-625"><a href="#cb23-625" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-626"><a href="#cb23-626" aria-hidden="true" tabindex="-1"></a>ax.axhline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"black"</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb23-627"><a href="#cb23-627" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Market Excess Return (%)"</span>)</span>
<span id="cb23-628"><a href="#cb23-628" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">""</span>)</span>
<span id="cb23-629"><a href="#cb23-629" aria-hidden="true" tabindex="-1"></a>ax.spines[<span class="st">"top"</span>].set_visible(<span class="va">False</span>)</span>
<span id="cb23-630"><a href="#cb23-630" aria-hidden="true" tabindex="-1"></a>ax.spines[<span class="st">"right"</span>].set_visible(<span class="va">False</span>)</span>
<span id="cb23-631"><a href="#cb23-631" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb23-632"><a href="#cb23-632" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb23-633"><a href="#cb23-633" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-634"><a href="#cb23-634" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-635"><a href="#cb23-635" aria-hidden="true" tabindex="-1"></a><span class="fu">## Sensitivity Analysis: How Much Does the Proxy Choice Matter?</span></span>
<span id="cb23-636"><a href="#cb23-636" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-637"><a href="#cb23-637" aria-hidden="true" tabindex="-1"></a>This is the central empirical question of the chapter. If different risk-free proxies produce essentially the same downstream results, the choice is inconsequential. If they produce different results, researchers must justify their choice and report robustness.</span>
<span id="cb23-638"><a href="#cb23-638" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-639"><a href="#cb23-639" aria-hidden="true" tabindex="-1"></a><span class="fu">### Effect on the Equity Premium</span></span>
<span id="cb23-640"><a href="#cb23-640" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-643"><a href="#cb23-643" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-644"><a href="#cb23-644" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-equity-premium-sensitivity</span></span>
<span id="cb23-645"><a href="#cb23-645" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb23-646"><a href="#cb23-646" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Annualized Equity Premium Under Alternative Risk-Free Proxies"</span></span>
<span id="cb23-647"><a href="#cb23-647" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-648"><a href="#cb23-648" aria-hidden="true" tabindex="-1"></a>results <span class="op">=</span> []</span>
<span id="cb23-649"><a href="#cb23-649" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> proxy_name, proxy_df <span class="kw">in</span> rf_proxies.items():</span>
<span id="cb23-650"><a href="#cb23-650" aria-hidden="true" tabindex="-1"></a>    rf_merge <span class="op">=</span> proxy_df[[<span class="st">"date"</span>, <span class="st">"rf_monthly"</span>]].rename(</span>
<span id="cb23-651"><a href="#cb23-651" aria-hidden="true" tabindex="-1"></a>        columns<span class="op">=</span>{<span class="st">"rf_monthly"</span>: <span class="st">"rf_proxy"</span>}</span>
<span id="cb23-652"><a href="#cb23-652" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb23-653"><a href="#cb23-653" aria-hidden="true" tabindex="-1"></a>    merged <span class="op">=</span> market_monthly[[<span class="st">"date"</span>, <span class="st">"rm"</span>]].merge(rf_merge, on<span class="op">=</span><span class="st">"date"</span>, how<span class="op">=</span><span class="st">"inner"</span>)</span>
<span id="cb23-654"><a href="#cb23-654" aria-hidden="true" tabindex="-1"></a>    merged[<span class="st">"mktrf_proxy"</span>] <span class="op">=</span> merged[<span class="st">"rm"</span>] <span class="op">-</span> merged[<span class="st">"rf_proxy"</span>]</span>
<span id="cb23-655"><a href="#cb23-655" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-656"><a href="#cb23-656" aria-hidden="true" tabindex="-1"></a>    n_months <span class="op">=</span> merged[<span class="st">"mktrf_proxy"</span>].count()</span>
<span id="cb23-657"><a href="#cb23-657" aria-hidden="true" tabindex="-1"></a>    mean_monthly <span class="op">=</span> merged[<span class="st">"mktrf_proxy"</span>].mean()</span>
<span id="cb23-658"><a href="#cb23-658" aria-hidden="true" tabindex="-1"></a>    std_monthly <span class="op">=</span> merged[<span class="st">"mktrf_proxy"</span>].std()</span>
<span id="cb23-659"><a href="#cb23-659" aria-hidden="true" tabindex="-1"></a>    sharpe <span class="op">=</span> mean_monthly <span class="op">/</span> std_monthly <span class="cf">if</span> std_monthly <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">else</span> np.nan</span>
<span id="cb23-660"><a href="#cb23-660" aria-hidden="true" tabindex="-1"></a>    t_stat <span class="op">=</span> mean_monthly <span class="op">/</span> (std_monthly <span class="op">/</span> np.sqrt(n_months))</span>
<span id="cb23-661"><a href="#cb23-661" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-662"><a href="#cb23-662" aria-hidden="true" tabindex="-1"></a>    results.append({</span>
<span id="cb23-663"><a href="#cb23-663" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Proxy"</span>: proxy_name.replace(<span class="st">"_"</span>, <span class="st">" "</span>).title(),</span>
<span id="cb23-664"><a href="#cb23-664" aria-hidden="true" tabindex="-1"></a>        <span class="st">"N Months"</span>: n_months,</span>
<span id="cb23-665"><a href="#cb23-665" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Mean (% ann.)"</span>: <span class="bu">round</span>(mean_monthly <span class="op">*</span> <span class="dv">12</span> <span class="op">*</span> <span class="dv">100</span>, <span class="dv">2</span>),</span>
<span id="cb23-666"><a href="#cb23-666" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Std (% ann.)"</span>: <span class="bu">round</span>(std_monthly <span class="op">*</span> np.sqrt(<span class="dv">12</span>) <span class="op">*</span> <span class="dv">100</span>, <span class="dv">2</span>),</span>
<span id="cb23-667"><a href="#cb23-667" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Sharpe (ann.)"</span>: <span class="bu">round</span>(sharpe <span class="op">*</span> np.sqrt(<span class="dv">12</span>), <span class="dv">3</span>),</span>
<span id="cb23-668"><a href="#cb23-668" aria-hidden="true" tabindex="-1"></a>        <span class="st">"t-stat"</span>: <span class="bu">round</span>(t_stat, <span class="dv">2</span>)</span>
<span id="cb23-669"><a href="#cb23-669" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb23-670"><a href="#cb23-670" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-671"><a href="#cb23-671" aria-hidden="true" tabindex="-1"></a>pd.DataFrame(results).style.hide(axis<span class="op">=</span><span class="st">"index"</span>)</span>
<span id="cb23-672"><a href="#cb23-672" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-673"><a href="#cb23-673" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-674"><a href="#cb23-674" aria-hidden="true" tabindex="-1"></a><span class="fu">### Effect on Factor Premiums</span></span>
<span id="cb23-675"><a href="#cb23-675" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-678"><a href="#cb23-678" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-679"><a href="#cb23-679" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-factor-premium-sensitivity</span></span>
<span id="cb23-680"><a href="#cb23-680" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb23-681"><a href="#cb23-681" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Factor Premium Sensitivity to Risk-Free Proxy (Annualized %)"</span></span>
<span id="cb23-682"><a href="#cb23-682" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-683"><a href="#cb23-683" aria-hidden="true" tabindex="-1"></a><span class="co"># Load or construct factor returns</span></span>
<span id="cb23-684"><a href="#cb23-684" aria-hidden="true" tabindex="-1"></a><span class="co"># Assume factors_monthly has: date, smb, hml (these are long-short, rf-independent)</span></span>
<span id="cb23-685"><a href="#cb23-685" aria-hidden="true" tabindex="-1"></a><span class="co"># Only MKTRF changes with the proxy</span></span>
<span id="cb23-686"><a href="#cb23-686" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-687"><a href="#cb23-687" aria-hidden="true" tabindex="-1"></a>factors_monthly <span class="op">=</span> pd.read_parquet(<span class="st">"data/factors_monthly.parquet"</span>)</span>
<span id="cb23-688"><a href="#cb23-688" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-689"><a href="#cb23-689" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> proxy_name, proxy_df <span class="kw">in</span> rf_proxies.items():</span>
<span id="cb23-690"><a href="#cb23-690" aria-hidden="true" tabindex="-1"></a>    rf_merge <span class="op">=</span> proxy_df[[<span class="st">"date"</span>, <span class="st">"rf_monthly"</span>]].rename(</span>
<span id="cb23-691"><a href="#cb23-691" aria-hidden="true" tabindex="-1"></a>        columns<span class="op">=</span>{<span class="st">"rf_monthly"</span>: <span class="st">"rf_proxy"</span>}</span>
<span id="cb23-692"><a href="#cb23-692" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb23-693"><a href="#cb23-693" aria-hidden="true" tabindex="-1"></a>    factors_merged <span class="op">=</span> factors_monthly.merge(rf_merge, on<span class="op">=</span><span class="st">"date"</span>, how<span class="op">=</span><span class="st">"inner"</span>)</span>
<span id="cb23-694"><a href="#cb23-694" aria-hidden="true" tabindex="-1"></a>    factors_merged <span class="op">=</span> factors_merged.merge(</span>
<span id="cb23-695"><a href="#cb23-695" aria-hidden="true" tabindex="-1"></a>        market_monthly[[<span class="st">"date"</span>, <span class="st">"rm"</span>]], on<span class="op">=</span><span class="st">"date"</span>, how<span class="op">=</span><span class="st">"inner"</span></span>
<span id="cb23-696"><a href="#cb23-696" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb23-697"><a href="#cb23-697" aria-hidden="true" tabindex="-1"></a>    factors_merged[<span class="ss">f"mktrf_</span><span class="sc">{</span>proxy_name<span class="sc">}</span><span class="ss">"</span>] <span class="op">=</span> (</span>
<span id="cb23-698"><a href="#cb23-698" aria-hidden="true" tabindex="-1"></a>        factors_merged[<span class="st">"rm"</span>] <span class="op">-</span> factors_merged[<span class="st">"rf_proxy"</span>]</span>
<span id="cb23-699"><a href="#cb23-699" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb23-700"><a href="#cb23-700" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-701"><a href="#cb23-701" aria-hidden="true" tabindex="-1"></a>    mean_mktrf <span class="op">=</span> factors_merged[<span class="ss">f"mktrf_</span><span class="sc">{</span>proxy_name<span class="sc">}</span><span class="ss">"</span>].mean() <span class="op">*</span> <span class="dv">12</span> <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb23-702"><a href="#cb23-702" aria-hidden="true" tabindex="-1"></a>    mean_smb <span class="op">=</span> factors_merged[<span class="st">"smb"</span>].mean() <span class="op">*</span> <span class="dv">12</span> <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb23-703"><a href="#cb23-703" aria-hidden="true" tabindex="-1"></a>    mean_hml <span class="op">=</span> factors_merged[<span class="st">"hml"</span>].mean() <span class="op">*</span> <span class="dv">12</span> <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb23-704"><a href="#cb23-704" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-705"><a href="#cb23-705" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(</span>
<span id="cb23-706"><a href="#cb23-706" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"</span><span class="sc">{</span>proxy_name<span class="sc">:&gt;25s}</span><span class="ss">: MKTRF = </span><span class="sc">{</span>mean_mktrf<span class="sc">:6.2f}</span><span class="ss">%, "</span></span>
<span id="cb23-707"><a href="#cb23-707" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"SMB = </span><span class="sc">{</span>mean_smb<span class="sc">:6.2f}</span><span class="ss">%, HML = </span><span class="sc">{</span>mean_hml<span class="sc">:6.2f}</span><span class="ss">%"</span></span>
<span id="cb23-708"><a href="#cb23-708" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb23-709"><a href="#cb23-709" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-710"><a href="#cb23-710" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-711"><a href="#cb23-711" aria-hidden="true" tabindex="-1"></a>Note that SMB and HML are constructed as long-short portfolio returns and should be identical regardless of the risk-free proxy. Only MKTRF differs. However, if the researcher uses the risk-free rate to compute individual stock excess returns before sorting into factor portfolios, small differences in sorting may arise.</span>
<span id="cb23-712"><a href="#cb23-712" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-713"><a href="#cb23-713" aria-hidden="true" tabindex="-1"></a><span class="fu">### Effect on Alpha Estimates</span></span>
<span id="cb23-714"><a href="#cb23-714" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-715"><a href="#cb23-715" aria-hidden="true" tabindex="-1"></a>The choice of risk-free proxy affects alpha estimates for any portfolio evaluated against a factor model. We illustrate this by estimating the alpha of a momentum portfolio under each proxy.</span>
<span id="cb23-716"><a href="#cb23-716" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-719"><a href="#cb23-719" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-720"><a href="#cb23-720" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-alpha-sensitivity</span></span>
<span id="cb23-721"><a href="#cb23-721" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb23-722"><a href="#cb23-722" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Momentum Portfolio Alpha Sensitivity to Risk-Free Proxy"</span></span>
<span id="cb23-723"><a href="#cb23-723" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm</span>
<span id="cb23-724"><a href="#cb23-724" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-725"><a href="#cb23-725" aria-hidden="true" tabindex="-1"></a><span class="co"># Assume momentum_ret contains: date, mom_ret (raw return of WML portfolio)</span></span>
<span id="cb23-726"><a href="#cb23-726" aria-hidden="true" tabindex="-1"></a>momentum_ret <span class="op">=</span> pd.read_parquet(<span class="st">"data/momentum_returns.parquet"</span>)</span>
<span id="cb23-727"><a href="#cb23-727" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-728"><a href="#cb23-728" aria-hidden="true" tabindex="-1"></a>alpha_results <span class="op">=</span> []</span>
<span id="cb23-729"><a href="#cb23-729" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> proxy_name, proxy_df <span class="kw">in</span> rf_proxies.items():</span>
<span id="cb23-730"><a href="#cb23-730" aria-hidden="true" tabindex="-1"></a>    rf_merge <span class="op">=</span> proxy_df[[<span class="st">"date"</span>, <span class="st">"rf_monthly"</span>]].rename(</span>
<span id="cb23-731"><a href="#cb23-731" aria-hidden="true" tabindex="-1"></a>        columns<span class="op">=</span>{<span class="st">"rf_monthly"</span>: <span class="st">"rf_proxy"</span>}</span>
<span id="cb23-732"><a href="#cb23-732" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb23-733"><a href="#cb23-733" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-734"><a href="#cb23-734" aria-hidden="true" tabindex="-1"></a>    merged <span class="op">=</span> (</span>
<span id="cb23-735"><a href="#cb23-735" aria-hidden="true" tabindex="-1"></a>        momentum_ret</span>
<span id="cb23-736"><a href="#cb23-736" aria-hidden="true" tabindex="-1"></a>        .merge(rf_merge, on<span class="op">=</span><span class="st">"date"</span>, how<span class="op">=</span><span class="st">"inner"</span>)</span>
<span id="cb23-737"><a href="#cb23-737" aria-hidden="true" tabindex="-1"></a>        .merge(market_monthly[[<span class="st">"date"</span>, <span class="st">"rm"</span>]], on<span class="op">=</span><span class="st">"date"</span>, how<span class="op">=</span><span class="st">"inner"</span>)</span>
<span id="cb23-738"><a href="#cb23-738" aria-hidden="true" tabindex="-1"></a>        .merge(factors_monthly[[<span class="st">"date"</span>, <span class="st">"smb"</span>, <span class="st">"hml"</span>]], on<span class="op">=</span><span class="st">"date"</span>, how<span class="op">=</span><span class="st">"inner"</span>)</span>
<span id="cb23-739"><a href="#cb23-739" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb23-740"><a href="#cb23-740" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-741"><a href="#cb23-741" aria-hidden="true" tabindex="-1"></a>    merged[<span class="st">"mom_excess"</span>] <span class="op">=</span> merged[<span class="st">"mom_ret"</span>] <span class="op">-</span> merged[<span class="st">"rf_proxy"</span>]</span>
<span id="cb23-742"><a href="#cb23-742" aria-hidden="true" tabindex="-1"></a>    merged[<span class="st">"mktrf"</span>] <span class="op">=</span> merged[<span class="st">"rm"</span>] <span class="op">-</span> merged[<span class="st">"rf_proxy"</span>]</span>
<span id="cb23-743"><a href="#cb23-743" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-744"><a href="#cb23-744" aria-hidden="true" tabindex="-1"></a>    X <span class="op">=</span> sm.add_constant(merged[[<span class="st">"mktrf"</span>, <span class="st">"smb"</span>, <span class="st">"hml"</span>]])</span>
<span id="cb23-745"><a href="#cb23-745" aria-hidden="true" tabindex="-1"></a>    y <span class="op">=</span> merged[<span class="st">"mom_excess"</span>]</span>
<span id="cb23-746"><a href="#cb23-746" aria-hidden="true" tabindex="-1"></a>    model <span class="op">=</span> sm.OLS(y, X).fit(cov_type<span class="op">=</span><span class="st">"HAC"</span>, cov_kwds<span class="op">=</span>{<span class="st">"maxlags"</span>: <span class="dv">6</span>})</span>
<span id="cb23-747"><a href="#cb23-747" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-748"><a href="#cb23-748" aria-hidden="true" tabindex="-1"></a>    alpha_results.append({</span>
<span id="cb23-749"><a href="#cb23-749" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Proxy"</span>: proxy_name.replace(<span class="st">"_"</span>, <span class="st">" "</span>).title(),</span>
<span id="cb23-750"><a href="#cb23-750" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Alpha (% monthly)"</span>: <span class="bu">round</span>(model.params[<span class="st">"const"</span>] <span class="op">*</span> <span class="dv">100</span>, <span class="dv">3</span>),</span>
<span id="cb23-751"><a href="#cb23-751" aria-hidden="true" tabindex="-1"></a>        <span class="st">"t-stat"</span>: <span class="bu">round</span>(model.tvalues[<span class="st">"const"</span>], <span class="dv">2</span>),</span>
<span id="cb23-752"><a href="#cb23-752" aria-hidden="true" tabindex="-1"></a>        <span class="st">"R²"</span>: <span class="bu">round</span>(model.rsquared, <span class="dv">3</span>)</span>
<span id="cb23-753"><a href="#cb23-753" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb23-754"><a href="#cb23-754" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-755"><a href="#cb23-755" aria-hidden="true" tabindex="-1"></a>pd.DataFrame(alpha_results).style.hide(axis<span class="op">=</span><span class="st">"index"</span>)</span>
<span id="cb23-756"><a href="#cb23-756" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-757"><a href="#cb23-757" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-758"><a href="#cb23-758" aria-hidden="true" tabindex="-1"></a><span class="fu">### Effect on Valuation</span></span>
<span id="cb23-759"><a href="#cb23-759" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-760"><a href="#cb23-760" aria-hidden="true" tabindex="-1"></a>To illustrate the valuation impact, consider a simple DCF exercise where the cost of equity is estimated via the CAPM.</span>
<span id="cb23-761"><a href="#cb23-761" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-764"><a href="#cb23-764" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-765"><a href="#cb23-765" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-valuation-sensitivity</span></span>
<span id="cb23-766"><a href="#cb23-766" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb23-767"><a href="#cb23-767" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Cost of Equity and Terminal Value Sensitivity to Risk-Free Proxy"</span></span>
<span id="cb23-768"><a href="#cb23-768" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-769"><a href="#cb23-769" aria-hidden="true" tabindex="-1"></a><span class="co"># Example: firm with beta = 1.0, expected CF = 1 billion VND, growth = 3%</span></span>
<span id="cb23-770"><a href="#cb23-770" aria-hidden="true" tabindex="-1"></a>beta_example <span class="op">=</span> <span class="fl">1.0</span></span>
<span id="cb23-771"><a href="#cb23-771" aria-hidden="true" tabindex="-1"></a>cf <span class="op">=</span> <span class="fl">1e9</span>  <span class="co"># VND</span></span>
<span id="cb23-772"><a href="#cb23-772" aria-hidden="true" tabindex="-1"></a>growth <span class="op">=</span> <span class="fl">0.03</span></span>
<span id="cb23-773"><a href="#cb23-773" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-774"><a href="#cb23-774" aria-hidden="true" tabindex="-1"></a>valuation_results <span class="op">=</span> []</span>
<span id="cb23-775"><a href="#cb23-775" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> proxy_name, proxy_df <span class="kw">in</span> rf_proxies.items():</span>
<span id="cb23-776"><a href="#cb23-776" aria-hidden="true" tabindex="-1"></a>    rf_ann <span class="op">=</span> proxy_df[<span class="st">"rf_annual"</span>].dropna().iloc[<span class="op">-</span><span class="dv">12</span>:].mean() <span class="op">/</span> <span class="dv">100</span>  <span class="co"># Latest year avg</span></span>
<span id="cb23-777"><a href="#cb23-777" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-778"><a href="#cb23-778" aria-hidden="true" tabindex="-1"></a>    rf_merge <span class="op">=</span> proxy_df[[<span class="st">"date"</span>, <span class="st">"rf_monthly"</span>]].rename(</span>
<span id="cb23-779"><a href="#cb23-779" aria-hidden="true" tabindex="-1"></a>        columns<span class="op">=</span>{<span class="st">"rf_monthly"</span>: <span class="st">"rf_proxy"</span>}</span>
<span id="cb23-780"><a href="#cb23-780" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb23-781"><a href="#cb23-781" aria-hidden="true" tabindex="-1"></a>    mkt_merged <span class="op">=</span> market_monthly[[<span class="st">"date"</span>, <span class="st">"rm"</span>]].merge(</span>
<span id="cb23-782"><a href="#cb23-782" aria-hidden="true" tabindex="-1"></a>        rf_merge, on<span class="op">=</span><span class="st">"date"</span>, how<span class="op">=</span><span class="st">"inner"</span></span>
<span id="cb23-783"><a href="#cb23-783" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb23-784"><a href="#cb23-784" aria-hidden="true" tabindex="-1"></a>    mkt_merged[<span class="st">"mktrf"</span>] <span class="op">=</span> mkt_merged[<span class="st">"rm"</span>] <span class="op">-</span> mkt_merged[<span class="st">"rf_proxy"</span>]</span>
<span id="cb23-785"><a href="#cb23-785" aria-hidden="true" tabindex="-1"></a>    erp <span class="op">=</span> mkt_merged[<span class="st">"mktrf"</span>].mean() <span class="op">*</span> <span class="dv">12</span>  <span class="co"># Annualized equity premium</span></span>
<span id="cb23-786"><a href="#cb23-786" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-787"><a href="#cb23-787" aria-hidden="true" tabindex="-1"></a>    cost_equity <span class="op">=</span> rf_ann <span class="op">+</span> beta_example <span class="op">*</span> erp</span>
<span id="cb23-788"><a href="#cb23-788" aria-hidden="true" tabindex="-1"></a>    terminal_value <span class="op">=</span> cf <span class="op">/</span> (cost_equity <span class="op">-</span> growth) <span class="cf">if</span> cost_equity <span class="op">&gt;</span> growth <span class="cf">else</span> np.nan</span>
<span id="cb23-789"><a href="#cb23-789" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-790"><a href="#cb23-790" aria-hidden="true" tabindex="-1"></a>    valuation_results.append({</span>
<span id="cb23-791"><a href="#cb23-791" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Proxy"</span>: proxy_name.replace(<span class="st">"_"</span>, <span class="st">" "</span>).title(),</span>
<span id="cb23-792"><a href="#cb23-792" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Rf (% ann.)"</span>: <span class="bu">round</span>(rf_ann <span class="op">*</span> <span class="dv">100</span>, <span class="dv">2</span>),</span>
<span id="cb23-793"><a href="#cb23-793" aria-hidden="true" tabindex="-1"></a>        <span class="st">"ERP (% ann.)"</span>: <span class="bu">round</span>(erp <span class="op">*</span> <span class="dv">100</span>, <span class="dv">2</span>),</span>
<span id="cb23-794"><a href="#cb23-794" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Cost of Equity (%)"</span>: <span class="bu">round</span>(cost_equity <span class="op">*</span> <span class="dv">100</span>, <span class="dv">2</span>),</span>
<span id="cb23-795"><a href="#cb23-795" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Terminal Value (B VND)"</span>: <span class="bu">round</span>(terminal_value <span class="op">/</span> <span class="fl">1e9</span>, <span class="dv">1</span>) <span class="cf">if</span> terminal_value <span class="cf">else</span> <span class="st">"N/A"</span></span>
<span id="cb23-796"><a href="#cb23-796" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb23-797"><a href="#cb23-797" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-798"><a href="#cb23-798" aria-hidden="true" tabindex="-1"></a>pd.DataFrame(valuation_results).style.hide(axis<span class="op">=</span><span class="st">"index"</span>)</span>
<span id="cb23-799"><a href="#cb23-799" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-800"><a href="#cb23-800" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-801"><a href="#cb23-801" aria-hidden="true" tabindex="-1"></a>::: callout-important</span>
<span id="cb23-802"><a href="#cb23-802" aria-hidden="true" tabindex="-1"></a><span class="fu">## Key Finding</span></span>
<span id="cb23-803"><a href="#cb23-803" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-804"><a href="#cb23-804" aria-hidden="true" tabindex="-1"></a>Even modest differences in the risk-free rate (50-150 basis points across proxies) can produce terminal value differences of 10-30%. Researchers and practitioners must document their risk-free rate choice explicitly and report sensitivity to alternatives.</span>
<span id="cb23-805"><a href="#cb23-805" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb23-806"><a href="#cb23-806" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-807"><a href="#cb23-807" aria-hidden="true" tabindex="-1"></a><span class="fu">## Term Structure Considerations</span></span>
<span id="cb23-808"><a href="#cb23-808" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-809"><a href="#cb23-809" aria-hidden="true" tabindex="-1"></a>When longer-horizon discount rates are needed (e.g., for multi-year DCF or cost of capital estimation), the risk-free rate should be maturity-matched. This requires constructing a yield curve from available government bond data.</span>
<span id="cb23-810"><a href="#cb23-810" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-811"><a href="#cb23-811" aria-hidden="true" tabindex="-1"></a><span class="fu">### Yield Curve Estimation</span></span>
<span id="cb23-812"><a href="#cb23-812" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-813"><a href="#cb23-813" aria-hidden="true" tabindex="-1"></a>@gurkaynak2007us develop a parametric approach to yield curve estimation using the @nelson1987parsimonious and @svensson1994estimating models. The Nelson-Siegel model parameterizes the instantaneous forward rate as:</span>
<span id="cb23-814"><a href="#cb23-814" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-815"><a href="#cb23-815" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb23-816"><a href="#cb23-816" aria-hidden="true" tabindex="-1"></a>f(\tau) = \beta_0 + \beta_1 \exp\left(-\frac{\tau}{\lambda}\right) + \beta_2 \frac{\tau}{\lambda} \exp\left(-\frac{\tau}{\lambda}\right)</span>
<span id="cb23-817"><a href="#cb23-817" aria-hidden="true" tabindex="-1"></a>$$ {#eq-nelson-siegel}</span>
<span id="cb23-818"><a href="#cb23-818" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-819"><a href="#cb23-819" aria-hidden="true" tabindex="-1"></a>where $\tau$ is the maturity, $\beta_0$ is the long-run level, $\beta_1$ determines the slope, $\beta_2$ determines the curvature, and $\lambda$ controls the location of the hump.</span>
<span id="cb23-820"><a href="#cb23-820" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-821"><a href="#cb23-821" aria-hidden="true" tabindex="-1"></a>The corresponding yield is:</span>
<span id="cb23-822"><a href="#cb23-822" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-823"><a href="#cb23-823" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb23-824"><a href="#cb23-824" aria-hidden="true" tabindex="-1"></a>y(\tau) = \beta_0 + \beta_1 \frac{1 - \exp(-\tau/\lambda)}{\tau/\lambda} + \beta_2 \left<span class="co">[</span><span class="ot">\frac{1 - \exp(-\tau/\lambda)}{\tau/\lambda} - \exp(-\tau/\lambda)\right</span><span class="co">]</span></span>
<span id="cb23-825"><a href="#cb23-825" aria-hidden="true" tabindex="-1"></a>$$ {#eq-ns-yield}</span>
<span id="cb23-826"><a href="#cb23-826" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-829"><a href="#cb23-829" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-830"><a href="#cb23-830" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: nelson-siegel-estimation</span></span>
<span id="cb23-831"><a href="#cb23-831" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb23-832"><a href="#cb23-832" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.optimize <span class="im">import</span> minimize</span>
<span id="cb23-833"><a href="#cb23-833" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-834"><a href="#cb23-834" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> nelson_siegel_yield(tau, beta0, beta1, beta2, lam):</span>
<span id="cb23-835"><a href="#cb23-835" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Nelson-Siegel yield curve model."""</span></span>
<span id="cb23-836"><a href="#cb23-836" aria-hidden="true" tabindex="-1"></a>    tau_lam <span class="op">=</span> tau <span class="op">/</span> lam</span>
<span id="cb23-837"><a href="#cb23-837" aria-hidden="true" tabindex="-1"></a>    factor1 <span class="op">=</span> (<span class="dv">1</span> <span class="op">-</span> np.exp(<span class="op">-</span>tau_lam)) <span class="op">/</span> tau_lam</span>
<span id="cb23-838"><a href="#cb23-838" aria-hidden="true" tabindex="-1"></a>    factor2 <span class="op">=</span> factor1 <span class="op">-</span> np.exp(<span class="op">-</span>tau_lam)</span>
<span id="cb23-839"><a href="#cb23-839" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> beta0 <span class="op">+</span> beta1 <span class="op">*</span> factor1 <span class="op">+</span> beta2 <span class="op">*</span> factor2</span>
<span id="cb23-840"><a href="#cb23-840" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-841"><a href="#cb23-841" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fit_nelson_siegel(maturities, yields):</span>
<span id="cb23-842"><a href="#cb23-842" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Fit Nelson-Siegel model to observed yields."""</span></span>
<span id="cb23-843"><a href="#cb23-843" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> objective(params):</span>
<span id="cb23-844"><a href="#cb23-844" aria-hidden="true" tabindex="-1"></a>        beta0, beta1, beta2, lam <span class="op">=</span> params</span>
<span id="cb23-845"><a href="#cb23-845" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> lam <span class="op">&lt;=</span> <span class="dv">0</span>:</span>
<span id="cb23-846"><a href="#cb23-846" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="fl">1e10</span></span>
<span id="cb23-847"><a href="#cb23-847" aria-hidden="true" tabindex="-1"></a>        fitted <span class="op">=</span> nelson_siegel_yield(maturities, beta0, beta1, beta2, lam)</span>
<span id="cb23-848"><a href="#cb23-848" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> np.<span class="bu">sum</span>((yields <span class="op">-</span> fitted) <span class="op">**</span> <span class="dv">2</span>)</span>
<span id="cb23-849"><a href="#cb23-849" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-850"><a href="#cb23-850" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> minimize(</span>
<span id="cb23-851"><a href="#cb23-851" aria-hidden="true" tabindex="-1"></a>        objective,</span>
<span id="cb23-852"><a href="#cb23-852" aria-hidden="true" tabindex="-1"></a>        x0<span class="op">=</span>[yields[<span class="op">-</span><span class="dv">1</span>], yields[<span class="dv">0</span>] <span class="op">-</span> yields[<span class="op">-</span><span class="dv">1</span>], <span class="dv">0</span>, <span class="fl">2.0</span>],</span>
<span id="cb23-853"><a href="#cb23-853" aria-hidden="true" tabindex="-1"></a>        method<span class="op">=</span><span class="st">"Nelder-Mead"</span>,</span>
<span id="cb23-854"><a href="#cb23-854" aria-hidden="true" tabindex="-1"></a>        options<span class="op">=</span>{<span class="st">"maxiter"</span>: <span class="dv">10000</span>}</span>
<span id="cb23-855"><a href="#cb23-855" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb23-856"><a href="#cb23-856" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result.x</span>
<span id="cb23-857"><a href="#cb23-857" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-858"><a href="#cb23-858" aria-hidden="true" tabindex="-1"></a><span class="co"># Example: fit to latest available government bond yields</span></span>
<span id="cb23-859"><a href="#cb23-859" aria-hidden="true" tabindex="-1"></a><span class="co"># Assume govt_yields contains: date, maturity_years, yield_pct</span></span>
<span id="cb23-860"><a href="#cb23-860" aria-hidden="true" tabindex="-1"></a>govt_yields <span class="op">=</span> pd.read_parquet(<span class="st">"data/govt_bond_yields.parquet"</span>)</span>
<span id="cb23-861"><a href="#cb23-861" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-862"><a href="#cb23-862" aria-hidden="true" tabindex="-1"></a>latest_date <span class="op">=</span> govt_yields[<span class="st">"date"</span>].<span class="bu">max</span>()</span>
<span id="cb23-863"><a href="#cb23-863" aria-hidden="true" tabindex="-1"></a>latest_yields <span class="op">=</span> govt_yields[govt_yields[<span class="st">"date"</span>] <span class="op">==</span> latest_date].sort_values(<span class="st">"maturity_years"</span>)</span>
<span id="cb23-864"><a href="#cb23-864" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-865"><a href="#cb23-865" aria-hidden="true" tabindex="-1"></a>maturities <span class="op">=</span> latest_yields[<span class="st">"maturity_years"</span>].values</span>
<span id="cb23-866"><a href="#cb23-866" aria-hidden="true" tabindex="-1"></a>yields <span class="op">=</span> latest_yields[<span class="st">"yield_pct"</span>].values</span>
<span id="cb23-867"><a href="#cb23-867" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-868"><a href="#cb23-868" aria-hidden="true" tabindex="-1"></a>params <span class="op">=</span> fit_nelson_siegel(maturities, yields)</span>
<span id="cb23-869"><a href="#cb23-869" aria-hidden="true" tabindex="-1"></a>beta0, beta1, beta2, lam <span class="op">=</span> params</span>
<span id="cb23-870"><a href="#cb23-870" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-871"><a href="#cb23-871" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-874"><a href="#cb23-874" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-875"><a href="#cb23-875" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-yield-curve</span></span>
<span id="cb23-876"><a href="#cb23-876" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb23-877"><a href="#cb23-877" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Vietnamese Government Bond Yield Curve (Nelson-Siegel Fit)"</span></span>
<span id="cb23-878"><a href="#cb23-878" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-879"><a href="#cb23-879" aria-hidden="true" tabindex="-1"></a>tau_fine <span class="op">=</span> np.linspace(<span class="fl">0.25</span>, <span class="dv">30</span>, <span class="dv">200</span>)</span>
<span id="cb23-880"><a href="#cb23-880" aria-hidden="true" tabindex="-1"></a>fitted_yields <span class="op">=</span> nelson_siegel_yield(tau_fine, <span class="op">*</span>params)</span>
<span id="cb23-881"><a href="#cb23-881" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-882"><a href="#cb23-882" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">7</span>, <span class="dv">4</span>))</span>
<span id="cb23-883"><a href="#cb23-883" aria-hidden="true" tabindex="-1"></a>ax.scatter(</span>
<span id="cb23-884"><a href="#cb23-884" aria-hidden="true" tabindex="-1"></a>    maturities, yields, color<span class="op">=</span><span class="st">"#FF6B6B"</span>, s<span class="op">=</span><span class="dv">60</span>, zorder<span class="op">=</span><span class="dv">5</span>,</span>
<span id="cb23-885"><a href="#cb23-885" aria-hidden="true" tabindex="-1"></a>    label<span class="op">=</span><span class="st">"Observed yields"</span>, edgecolors<span class="op">=</span><span class="st">"white"</span></span>
<span id="cb23-886"><a href="#cb23-886" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-887"><a href="#cb23-887" aria-hidden="true" tabindex="-1"></a>ax.plot(</span>
<span id="cb23-888"><a href="#cb23-888" aria-hidden="true" tabindex="-1"></a>    tau_fine, fitted_yields, color<span class="op">=</span><span class="st">"#2C73D2"</span>, linewidth<span class="op">=</span><span class="dv">2</span>,</span>
<span id="cb23-889"><a href="#cb23-889" aria-hidden="true" tabindex="-1"></a>    label<span class="op">=</span><span class="st">"Nelson-Siegel fit"</span></span>
<span id="cb23-890"><a href="#cb23-890" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-891"><a href="#cb23-891" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Maturity (Years)"</span>)</span>
<span id="cb23-892"><a href="#cb23-892" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Yield (%)"</span>)</span>
<span id="cb23-893"><a href="#cb23-893" aria-hidden="true" tabindex="-1"></a>ax.legend(frameon<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb23-894"><a href="#cb23-894" aria-hidden="true" tabindex="-1"></a>ax.spines[<span class="st">"top"</span>].set_visible(<span class="va">False</span>)</span>
<span id="cb23-895"><a href="#cb23-895" aria-hidden="true" tabindex="-1"></a>ax.spines[<span class="st">"right"</span>].set_visible(<span class="va">False</span>)</span>
<span id="cb23-896"><a href="#cb23-896" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb23-897"><a href="#cb23-897" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb23-898"><a href="#cb23-898" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-899"><a href="#cb23-899" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Nelson-Siegel parameters:"</span>)</span>
<span id="cb23-900"><a href="#cb23-900" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  β₀ (level)     = </span><span class="sc">{</span>beta0<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb23-901"><a href="#cb23-901" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  β₁ (slope)     = </span><span class="sc">{</span>beta1<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb23-902"><a href="#cb23-902" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  β₂ (curvature) = </span><span class="sc">{</span>beta2<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb23-903"><a href="#cb23-903" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"  λ (decay)      = </span><span class="sc">{</span>lam<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb23-904"><a href="#cb23-904" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-905"><a href="#cb23-905" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-906"><a href="#cb23-906" aria-hidden="true" tabindex="-1"></a>::: callout-tip</span>
<span id="cb23-907"><a href="#cb23-907" aria-hidden="true" tabindex="-1"></a>The Nelson-Siegel yield curve allows extraction of a risk-free rate at any maturity. For monthly asset pricing, evaluate the curve at $\tau = 1/12$ (one month). For DCF valuation with a 10-year horizon, evaluate at $\tau = 10$. This maturity-matching approach is superior to using a single proxy for all purposes.</span>
<span id="cb23-908"><a href="#cb23-908" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb23-909"><a href="#cb23-909" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-910"><a href="#cb23-910" aria-hidden="true" tabindex="-1"></a><span class="fu">### Extracting the Short-Rate from the Yield Curve</span></span>
<span id="cb23-911"><a href="#cb23-911" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-914"><a href="#cb23-914" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-915"><a href="#cb23-915" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: extract-short-rate</span></span>
<span id="cb23-916"><a href="#cb23-916" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb23-917"><a href="#cb23-917" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract 1-month rate from Nelson-Siegel curve at each date</span></span>
<span id="cb23-918"><a href="#cb23-918" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> extract_ns_short_rate(govt_yields, target_maturity<span class="op">=</span><span class="dv">1</span><span class="op">/</span><span class="dv">12</span>):</span>
<span id="cb23-919"><a href="#cb23-919" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb23-920"><a href="#cb23-920" aria-hidden="true" tabindex="-1"></a><span class="co">    For each date, fit Nelson-Siegel and extract the yield</span></span>
<span id="cb23-921"><a href="#cb23-921" aria-hidden="true" tabindex="-1"></a><span class="co">    at the target maturity.</span></span>
<span id="cb23-922"><a href="#cb23-922" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb23-923"><a href="#cb23-923" aria-hidden="true" tabindex="-1"></a>    dates <span class="op">=</span> govt_yields[<span class="st">"date"</span>].unique()</span>
<span id="cb23-924"><a href="#cb23-924" aria-hidden="true" tabindex="-1"></a>    short_rates <span class="op">=</span> []</span>
<span id="cb23-925"><a href="#cb23-925" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-926"><a href="#cb23-926" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> d <span class="kw">in</span> dates:</span>
<span id="cb23-927"><a href="#cb23-927" aria-hidden="true" tabindex="-1"></a>        obs <span class="op">=</span> govt_yields[govt_yields[<span class="st">"date"</span>] <span class="op">==</span> d].sort_values(<span class="st">"maturity_years"</span>)</span>
<span id="cb23-928"><a href="#cb23-928" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">len</span>(obs) <span class="op">&lt;</span> <span class="dv">3</span>:  <span class="co"># Need at least 3 points to fit</span></span>
<span id="cb23-929"><a href="#cb23-929" aria-hidden="true" tabindex="-1"></a>            short_rates.append({<span class="st">"date"</span>: d, <span class="st">"rf_ns"</span>: np.nan})</span>
<span id="cb23-930"><a href="#cb23-930" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb23-931"><a href="#cb23-931" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-932"><a href="#cb23-932" aria-hidden="true" tabindex="-1"></a>        <span class="cf">try</span>:</span>
<span id="cb23-933"><a href="#cb23-933" aria-hidden="true" tabindex="-1"></a>            params <span class="op">=</span> fit_nelson_siegel(</span>
<span id="cb23-934"><a href="#cb23-934" aria-hidden="true" tabindex="-1"></a>                obs[<span class="st">"maturity_years"</span>].values,</span>
<span id="cb23-935"><a href="#cb23-935" aria-hidden="true" tabindex="-1"></a>                obs[<span class="st">"yield_pct"</span>].values</span>
<span id="cb23-936"><a href="#cb23-936" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb23-937"><a href="#cb23-937" aria-hidden="true" tabindex="-1"></a>            rf_ns <span class="op">=</span> nelson_siegel_yield(target_maturity, <span class="op">*</span>params)</span>
<span id="cb23-938"><a href="#cb23-938" aria-hidden="true" tabindex="-1"></a>            short_rates.append({<span class="st">"date"</span>: d, <span class="st">"rf_ns"</span>: rf_ns})</span>
<span id="cb23-939"><a href="#cb23-939" aria-hidden="true" tabindex="-1"></a>        <span class="cf">except</span> <span class="pp">Exception</span>:</span>
<span id="cb23-940"><a href="#cb23-940" aria-hidden="true" tabindex="-1"></a>            short_rates.append({<span class="st">"date"</span>: d, <span class="st">"rf_ns"</span>: np.nan})</span>
<span id="cb23-941"><a href="#cb23-941" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-942"><a href="#cb23-942" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pd.DataFrame(short_rates)</span>
<span id="cb23-943"><a href="#cb23-943" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-944"><a href="#cb23-944" aria-hidden="true" tabindex="-1"></a>ns_short_rates <span class="op">=</span> extract_ns_short_rate(govt_yields)</span>
<span id="cb23-945"><a href="#cb23-945" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-946"><a href="#cb23-946" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-947"><a href="#cb23-947" aria-hidden="true" tabindex="-1"></a><span class="fu">## Real vs. Nominal Risk-Free Rates</span></span>
<span id="cb23-948"><a href="#cb23-948" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-949"><a href="#cb23-949" aria-hidden="true" tabindex="-1"></a>For certain applications, particularly long-horizon valuation and real return analysis, the real (inflation-adjusted) risk-free rate is more appropriate than the nominal rate. The Fisher equation relates them:</span>
<span id="cb23-950"><a href="#cb23-950" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-951"><a href="#cb23-951" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb23-952"><a href="#cb23-952" aria-hidden="true" tabindex="-1"></a>r_f^{real} \approx r_f^{nominal} - \pi^{e}</span>
<span id="cb23-953"><a href="#cb23-953" aria-hidden="true" tabindex="-1"></a>$$ {#eq-fisher}</span>
<span id="cb23-954"><a href="#cb23-954" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-955"><a href="#cb23-955" aria-hidden="true" tabindex="-1"></a>where $\pi^e$ is expected inflation. In practice, we can use realized CPI inflation as a proxy for expected inflation (under the assumption of rational expectations, or as an ex-post adjustment).</span>
<span id="cb23-956"><a href="#cb23-956" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-959"><a href="#cb23-959" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-960"><a href="#cb23-960" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: compute-real-rf</span></span>
<span id="cb23-961"><a href="#cb23-961" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb23-962"><a href="#cb23-962" aria-hidden="true" tabindex="-1"></a><span class="co"># Load CPI data</span></span>
<span id="cb23-963"><a href="#cb23-963" aria-hidden="true" tabindex="-1"></a><span class="co"># Assume cpi_data contains: date, cpi_index (or inflation_mom for month-over-month)</span></span>
<span id="cb23-964"><a href="#cb23-964" aria-hidden="true" tabindex="-1"></a>cpi_data <span class="op">=</span> pd.read_parquet(<span class="st">"data/cpi_monthly.parquet"</span>)</span>
<span id="cb23-965"><a href="#cb23-965" aria-hidden="true" tabindex="-1"></a>cpi_data <span class="op">=</span> cpi_data.sort_values(<span class="st">"date"</span>)</span>
<span id="cb23-966"><a href="#cb23-966" aria-hidden="true" tabindex="-1"></a>cpi_data[<span class="st">"inflation_monthly"</span>] <span class="op">=</span> cpi_data[<span class="st">"cpi_index"</span>].pct_change()</span>
<span id="cb23-967"><a href="#cb23-967" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-968"><a href="#cb23-968" aria-hidden="true" tabindex="-1"></a>rf_real <span class="op">=</span> rf_blended[[<span class="st">"date"</span>, <span class="st">"rf_monthly"</span>]].merge(</span>
<span id="cb23-969"><a href="#cb23-969" aria-hidden="true" tabindex="-1"></a>    cpi_data[[<span class="st">"date"</span>, <span class="st">"inflation_monthly"</span>]], on<span class="op">=</span><span class="st">"date"</span>, how<span class="op">=</span><span class="st">"inner"</span></span>
<span id="cb23-970"><a href="#cb23-970" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-971"><a href="#cb23-971" aria-hidden="true" tabindex="-1"></a>rf_real[<span class="st">"rf_real"</span>] <span class="op">=</span> rf_real[<span class="st">"rf_monthly"</span>] <span class="op">-</span> rf_real[<span class="st">"inflation_monthly"</span>]</span>
<span id="cb23-972"><a href="#cb23-972" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-973"><a href="#cb23-973" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-976"><a href="#cb23-976" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-977"><a href="#cb23-977" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-real-vs-nominal</span></span>
<span id="cb23-978"><a href="#cb23-978" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb23-979"><a href="#cb23-979" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Nominal vs. Real Monthly Risk-Free Rate"</span></span>
<span id="cb23-980"><a href="#cb23-980" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-981"><a href="#cb23-981" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">4</span>))</span>
<span id="cb23-982"><a href="#cb23-982" aria-hidden="true" tabindex="-1"></a>ax.plot(</span>
<span id="cb23-983"><a href="#cb23-983" aria-hidden="true" tabindex="-1"></a>    rf_real[<span class="st">"date"</span>], rf_real[<span class="st">"rf_monthly"</span>] <span class="op">*</span> <span class="dv">100</span>,</span>
<span id="cb23-984"><a href="#cb23-984" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"#2C73D2"</span>, label<span class="op">=</span><span class="st">"Nominal"</span>, linewidth<span class="op">=</span><span class="dv">1</span></span>
<span id="cb23-985"><a href="#cb23-985" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-986"><a href="#cb23-986" aria-hidden="true" tabindex="-1"></a>ax.plot(</span>
<span id="cb23-987"><a href="#cb23-987" aria-hidden="true" tabindex="-1"></a>    rf_real[<span class="st">"date"</span>], rf_real[<span class="st">"rf_real"</span>] <span class="op">*</span> <span class="dv">100</span>,</span>
<span id="cb23-988"><a href="#cb23-988" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"#FF6B6B"</span>, label<span class="op">=</span><span class="st">"Real"</span>, linewidth<span class="op">=</span><span class="dv">1</span></span>
<span id="cb23-989"><a href="#cb23-989" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-990"><a href="#cb23-990" aria-hidden="true" tabindex="-1"></a>ax.axhline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"black"</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>, linestyle<span class="op">=</span><span class="st">"--"</span>)</span>
<span id="cb23-991"><a href="#cb23-991" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Monthly Rate (%)"</span>)</span>
<span id="cb23-992"><a href="#cb23-992" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">""</span>)</span>
<span id="cb23-993"><a href="#cb23-993" aria-hidden="true" tabindex="-1"></a>ax.legend(frameon<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb23-994"><a href="#cb23-994" aria-hidden="true" tabindex="-1"></a>ax.spines[<span class="st">"top"</span>].set_visible(<span class="va">False</span>)</span>
<span id="cb23-995"><a href="#cb23-995" aria-hidden="true" tabindex="-1"></a>ax.spines[<span class="st">"right"</span>].set_visible(<span class="va">False</span>)</span>
<span id="cb23-996"><a href="#cb23-996" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb23-997"><a href="#cb23-997" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb23-998"><a href="#cb23-998" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-999"><a href="#cb23-999" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1000"><a href="#cb23-1000" aria-hidden="true" tabindex="-1"></a>::: callout-note</span>
<span id="cb23-1001"><a href="#cb23-1001" aria-hidden="true" tabindex="-1"></a>In periods of high inflation, the real risk-free rate can be substantially negative. This has implications for real excess return computation and for interpreting the equity premium in real terms. A negative real risk-free rate implies that nominal government securities do not preserve purchasing power, which strengthens the case for equity investment from a real-return perspective.</span>
<span id="cb23-1002"><a href="#cb23-1002" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb23-1003"><a href="#cb23-1003" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1004"><a href="#cb23-1004" aria-hidden="true" tabindex="-1"></a><span class="fu">## International Comparison</span></span>
<span id="cb23-1005"><a href="#cb23-1005" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1006"><a href="#cb23-1006" aria-hidden="true" tabindex="-1"></a>It is instructive to compare Vietnam's risk-free rate environment with that of other emerging and developed markets to contextualize the magnitudes involved.</span>
<span id="cb23-1007"><a href="#cb23-1007" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1010"><a href="#cb23-1010" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-1011"><a href="#cb23-1011" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-international-comparison</span></span>
<span id="cb23-1012"><a href="#cb23-1012" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb23-1013"><a href="#cb23-1013" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Risk-Free Rate Proxies: International Comparison"</span></span>
<span id="cb23-1014"><a href="#cb23-1014" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1015"><a href="#cb23-1015" aria-hidden="true" tabindex="-1"></a>intl_comparison <span class="op">=</span> pd.DataFrame({</span>
<span id="cb23-1016"><a href="#cb23-1016" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Country"</span>: [</span>
<span id="cb23-1017"><a href="#cb23-1017" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Vietnam"</span>,</span>
<span id="cb23-1018"><a href="#cb23-1018" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Thailand"</span>,</span>
<span id="cb23-1019"><a href="#cb23-1019" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Indonesia"</span>,</span>
<span id="cb23-1020"><a href="#cb23-1020" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Philippines"</span>,</span>
<span id="cb23-1021"><a href="#cb23-1021" aria-hidden="true" tabindex="-1"></a>        <span class="st">"India"</span>,</span>
<span id="cb23-1022"><a href="#cb23-1022" aria-hidden="true" tabindex="-1"></a>        <span class="st">"South Korea"</span>,</span>
<span id="cb23-1023"><a href="#cb23-1023" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Japan"</span></span>
<span id="cb23-1024"><a href="#cb23-1024" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb23-1025"><a href="#cb23-1025" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Typical Proxy"</span>: [</span>
<span id="cb23-1026"><a href="#cb23-1026" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Interbank overnight / 1Y govt bond"</span>,</span>
<span id="cb23-1027"><a href="#cb23-1027" aria-hidden="true" tabindex="-1"></a>        <span class="st">"1-day bilateral repurchase rate"</span>,</span>
<span id="cb23-1028"><a href="#cb23-1028" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Bank Indonesia 7-day reverse repo rate"</span>,</span>
<span id="cb23-1029"><a href="#cb23-1029" aria-hidden="true" tabindex="-1"></a>        <span class="st">"91-day T-bill"</span>,</span>
<span id="cb23-1030"><a href="#cb23-1030" aria-hidden="true" tabindex="-1"></a>        <span class="st">"91-day T-bill"</span>,</span>
<span id="cb23-1031"><a href="#cb23-1031" aria-hidden="true" tabindex="-1"></a>        <span class="st">"91-day CD rate"</span>,</span>
<span id="cb23-1032"><a href="#cb23-1032" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Uncollateralized overnight call rate"</span></span>
<span id="cb23-1033"><a href="#cb23-1033" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb23-1034"><a href="#cb23-1034" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Short-Term Maturity Available"</span>: [</span>
<span id="cb23-1035"><a href="#cb23-1035" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Limited (&lt;1Y sparse)"</span>,</span>
<span id="cb23-1036"><a href="#cb23-1036" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Yes (1-day repo)"</span>,</span>
<span id="cb23-1037"><a href="#cb23-1037" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Yes (7-day, 1M)"</span>,</span>
<span id="cb23-1038"><a href="#cb23-1038" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Yes (91-day T-bill)"</span>,</span>
<span id="cb23-1039"><a href="#cb23-1039" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Yes (91-day T-bill)"</span>,</span>
<span id="cb23-1040"><a href="#cb23-1040" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Yes (91-day CD)"</span>,</span>
<span id="cb23-1041"><a href="#cb23-1041" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Yes (overnight)"</span></span>
<span id="cb23-1042"><a href="#cb23-1042" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb23-1043"><a href="#cb23-1043" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Typical Level (%, 2020-2024)"</span>: [</span>
<span id="cb23-1044"><a href="#cb23-1044" aria-hidden="true" tabindex="-1"></a>        <span class="st">"2.5-6.0"</span>,</span>
<span id="cb23-1045"><a href="#cb23-1045" aria-hidden="true" tabindex="-1"></a>        <span class="st">"0.5-2.5"</span>,</span>
<span id="cb23-1046"><a href="#cb23-1046" aria-hidden="true" tabindex="-1"></a>        <span class="st">"3.5-6.0"</span>,</span>
<span id="cb23-1047"><a href="#cb23-1047" aria-hidden="true" tabindex="-1"></a>        <span class="st">"1.5-6.0"</span>,</span>
<span id="cb23-1048"><a href="#cb23-1048" aria-hidden="true" tabindex="-1"></a>        <span class="st">"3.5-7.0"</span>,</span>
<span id="cb23-1049"><a href="#cb23-1049" aria-hidden="true" tabindex="-1"></a>        <span class="st">"1.0-3.5"</span>,</span>
<span id="cb23-1050"><a href="#cb23-1050" aria-hidden="true" tabindex="-1"></a>        <span class="st">"-0.1-0.1"</span></span>
<span id="cb23-1051"><a href="#cb23-1051" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb23-1052"><a href="#cb23-1052" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb23-1053"><a href="#cb23-1053" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1054"><a href="#cb23-1054" aria-hidden="true" tabindex="-1"></a>intl_comparison.style.hide(axis<span class="op">=</span><span class="st">"index"</span>)</span>
<span id="cb23-1055"><a href="#cb23-1055" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-1056"><a href="#cb23-1056" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1057"><a href="#cb23-1057" aria-hidden="true" tabindex="-1"></a>Vietnam's risk-free rate environment is characterized by relatively high nominal rates (reflecting inflation and growth dynamics), limited availability of very-short-maturity sovereign instruments, and greater reliance on interbank rates as the operational proxy. This is broadly similar to other ASEAN frontier markets but contrasts sharply with developed Asian markets, where deep government securities markets provide clean short-term benchmarks.</span>
<span id="cb23-1058"><a href="#cb23-1058" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1059"><a href="#cb23-1059" aria-hidden="true" tabindex="-1"></a><span class="fu">## Best Practices Checklist</span></span>
<span id="cb23-1060"><a href="#cb23-1060" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1061"><a href="#cb23-1061" aria-hidden="true" tabindex="-1"></a>Based on the analysis in this chapter, we summarize the recommended practices for risk-free rate construction in Vietnamese financial research:</span>
<span id="cb23-1062"><a href="#cb23-1062" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1065"><a href="#cb23-1065" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-1066"><a href="#cb23-1066" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-best-practices</span></span>
<span id="cb23-1067"><a href="#cb23-1067" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb23-1068"><a href="#cb23-1068" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Best Practices for Risk-Free Rate Construction"</span></span>
<span id="cb23-1069"><a href="#cb23-1069" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1070"><a href="#cb23-1070" aria-hidden="true" tabindex="-1"></a>practices <span class="op">=</span> pd.DataFrame({</span>
<span id="cb23-1071"><a href="#cb23-1071" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Practice"</span>: [</span>
<span id="cb23-1072"><a href="#cb23-1072" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Use the shortest available maturity"</span>,</span>
<span id="cb23-1073"><a href="#cb23-1073" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Match frequency to return data"</span>,</span>
<span id="cb23-1074"><a href="#cb23-1074" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Use the same compounding convention"</span>,</span>
<span id="cb23-1075"><a href="#cb23-1075" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Document the proxy and source explicitly"</span>,</span>
<span id="cb23-1076"><a href="#cb23-1076" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Report sensitivity to alternative proxies"</span>,</span>
<span id="cb23-1077"><a href="#cb23-1077" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Avoid forward-looking policy rates"</span>,</span>
<span id="cb23-1078"><a href="#cb23-1078" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Handle gaps with documented interpolation"</span>,</span>
<span id="cb23-1079"><a href="#cb23-1079" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Use Nelson-Siegel for maturity matching"</span>,</span>
<span id="cb23-1080"><a href="#cb23-1080" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Consider real rates for long-horizon analysis"</span>,</span>
<span id="cb23-1081"><a href="#cb23-1081" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Maintain a single consistent series per study"</span></span>
<span id="cb23-1082"><a href="#cb23-1082" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb23-1083"><a href="#cb23-1083" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Rationale"</span>: [</span>
<span id="cb23-1084"><a href="#cb23-1084" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Minimizes term premium contamination"</span>,</span>
<span id="cb23-1085"><a href="#cb23-1085" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Avoids compounding mismatches between rf and stock returns"</span>,</span>
<span id="cb23-1086"><a href="#cb23-1086" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Arithmetic returns require arithmetic rf conversion"</span>,</span>
<span id="cb23-1087"><a href="#cb23-1087" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Enables replication; different proxies give different results"</span>,</span>
<span id="cb23-1088"><a href="#cb23-1088" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Demonstrates robustness of conclusions"</span>,</span>
<span id="cb23-1089"><a href="#cb23-1089" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Policy rates are not investable returns"</span>,</span>
<span id="cb23-1090"><a href="#cb23-1090" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Forward-fill, then average within month; document procedure"</span>,</span>
<span id="cb23-1091"><a href="#cb23-1091" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Enables extraction of any-maturity rate from sparse data"</span>,</span>
<span id="cb23-1092"><a href="#cb23-1092" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Nominal rates overstate real compensation in high-inflation periods"</span>,</span>
<span id="cb23-1093"><a href="#cb23-1093" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Mixing proxies across periods introduces structural breaks"</span></span>
<span id="cb23-1094"><a href="#cb23-1094" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb23-1095"><a href="#cb23-1095" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb23-1096"><a href="#cb23-1096" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1097"><a href="#cb23-1097" aria-hidden="true" tabindex="-1"></a>practices.style.hide(axis<span class="op">=</span><span class="st">"index"</span>)</span>
<span id="cb23-1098"><a href="#cb23-1098" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-1099"><a href="#cb23-1099" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1100"><a href="#cb23-1100" aria-hidden="true" tabindex="-1"></a><span class="fu">## Saving the Risk-Free Rate for Downstream Use</span></span>
<span id="cb23-1101"><a href="#cb23-1101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1102"><a href="#cb23-1102" aria-hidden="true" tabindex="-1"></a>The final step is to save the constructed risk-free rate series for use in subsequent chapters.</span>
<span id="cb23-1103"><a href="#cb23-1103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1106"><a href="#cb23-1106" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb23-1107"><a href="#cb23-1107" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: save-rf-series</span></span>
<span id="cb23-1108"><a href="#cb23-1108" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb23-1109"><a href="#cb23-1109" aria-hidden="true" tabindex="-1"></a><span class="co"># Save all variants for flexibility</span></span>
<span id="cb23-1110"><a href="#cb23-1110" aria-hidden="true" tabindex="-1"></a>rf_output <span class="op">=</span> rf_blended[[<span class="st">"date"</span>, <span class="st">"rf_monthly"</span>, <span class="st">"source"</span>]].copy()</span>
<span id="cb23-1111"><a href="#cb23-1111" aria-hidden="true" tabindex="-1"></a>rf_output[<span class="st">"rf_annual_pct"</span>] <span class="op">=</span> rf_output[<span class="st">"rf_monthly"</span>] <span class="op">*</span> <span class="dv">12</span> <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb23-1112"><a href="#cb23-1112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1113"><a href="#cb23-1113" aria-hidden="true" tabindex="-1"></a><span class="co"># Also save individual proxies</span></span>
<span id="cb23-1114"><a href="#cb23-1114" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> proxy_name, proxy_df <span class="kw">in</span> rf_proxies.items():</span>
<span id="cb23-1115"><a href="#cb23-1115" aria-hidden="true" tabindex="-1"></a>    col_name <span class="op">=</span> <span class="ss">f"rf_</span><span class="sc">{</span>proxy_name<span class="sc">}</span><span class="ss">"</span></span>
<span id="cb23-1116"><a href="#cb23-1116" aria-hidden="true" tabindex="-1"></a>    rf_output <span class="op">=</span> rf_output.merge(</span>
<span id="cb23-1117"><a href="#cb23-1117" aria-hidden="true" tabindex="-1"></a>        proxy_df[[<span class="st">"date"</span>, <span class="st">"rf_monthly"</span>]].rename(</span>
<span id="cb23-1118"><a href="#cb23-1118" aria-hidden="true" tabindex="-1"></a>            columns<span class="op">=</span>{<span class="st">"rf_monthly"</span>: col_name}</span>
<span id="cb23-1119"><a href="#cb23-1119" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb23-1120"><a href="#cb23-1120" aria-hidden="true" tabindex="-1"></a>        on<span class="op">=</span><span class="st">"date"</span>,</span>
<span id="cb23-1121"><a href="#cb23-1121" aria-hidden="true" tabindex="-1"></a>        how<span class="op">=</span><span class="st">"left"</span></span>
<span id="cb23-1122"><a href="#cb23-1122" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb23-1123"><a href="#cb23-1123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1124"><a href="#cb23-1124" aria-hidden="true" tabindex="-1"></a><span class="co"># Save to parquet for use in later chapters</span></span>
<span id="cb23-1125"><a href="#cb23-1125" aria-hidden="true" tabindex="-1"></a>rf_output.to_parquet(<span class="st">"data/risk_free_rate.parquet"</span>, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb23-1126"><a href="#cb23-1126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1127"><a href="#cb23-1127" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Risk-free rate series saved: </span><span class="sc">{</span><span class="bu">len</span>(rf_output)<span class="sc">}</span><span class="ss"> months"</span>)</span>
<span id="cb23-1128"><a href="#cb23-1128" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Date range: </span><span class="sc">{</span>rf_output[<span class="st">'date'</span>]<span class="sc">.</span><span class="bu">min</span>()<span class="sc">}</span><span class="ss"> to </span><span class="sc">{</span>rf_output[<span class="st">'date'</span>]<span class="sc">.</span><span class="bu">max</span>()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb23-1129"><a href="#cb23-1129" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Columns: </span><span class="sc">{</span><span class="bu">list</span>(rf_output.columns)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb23-1130"><a href="#cb23-1130" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-1131"><a href="#cb23-1131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1132"><a href="#cb23-1132" aria-hidden="true" tabindex="-1"></a>::: callout-tip</span>
<span id="cb23-1133"><a href="#cb23-1133" aria-hidden="true" tabindex="-1"></a>By saving the risk-free rate as a separate, well-documented file, all downstream chapters can merge it consistently. This avoids the common pitfall of reconstructing the risk-free rate differently in different analyses within the same study.</span>
<span id="cb23-1134"><a href="#cb23-1134" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb23-1135"><a href="#cb23-1135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1136"><a href="#cb23-1136" aria-hidden="true" tabindex="-1"></a><span class="fu">## Summary</span></span>
<span id="cb23-1137"><a href="#cb23-1137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1138"><a href="#cb23-1138" aria-hidden="true" tabindex="-1"></a>This chapter has established that risk-free rate construction is a first-order modeling decision in Vietnamese financial research, not a technical afterthought. The key takeaways are:</span>
<span id="cb23-1139"><a href="#cb23-1139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1140"><a href="#cb23-1140" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>**No perfect proxy exists** in Vietnam. The interbank overnight rate, 1-year government bond yield, and SBV policy rate each have distinct strengths and limitations. A blended series using a documented priority hierarchy provides the most robust baseline.</span>
<span id="cb23-1141"><a href="#cb23-1141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1142"><a href="#cb23-1142" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>**The choice of proxy matters quantitatively**. Different proxies can shift the estimated equity premium by 50-200 basis points annually, alter portfolio alphas, and change DCF terminal values by 10-30%.</span>
<span id="cb23-1143"><a href="#cb23-1143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1144"><a href="#cb23-1144" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>**Frequency alignment and compounding conventions** must be handled with care. Converting annualized rates to monthly requires specifying the compounding convention. Gaps in the data require documented interpolation.</span>
<span id="cb23-1145"><a href="#cb23-1145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1146"><a href="#cb23-1146" aria-hidden="true" tabindex="-1"></a><span class="ss">4.  </span>**The Nelson-Siegel yield curve model** enables the extraction of any-maturity risk-free rate from sparse government bond data, which is particularly valuable for maturity-matched discount rate estimation.</span>
<span id="cb23-1147"><a href="#cb23-1147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1148"><a href="#cb23-1148" aria-hidden="true" tabindex="-1"></a><span class="ss">5.  </span>**Sensitivity analysis is mandatory**. Any study that reports results under a single risk-free proxy without reporting robustness to alternatives has an unquantified source of specification uncertainty.</span>
<span id="cb23-1149"><a href="#cb23-1149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1150"><a href="#cb23-1150" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- ## Exercises</span></span>
<span id="cb23-1151"><a href="#cb23-1151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1152"><a href="#cb23-1152" aria-hidden="true" tabindex="-1"></a><span class="co">1.  **Proxy substitution test**: Re-estimate the Fama-French three-factor model for the Vietnamese market using each of the three risk-free proxies. Report the market premium, SMB, and HML under each specification. Are the cross-sectional patterns in factor loadings sensitive to the proxy choice?</span></span>
<span id="cb23-1153"><a href="#cb23-1153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1154"><a href="#cb23-1154" aria-hidden="true" tabindex="-1"></a><span class="co">2.  **Breakpoint analysis**: Identify structural breaks in the interbank overnight rate series using the @bai2003critical sequential break detection procedure. Do these breaks correspond to known monetary policy regime changes (e.g., SBV rate adjustments, regulatory changes)?</span></span>
<span id="cb23-1155"><a href="#cb23-1155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1156"><a href="#cb23-1156" aria-hidden="true" tabindex="-1"></a><span class="co">3.  **Inflation-adjusted equity premium**: Compute the real equity premium by subtracting realized CPI inflation from both the market return and the nominal risk-free rate. Compare the Sharpe ratio of the market portfolio in nominal vs. real terms.</span></span>
<span id="cb23-1157"><a href="#cb23-1157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1158"><a href="#cb23-1158" aria-hidden="true" tabindex="-1"></a><span class="co">4.  **Yield curve dynamics**: Estimate the Nelson-Siegel model at monthly frequency and track the time series of $\beta_0$ (level), $\beta_1$ (slope), and $\beta_2$ (curvature). Do these factors predict future stock market returns or macroeconomic variables, following @Ang2006 @ang2006does?</span></span>
<span id="cb23-1159"><a href="#cb23-1159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1160"><a href="#cb23-1160" aria-hidden="true" tabindex="-1"></a><span class="co">5.  **Currency-adjusted risk-free rate**: For foreign investors, the relevant risk-free rate includes currency hedging costs. Construct a USD-hedged risk-free rate using the VND/USD forward premium (covered interest parity) and compare it to the local-currency risk-free rate. How does this affect the equity premium from a foreign investor's perspective?</span></span>
<span id="cb23-1161"><a href="#cb23-1161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-1162"><a href="#cb23-1162" aria-hidden="true" tabindex="-1"></a><span class="co">6.  **Deposit rate ceiling effects**: During periods when the SBV imposes binding deposit rate ceilings, the observed deposit rate may be below the market-clearing rate. Identify such periods and test whether the deposit-rate-based risk-free proxy produces systematically different excess returns compared to the interbank rate during ceiling-binding vs. non-binding periods. --&gt;</span></span>
</code></pre></div><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p><span id="copyright"></span> Mike. All rights reserved.</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/mikenguyen13/tidy_finance_vn/edit/main/04_risk_free_rate_construction.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/mikenguyen13/tidy_finance_vn/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>