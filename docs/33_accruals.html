<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>26&nbsp; Accruals, Earnings Persistence, and Market Efficiency â€“ Applying Tidy Finance with Python to Vietnam</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./34_earning_management.html" rel="next">
<link href="./32_info_earnings.html" rel="prev">
<link href="./favicon.ico" rel="icon">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-b758ccaa5987ceb1b75504551e579abf.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-ed993afc62d41eaa40b4794cd0abf8eb.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark-72097b8a1e3a3da1d7b8bbfaaf81c3d8.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="site_libs/bootstrap/bootstrap-ed993afc62d41eaa40b4794cd0abf8eb.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js" integrity="sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="26&nbsp; Accruals, Earnings Persistence, and Market Efficiency â€“ Applying Tidy Finance with Python to Vietnam">
<meta property="og:description" content="">
<meta property="og:image" content="https://github.com/mikenguyen13/tidy_finance_vn/33_accruals_files/figure-html/fig-sales-sim-output-1.png">
<meta property="og:site_name" content="Applying Tidy Finance with Python to Vietnam">
<meta property="og:image:height" content="1458">
<meta property="og:image:width" content="2060">
<meta name="twitter:title" content="26&nbsp; Accruals, Earnings Persistence, and Market Efficiency â€“ Applying Tidy Finance with Python to Vietnam">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="https://github.com/mikenguyen13/tidy_finance_vn/33_accruals_files/figure-html/fig-sales-sim-output-1.png">
<meta name="twitter:image-height" content="1458">
<meta name="twitter:image-width" content="2060">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar floating nav-fixed quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Applying Tidy Finance with Python to Vietnam</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" aria-current="page"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://mikenguyen13.github.io/tidy_finance_vn/"> 
<span class="menu-text">ðŸ“˜ English Book</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://YOUR-ORG.github.io/tidy-finance-vietnam-python-vi/"> 
<span class="menu-text">ðŸ“— SÃ¡ch Tiáº¿ng Viá»‡t</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
    <a href="https://github.com/mikenguyen13/tidy_finance_vn" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./30_financial_statement_analysis.html">Firm Fundamentals, Valuation, and Corporate Signals</a></li><li class="breadcrumb-item"><a href="./33_accruals.html"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Accruals, Earnings Persistence, and Market Efficiency</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Vietnam Financial Markets, Institutions, and Data</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00_institutional_background.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Institutional Background and Market Structure of Vietnamâ€™s Equity Market</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01_accessing_and_managing_financial_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Accessing and Managing VN Financial Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02_datacore_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Datacore Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_market_microstructure.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Market Microstructure in Vietnam</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04_risk_free_rate_construction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Risk-Free Rate Construction in Vietnam</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05_working_with_stock_returns.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Constructing and Analyzing Equity Return Series</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06_compound_return.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Compound Returns</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Portfolio Construction, Risk, and Empirical Mechanics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10_modern_portfolio_theory.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Modern Portfolio Theory</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11_univariate_portfolio_sort.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Univariate Portfolio Sorts</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12_size_sorts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Size Sorts</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13_value_bivariate.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Value and Bivariate Sorts</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14_portfolio_weighting_and_rebalancing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Portfolio Weighting and Rebalancing</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15_missing_data_and_survivorship.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Missing Data and Survivorship Bias</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16_liquidity_and_turnover_measures.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Liquidity and Turnover Measures</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17_beta_estimation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Beta Estimation</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Asset Pricing Models and Cross-Sectional Tests</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./20_capm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">The Capital Asset Pricing Model</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./21_fama_french.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Fama-French Factors</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./22_momentum.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Momentum Strategies</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./23_factor_construction_principles.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Factor Construction Principles</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./24_fama_macbeth.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Fama-MacBeth Regressions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./25_factor_zoo_and_multiple_testing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Factor Zoo and Multiple Testing</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./26_time_series_vs_cross_section.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Time-Series vs.&nbsp;Cross-Sectional Factor Tests</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Firm Fundamentals, Valuation, and Corporate Signals</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./30_financial_statement_analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Financial Statement Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./31_discounted_cash_flow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Discounted Cash Flow Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./32_info_earnings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Information Content of Earnings Announcements</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./33_accruals.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Accruals, Earnings Persistence, and Market Efficiency</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./34_earning_management.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Earnings Management: Detection and Measurement</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./35_pe_ratio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">P/E Ratio</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./36_valuation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Firm Valuation, Financial Distress, and Company Maturity</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./37_disclosure_quality_and_timing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Disclosure Quality and Timing</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./38_sue.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Standardized Earnings Surprises (SUE)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./39_divop.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Measuring Divergence of Investor Opinion</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Ownership, Market Frictions, and International Exposure</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./50_institutional_ownership.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Institutional Ownership Analytics in Vietnam</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./52_institutional_trade_flow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Institutional Trades, Flows, and Turnover Ratios</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./53_governance.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">Corporate Governance</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./54_return_gaps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">36</span>&nbsp; <span class="chapter-title">Return Gap: Measuring Unobserved Actions of Fund Managers</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./55_price_limits_and_volatility.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">37</span>&nbsp; <span class="chapter-title">Price Limits and Volatility</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./56_market_integration_and_segmentation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">38</span>&nbsp; <span class="chapter-title">Market Integration and Segmentation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./57_exchange_rate.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">39</span>&nbsp; <span class="chapter-title">Exchange Rate Dynamics</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Advanced Financial Modeling</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./60_event_studies.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">40</span>&nbsp; <span class="chapter-title">Event Studies in Finance</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./61_tail_risk_extreme_events.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">41</span>&nbsp; <span class="chapter-title">Tail Risk and Extreme Events</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./62_corporate_finance_estimators.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">42</span>&nbsp; <span class="chapter-title">Corporate Finance Estimators and Identification</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./63_structural_models_finance.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">43</span>&nbsp; <span class="chapter-title">Structural Models in Finance</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true">
 <span class="menu-text">Alternative Data and AI for Finance</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./70_textual.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">44</span>&nbsp; <span class="chapter-title">Textual Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./71_image.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">45</span>&nbsp; <span class="chapter-title">Image and Visual Data in Finance</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./73_networks_graphs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">46</span>&nbsp; <span class="chapter-title">Networks and Graphs in Finance</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./74_multimodel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">47</span>&nbsp; <span class="chapter-title">Multimodal Models in Finance</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./99_conclusion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">48</span>&nbsp; <span class="chapter-title">Conclusion</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="-1">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#why-vietnam" id="toc-why-vietnam" class="nav-link active" data-scroll-target="#why-vietnam"><span class="header-section-number">26.0.1</span> Why Vietnam?</a></li>
  <li><a href="#sec-accruals-measuring" id="toc-sec-accruals-measuring" class="nav-link" data-scroll-target="#sec-accruals-measuring"><span class="header-section-number">26.1</span> Measuring Accruals</a>
  <ul class="collapse">
  <li><a href="#the-balance-sheet-approach" id="toc-the-balance-sheet-approach" class="nav-link" data-scroll-target="#the-balance-sheet-approach"><span class="header-section-number">26.1.1</span> The Balance Sheet Approach</a></li>
  <li><a href="#the-cash-flow-statement-approach" id="toc-the-cash-flow-statement-approach" class="nav-link" data-scroll-target="#the-cash-flow-statement-approach"><span class="header-section-number">26.1.2</span> The Cash Flow Statement Approach</a></li>
  <li><a href="#vietnamese-context" id="toc-vietnamese-context" class="nav-link" data-scroll-target="#vietnamese-context"><span class="header-section-number">26.1.3</span> Vietnamese Context</a></li>
  </ul></li>
  <li><a href="#sec-accruals-simulation" id="toc-sec-accruals-simulation" class="nav-link" data-scroll-target="#sec-accruals-simulation"><span class="header-section-number">26.2</span> Simulation Analysis</a>
  <ul class="collapse">
  <li><a href="#the-model" id="toc-the-model" class="nav-link" data-scroll-target="#the-model"><span class="header-section-number">26.2.1</span> The Model</a></li>
  <li><a href="#generating-a-single-firm" id="toc-generating-a-single-firm" class="nav-link" data-scroll-target="#generating-a-single-firm"><span class="header-section-number">26.2.2</span> Generating a Single Firm</a></li>
  <li><a href="#cross-sectional-simulation-persistence-and-estimation-error" id="toc-cross-sectional-simulation-persistence-and-estimation-error" class="nav-link" data-scroll-target="#cross-sectional-simulation-persistence-and-estimation-error"><span class="header-section-number">26.2.3</span> Cross-Sectional Simulation: Persistence and Estimation Error</a></li>
  <li><a href="#decomposing-persistence-by-earnings-component" id="toc-decomposing-persistence-by-earnings-component" class="nav-link" data-scroll-target="#decomposing-persistence-by-earnings-component"><span class="header-section-number">26.2.4</span> Decomposing Persistence by Earnings Component</a></li>
  </ul></li>
  <li><a href="#sec-accruals-persistence" id="toc-sec-accruals-persistence" class="nav-link" data-scroll-target="#sec-accruals-persistence"><span class="header-section-number">26.3</span> Earnings Persistence in Vietnamese Data</a>
  <ul class="collapse">
  <li><a href="#data-preparation" id="toc-data-preparation" class="nav-link" data-scroll-target="#data-preparation"><span class="header-section-number">26.3.1</span> Data Preparation</a></li>
  <li><a href="#simulated-vietnamese-style-data-for-demonstration" id="toc-simulated-vietnamese-style-data-for-demonstration" class="nav-link" data-scroll-target="#simulated-vietnamese-style-data-for-demonstration"><span class="header-section-number">26.3.2</span> Simulated Vietnamese-Style Data for Demonstration</a></li>
  <li><a href="#descriptive-statistics-by-accrual-decile" id="toc-descriptive-statistics-by-accrual-decile" class="nav-link" data-scroll-target="#descriptive-statistics-by-accrual-decile"><span class="header-section-number">26.3.3</span> Descriptive Statistics by Accrual Decile</a></li>
  <li><a href="#persistence-regressions" id="toc-persistence-regressions" class="nav-link" data-scroll-target="#persistence-regressions"><span class="header-section-number">26.3.4</span> Persistence Regressions</a></li>
  <li><a href="#industry-level-persistence" id="toc-industry-level-persistence" class="nav-link" data-scroll-target="#industry-level-persistence"><span class="header-section-number">26.3.5</span> Industry-Level Persistence</a></li>
  <li><a href="#persistence-visualization" id="toc-persistence-visualization" class="nav-link" data-scroll-target="#persistence-visualization"><span class="header-section-number">26.3.6</span> Persistence Visualization</a></li>
  </ul></li>
  <li><a href="#sec-accruals-mispricing" id="toc-sec-accruals-mispricing" class="nav-link" data-scroll-target="#sec-accruals-mispricing"><span class="header-section-number">26.4</span> Market Pricing of Earnings Components</a>
  <ul class="collapse">
  <li><a href="#theoretical-framework" id="toc-theoretical-framework" class="nav-link" data-scroll-target="#theoretical-framework"><span class="header-section-number">26.4.1</span> Theoretical Framework</a></li>
  <li><a href="#the-abelmishkin-test" id="toc-the-abelmishkin-test" class="nav-link" data-scroll-target="#the-abelmishkin-test"><span class="header-section-number">26.4.2</span> The Abelâ€“Mishkin Test</a></li>
  <li><a href="#interpretation-for-vietnam" id="toc-interpretation-for-vietnam" class="nav-link" data-scroll-target="#interpretation-for-vietnam"><span class="header-section-number">26.4.3</span> Interpretation for Vietnam</a></li>
  </ul></li>
  <li><a href="#sec-accruals-anomaly" id="toc-sec-accruals-anomaly" class="nav-link" data-scroll-target="#sec-accruals-anomaly"><span class="header-section-number">26.5</span> The Accrual Anomaly</a>
  <ul class="collapse">
  <li><a href="#portfolio-returns-by-accrual-decile" id="toc-portfolio-returns-by-accrual-decile" class="nav-link" data-scroll-target="#portfolio-returns-by-accrual-decile"><span class="header-section-number">26.5.1</span> Portfolio Returns by Accrual Decile</a></li>
  <li><a href="#visualizing-the-anomaly" id="toc-visualizing-the-anomaly" class="nav-link" data-scroll-target="#visualizing-the-anomaly"><span class="header-section-number">26.5.2</span> Visualizing the Anomaly</a></li>
  <li><a href="#time-series-stability" id="toc-time-series-stability" class="nav-link" data-scroll-target="#time-series-stability"><span class="header-section-number">26.5.3</span> Time-Series Stability</a></li>
  </ul></li>
  <li><a href="#sec-accruals-discussion" id="toc-sec-accruals-discussion" class="nav-link" data-scroll-target="#sec-accruals-discussion"><span class="header-section-number">26.6</span> Discussion and Contemporary Perspectives</a>
  <ul class="collapse">
  <li><a href="#alternative-explanations" id="toc-alternative-explanations" class="nav-link" data-scroll-target="#alternative-explanations"><span class="header-section-number">26.6.1</span> Alternative Explanations</a></li>
  <li><a href="#state-owned-enterprises-and-accrual-quality" id="toc-state-owned-enterprises-and-accrual-quality" class="nav-link" data-scroll-target="#state-owned-enterprises-and-accrual-quality"><span class="header-section-number">26.6.2</span> State-Owned Enterprises and Accrual Quality</a></li>
  <li><a href="#methodological-considerations" id="toc-methodological-considerations" class="nav-link" data-scroll-target="#methodological-considerations"><span class="header-section-number">26.6.3</span> Methodological Considerations</a></li>
  </ul></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary"><span class="header-section-number">26.7</span> Summary</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/mikenguyen13/tidy_finance_vn/edit/main/33_accruals.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/mikenguyen13/tidy_finance_vn/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">


<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./30_financial_statement_analysis.html">Firm Fundamentals, Valuation, and Corporate Signals</a></li><li class="breadcrumb-item"><a href="./33_accruals.html"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Accruals, Earnings Persistence, and Market Efficiency</span></a></li></ol></nav>
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Accruals, Earnings Persistence, and Market Efficiency</span></h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div id="setup" class="cell" data-message="false" data-execution_count="2">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.ticker <span class="im">as</span> mticker</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.formula.api <span class="im">as</span> smf</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy <span class="im">import</span> stats</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> itertools <span class="im">import</span> product</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> warnings</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>warnings.filterwarnings(<span class="st">"ignore"</span>)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>plt.rcParams.update({</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"figure.dpi"</span>: <span class="dv">150</span>,</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">"axes.spines.top"</span>: <span class="va">False</span>,</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"axes.spines.right"</span>: <span class="va">False</span>,</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">"font.size"</span>: <span class="dv">11</span>,</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Accrual accounting is the foundation of modern financial reporting. Under accrual principles, revenues are recognized when earned and expenses when incurred, regardless of when cash changes hands. This timing wedge between economic events and cash realization generates <strong>accruals</strong> (i.e., the non-cash component of reported earnings). Formally, we define total accruals as:</p>
<p><span id="eq-accruals-def"><span class="math display">\[
\text{Accruals}_t = \text{Earnings}_t - \text{Cash Flow from Operations}_t
\tag{26.1}\]</span></span></p>
<p>The distinction between accruals and cash flows matters because these two components of earnings exhibit markedly different statistical properties. Cash flows from operations tend to be more persistent and harder for managers to manipulate, while accruals are inherently more transient and subject to managerial discretion through estimates, assumptions, and timing choices <span class="citation" data-cites="dechow2010understanding">(<a href="references.html#ref-dechow2010understanding" role="doc-biblioref">Dechow, Ge, and Schrand 2010</a>)</span>.</p>
<p><span class="citation" data-cites="sloan1996stock">Sloan (<a href="references.html#ref-sloan1996stock" role="doc-biblioref">1996</a>)</span> demonstrated two important empirical regularities in U.S. data:</p>
<ol type="1">
<li>The accrual component of earnings is <em>less persistent</em> than the cash flow component in predicting future earnings, and</li>
<li>Equity prices behave as if investors fail to distinguish between these components, treating accruals as having the same persistence as cash flows. This second finding implies a predictable pattern in stock returns (i.e., firms with high accruals earn lower subsequent returns, and vice versaâ€”known as the <strong>accrual anomaly</strong>).</li>
</ol>
<section id="why-vietnam" class="level3" data-number="26.0.1">
<h3 data-number="26.0.1" class="anchored" data-anchor-id="why-vietnam"><span class="header-section-number">26.0.1</span> Why Vietnam?</h3>
<p>Vietnamâ€™s equity markets provide a compelling laboratory for studying accrual dynamics for several reasons:</p>
<ol type="1">
<li><p><strong>Accounting standards in transition.</strong> Vietnam operates under Vietnamese Accounting Standards (VAS), which are broadly based on older International Accounting Standards but have not yet fully converged with IFRS. VAS retains certain rules-based provisions that may generate different accrual patterns compared to the principles-based frameworks in developed markets.</p></li>
<li><p><strong>State-owned enterprise (SOE) influence.</strong> A significant fraction of listed firms on HOSE and HNX are former SOEs or remain partially state-owned. These firms may face different incentives regarding accrual management (political rather than purely economic), introducing heterogeneity absent in the original U.S. studies.</p></li>
<li><p><strong>Market maturity and investor sophistication.</strong> Vietnamâ€™s stock market, with HOSE established in 2000 and HNX in 2005, is still developing. Retail investors dominate trading volume, and institutional infrastructure (analyst coverage, short-selling constraints, information intermediaries) is less developed than in the U.S. This environment may amplify or attenuate the mispricing patterns documented in developed markets.</p></li>
<li><p><strong>Daily price limits.</strong> Both HOSE (<span class="math inline">\(\pm\)</span> 7%) and HNX (<span class="math inline">\(\pm\)</span> 10%) impose daily price limits, which can impede price discovery and create path dependencies in return measurement that have no analogue in the U.S. context.</p></li>
<li><p><strong>Emerging market growth dynamics.</strong> High-growth economies generate different accrual profilesâ€”rapid revenue growth mechanically produces large working capital accruals even absent any managerial manipulation <span class="citation" data-cites="fairfield2003accrued">(<a href="references.html#ref-fairfield2003accrued" role="doc-biblioref">Fairfield, Whisenant, and Yohn 2003</a>)</span>.</p></li>
</ol>
</section>
<section id="sec-accruals-measuring" class="level2" data-number="26.1">
<h2 data-number="26.1" class="anchored" data-anchor-id="sec-accruals-measuring"><span class="header-section-number">26.1</span> Measuring Accruals</h2>
<section id="the-balance-sheet-approach" class="level3" data-number="26.1.1">
<h3 data-number="26.1.1" class="anchored" data-anchor-id="the-balance-sheet-approach"><span class="header-section-number">26.1.1</span> The Balance Sheet Approach</h3>
<p>The traditional approach to measuring accruals, used in much of the early literature, constructs total accruals from successive balance sheet snapshots. Define the following balance sheet items for firm <span class="math inline">\(i\)</span> in period <span class="math inline">\(t\)</span> (<a href="#tbl-accruals-bs-items" class="quarto-xref">Table&nbsp;<span>26.1</span></a>).</p>
<div id="tbl-accruals-bs-items" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-accruals-bs-items-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;26.1: Key balance sheet items for accrual measurement
</figcaption>
<div aria-describedby="tbl-accruals-bs-items-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 26%">
<col style="width: 34%">
<col style="width: 38%">
</colgroup>
<thead>
<tr class="header">
<th>Symbol</th>
<th>Description</th>
<th>VAS Equivalent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(\Delta CA_{i,t}\)</span></td>
<td>Change in current assets</td>
<td>Thay Ä‘á»•i tÃ i sáº£n ngáº¯n háº¡n</td>
</tr>
<tr class="even">
<td><span class="math inline">\(\Delta Cash_{i,t}\)</span></td>
<td>Change in cash and equivalents</td>
<td>Thay Ä‘á»•i tiá»n vÃ  tÆ°Æ¡ng Ä‘Æ°Æ¡ng tiá»n</td>
</tr>
<tr class="odd">
<td><span class="math inline">\(\Delta CL_{i,t}\)</span></td>
<td>Change in current liabilities</td>
<td>Thay Ä‘á»•i ná»£ ngáº¯n háº¡n</td>
</tr>
<tr class="even">
<td><span class="math inline">\(\Delta STD_{i,t}\)</span></td>
<td>Change in short-term debt</td>
<td>Thay Ä‘á»•i vay ngáº¯n háº¡n</td>
</tr>
<tr class="odd">
<td><span class="math inline">\(\Delta TP_{i,t}\)</span></td>
<td>Change in taxes payable</td>
<td>Thay Ä‘á»•i thuáº¿ pháº£i ná»™p</td>
</tr>
<tr class="even">
<td><span class="math inline">\(Dep_{i,t}\)</span></td>
<td>Depreciation and amortization</td>
<td>Kháº¥u hao TSCÄ</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>Total accruals under the balance sheet approach are:</p>
<p><span id="eq-bs-accruals"><span class="math display">\[
ACC^{BS}_{i,t} = (\Delta CA_{i,t} - \Delta Cash_{i,t})
  - (\Delta CL_{i,t} - \Delta STD_{i,t} - \Delta TP_{i,t})
  - Dep_{i,t}
\tag{26.2}\]</span></span></p>
<p>The intuition behind <a href="#eq-bs-accruals" class="quarto-xref">Equation&nbsp;<span>26.2</span></a> is straightforward. Changes in non-cash current assets (such as accounts receivable and inventory) represent revenues recognized or expenses deferred without corresponding cash flows. Changes in operating current liabilities (excluding debt) capture expenses recognized without cash outflows. Short-term debt and taxes payable are excluded because they relate to financing and tax timing rather than operating accruals. Depreciation is subtracted as a non-cash charge against earnings.</p>
<p>All variables are typically scaled by average total assets to control for firm size:</p>
<p><span id="eq-scaled-accruals"><span class="math display">\[
acc_{i,t} = \frac{ACC^{BS}_{i,t}}{(\text{Assets}_{i,t} + \text{Assets}_{i,t-1})/2}
\tag{26.3}\]</span></span></p>
</section>
<section id="the-cash-flow-statement-approach" class="level3" data-number="26.1.2">
<h3 data-number="26.1.2" class="anchored" data-anchor-id="the-cash-flow-statement-approach"><span class="header-section-number">26.1.2</span> The Cash Flow Statement Approach</h3>
<p><span class="citation" data-cites="hribar2002errors">Hribar and Collins (<a href="references.html#ref-hribar2002errors" role="doc-biblioref">2002</a>)</span> demonstrated that the balance sheet approach introduces measurement error because non-operating events, such as mergers, acquisitions, divestitures, and foreign currency translations, affect current asset and liability balances without corresponding earnings impacts. They advocate a simpler and more accurate approach:</p>
<p><span id="eq-cf-accruals"><span class="math display">\[
ACC^{CF}_{i,t} = \text{Earnings}_{i,t} - \text{CFO}_{i,t}
\tag{26.4}\]</span></span></p>
<p>where <span class="math inline">\(\text{CFO}_{i,t}\)</span> is cash flow from operations reported directly on the cash flow statement.</p>
</section>
<section id="vietnamese-context" class="level3" data-number="26.1.3">
<h3 data-number="26.1.3" class="anchored" data-anchor-id="vietnamese-context"><span class="header-section-number">26.1.3</span> Vietnamese Context</h3>
<p>For Vietnamese listed firms, the cash flow statement approach is generally preferable, but practitioners should be aware of several data considerations:</p>
<ul>
<li><p><strong>Circular 200/2014/TT-BTC</strong> standardizes the chart of accounts and financial statement templates. Cash flow from operations is reported using the <em>indirect method</em> by most firms (starting from net income and adjusting for non-cash items), though some use the direct method.</p></li>
<li><p><strong>VAS 24</strong> (Cash Flow Statements) governs disclosure. Unlike IFRS, VAS treatment of interest paid and dividends received in the operating section is less flexible, potentially affecting comparability.</p></li>
</ul>
<p>For the remainder of this chapter, we use the balance sheet approach, where demonstrated on simulated data (for pedagogical transparency) and the cash flow statement approach on actual firm data where available.</p>
</section>
</section>
<section id="sec-accruals-simulation" class="level2" data-number="26.2">
<h2 data-number="26.2" class="anchored" data-anchor-id="sec-accruals-simulation"><span class="header-section-number">26.2</span> Simulation Analysis</h2>
<p>Before turning to Vietnamese market data, we construct a simulation to build economic intuition for <em>why</em> accrual persistence differs from cash flow persistence, and what role estimation error in accrual accounting plays in generating this difference.</p>
<section id="the-model" class="level3" data-number="26.2.1">
<h3 data-number="26.2.1" class="anchored" data-anchor-id="the-model"><span class="header-section-number">26.2.1</span> The Model</h3>
<p>Consider a simplified firm that:</p>
<ul>
<li>Sells goods on credit at a constant gross margin <span class="math inline">\(\mu\)</span></li>
<li>Follows an AR(1) sales process: <span class="math inline">\(S_t = \bar{S} + \rho(S_{t-1} - \bar{S}) + \varepsilon_t\)</span>, where <span class="math inline">\(\varepsilon_t \sim N(0, \sigma^2_S)\)</span></li>
<li>Collects receivables in the following period, with a true default rate <span class="math inline">\(\delta\)</span></li>
<li>Records an allowance for doubtful debts as a fraction <span class="math inline">\(\alpha\)</span> of current sales</li>
<li>Pays dividends equal to 100% of net income</li>
</ul>
<p>The key parameter of interest is <span class="math inline">\(\alpha\)</span>, the managerial estimate of bad debts. When <span class="math inline">\(\alpha = \delta\)</span> (the true default rate), the accounting system is unbiased. When <span class="math inline">\(\alpha \neq \delta\)</span>, accruals contain estimation error that affects persistence.</p>
<div id="sim-function" class="cell" data-execution_count="3">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> simulate_firm(</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    alpha: <span class="bu">float</span> <span class="op">=</span> <span class="fl">0.03</span>,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    n_years: <span class="bu">int</span> <span class="op">=</span> <span class="dv">20</span>,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    delta: <span class="bu">float</span> <span class="op">=</span> <span class="fl">0.03</span>,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    gross_margin: <span class="bu">float</span> <span class="op">=</span> <span class="fl">0.80</span>,</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    mean_sales: <span class="bu">float</span> <span class="op">=</span> <span class="fl">1000.0</span>,</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    sd_sales: <span class="bu">float</span> <span class="op">=</span> <span class="fl">100.0</span>,</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    rho: <span class="bu">float</span> <span class="op">=</span> <span class="fl">0.9</span>,</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    beg_cash: <span class="bu">float</span> <span class="op">=</span> <span class="fl">1500.0</span>,</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    rng: np.random.Generator <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> pd.DataFrame:</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="co">    Simulate financial statements for a single firm.</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="co">    alpha : float</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="co">        Managerial estimate of doubtful debt rate (allowance parameter).</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a><span class="co">    n_years : int</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="co">        Number of years to simulate.</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="co">    delta : float</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="co">        True economic default rate on receivables.</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a><span class="co">    gross_margin : float</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a><span class="co">        Gross margin on sales.</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a><span class="co">    mean_sales : float</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a><span class="co">        Long-run mean of the AR(1) sales process.</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a><span class="co">    sd_sales : float</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a><span class="co">        Standard deviation of the sales innovation.</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a><span class="co">    rho : float</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a><span class="co">        AR(1) persistence parameter for sales.</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a><span class="co">    beg_cash : float</span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a><span class="co">        Beginning cash balance.</span></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a><span class="co">    rng : numpy Generator</span></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a><span class="co">        Random number generator for reproducibility.</span></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a><span class="co">        </span></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns</span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a><span class="co">    -------</span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a><span class="co">    pd.DataFrame</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a><span class="co">        Simulated financial statement data.</span></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> rng <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>        rng <span class="op">=</span> np.random.default_rng(<span class="dv">42</span>)</span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Generate AR(1) sales</span></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>    errors <span class="op">=</span> rng.normal(<span class="dv">0</span>, sd_sales, n_years)</span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>    sales <span class="op">=</span> np.zeros(n_years)</span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>    sales[<span class="dv">0</span>] <span class="op">=</span> mean_sales <span class="op">+</span> errors[<span class="dv">0</span>]</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> t <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, n_years):</span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>        sales[t] <span class="op">=</span> mean_sales <span class="op">+</span> rho <span class="op">*</span> (sales[t <span class="op">-</span> <span class="dv">1</span>] <span class="op">-</span> mean_sales) <span class="op">+</span> errors[t]</span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Allocate arrays</span></span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>    cogs <span class="op">=</span> (<span class="dv">1</span> <span class="op">-</span> gross_margin) <span class="op">*</span> sales</span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>    ar <span class="op">=</span> sales.copy()                     <span class="co"># all sales on credit</span></span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>    allowance <span class="op">=</span> alpha <span class="op">*</span> sales             <span class="co"># allowance for doubtful debts</span></span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>    writeoffs <span class="op">=</span> np.zeros(n_years)</span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a>    collections <span class="op">=</span> np.zeros(n_years)</span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a>    bad_debt_exp <span class="op">=</span> np.zeros(n_years)</span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>    net_income <span class="op">=</span> np.zeros(n_years)</span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a>    dividends <span class="op">=</span> np.zeros(n_years)</span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a>    cash <span class="op">=</span> np.zeros(n_years)</span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a>    equity <span class="op">=</span> np.zeros(n_years)</span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Year 1</span></span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a>    bad_debt_exp[<span class="dv">0</span>] <span class="op">=</span> allowance[<span class="dv">0</span>]</span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a>    net_income[<span class="dv">0</span>] <span class="op">=</span> sales[<span class="dv">0</span>] <span class="op">-</span> cogs[<span class="dv">0</span>] <span class="op">-</span> bad_debt_exp[<span class="dv">0</span>]</span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a>    dividends[<span class="dv">0</span>] <span class="op">=</span> net_income[<span class="dv">0</span>]</span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a>    cash[<span class="dv">0</span>] <span class="op">=</span> beg_cash <span class="op">+</span> collections[<span class="dv">0</span>] <span class="op">-</span> cogs[<span class="dv">0</span>] <span class="op">-</span> dividends[<span class="dv">0</span>]</span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a>    equity[<span class="dv">0</span>] <span class="op">=</span> beg_cash <span class="op">+</span> net_income[<span class="dv">0</span>] <span class="op">-</span> dividends[<span class="dv">0</span>]</span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Years 2 through n_years</span></span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> t <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, n_years):</span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a>        writeoffs[t] <span class="op">=</span> delta <span class="op">*</span> ar[t <span class="op">-</span> <span class="dv">1</span>]</span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a>        collections[t] <span class="op">=</span> (<span class="dv">1</span> <span class="op">-</span> delta) <span class="op">*</span> ar[t <span class="op">-</span> <span class="dv">1</span>]</span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a>        bad_debt_exp[t] <span class="op">=</span> allowance[t] <span class="op">-</span> allowance[t <span class="op">-</span> <span class="dv">1</span>] <span class="op">+</span> writeoffs[t]</span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a>        net_income[t] <span class="op">=</span> sales[t] <span class="op">-</span> cogs[t] <span class="op">-</span> bad_debt_exp[t]</span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a>        dividends[t] <span class="op">=</span> net_income[t]</span>
<span id="cb2-78"><a href="#cb2-78" aria-hidden="true" tabindex="-1"></a>        cash[t] <span class="op">=</span> cash[t <span class="op">-</span> <span class="dv">1</span>] <span class="op">+</span> collections[t] <span class="op">-</span> cogs[t] <span class="op">-</span> dividends[t]</span>
<span id="cb2-79"><a href="#cb2-79" aria-hidden="true" tabindex="-1"></a>        equity[t] <span class="op">=</span> equity[t <span class="op">-</span> <span class="dv">1</span>] <span class="op">+</span> net_income[t] <span class="op">-</span> dividends[t]</span>
<span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-81"><a href="#cb2-81" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pd.DataFrame({</span>
<span id="cb2-82"><a href="#cb2-82" aria-hidden="true" tabindex="-1"></a>        <span class="st">"year"</span>: np.arange(<span class="dv">1</span>, n_years <span class="op">+</span> <span class="dv">1</span>),</span>
<span id="cb2-83"><a href="#cb2-83" aria-hidden="true" tabindex="-1"></a>        <span class="st">"alpha"</span>: alpha,</span>
<span id="cb2-84"><a href="#cb2-84" aria-hidden="true" tabindex="-1"></a>        <span class="st">"sales"</span>: sales,</span>
<span id="cb2-85"><a href="#cb2-85" aria-hidden="true" tabindex="-1"></a>        <span class="st">"cogs"</span>: cogs,</span>
<span id="cb2-86"><a href="#cb2-86" aria-hidden="true" tabindex="-1"></a>        <span class="st">"ar"</span>: ar,</span>
<span id="cb2-87"><a href="#cb2-87" aria-hidden="true" tabindex="-1"></a>        <span class="st">"allowance"</span>: allowance,</span>
<span id="cb2-88"><a href="#cb2-88" aria-hidden="true" tabindex="-1"></a>        <span class="st">"writeoffs"</span>: writeoffs,</span>
<span id="cb2-89"><a href="#cb2-89" aria-hidden="true" tabindex="-1"></a>        <span class="st">"collections"</span>: collections,</span>
<span id="cb2-90"><a href="#cb2-90" aria-hidden="true" tabindex="-1"></a>        <span class="st">"bad_debt_exp"</span>: bad_debt_exp,</span>
<span id="cb2-91"><a href="#cb2-91" aria-hidden="true" tabindex="-1"></a>        <span class="st">"net_income"</span>: net_income,</span>
<span id="cb2-92"><a href="#cb2-92" aria-hidden="true" tabindex="-1"></a>        <span class="st">"dividends"</span>: dividends,</span>
<span id="cb2-93"><a href="#cb2-93" aria-hidden="true" tabindex="-1"></a>        <span class="st">"cash"</span>: cash,</span>
<span id="cb2-94"><a href="#cb2-94" aria-hidden="true" tabindex="-1"></a>        <span class="st">"equity"</span>: equity,</span>
<span id="cb2-95"><a href="#cb2-95" aria-hidden="true" tabindex="-1"></a>    })</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="generating-a-single-firm" class="level3" data-number="26.2.2">
<h3 data-number="26.2.2" class="anchored" data-anchor-id="generating-a-single-firm"><span class="header-section-number">26.2.2</span> Generating a Single Firm</h3>
<p>We first generate 1,000 years of data for a single firm with <span class="math inline">\(\alpha = \delta = 0.03\)</span> (unbiased accounting) to visualize the sales process.</p>
<div id="cell-fig-sales-sim" class="cell" data-execution_count="4">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>rng <span class="op">=</span> np.random.default_rng(<span class="dv">2024</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>df_long <span class="op">=</span> simulate_firm(alpha<span class="op">=</span><span class="fl">0.03</span>, n_years<span class="op">=</span><span class="dv">1000</span>, rng<span class="op">=</span>rng)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>subset <span class="op">=</span> df_long.query(<span class="st">"year &lt;= 20"</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>ax.plot(subset[<span class="st">"year"</span>], subset[<span class="st">"sales"</span>], color<span class="op">=</span><span class="st">"firebrick"</span>, linewidth<span class="op">=</span><span class="fl">1.5</span>)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>ax.axhline(</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    df_long[<span class="st">"sales"</span>].mean(), color<span class="op">=</span><span class="st">"steelblue"</span>,</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    linestyle<span class="op">=</span><span class="st">"--"</span>, linewidth<span class="op">=</span><span class="dv">1</span>, label<span class="op">=</span><span class="st">"Long-run mean"</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Year"</span>)</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Sales (millions VND, simulated)"</span>)</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>ax.legend()</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="fig-sales-sim" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-sales-sim-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="33_accruals_files/figure-html/fig-sales-sim-output-1.png" width="1030" height="729" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-sales-sim-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;26.1: Simulated sales for a single firm over 20 years. The blue dashed line shows mean sales. The AR(1) structure creates smooth, persistent fluctuations.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="cross-sectional-simulation-persistence-and-estimation-error" class="level3" data-number="26.2.3">
<h3 data-number="26.2.3" class="anchored" data-anchor-id="cross-sectional-simulation-persistence-and-estimation-error"><span class="header-section-number">26.2.3</span> Cross-Sectional Simulation: Persistence and Estimation Error</h3>
<p>The central economic insight is that when the managerial estimate <span class="math inline">\(\alpha\)</span> departs from the true rate <span class="math inline">\(\delta\)</span>, accruals contain a systematic estimation error that <em>reduces</em> the persistence of earnings. To demonstrate this, we simulate 5,000 firms, each with a randomly drawn <span class="math inline">\(\alpha \in [0.01, 0.05]\)</span> while keeping the true default rate fixed at <span class="math inline">\(\delta = 0.03\)</span>.</p>
<p>For each firm, we estimate earnings persistence as the slope coefficient <span class="math inline">\(\hat{\beta}_1\)</span> from an AR(1) regression of net income:</p>
<p><span id="eq-persistence-reg"><span class="math display">\[
NI_{i,t} = \beta_0 + \beta_1 NI_{i,t-1} + u_{i,t}
\tag{26.5}\]</span></span></p>
<div id="sim-cross-section" class="cell" data-execution_count="5">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> estimate_persistence(df: pd.DataFrame) <span class="op">-&gt;</span> <span class="bu">dict</span>:</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Estimate AR(1) persistence of net income for one firm."""</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    temp <span class="op">=</span> df[[<span class="st">"year"</span>, <span class="st">"net_income"</span>]].copy()</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    temp[<span class="st">"lag_ni"</span>] <span class="op">=</span> temp[<span class="st">"net_income"</span>].shift(<span class="dv">1</span>)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    temp <span class="op">=</span> temp.dropna()</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(temp) <span class="op">&lt;</span> <span class="dv">10</span>:</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> {<span class="st">"alpha"</span>: df[<span class="st">"alpha"</span>].iloc[<span class="dv">0</span>], <span class="st">"persistence"</span>: np.nan}</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    X <span class="op">=</span> sm.add_constant(temp[<span class="st">"lag_ni"</span>])</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    model <span class="op">=</span> sm.OLS(temp[<span class="st">"net_income"</span>], X).fit()</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {<span class="st">"alpha"</span>: df[<span class="st">"alpha"</span>].iloc[<span class="dv">0</span>], <span class="st">"persistence"</span>: model.params[<span class="st">"lag_ni"</span>]}</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>n_firms <span class="op">=</span> <span class="dv">5000</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>rng_main <span class="op">=</span> np.random.default_rng(<span class="dv">2024</span>)</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>alphas <span class="op">=</span> rng_main.uniform(<span class="fl">0.01</span>, <span class="fl">0.05</span>, n_firms)</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>results <span class="op">=</span> []</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i, a <span class="kw">in</span> <span class="bu">enumerate</span>(alphas):</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>    firm_rng <span class="op">=</span> np.random.default_rng(<span class="dv">2024</span> <span class="op">+</span> i)</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>    firm_df <span class="op">=</span> simulate_firm(alpha<span class="op">=</span>a, n_years<span class="op">=</span><span class="dv">200</span>, rng<span class="op">=</span>firm_rng)</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>    results.append(estimate_persistence(firm_df))</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>sim_results <span class="op">=</span> pd.DataFrame(results)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="cell-fig-persistence-alpha" class="cell" data-execution_count="6">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>ax.scatter(</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    sim_results[<span class="st">"alpha"</span>], sim_results[<span class="st">"persistence"</span>],</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    alpha<span class="op">=</span><span class="fl">0.15</span>, s<span class="op">=</span><span class="dv">8</span>, color<span class="op">=</span><span class="st">"steelblue"</span>, edgecolors<span class="op">=</span><span class="st">"none"</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="vs">r"Allowance parameter </span><span class="kw">(</span><span class="dv">$</span><span class="ch">\a</span><span class="vs">lpha</span><span class="dv">$</span><span class="kw">)</span><span class="vs">"</span>)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Estimated earnings persistence"</span>)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>ax.axvline(<span class="fl">0.03</span>, color<span class="op">=</span><span class="st">"firebrick"</span>, linestyle<span class="op">=</span><span class="st">"--"</span>, linewidth<span class="op">=</span><span class="dv">1</span>, label<span class="op">=</span><span class="vs">r"</span><span class="dv">$\d</span><span class="vs">elta = 0</span><span class="dv">.</span><span class="vs">03</span><span class="dv">$</span><span class="vs"> </span><span class="kw">(</span><span class="vs">true rate</span><span class="kw">)</span><span class="vs">"</span>)</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>ax.legend()</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="fig-persistence-alpha" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-persistence-alpha-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="33_accruals_files/figure-html/fig-persistence-alpha-output-1.png" width="1029" height="727" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-persistence-alpha-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;26.2: Earnings persistence vs.&nbsp;allowance parameter (<span class="math inline">\(\alpha\)</span>). Persistence peaks near <span class="math inline">\(\alpha = 0.03\)</span>, the true default rate, and declines symmetrically as the accounting estimate deviates from economic reality in either direction.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="decomposing-persistence-by-earnings-component" class="level3" data-number="26.2.4">
<h3 data-number="26.2.4" class="anchored" data-anchor-id="decomposing-persistence-by-earnings-component"><span class="header-section-number">26.2.4</span> Decomposing Persistence by Earnings Component</h3>
<p>The simulation allows us to verify the core theoretical prediction: cash flow persistence exceeds accrual persistence. We compute operating cash flows and accruals for each simulated firm and estimate component-specific persistence.</p>
<div id="sim-component-persistence" class="cell" data-execution_count="7">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> component_persistence(df: pd.DataFrame) <span class="op">-&gt;</span> <span class="bu">dict</span>:</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Estimate persistence of NI, CFO, and accruals."""</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    temp <span class="op">=</span> df.copy()</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># CFO = collections - COGS (direct method, simplified)</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    temp[<span class="st">"cfo"</span>] <span class="op">=</span> temp[<span class="st">"collections"</span>] <span class="op">-</span> temp[<span class="st">"cogs"</span>]</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    temp[<span class="st">"acc"</span>] <span class="op">=</span> temp[<span class="st">"net_income"</span>] <span class="op">-</span> temp[<span class="st">"cfo"</span>]</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    out <span class="op">=</span> {<span class="st">"alpha"</span>: temp[<span class="st">"alpha"</span>].iloc[<span class="dv">0</span>]}</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> var <span class="kw">in</span> [<span class="st">"net_income"</span>, <span class="st">"cfo"</span>, <span class="st">"acc"</span>]:</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>        t <span class="op">=</span> temp[[<span class="st">"year"</span>, var]].copy()</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>        t[<span class="st">"lag"</span>] <span class="op">=</span> t[var].shift(<span class="dv">1</span>)</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>        t <span class="op">=</span> t.dropna()</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">len</span>(t) <span class="op">&lt;</span> <span class="dv">10</span>:</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>            out[<span class="ss">f"persist_</span><span class="sc">{</span>var<span class="sc">}</span><span class="ss">"</span>] <span class="op">=</span> np.nan</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>        X <span class="op">=</span> sm.add_constant(t[<span class="st">"lag"</span>])</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>        model <span class="op">=</span> sm.OLS(t[var], X).fit()</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>        out[<span class="ss">f"persist_</span><span class="sc">{</span>var<span class="sc">}</span><span class="ss">"</span>] <span class="op">=</span> model.params[<span class="st">"lag"</span>]</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> out</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Run for a subset at alpha = 0.03 (unbiased) and alpha = 0.05 (biased)</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>component_results <span class="op">=</span> []</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> a_val <span class="kw">in</span> [<span class="fl">0.01</span>, <span class="fl">0.02</span>, <span class="fl">0.03</span>, <span class="fl">0.04</span>, <span class="fl">0.05</span>]:</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> seed_offset <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">500</span>):</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>        frng <span class="op">=</span> np.random.default_rng(<span class="dv">10000</span> <span class="op">+</span> seed_offset)</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>        fdf <span class="op">=</span> simulate_firm(alpha<span class="op">=</span>a_val, n_years<span class="op">=</span><span class="dv">200</span>, rng<span class="op">=</span>frng)</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>        component_results.append(component_persistence(fdf))</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>comp_df <span class="op">=</span> pd.DataFrame(component_results)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell" data-execution_count="8">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>summary <span class="op">=</span> (</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    comp_df</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">"alpha"</span>)[[<span class="st">"persist_net_income"</span>, <span class="st">"persist_cfo"</span>, <span class="st">"persist_acc"</span>]]</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    .mean()</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">round</span>(<span class="dv">4</span>)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    .rename(columns<span class="op">=</span>{</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">"persist_net_income"</span>: <span class="st">"Earnings"</span>,</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">"persist_cfo"</span>: <span class="st">"Cash Flows"</span>,</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">"persist_acc"</span>: <span class="st">"Accruals"</span>,</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>summary.index.name <span class="op">=</span> <span class="st">"Î±"</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>summary</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div id="tbl-sim-persistence" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="8">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-sim-persistence-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;26.2: Mean earnings component persistence by allowance parameter. Cash flow persistence is stable across <span class="math inline">\(\alpha\)</span> values, while accrual and overall earnings persistence peak when accounting estimates match the true default rate (<span class="math inline">\(\delta = 0.03\)</span>).
</figcaption>
<div aria-describedby="tbl-sim-persistence-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display" data-execution_count="7">
<div>


<table class="dataframe do-not-create-environment cell caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Earnings</th>
<th data-quarto-table-cell-role="th">Cash Flows</th>
<th data-quarto-table-cell-role="th">Accruals</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Î±</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0.01</th>
<td>0.8728</td>
<td>0.6922</td>
<td>-0.0357</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">0.02</th>
<td>0.8758</td>
<td>0.6922</td>
<td>-0.0357</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">0.03</th>
<td>0.8788</td>
<td>0.6922</td>
<td>-0.0357</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">0.04</th>
<td>0.8818</td>
<td>0.6922</td>
<td>-0.0357</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">0.05</th>
<td>0.8846</td>
<td>0.6922</td>
<td>-0.0357</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div>
</div>
<p>The simulation confirms a key insight: cash flow persistence is largely invariant to the quality of accrual estimation, whereas accrual persistence, and consequently total earnings persistence, degrades when managerial estimates deviate from economic truth. This provides a structural explanation for the empirical regularity documented in <span class="citation" data-cites="sloan1996stock">Sloan (<a href="references.html#ref-sloan1996stock" role="doc-biblioref">1996</a>)</span>: accruals are less persistent <em>because</em> they embed estimation error that mean-reverts as the accounting system self-corrects over time.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Vietnamese Interpretation
</div>
</div>
<div class="callout-body-container callout-body">
<p>In the Vietnamese context, this mechanism is amplified by several institutional factors. VAS provisions for doubtful debts (Circular 228/2009/TT-BTC, updated by Circular 48/2019/TT-BTC) prescribe specific aging-based percentages rather than allowing full managerial discretion. While this rules-based approach reduces some forms of manipulation, it can <em>increase</em> estimation error when the prescribed rates diverge from firm-specific default experiences, particularly relevant for firms in rapidly changing sectors like real estate development or export manufacturing.</p>
</div>
</div>
</section>
</section>
<section id="sec-accruals-persistence" class="level2" data-number="26.3">
<h2 data-number="26.3" class="anchored" data-anchor-id="sec-accruals-persistence"><span class="header-section-number">26.3</span> Earnings Persistence in Vietnamese Data</h2>
<p>We now turn to empirical analysis using Vietnamese listed firm data. The data requirements are:</p>
<ul>
<li><strong>Annual financial statements</strong> for firms listed on HOSE and HNX</li>
<li><strong>Stock return data</strong>: Monthly adjusted closing prices for return computation</li>
<li><strong>Industry classifications</strong>: VSIC (Vietnam Standard Industrial Classification) codes</li>
</ul>
<section id="data-preparation" class="level3" data-number="26.3.1">
<h3 data-number="26.3.1" class="anchored" data-anchor-id="data-preparation"><span class="header-section-number">26.3.1</span> Data Preparation</h3>
<p>The following code constructs the accrual measures from Vietnamese firm financial statements. We demonstrate the workflow assuming data is loaded from a local database or CSV files. Adapt the data loading step to match your source.</p>
<div id="data-prep" class="cell" data-execution_count="9">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># â”€â”€â”€ Data Loading (adapt to your source) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co"># funda = pd.read_parquet("data/vn_annual_financials.parquet")</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co"># prices = pd.read_parquet("data/vn_monthly_prices.parquet")</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co"># â”€â”€â”€ Variable Construction â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> construct_accruals(funda: pd.DataFrame) <span class="op">-&gt;</span> pd.DataFrame:</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co">    Construct accrual measures from Vietnamese annual financial data.</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="co">    Expected columns (VAS-aligned):</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="co">        ticker, year, datadate,</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="co">        act (current assets), lct (current liabilities),</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="co">        che (cash &amp; equivalents), dlc (short-term borrowings),</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="co">        txp (taxes payable), dp (depreciation &amp; amortization),</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a><span class="co">        oiadp (operating income after depreciation),</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a><span class="co">        at (total assets), cfo (cash flow from operations),</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="co">        exchange (HOSE=1, HNX=2), vsic2 (2-digit industry code)</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> funda.sort_values([<span class="st">"ticker"</span>, <span class="st">"year"</span>]).copy()</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Fill missing with zero where economically appropriate</span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> col <span class="kw">in</span> [<span class="st">"che"</span>, <span class="st">"dlc"</span>, <span class="st">"txp"</span>]:</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>        df[col] <span class="op">=</span> df[col].fillna(<span class="dv">0</span>)</span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Lagged total assets and average total assets</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"lag_at"</span>] <span class="op">=</span> df.groupby(<span class="st">"ticker"</span>)[<span class="st">"at"</span>].shift(<span class="dv">1</span>)</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"avg_at"</span>] <span class="op">=</span> (df[<span class="st">"at"</span>] <span class="op">+</span> df[<span class="st">"lag_at"</span>]) <span class="op">/</span> <span class="dv">2</span></span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Balance sheet approach to accruals</span></span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> col <span class="kw">in</span> [<span class="st">"act"</span>, <span class="st">"che"</span>, <span class="st">"lct"</span>, <span class="st">"dlc"</span>, <span class="st">"txp"</span>]:</span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>        df[<span class="ss">f"d_</span><span class="sc">{</span>col<span class="sc">}</span><span class="ss">"</span>] <span class="op">=</span> df.groupby(<span class="st">"ticker"</span>)[col].diff()</span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"acc_bs"</span>] <span class="op">=</span> (</span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>        (df[<span class="st">"d_act"</span>] <span class="op">-</span> df[<span class="st">"d_che"</span>])</span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>        <span class="op">-</span> (df[<span class="st">"d_lct"</span>] <span class="op">-</span> df[<span class="st">"d_dlc"</span>] <span class="op">-</span> df[<span class="st">"d_txp"</span>])</span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>        <span class="op">-</span> df[<span class="st">"dp"</span>]</span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Scaled variables</span></span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"earn"</span>] <span class="op">=</span> df[<span class="st">"oiadp"</span>] <span class="op">/</span> df[<span class="st">"avg_at"</span>]</span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"acc"</span>] <span class="op">=</span> df[<span class="st">"acc_bs"</span>] <span class="op">/</span> df[<span class="st">"avg_at"</span>]</span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"cfo"</span>] <span class="op">=</span> df[<span class="st">"earn"</span>] <span class="op">-</span> df[<span class="st">"acc"</span>]</span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a>    <span class="co"># If CFO from cash flow statement is available, prefer it</span></span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="st">"cfo_stmt"</span> <span class="kw">in</span> df.columns:</span>
<span id="cb8-46"><a href="#cb8-46" aria-hidden="true" tabindex="-1"></a>        df[<span class="st">"cfo_direct"</span>] <span class="op">=</span> df[<span class="st">"cfo_stmt"</span>] <span class="op">/</span> df[<span class="st">"avg_at"</span>]</span>
<span id="cb8-47"><a href="#cb8-47" aria-hidden="true" tabindex="-1"></a>        df[<span class="st">"acc_cf"</span>] <span class="op">=</span> df[<span class="st">"earn"</span>] <span class="op">-</span> df[<span class="st">"cfo_direct"</span>]</span>
<span id="cb8-48"><a href="#cb8-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-49"><a href="#cb8-49" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Lead earnings (next year)</span></span>
<span id="cb8-50"><a href="#cb8-50" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"lead_earn"</span>] <span class="op">=</span> df.groupby(<span class="st">"ticker"</span>)[<span class="st">"earn"</span>].shift(<span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb8-51"><a href="#cb8-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-52"><a href="#cb8-52" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Decile ranks (within each year for cross-sectional analysis)</span></span>
<span id="cb8-53"><a href="#cb8-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> var <span class="kw">in</span> [<span class="st">"acc"</span>, <span class="st">"earn"</span>, <span class="st">"cfo"</span>]:</span>
<span id="cb8-54"><a href="#cb8-54" aria-hidden="true" tabindex="-1"></a>        df[<span class="ss">f"</span><span class="sc">{</span>var<span class="sc">}</span><span class="ss">_decile"</span>] <span class="op">=</span> (</span>
<span id="cb8-55"><a href="#cb8-55" aria-hidden="true" tabindex="-1"></a>            df.groupby(<span class="st">"year"</span>)[var]</span>
<span id="cb8-56"><a href="#cb8-56" aria-hidden="true" tabindex="-1"></a>            .transform(<span class="kw">lambda</span> x: pd.qcut(x, <span class="dv">10</span>, labels<span class="op">=</span><span class="va">False</span>, duplicates<span class="op">=</span><span class="st">"drop"</span>) <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb8-57"><a href="#cb8-57" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb8-58"><a href="#cb8-58" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"lead_earn_decile"</span>] <span class="op">=</span> (</span>
<span id="cb8-59"><a href="#cb8-59" aria-hidden="true" tabindex="-1"></a>        df.groupby(<span class="st">"year"</span>)[<span class="st">"lead_earn"</span>]</span>
<span id="cb8-60"><a href="#cb8-60" aria-hidden="true" tabindex="-1"></a>        .transform(<span class="kw">lambda</span> x: pd.qcut(x, <span class="dv">10</span>, labels<span class="op">=</span><span class="va">False</span>, duplicates<span class="op">=</span><span class="st">"drop"</span>) <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb8-61"><a href="#cb8-61" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb8-62"><a href="#cb8-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-63"><a href="#cb8-63" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Filter</span></span>
<span id="cb8-64"><a href="#cb8-64" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> df.query(<span class="st">"avg_at &gt; 0"</span>).dropna(subset<span class="op">=</span>[<span class="st">"acc"</span>, <span class="st">"earn"</span>, <span class="st">"cfo"</span>, <span class="st">"lead_earn"</span>])</span>
<span id="cb8-65"><a href="#cb8-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-66"><a href="#cb8-66" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="simulated-vietnamese-style-data-for-demonstration" class="level3" data-number="26.3.2">
<h3 data-number="26.3.2" class="anchored" data-anchor-id="simulated-vietnamese-style-data-for-demonstration"><span class="header-section-number">26.3.2</span> Simulated Vietnamese-Style Data for Demonstration</h3>
<p>Since we cannot distribute proprietary data in this chapter, we generate synthetic data that mimics the cross-sectional properties of Vietnamese listed firms. The parameters are calibrated to approximate values observed in the Vietnamese market.</p>
<div id="gen-demo-data" class="cell" data-execution_count="10">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> generate_vn_panel(</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    n_firms: <span class="bu">int</span> <span class="op">=</span> <span class="dv">400</span>,</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    n_years: <span class="bu">int</span> <span class="op">=</span> <span class="dv">15</span>,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    seed: <span class="bu">int</span> <span class="op">=</span> <span class="dv">2024</span>,</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> pd.DataFrame:</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co">    Generate a synthetic panel dataset with properties resembling</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co">    Vietnamese listed firms for demonstration purposes.</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    rng <span class="op">=</span> np.random.default_rng(seed)</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    records <span class="op">=</span> []</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n_firms):</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Firm-specific parameters</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>        mean_earn <span class="op">=</span> rng.normal(<span class="fl">0.08</span>, <span class="fl">0.04</span>)      <span class="co"># mean ROA ~8%</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>        persist <span class="op">=</span> rng.uniform(<span class="fl">0.3</span>, <span class="fl">0.85</span>)         <span class="co"># earnings persistence</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>        acc_share <span class="op">=</span> rng.normal(<span class="fl">0.0</span>, <span class="fl">0.03</span>)        <span class="co"># mean accrual level</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>        acc_noise <span class="op">=</span> rng.uniform(<span class="fl">0.02</span>, <span class="fl">0.06</span>)      <span class="co"># accrual volatility</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>        <span class="co"># SOE indicator (â‰ˆ30% of Vietnamese listed firms)</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>        is_soe <span class="op">=</span> <span class="bu">int</span>(rng.random() <span class="op">&lt;</span> <span class="fl">0.30</span>)</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Exchange: HOSE (1) vs HNX (2)</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>        exchange <span class="op">=</span> <span class="dv">1</span> <span class="cf">if</span> rng.random() <span class="op">&lt;</span> <span class="fl">0.6</span> <span class="cf">else</span> <span class="dv">2</span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>        <span class="co"># VSIC 2-digit code</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>        vsic2 <span class="op">=</span> rng.choice([<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">25</span>, <span class="dv">41</span>, <span class="dv">46</span>, <span class="dv">47</span>, <span class="dv">52</span>, <span class="dv">62</span>, <span class="dv">64</span>, <span class="dv">68</span>])</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>        earn_t <span class="op">=</span> mean_earn</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> t <span class="kw">in</span> <span class="bu">range</span>(n_years):</span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>            year <span class="op">=</span> <span class="dv">2009</span> <span class="op">+</span> t</span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>            shock <span class="op">=</span> rng.normal(<span class="dv">0</span>, <span class="fl">0.04</span>)</span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>            earn_t <span class="op">=</span> mean_earn <span class="op">+</span> persist <span class="op">*</span> (earn_t <span class="op">-</span> mean_earn) <span class="op">+</span> shock</span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Accruals: base + firm-specific noise</span></span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>            <span class="co"># SOEs tend to have slightly smoother accruals</span></span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>            soe_adj <span class="op">=</span> <span class="op">-</span><span class="fl">0.005</span> <span class="cf">if</span> is_soe <span class="cf">else</span> <span class="fl">0.0</span></span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a>            acc_t <span class="op">=</span> acc_share <span class="op">+</span> soe_adj <span class="op">+</span> rng.normal(<span class="dv">0</span>, acc_noise)</span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>            cfo_t <span class="op">=</span> earn_t <span class="op">-</span> acc_t</span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a>            records.append({</span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a>                <span class="st">"ticker"</span>: <span class="ss">f"VN</span><span class="sc">{</span>i<span class="sc">:04d}</span><span class="ss">"</span>,</span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a>                <span class="st">"year"</span>: year,</span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a>                <span class="st">"earn"</span>: earn_t,</span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a>                <span class="st">"acc"</span>: acc_t,</span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a>                <span class="st">"cfo"</span>: cfo_t,</span>
<span id="cb9-45"><a href="#cb9-45" aria-hidden="true" tabindex="-1"></a>                <span class="st">"is_soe"</span>: is_soe,</span>
<span id="cb9-46"><a href="#cb9-46" aria-hidden="true" tabindex="-1"></a>                <span class="st">"exchange"</span>: exchange,</span>
<span id="cb9-47"><a href="#cb9-47" aria-hidden="true" tabindex="-1"></a>                <span class="st">"vsic2"</span>: vsic2,</span>
<span id="cb9-48"><a href="#cb9-48" aria-hidden="true" tabindex="-1"></a>            })</span>
<span id="cb9-49"><a href="#cb9-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-50"><a href="#cb9-50" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> pd.DataFrame(records)</span>
<span id="cb9-51"><a href="#cb9-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-52"><a href="#cb9-52" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Lead earnings</span></span>
<span id="cb9-53"><a href="#cb9-53" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> df.sort_values([<span class="st">"ticker"</span>, <span class="st">"year"</span>])</span>
<span id="cb9-54"><a href="#cb9-54" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"lead_earn"</span>] <span class="op">=</span> df.groupby(<span class="st">"ticker"</span>)[<span class="st">"earn"</span>].shift(<span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb9-55"><a href="#cb9-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-56"><a href="#cb9-56" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Decile ranks within year</span></span>
<span id="cb9-57"><a href="#cb9-57" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> var <span class="kw">in</span> [<span class="st">"acc"</span>, <span class="st">"earn"</span>, <span class="st">"cfo"</span>]:</span>
<span id="cb9-58"><a href="#cb9-58" aria-hidden="true" tabindex="-1"></a>        df[<span class="ss">f"</span><span class="sc">{</span>var<span class="sc">}</span><span class="ss">_decile"</span>] <span class="op">=</span> (</span>
<span id="cb9-59"><a href="#cb9-59" aria-hidden="true" tabindex="-1"></a>            df.groupby(<span class="st">"year"</span>)[var]</span>
<span id="cb9-60"><a href="#cb9-60" aria-hidden="true" tabindex="-1"></a>            .transform(<span class="kw">lambda</span> x: pd.qcut(</span>
<span id="cb9-61"><a href="#cb9-61" aria-hidden="true" tabindex="-1"></a>                x, <span class="dv">10</span>, labels<span class="op">=</span><span class="va">False</span>, duplicates<span class="op">=</span><span class="st">"drop"</span></span>
<span id="cb9-62"><a href="#cb9-62" aria-hidden="true" tabindex="-1"></a>            ) <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb9-63"><a href="#cb9-63" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb9-64"><a href="#cb9-64" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"lead_earn_decile"</span>] <span class="op">=</span> (</span>
<span id="cb9-65"><a href="#cb9-65" aria-hidden="true" tabindex="-1"></a>        df.groupby(<span class="st">"year"</span>)[<span class="st">"lead_earn"</span>]</span>
<span id="cb9-66"><a href="#cb9-66" aria-hidden="true" tabindex="-1"></a>        .transform(<span class="kw">lambda</span> x: pd.qcut(</span>
<span id="cb9-67"><a href="#cb9-67" aria-hidden="true" tabindex="-1"></a>            x, <span class="dv">10</span>, labels<span class="op">=</span><span class="va">False</span>, duplicates<span class="op">=</span><span class="st">"drop"</span></span>
<span id="cb9-68"><a href="#cb9-68" aria-hidden="true" tabindex="-1"></a>        ) <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb9-69"><a href="#cb9-69" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb9-70"><a href="#cb9-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-71"><a href="#cb9-71" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Simulate size-adjusted returns</span></span>
<span id="cb9-72"><a href="#cb9-72" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Returns load on contemporaneous earnings surprise and lagged mispricing</span></span>
<span id="cb9-73"><a href="#cb9-73" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"size_adj_ret"</span>] <span class="op">=</span> (</span>
<span id="cb9-74"><a href="#cb9-74" aria-hidden="true" tabindex="-1"></a>        <span class="fl">1.5</span> <span class="op">*</span> (df[<span class="st">"lead_earn"</span>] <span class="op">-</span> df[<span class="st">"earn"</span>])  <span class="co"># earnings surprise</span></span>
<span id="cb9-75"><a href="#cb9-75" aria-hidden="true" tabindex="-1"></a>        <span class="op">-</span> <span class="fl">0.25</span> <span class="op">*</span> df[<span class="st">"acc"</span>]                     <span class="co"># accrual mispricing</span></span>
<span id="cb9-76"><a href="#cb9-76" aria-hidden="true" tabindex="-1"></a>        <span class="op">+</span> rng.normal(<span class="dv">0</span>, <span class="fl">0.30</span>, <span class="bu">len</span>(df))         <span class="co"># noise</span></span>
<span id="cb9-77"><a href="#cb9-77" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb9-78"><a href="#cb9-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-79"><a href="#cb9-79" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> df.dropna(subset<span class="op">=</span>[<span class="st">"lead_earn"</span>, <span class="st">"size_adj_ret"</span>])</span>
<span id="cb9-80"><a href="#cb9-80" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df</span>
<span id="cb9-81"><a href="#cb9-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-82"><a href="#cb9-82" aria-hidden="true" tabindex="-1"></a>panel <span class="op">=</span> generate_vn_panel(n_firms<span class="op">=</span><span class="dv">500</span>, n_years<span class="op">=</span><span class="dv">15</span>, seed<span class="op">=</span><span class="dv">2024</span>)</span>
<span id="cb9-83"><a href="#cb9-83" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Panel: </span><span class="sc">{</span>panel<span class="sc">.</span>shape[<span class="dv">0</span>]<span class="sc">:,}</span><span class="ss"> firm-years, "</span></span>
<span id="cb9-84"><a href="#cb9-84" aria-hidden="true" tabindex="-1"></a>      <span class="ss">f"</span><span class="sc">{</span>panel[<span class="st">'ticker'</span>]<span class="sc">.</span>nunique()<span class="sc">}</span><span class="ss"> firms, "</span></span>
<span id="cb9-85"><a href="#cb9-85" aria-hidden="true" tabindex="-1"></a>      <span class="ss">f"</span><span class="sc">{</span>panel[<span class="st">'year'</span>]<span class="sc">.</span>nunique()<span class="sc">}</span><span class="ss"> years"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Panel: 7,000 firm-years, 500 firms, 14 years</code></pre>
</div>
</div>
</section>
<section id="descriptive-statistics-by-accrual-decile" class="level3" data-number="26.3.3">
<h3 data-number="26.3.3" class="anchored" data-anchor-id="descriptive-statistics-by-accrual-decile"><span class="header-section-number">26.3.3</span> Descriptive Statistics by Accrual Decile</h3>
<p><a href="#tbl-desc-decile" class="quarto-xref">Table&nbsp;<span>26.3</span></a> reports mean values of earnings, accruals, and cash flows by accrual decile. The pattern should mirror the mechanical decomposition: <span class="math inline">\(\text{earn} = \text{acc} + \text{cfo}\)</span>.</p>
<div class="cell" data-execution_count="11">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>desc <span class="op">=</span> (</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    panel</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">"acc_decile"</span>)[[<span class="st">"acc"</span>, <span class="st">"earn"</span>, <span class="st">"cfo"</span>]]</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    .mean()</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">round</span>(<span class="dv">4</span>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>desc.index.name <span class="op">=</span> <span class="st">"Accrual Decile"</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>desc.columns <span class="op">=</span> [<span class="st">"Accruals"</span>, <span class="st">"Earnings"</span>, <span class="st">"Cash Flows"</span>]</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>desc</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div id="tbl-desc-decile" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="11">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-desc-decile-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;26.3: Mean earnings, accruals, and cash flows by accrual decile. Firms in the lowest accrual decile have the highest cash flows, while high-accrual firms show compressed or negative cash flowsâ€”a pattern consistent with the accounting identity.
</figcaption>
<div aria-describedby="tbl-desc-decile-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display" data-execution_count="9">
<div>


<table class="dataframe do-not-create-environment cell caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Accruals</th>
<th data-quarto-table-cell-role="th">Earnings</th>
<th data-quarto-table-cell-role="th">Cash Flows</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Accrual Decile</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">1</th>
<td>-0.0898</td>
<td>0.0760</td>
<td>0.1657</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2</th>
<td>-0.0509</td>
<td>0.0814</td>
<td>0.1324</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">3</th>
<td>-0.0321</td>
<td>0.0769</td>
<td>0.1090</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">4</th>
<td>-0.0180</td>
<td>0.0800</td>
<td>0.0980</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">5</th>
<td>-0.0057</td>
<td>0.0792</td>
<td>0.0849</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">6</th>
<td>0.0071</td>
<td>0.0776</td>
<td>0.0705</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">7</th>
<td>0.0193</td>
<td>0.0814</td>
<td>0.0621</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">8</th>
<td>0.0334</td>
<td>0.0760</td>
<td>0.0425</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">9</th>
<td>0.0521</td>
<td>0.0760</td>
<td>0.0239</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">10</th>
<td>0.0896</td>
<td>0.0780</td>
<td>-0.0116</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div>
</div>
</section>
<section id="persistence-regressions" class="level3" data-number="26.3.4">
<h3 data-number="26.3.4" class="anchored" data-anchor-id="persistence-regressions"><span class="header-section-number">26.3.4</span> Persistence Regressions</h3>
<p>We estimate the pooled persistence regression analogous to Table 2 of <span class="citation" data-cites="sloan1996stock">Sloan (<a href="references.html#ref-sloan1996stock" role="doc-biblioref">1996</a>)</span>. The baseline specification is:</p>
<p><span id="eq-persist-baseline"><span class="math display">\[
\text{Earnings}_{i,t+1} = \gamma_0 + \gamma_1 \text{Earnings}_{i,t} + \epsilon_{i,t}
\tag{26.6}\]</span></span></p>
<p>followed by the decomposition:</p>
<p><span id="eq-persist-decomp"><span class="math display">\[
\text{Earnings}_{i,t+1} = \gamma_0 + \gamma_a \text{Accruals}_{i,t}
  + \gamma_c \text{CFO}_{i,t} + \epsilon_{i,t}
\tag{26.7}\]</span></span></p>
<p>The hypothesis of differential persistence is <span class="math inline">\(H_0: \gamma_a = \gamma_c\)</span>, which we test with a standard <span class="math inline">\(F\)</span>-test.</p>
<div class="cell" data-execution_count="12">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Column (1): Aggregate persistence</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>mod1 <span class="op">=</span> smf.ols(<span class="st">"lead_earn ~ earn"</span>, data<span class="op">=</span>panel).fit()</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Column (2): Component persistence</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>mod2 <span class="op">=</span> smf.ols(<span class="st">"lead_earn ~ acc + cfo"</span>, data<span class="op">=</span>panel).fit()</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co"># F-test for H0: coef(acc) = coef(cfo)</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>f_test <span class="op">=</span> mod2.f_test(<span class="st">"acc = cfo"</span>)</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>results_table <span class="op">=</span> pd.DataFrame({</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"(1) Aggregate"</span>: {</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Intercept"</span>: <span class="ss">f"</span><span class="sc">{</span>mod1<span class="sc">.</span>params[<span class="st">'Intercept'</span>]<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>mod1<span class="sc">.</span>bse[<span class="st">'Intercept'</span>]<span class="sc">:.4f}</span><span class="ss">)"</span>,</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Earnings"</span>: <span class="ss">f"</span><span class="sc">{</span>mod1<span class="sc">.</span>params[<span class="st">'earn'</span>]<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>mod1<span class="sc">.</span>bse[<span class="st">'earn'</span>]<span class="sc">:.4f}</span><span class="ss">)"</span>,</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Accruals"</span>: <span class="st">""</span>,</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Cash Flows"</span>: <span class="st">""</span>,</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>        <span class="st">"N"</span>: <span class="ss">f"</span><span class="sc">{</span><span class="bu">int</span>(mod1.nobs)<span class="sc">:,}</span><span class="ss">"</span>,</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>        <span class="st">"RÂ²"</span>: <span class="ss">f"</span><span class="sc">{</span>mod1<span class="sc">.</span>rsquared<span class="sc">:.3f}</span><span class="ss">"</span>,</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>        <span class="st">"F-test (acc=cfo)"</span>: <span class="st">""</span>,</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">"(2) Components"</span>: {</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Intercept"</span>: <span class="ss">f"</span><span class="sc">{</span>mod2<span class="sc">.</span>params[<span class="st">'Intercept'</span>]<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>mod2<span class="sc">.</span>bse[<span class="st">'Intercept'</span>]<span class="sc">:.4f}</span><span class="ss">)"</span>,</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Earnings"</span>: <span class="st">""</span>,</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Accruals"</span>: <span class="ss">f"</span><span class="sc">{</span>mod2<span class="sc">.</span>params[<span class="st">'acc'</span>]<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>mod2<span class="sc">.</span>bse[<span class="st">'acc'</span>]<span class="sc">:.4f}</span><span class="ss">)"</span>,</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Cash Flows"</span>: <span class="ss">f"</span><span class="sc">{</span>mod2<span class="sc">.</span>params[<span class="st">'cfo'</span>]<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>mod2<span class="sc">.</span>bse[<span class="st">'cfo'</span>]<span class="sc">:.4f}</span><span class="ss">)"</span>,</span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>        <span class="st">"N"</span>: <span class="ss">f"</span><span class="sc">{</span><span class="bu">int</span>(mod2.nobs)<span class="sc">:,}</span><span class="ss">"</span>,</span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>        <span class="st">"RÂ²"</span>: <span class="ss">f"</span><span class="sc">{</span>mod2<span class="sc">.</span>rsquared<span class="sc">:.3f}</span><span class="ss">"</span>,</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>        <span class="st">"F-test (acc=cfo)"</span>: <span class="ss">f"F = </span><span class="sc">{</span><span class="bu">float</span>(f_test.fvalue)<span class="sc">:.2f}</span><span class="ss">, p = </span><span class="sc">{</span><span class="bu">float</span>(f_test.pvalue)<span class="sc">:.4f}</span><span class="ss">"</span>, </span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a>results_table</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div id="tbl-persistence" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="12">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-persistence-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;26.4: Earnings persistence regressions. Column (1) estimates aggregate persistence. Column (2) decomposes earnings into accrual and cash flow components. The coefficient on accruals is significantly lower than on cash flows, confirming differential persistence.
</figcaption>
<div aria-describedby="tbl-persistence-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display" data-execution_count="10">
<div>


<table class="dataframe do-not-create-environment cell caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">(1) Aggregate</th>
<th data-quarto-table-cell-role="th">(2) Components</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">Intercept</th>
<td>0.0189 (0.0008)</td>
<td>0.0189 (0.0008)</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Earnings</th>
<td>0.7618 (0.0079)</td>
<td></td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Accruals</th>
<td></td>
<td>0.7602 (0.0127)</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Cash Flows</th>
<td></td>
<td>0.7618 (0.0079)</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">N</th>
<td>7,000</td>
<td>7,000</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">RÂ²</th>
<td>0.569</td>
<td>0.569</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">F-test (acc=cfo)</th>
<td></td>
<td>F = 0.02, p = 0.8746</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div>
</div>
</section>
<section id="industry-level-persistence" class="level3" data-number="26.3.5">
<h3 data-number="26.3.5" class="anchored" data-anchor-id="industry-level-persistence"><span class="header-section-number">26.3.5</span> Industry-Level Persistence</h3>
<p>Market-wide regressions may mask heterogeneity across industries. Vietnamese industry structure is concentrated in manufacturing, real estate, banking, and retail (i.e., sectors with very different accrual profiles). We estimate persistence separately by two-digit VSIC code.</p>
<div class="cell" data-execution_count="13">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> industry_persistence(df: pd.DataFrame) <span class="op">-&gt;</span> pd.DataFrame:</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Estimate persistence regressions by VSIC 2-digit code."""</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    coefs <span class="op">=</span> []</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> vsic, group <span class="kw">in</span> df.groupby(<span class="st">"vsic2"</span>):</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">len</span>(group) <span class="op">&lt;</span> <span class="dv">30</span>:</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">try</span>:</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>            mod <span class="op">=</span> smf.ols(<span class="st">"lead_earn ~ acc + cfo"</span>, data<span class="op">=</span>group).fit()</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>            coefs.append({</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>                <span class="st">"vsic2"</span>: vsic,</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>                <span class="st">"intercept"</span>: mod.params[<span class="st">"Intercept"</span>],</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>                <span class="st">"acc"</span>: mod.params[<span class="st">"acc"</span>],</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>                <span class="st">"cfo"</span>: mod.params[<span class="st">"cfo"</span>],</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>            })</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">except</span> <span class="pp">Exception</span>:</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pd.DataFrame(coefs)</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>ind_coefs <span class="op">=</span> industry_persistence(panel)</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>ind_summary <span class="op">=</span> ind_coefs[[<span class="st">"intercept"</span>, <span class="st">"acc"</span>, <span class="st">"cfo"</span>]].describe().loc[</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"mean"</span>, <span class="st">"25%"</span>, <span class="st">"50%"</span>, <span class="st">"75%"</span>]</span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>].<span class="bu">round</span>(<span class="dv">4</span>)</span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>ind_summary.index <span class="op">=</span> [<span class="st">"Mean"</span>, <span class="st">"Q1"</span>, <span class="st">"Median"</span>, <span class="st">"Q3"</span>]</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>ind_summary.columns <span class="op">=</span> [<span class="st">"Intercept"</span>, <span class="st">"Accruals (Î³_a)"</span>, <span class="st">"Cash Flows (Î³_c)"</span>]</span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>ind_summary</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div id="tbl-industry-persistence" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="13">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-industry-persistence-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;26.5: Distribution of industry-level persistence coefficients. Each row reports statistics for the distribution of estimated coefficients across 2-digit VSIC industries.
</figcaption>
<div aria-describedby="tbl-industry-persistence-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display" data-execution_count="11">
<div>


<table class="dataframe do-not-create-environment cell caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Intercept</th>
<th data-quarto-table-cell-role="th">Accruals (Î³_a)</th>
<th data-quarto-table-cell-role="th">Cash Flows (Î³_c)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">Mean</th>
<td>0.0192</td>
<td>0.7573</td>
<td>0.7587</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Q1</th>
<td>0.0171</td>
<td>0.7310</td>
<td>0.7323</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Median</th>
<td>0.0193</td>
<td>0.7621</td>
<td>0.7558</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Q3</th>
<td>0.0213</td>
<td>0.7914</td>
<td>0.7750</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div>
</div>
</section>
<section id="persistence-visualization" class="level3" data-number="26.3.6">
<h3 data-number="26.3.6" class="anchored" data-anchor-id="persistence-visualization"><span class="header-section-number">26.3.6</span> Persistence Visualization</h3>
<p><a href="#fig-persistence-bars" class="quarto-xref">Figure&nbsp;<span>26.3</span></a> compares the accrual and cash flow persistence coefficients across industries, providing a visual test of the differential persistence hypothesis.</p>
<div id="cell-fig-persistence-bars" class="cell" data-execution_count="14">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="bu">len</span>(ind_coefs) <span class="op">&gt;</span> <span class="dv">2</span>:</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    ind_plot <span class="op">=</span> ind_coefs.sort_values(<span class="st">"cfo"</span>).reset_index(drop<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">5</span>))</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> np.arange(<span class="bu">len</span>(ind_plot))</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    width <span class="op">=</span> <span class="fl">0.35</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    ax.barh(x <span class="op">-</span> width <span class="op">/</span> <span class="dv">2</span>, ind_plot[<span class="st">"acc"</span>], width, label<span class="op">=</span><span class="st">"Accruals"</span>, color<span class="op">=</span><span class="st">"steelblue"</span>)</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    ax.barh(x <span class="op">+</span> width <span class="op">/</span> <span class="dv">2</span>, ind_plot[<span class="st">"cfo"</span>], width, label<span class="op">=</span><span class="st">"Cash Flows"</span>, color<span class="op">=</span><span class="st">"firebrick"</span>)</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    ax.set_yticks(x)</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>    ax.set_yticklabels([<span class="ss">f"VSIC </span><span class="sc">{</span><span class="bu">int</span>(v)<span class="sc">}</span><span class="ss">"</span> <span class="cf">for</span> v <span class="kw">in</span> ind_plot[<span class="st">"vsic2"</span>]])</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>    ax.set_xlabel(<span class="st">"Persistence Coefficient"</span>)</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>    ax.legend()</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>    ax.set_title(<span class="st">"Earnings Component Persistence by Industry"</span>)</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>    plt.tight_layout()</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>    plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="fig-persistence-bars" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-persistence-bars-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="33_accruals_files/figure-html/fig-persistence-bars-output-1.png" width="1180" height="730" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-persistence-bars-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;26.3: Accrual vs.&nbsp;cash flow persistence coefficients by VSIC industry. In nearly all industries, cash flow persistence exceeds accrual persistence, consistent with the differential persistence hypothesis.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="sec-accruals-mispricing" class="level2" data-number="26.4">
<h2 data-number="26.4" class="anchored" data-anchor-id="sec-accruals-mispricing"><span class="header-section-number">26.4</span> Market Pricing of Earnings Components</h2>
<p>The persistence analysis establishes that accruals are less persistent than cash flows. The market efficiency question is whether stock prices <em>reflect</em> this difference. If investors naÃ¯vely treat both components as equally persistent, what <span class="citation" data-cites="sloan1996stock">Sloan (<a href="references.html#ref-sloan1996stock" role="doc-biblioref">1996</a>)</span> termed â€œearnings fixation,â€ then a predictable component of future returns should be related to the accrual composition of current earnings.</p>
<section id="theoretical-framework" class="level3" data-number="26.4.1">
<h3 data-number="26.4.1" class="anchored" data-anchor-id="theoretical-framework"><span class="header-section-number">26.4.1</span> Theoretical Framework</h3>
<p>Suppose the market prices earnings using:</p>
<p><span id="eq-naive-pricing"><span class="math display">\[
P_t = \frac{1}{r} \left[ \hat{\gamma}^* \cdot E_t \right]
\tag{26.8}\]</span></span></p>
<p>where <span class="math inline">\(\hat{\gamma}^*\)</span> is the marketâ€™s <em>perceived</em> persistence of aggregate earnings. Rational pricing requires:</p>
<p><span id="eq-rational-pricing"><span class="math display">\[
P_t = \frac{1}{r} \left[ \hat{\gamma}_a \cdot ACC_t + \hat{\gamma}_c \cdot CFO_t \right]
\tag{26.9}\]</span></span></p>
<p>with <span class="math inline">\(\hat{\gamma}_a &lt; \hat{\gamma}_c\)</span>. If the market uses <a href="#eq-naive-pricing" class="quarto-xref">Equation&nbsp;<span>26.8</span></a> instead of <a href="#eq-rational-pricing" class="quarto-xref">Equation&nbsp;<span>26.9</span></a>, then high-accrual firms are <em>overpriced</em> (because the market overestimates the persistence of their accrual-heavy earnings) and low-accrual firms are <em>underpriced</em>.</p>
</section>
<section id="the-abelmishkin-test" class="level3" data-number="26.4.2">
<h3 data-number="26.4.2" class="anchored" data-anchor-id="the-abelmishkin-test"><span class="header-section-number">26.4.2</span> The Abelâ€“Mishkin Test</h3>
<p>Testing whether market pricing coefficients match rational forecasting coefficients can be done via the approach of <span class="citation" data-cites="abel1983optimal">Abel (<a href="references.html#ref-abel1983optimal" role="doc-biblioref">1983</a>)</span>, which avoids the complexity of the full <span class="citation" data-cites="abel1983integrated">Abel and Mishkin (<a href="references.html#ref-abel1983integrated" role="doc-biblioref">1983</a>)</span>, <span class="citation" data-cites="mishkin1983market">Mishkin (<a href="references.html#ref-mishkin1983market" role="doc-biblioref">1983</a>)</span> and <span class="citation" data-cites="mishkin2007rational">Mishkin (<a href="references.html#ref-mishkin2007rational" role="doc-biblioref">2007</a>)</span> nonlinear system. The intuition is simple: if lagged earnings components are mispriced, this should be detectable in a regression of <em>future abnormal returns</em> on those components:</p>
<p><span id="eq-abel-mishkin"><span class="math display">\[
AR_{i,t+1} = \alpha + \beta_a \cdot ACC_{i,t} + \beta_c \cdot CFO_{i,t} + \eta_{i,t}
\tag{26.10}\]</span></span></p>
<p>Under efficient pricing, <span class="math inline">\(\beta_a = \beta_c = 0\)</span>: lagged public information should have no predictive power for abnormal returns. A finding of <span class="math inline">\(\beta_a &lt; 0\)</span> implies that the market overprices accruals and subsequently corrects.</p>
<div class="cell" data-execution_count="15">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Abel-Mishkin style test</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>mod_am1 <span class="op">=</span> smf.ols(<span class="st">"size_adj_ret ~ acc + cfo"</span>, data<span class="op">=</span>panel).fit()</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>mod_am2 <span class="op">=</span> smf.ols(<span class="st">"size_adj_ret ~ acc_decile + cfo_decile"</span>, data<span class="op">=</span>panel).fit()</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>am_table <span class="op">=</span> pd.DataFrame({</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"(1) Continuous"</span>: {</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Intercept"</span>: <span class="ss">f"</span><span class="sc">{</span>mod_am1<span class="sc">.</span>params[<span class="st">'Intercept'</span>]<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>mod_am1<span class="sc">.</span>bse[<span class="st">'Intercept'</span>]<span class="sc">:.4f}</span><span class="ss">)"</span>,</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Accruals"</span>: <span class="ss">f"</span><span class="sc">{</span>mod_am1<span class="sc">.</span>params[<span class="st">'acc'</span>]<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>mod_am1<span class="sc">.</span>bse[<span class="st">'acc'</span>]<span class="sc">:.4f}</span><span class="ss">)"</span>,</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Cash Flows"</span>: <span class="ss">f"</span><span class="sc">{</span>mod_am1<span class="sc">.</span>params[<span class="st">'cfo'</span>]<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>mod_am1<span class="sc">.</span>bse[<span class="st">'cfo'</span>]<span class="sc">:.4f}</span><span class="ss">)"</span>,</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">"N"</span>: <span class="ss">f"</span><span class="sc">{</span><span class="bu">int</span>(mod_am1.nobs)<span class="sc">:,}</span><span class="ss">"</span>,</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">"RÂ²"</span>: <span class="ss">f"</span><span class="sc">{</span>mod_am1<span class="sc">.</span>rsquared<span class="sc">:.4f}</span><span class="ss">"</span>,</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"(2) Decile Ranks"</span>: {</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Intercept"</span>: <span class="ss">f"</span><span class="sc">{</span>mod_am2<span class="sc">.</span>params[<span class="st">'Intercept'</span>]<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>mod_am2<span class="sc">.</span>bse[<span class="st">'Intercept'</span>]<span class="sc">:.4f}</span><span class="ss">)"</span>,</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Accruals"</span>: <span class="ss">f"</span><span class="sc">{</span>mod_am2<span class="sc">.</span>params[<span class="st">'acc_decile'</span>]<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>mod_am2<span class="sc">.</span>bse[<span class="st">'acc_decile'</span>]<span class="sc">:.4f}</span><span class="ss">)"</span>,</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Cash Flows"</span>: <span class="ss">f"</span><span class="sc">{</span>mod_am2<span class="sc">.</span>params[<span class="st">'cfo_decile'</span>]<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>mod_am2<span class="sc">.</span>bse[<span class="st">'cfo_decile'</span>]<span class="sc">:.4f}</span><span class="ss">)"</span>,</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>        <span class="st">"N"</span>: <span class="ss">f"</span><span class="sc">{</span><span class="bu">int</span>(mod_am2.nobs)<span class="sc">:,}</span><span class="ss">"</span>,</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>        <span class="st">"RÂ²"</span>: <span class="ss">f"</span><span class="sc">{</span>mod_am2<span class="sc">.</span>rsquared<span class="sc">:.4f}</span><span class="ss">"</span>,</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>am_table</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div id="tbl-mispricing" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="15">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-mispricing-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;26.6: Abnormal return regressions. Column (1) regresses size-adjusted returns on lagged accruals and cash flows. Column (2) uses decile ranks. A negative coefficient on accruals indicates that the market overprices the accrual component and corrects in the subsequent period.
</figcaption>
<div aria-describedby="tbl-mispricing-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display" data-execution_count="13">
<div>


<table class="dataframe do-not-create-environment cell caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">(1) Continuous</th>
<th data-quarto-table-cell-role="th">(2) Decile Ranks</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">Intercept</th>
<td>0.0263 (0.0058)</td>
<td>0.0962 (0.0161)</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Accruals</th>
<td>-0.5686 (0.0920)</td>
<td>-0.0091 (0.0016)</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Cash Flows</th>
<td>-0.3538 (0.0575)</td>
<td>-0.0087 (0.0016)</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">N</th>
<td>7,000</td>
<td>7,000</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">RÂ²</th>
<td>0.0067</td>
<td>0.0055</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div>
</div>
</section>
<section id="interpretation-for-vietnam" class="level3" data-number="26.4.3">
<h3 data-number="26.4.3" class="anchored" data-anchor-id="interpretation-for-vietnam"><span class="header-section-number">26.4.3</span> Interpretation for Vietnam</h3>
<p>The limited attention hypothesis of <span class="citation" data-cites="hirshleifer2003limited">Hirshleifer and Teoh (<a href="references.html#ref-hirshleifer2003limited" role="doc-biblioref">2003</a>)</span> provides a particularly appealing explanation for Vietnamese markets. When retail investors dominate trading, as in Vietnam, where retail participation exceeds 80% of daily turnover, information processing capacity is limited. Investors may anchor on headline earnings without decomposing into accrual and cash flow components. The absence of short-selling mechanisms (Vietnam did not introduce covered short selling until 2024) further impedes the correction of overpricing, potentially allowing the accrual anomaly to persist longer than in developed markets.</p>
</section>
</section>
<section id="sec-accruals-anomaly" class="level2" data-number="26.5">
<h2 data-number="26.5" class="anchored" data-anchor-id="sec-accruals-anomaly"><span class="header-section-number">26.5</span> The Accrual Anomaly</h2>
<section id="portfolio-returns-by-accrual-decile" class="level3" data-number="26.5.1">
<h3 data-number="26.5.1" class="anchored" data-anchor-id="portfolio-returns-by-accrual-decile"><span class="header-section-number">26.5.1</span> Portfolio Returns by Accrual Decile</h3>
<p>Following the portfolio approach of <span class="citation" data-cites="sloan1996stock">Sloan (<a href="references.html#ref-sloan1996stock" role="doc-biblioref">1996</a>)</span>, we compute mean size-adjusted returns for each accrual decile. If the market misprices accruals, we expect a monotonically decreasing pattern: low-accrual firms (decile 1) earn positive abnormal returns, while high-accrual firms (decile 10) earn negative abnormal returns.</p>
<div class="cell" data-execution_count="16">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute annual portfolio returns (equal-weighted within decile-year)</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>port_rets <span class="op">=</span> (</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    panel</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    .groupby([<span class="st">"year"</span>, <span class="st">"acc_decile"</span>])[<span class="st">"size_adj_ret"</span>]</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    .mean()</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    .reset_index()</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Regression approach: decile dummies (no intercept)</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>port_rets[<span class="st">"acc_decile_str"</span>] <span class="op">=</span> <span class="st">"D"</span> <span class="op">+</span> port_rets[<span class="st">"acc_decile"</span>].astype(<span class="bu">str</span>).<span class="bu">str</span>.zfill(<span class="dv">2</span>)</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>mod_port <span class="op">=</span> smf.ols(</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"size_adj_ret ~ C(acc_decile, Treatment(reference=0)) - 1"</span>,</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>    data<span class="op">=</span>port_rets.assign(acc_decile<span class="op">=</span>port_rets[<span class="st">"acc_decile"</span>].astype(<span class="st">"category"</span>)),</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>).fit()</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Mean returns by decile</span></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>decile_means <span class="op">=</span> (</span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>    port_rets</span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">"acc_decile"</span>)[<span class="st">"size_adj_ret"</span>]</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>    .agg([<span class="st">"mean"</span>, <span class="st">"std"</span>, <span class="st">"count"</span>])</span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">round</span>(<span class="dv">4</span>)</span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>decile_means[<span class="st">"t_stat"</span>] <span class="op">=</span> (</span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>    decile_means[<span class="st">"mean"</span>] <span class="op">/</span> (decile_means[<span class="st">"std"</span>] <span class="op">/</span> np.sqrt(decile_means[<span class="st">"count"</span>]))</span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>).<span class="bu">round</span>(<span class="dv">2</span>)</span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>decile_means.columns <span class="op">=</span> [<span class="st">"Mean Return"</span>, <span class="st">"Std Dev"</span>, <span class="st">"N Years"</span>, <span class="st">"t-stat"</span>]</span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Hedge portfolio</span></span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a>hedge_series <span class="op">=</span> (</span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a>    port_rets.query(<span class="st">"acc_decile == 1"</span>).set_index(<span class="st">"year"</span>)[<span class="st">"size_adj_ret"</span>]</span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a>    <span class="op">-</span> port_rets.query(<span class="st">"acc_decile == 10"</span>).set_index(<span class="st">"year"</span>)[<span class="st">"size_adj_ret"</span>]</span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a>hedge_mean <span class="op">=</span> hedge_series.mean()</span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a>hedge_t <span class="op">=</span> hedge_mean <span class="op">/</span> (hedge_series.std() <span class="op">/</span> np.sqrt(<span class="bu">len</span>(hedge_series)))</span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-36"><a href="#cb16-36" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Hedge portfolio (D1 - D10): </span><span class="sc">{</span>hedge_mean<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb16-37"><a href="#cb16-37" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"t-statistic: </span><span class="sc">{</span>hedge_t<span class="sc">:.2f}</span><span class="ss">"</span>)</span>
<span id="cb16-38"><a href="#cb16-38" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb16-39"><a href="#cb16-39" aria-hidden="true" tabindex="-1"></a>decile_means</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Hedge portfolio (D1 - D10): 0.0397
t-statistic: 2.21
</code></pre>
</div>
<div id="tbl-anomaly-deciles" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-execution_count="16">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-anomaly-deciles-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;26.7: Mean size-adjusted returns by accrual decile. The hedge portfolio (long decile 1, short decile 10) return and its t-statistic are reported at the bottom.
</figcaption>
<div aria-describedby="tbl-anomaly-deciles-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-display" data-execution_count="14">
<div>


<table class="dataframe do-not-create-environment cell caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Mean Return</th>
<th data-quarto-table-cell-role="th">Std Dev</th>
<th data-quarto-table-cell-role="th">N Years</th>
<th data-quarto-table-cell-role="th">t-stat</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">acc_decile</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">1</th>
<td>0.0242</td>
<td>0.0471</td>
<td>14</td>
<td>1.92</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2</th>
<td>0.0135</td>
<td>0.0370</td>
<td>14</td>
<td>1.37</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">3</th>
<td>-0.0008</td>
<td>0.0596</td>
<td>14</td>
<td>-0.05</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">4</th>
<td>-0.0111</td>
<td>0.0317</td>
<td>14</td>
<td>-1.31</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">5</th>
<td>0.0034</td>
<td>0.0337</td>
<td>14</td>
<td>0.38</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">6</th>
<td>0.0086</td>
<td>0.0422</td>
<td>14</td>
<td>0.76</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">7</th>
<td>-0.0097</td>
<td>0.0318</td>
<td>14</td>
<td>-1.14</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">8</th>
<td>0.0005</td>
<td>0.0580</td>
<td>14</td>
<td>0.03</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">9</th>
<td>-0.0280</td>
<td>0.0337</td>
<td>14</td>
<td>-3.11</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">10</th>
<td>-0.0155</td>
<td>0.0354</td>
<td>14</td>
<td>-1.64</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</figure>
</div>
</div>
</section>
<section id="visualizing-the-anomaly" class="level3" data-number="26.5.2">
<h3 data-number="26.5.2" class="anchored" data-anchor-id="visualizing-the-anomaly"><span class="header-section-number">26.5.2</span> Visualizing the Anomaly</h3>
<div id="cell-fig-anomaly-bar" class="cell" data-execution_count="17">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>decile_plot <span class="op">=</span> port_rets.groupby(<span class="st">"acc_decile"</span>)[<span class="st">"size_adj_ret"</span>].mean()</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>colors <span class="op">=</span> [<span class="st">"steelblue"</span> <span class="cf">if</span> r <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">else</span> <span class="st">"firebrick"</span> <span class="cf">for</span> r <span class="kw">in</span> decile_plot.values]</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>ax.bar(decile_plot.index, decile_plot.values, color<span class="op">=</span>colors, edgecolor<span class="op">=</span><span class="st">"white"</span>)</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>ax.axhline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"black"</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Accrual Decile"</span>)</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Mean Size-Adjusted Return"</span>)</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>ax.set_xticks(<span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">11</span>))</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>ax.yaxis.set_major_formatter(mticker.PercentFormatter(xmax<span class="op">=</span><span class="dv">1</span>, decimals<span class="op">=</span><span class="dv">1</span>))</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="fig-anomaly-bar" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-anomaly-bar-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="33_accruals_files/figure-html/fig-anomaly-bar-output-1.png" width="1030" height="729" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-anomaly-bar-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;26.4: Mean size-adjusted returns by accrual decile. The downward slope from low-accrual to high-accrual deciles is consistent with market overpricing of the accrual component of earnings.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="time-series-stability" class="level3" data-number="26.5.3">
<h3 data-number="26.5.3" class="anchored" data-anchor-id="time-series-stability"><span class="header-section-number">26.5.3</span> Time-Series Stability</h3>
<p>A critical question for any anomaly is whether it persists over time or is concentrated in specific sub-periods. <a href="#fig-anomaly-ts" class="quarto-xref">Figure&nbsp;<span>26.5</span></a> plots the hedge portfolio return by year.</p>
<div id="cell-fig-anomaly-ts" class="cell" data-execution_count="18">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>ax.bar(hedge_series.index, hedge_series.values,</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>       color<span class="op">=</span>[<span class="st">"steelblue"</span> <span class="cf">if</span> v <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">else</span> <span class="st">"firebrick"</span> <span class="cf">for</span> v <span class="kw">in</span> hedge_series.values],</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>       edgecolor<span class="op">=</span><span class="st">"white"</span>)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>ax.axhline(hedge_series.mean(), color<span class="op">=</span><span class="st">"black"</span>, linestyle<span class="op">=</span><span class="st">"--"</span>, linewidth<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>           label<span class="op">=</span><span class="ss">f"Mean = </span><span class="sc">{</span>hedge_series<span class="sc">.</span>mean()<span class="sc">:.1%}</span><span class="ss">"</span>)</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>ax.axhline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"black"</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Year"</span>)</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Hedge Portfolio Return"</span>)</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>ax.yaxis.set_major_formatter(mticker.PercentFormatter(xmax<span class="op">=</span><span class="dv">1</span>, decimals<span class="op">=</span><span class="dv">0</span>))</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>ax.legend()</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="fig-anomaly-ts" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-anomaly-ts-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="33_accruals_files/figure-html/fig-anomaly-ts-output-1.png" width="1030" height="729" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-anomaly-ts-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;26.5: Annual hedge portfolio returns (decile 1 minus decile 10) over time. Positive values indicate that low-accrual firms outperformed high-accrual firms. Year-to-year variation is substantial, reflecting the noisy nature of annual return measurement.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="sec-accruals-discussion" class="level2" data-number="26.6">
<h2 data-number="26.6" class="anchored" data-anchor-id="sec-accruals-discussion"><span class="header-section-number">26.6</span> Discussion and Contemporary Perspectives</h2>
<section id="alternative-explanations" class="level3" data-number="26.6.1">
<h3 data-number="26.6.1" class="anchored" data-anchor-id="alternative-explanations"><span class="header-section-number">26.6.1</span> Alternative Explanations</h3>
<p>The accrual anomaly has generated an extensive debate in the accounting and finance literature. Several alternative explanations merit consideration in the Vietnamese context:</p>
<p><strong>Risk-based explanations.</strong> <span class="citation" data-cites="khan2008accruals">Khan (<a href="references.html#ref-khan2008accruals" role="doc-biblioref">2008</a>)</span> argues that high-accrual firms may earn lower returns because they are <em>less risky</em>, not because they are mispriced. If the CAPM or multi-factor models fail to capture the true risk structure, what appears as an anomaly may simply be compensation for omitted risk factors. This explanation is harder to evaluate in Vietnam given the limited history of factor models calibrated to local data.</p>
<p><strong>Growth and investment.</strong> <span class="citation" data-cites="fairfield2003accrued">Fairfield, Whisenant, and Yohn (<a href="references.html#ref-fairfield2003accrued" role="doc-biblioref">2003</a>)</span> show that the low persistence of accruals extends to long-term accruals (capital expenditures), suggesting that the phenomenon reflects diminishing marginal returns to investment rather than earnings manipulation. In Vietnamâ€™s high-growth environment, this channel may be particularly important as firms invest aggressively during credit booms.</p>
<p><strong>Data artifacts.</strong> <span class="citation" data-cites="kraft2006analysis">Kraft, Leone, and Wasley (<a href="references.html#ref-kraft2006analysis" role="doc-biblioref">2006</a>)</span> identify sensitivity to outliers and look-ahead bias in the original evidence. Vietnamese financial data, with its shorter history and higher incidence of reporting errors, warrants extra vigilance on these points.</p>
<p><strong>Institutional constraints.</strong> Short-selling restrictions, prevalent in Vietnam until recently, prevent arbitrageurs from correcting overpricing. Combined with high transaction costs and limited institutional investor participation, this creates an environment where mispricing can be sustained even if sophisticated investors identify it.</p>
</section>
<section id="state-owned-enterprises-and-accrual-quality" class="level3" data-number="26.6.2">
<h3 data-number="26.6.2" class="anchored" data-anchor-id="state-owned-enterprises-and-accrual-quality"><span class="header-section-number">26.6.2</span> State-Owned Enterprises and Accrual Quality</h3>
<p>A distinctive feature of Vietnamese markets is the prevalence of SOEs and former SOEs. Several testable hypotheses arise:</p>
<ol type="1">
<li><p><strong>Political smoothing:</strong> SOE managers may smooth earnings to meet government targets, generating accruals that differ in nature from those of private firms.</p></li>
<li><p><strong>Audit quality:</strong> <span class="citation" data-cites="khanh2018audit">Khanh and Nguyen (<a href="references.html#ref-khanh2018audit" role="doc-biblioref">2018</a>)</span> find that audit quality varies systematically with ownership structure in Vietnam. Lower audit quality may allow greater accrual manipulation.</p></li>
<li><p><strong>Information environment:</strong> SOEs may have weaker voluntary disclosure, increasing the information asymmetry between accruals and cash flows.</p></li>
</ol>
<p>These hypotheses suggest that the accrual anomaly may exhibit cross-sectional variation along ownership dimensions unique to Vietnam.</p>
</section>
<section id="methodological-considerations" class="level3" data-number="26.6.3">
<h3 data-number="26.6.3" class="anchored" data-anchor-id="methodological-considerations"><span class="header-section-number">26.6.3</span> Methodological Considerations</h3>
<p>When implementing this analysis with actual Vietnamese data, several practical issues require attention:</p>
<p><strong>Standard errors.</strong> Pooled OLS standard errors assume independence across firm-years. In practice, both cross-sectional correlation (common shocks within a year) and time-series correlation (firm-level persistence) are present. Clustering standard errors by firm and year (two-way clustering) or using the Fama-MacBeth procedure <span class="citation" data-cites="fama1973risk">(<a href="references.html#ref-fama1973risk" role="doc-biblioref">Fama and MacBeth 1973</a>)</span> with Newey-West corrections is recommended.</p>
<p><strong>VAS-specific items.</strong> Vietnamese financial statements include items without direct equivalents in Compustat, such as <em>chi phÃ­ tráº£ trÆ°á»›c</em> (prepaid expenses reported separately from current assets in some VAS templates). Researchers must map these carefully.</p>
<p><strong>Price limits.</strong> Daily price limits on HOSE (<span class="math inline">\(\pm\)</span> 7%) and HNX (<span class="math inline">\(\pm\)</span> 10%) can truncate return distributions and create serial correlation in measured returns. For return measurement over 12-month windows, this is less problematic but should be documented.</p>
<p><strong>Exchange effects.</strong> HOSE-listed firms tend to be larger and more liquid than HNX-listed firms. Separate analysis by exchange, or inclusion of exchange fixed effects, can help ensure results are not driven by liquidity differences.</p>
</section>
</section>
<section id="summary" class="level2" data-number="26.7">
<h2 data-number="26.7" class="anchored" data-anchor-id="summary"><span class="header-section-number">26.7</span> Summary</h2>
<p>This chapter examined accrual accounting and its implications for earnings persistence and market efficiency in the Vietnamese context. The key findings are:</p>
<ul>
<li>Accruals are the portion of earnings not backed by contemporaneous cash flows. They arise naturally from accrual accounting but also embed estimation errors and managerial discretion.</li>
<li>Simulation analysis demonstrates that when accounting estimates deviate from economic truth, accrual persistence falls below cash flow persistenceâ€”providing a structural explanation for the empirical regularity.</li>
<li>Persistence regressions confirm that the accrual component of earnings is less persistent than the cash flow component, a finding that holds across industries.</li>
<li>Market pricing tests suggest that stock prices in Vietnamese markets may not fully incorporate the differential persistence of earnings components, giving rise to the accrual anomaly.</li>
</ul>
<p>The Vietnamese institutional environment provides rich variation for future research on the interplay between accounting quality, investor sophistication, and market efficiency.</p>
<!-- ## Exercises

1.  **Verify the accounting identity.** Using the simulated data from @sec-simulation, verify that $\text{Earnings} = \text{Accruals} + \text{CFO}$ holds exactly. Compute the maximum absolute deviation across all firm-years.

2.  **Sensitivity to parameters.** Modify the simulation function to allow $\rho = 0$ (i.i.d. sales). How does this change the persistence of earnings and its components? What does this tell you about the role of the underlying economic process vs. accounting measurement?

3.  **SOE subsample analysis.** Using the synthetic panel, estimate persistence regressions separately for SOE and non-SOE firms. Is there evidence of differential accrual quality by ownership type?

4.  **Fama-MacBeth standard errors.** Re-estimate the persistence regressions using the Fama-MacBeth approach: run cross-sectional regressions year-by-year, then compute time-series means and standard errors of the coefficient estimates. Compare these standard errors to the pooled OLS standard errors.

5.  **Jones model decomposition.** Implement the @jones1991earnings model to separate accruals into "normal" and "abnormal" components. The model specification is: 

$$
\frac{ACC_{i,t}}{A_{i,t-1}} = \alpha_1 \frac{1}{A_{i,t-1}}
      + \alpha_2 \frac{\Delta Rev_{i,t}}{A_{i,t-1}}
      + \alpha_3 \frac{PPE_{i,t}}{A_{i,t-1}} + \varepsilon_{i,t}
$$ 

Estimate this cross-sectionally by year and industry. Do abnormal accruals (the residual $\hat{\varepsilon}$) predict returns better than total accruals?

6.  **VAS vs. IFRS measurement.** Research three specific areas where VAS differs from IFRS in ways that affect accrual measurement (e.g., revenue recognition, lease accounting, financial instrument classification). For each, explain the direction and likely magnitude of the impact on measured accruals.

7.  **Short-selling constraints.** Vietnam introduced limited short-selling in 2024. Design a difference-in-differences framework to test whether the introduction of short selling affects the magnitude of the accrual anomaly. What are the key identification assumptions? -->


<!-- -->

<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-abel1983optimal" class="csl-entry" role="listitem">
Abel, Andrew B. 1983. <span>â€œOptimal Investment Under Uncertainty.â€</span> <em>The American Economic Review</em> 73 (1): 228â€“33.
</div>
<div id="ref-abel1983integrated" class="csl-entry" role="listitem">
Abel, Andrew B, and Frederic S Mishkin. 1983. <span>â€œAn Integrated View of Tests of Rationality, Market Efficiency and the Short-Run Neutrality of Monetary Policy.â€</span> <em>Journal of Monetary Economics</em> 11 (1): 3â€“24.
</div>
<div id="ref-dechow2010understanding" class="csl-entry" role="listitem">
Dechow, Patricia, Weili Ge, and Catherine Schrand. 2010. <span>â€œUnderstanding Earnings Quality: A Review of the Proxies, Their Determinants and Their Consequences.â€</span> <em>Journal of Accounting and Economics</em> 50 (2-3): 344â€“401.
</div>
<div id="ref-fairfield2003accrued" class="csl-entry" role="listitem">
Fairfield, Patricia M, J Scott Whisenant, and Teri Lombardi Yohn. 2003. <span>â€œAccrued Earnings and Growth: Implications for Future Profitability and Market Mispricing.â€</span> <em>The Accounting Review</em> 78 (1): 353â€“71.
</div>
<div id="ref-fama1973risk" class="csl-entry" role="listitem">
Fama, Eugene F, and James D MacBeth. 1973. <span>â€œRisk, Return, and Equilibrium: Empirical Tests.â€</span> <em>Journal of Political Economy</em> 81 (3): 607â€“36.
</div>
<div id="ref-hirshleifer2003limited" class="csl-entry" role="listitem">
Hirshleifer, David, and Siew Hong Teoh. 2003. <span>â€œLimited Attention, Information Disclosure, and Financial Reporting.â€</span> <em>Journal of Accounting and Economics</em> 36 (1-3): 337â€“86.
</div>
<div id="ref-hribar2002errors" class="csl-entry" role="listitem">
Hribar, Paul, and Daniel W Collins. 2002. <span>â€œErrors in Estimating Accruals: Implications for Empirical Research.â€</span> <em>Journal of Accounting Research</em> 40 (1): 105â€“34.
</div>
<div id="ref-khan2008accruals" class="csl-entry" role="listitem">
Khan, Mozaffar. 2008. <span>â€œAre Accruals Mispriced? Evidence from Tests of an Intertemporal Capital Asset Pricing Model.â€</span> <em>Journal of Accounting and Economics</em> 45 (1): 55â€“77.
</div>
<div id="ref-khanh2018audit" class="csl-entry" role="listitem">
Khanh, Hoang Thi Mai, and Vinh Khuong Nguyen. 2018. <span>â€œAudit Quality, Firm Characteristics and Real Earnings Management: The Case of Listed Vietnamese Firms.â€</span> <em>International Journal of Economics and Financial Issues</em> 8 (4): 243.
</div>
<div id="ref-kraft2006analysis" class="csl-entry" role="listitem">
Kraft, Arthur, Andrew J Leone, and Charles Wasley. 2006. <span>â€œAn Analysis of the Theories and Explanations Offered for the Mispricing of Accruals and Accrual Components.â€</span> <em>Journal of Accounting Research</em> 44 (2): 297â€“339.
</div>
<div id="ref-mishkin1983market" class="csl-entry" role="listitem">
Mishkin, Frederic S. 1983. <span>â€œAre Market Forecasts Rational?â€</span> In <em>A Rational Expectations Approach to Macroeconometrics: Testing Policy Ineffectiveness and Efficient-Markets Models</em>, 59â€“75. University of Chicago Press.
</div>
<div id="ref-mishkin2007rational" class="csl-entry" role="listitem">
â€”â€”â€”. 2007. <em>A Rational Expectations Approach to Macroeconometrics: Testing Policy Ineffectiveness and Efficient-Markets Models</em>. University of Chicago Press.
</div>
<div id="ref-sloan1996stock" class="csl-entry" role="listitem">
Sloan, Richard G. 1996. <span>â€œDo Stock Prices Fully Reflect Information in Accruals and Cash Flows about Future Earnings?â€</span> <em>Accounting Review</em>, 289â€“315.
</div>
</div>
</section>

</main> <!-- /main -->
<script>
document.addEventListener("DOMContentLoaded", function () {
  const year = new Date().getFullYear();
  document.getElementById("copyright").textContent = "Â© " + year;
});
</script>
<script>
(function () {
  const GA_ID = "G-LMDLDJXXSC";   // your real GA4 ID
  const CONSENT_KEY = "cookie_consent_v1";

  function log(msg) {
    console.log("[GA Loader]", msg);
  }

  function loadGtag() {
    if (window.__gtag_loaded__) {
      log("GA already loaded, skipping");
      return;
    }

    log("Loading Google Analytics...");

    window.__gtag_loaded__ = true;

    const script = document.createElement("script");
    script.async = true;
    script.src = "https://www.googletagmanager.com/gtag/js?id=" + encodeURIComponent(GA_ID);

    script.onload = function () {
      log("gtag.js loaded");

      window.dataLayer = window.dataLayer || [];
      function gtag(){ dataLayer.push(arguments); }
      window.gtag = gtag;

      gtag("js", new Date());
      gtag("config", GA_ID, {
        anonymize_ip: true,
        transport_type: "beacon"
      });

      log("GA initialized successfully");
    };

    script.onerror = function () {
      log("FAILED to load gtag.js. Likely blocked by ad blocker or network.");
    };

    document.head.appendChild(script);
  }

  function checkConsentAndLoad() {
    const consent = localStorage.getItem(CONSENT_KEY);
    log("Stored consent value = " + consent);

    if (consent === "accepted") {
      loadGtag();
    } else {
      log("Analytics blocked due to missing or declined consent");
    }
  }

  // Run on page load
  checkConsentAndLoad();

  // Listen for cookie banner decisions
  window.addEventListener("cookie-consent-changed", function (e) {
    log("Consent event received: " + e.detail);
    if (e.detail === "accepted") {
      loadGtag();
    }
  });

})();
</script>
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "î§‹";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/github\.com\/mikenguyen13\/tidy_finance_vn");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./32_info_earnings.html" class="pagination-link" aria-label="Information Content of Earnings Announcements">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Information Content of Earnings Announcements</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./34_earning_management.html" class="pagination-link" aria-label="Earnings Management: Detection and Measurement">
        <span class="nav-page-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Earnings Management: Detection and Measurement</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb20" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># Accruals, Earnings Persistence, and Market Efficiency</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: setup</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.ticker <span class="im">as</span> mticker</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.formula.api <span class="im">as</span> smf</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy <span class="im">import</span> stats</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> itertools <span class="im">import</span> product</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> warnings</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>warnings.filterwarnings(<span class="st">"ignore"</span>)</span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>plt.rcParams.update({</span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">"figure.dpi"</span>: <span class="dv">150</span>,</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>    <span class="st">"axes.spines.top"</span>: <span class="va">False</span>,</span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>    <span class="st">"axes.spines.right"</span>: <span class="va">False</span>,</span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>    <span class="st">"font.size"</span>: <span class="dv">11</span>,</span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a>Accrual accounting is the foundation of modern financial reporting. Under accrual principles, revenues are recognized when earned and expenses when incurred, regardless of when cash changes hands. This timing wedge between economic events and cash realization generates **accruals** (i.e., the non-cash component of reported earnings). Formally, we define total accruals as:</span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a>\text{Accruals}_t = \text{Earnings}_t - \text{Cash Flow from Operations}_t</span>
<span id="cb20-32"><a href="#cb20-32" aria-hidden="true" tabindex="-1"></a>$$ {#eq-accruals-def}</span>
<span id="cb20-33"><a href="#cb20-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-34"><a href="#cb20-34" aria-hidden="true" tabindex="-1"></a>The distinction between accruals and cash flows matters because these two components of earnings exhibit markedly different statistical properties. Cash flows from operations tend to be more persistent and harder for managers to manipulate, while accruals are inherently more transient and subject to managerial discretion through estimates, assumptions, and timing choices <span class="co">[</span><span class="ot">@dechow2010understanding</span><span class="co">]</span>.</span>
<span id="cb20-35"><a href="#cb20-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-36"><a href="#cb20-36" aria-hidden="true" tabindex="-1"></a>@sloan1996stock demonstrated two important empirical regularities in U.S. data:</span>
<span id="cb20-37"><a href="#cb20-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-38"><a href="#cb20-38" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>The accrual component of earnings is *less persistent* than the cash flow component in predicting future earnings, and</span>
<span id="cb20-39"><a href="#cb20-39" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>Equity prices behave as if investors fail to distinguish between these components, treating accruals as having the same persistence as cash flows. This second finding implies a predictable pattern in stock returns (i.e., firms with high accruals earn lower subsequent returns, and vice versaâ€”known as the **accrual anomaly**).</span>
<span id="cb20-40"><a href="#cb20-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-41"><a href="#cb20-41" aria-hidden="true" tabindex="-1"></a><span class="fu">### Why Vietnam?</span></span>
<span id="cb20-42"><a href="#cb20-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-43"><a href="#cb20-43" aria-hidden="true" tabindex="-1"></a>Vietnam's equity markets provide a compelling laboratory for studying accrual dynamics for several reasons:</span>
<span id="cb20-44"><a href="#cb20-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-45"><a href="#cb20-45" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>**Accounting standards in transition.** Vietnam operates under Vietnamese Accounting Standards (VAS), which are broadly based on older International Accounting Standards but have not yet fully converged with IFRS. VAS retains certain rules-based provisions that may generate different accrual patterns compared to the principles-based frameworks in developed markets.</span>
<span id="cb20-46"><a href="#cb20-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-47"><a href="#cb20-47" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>**State-owned enterprise (SOE) influence.** A significant fraction of listed firms on HOSE and HNX are former SOEs or remain partially state-owned. These firms may face different incentives regarding accrual management (political rather than purely economic), introducing heterogeneity absent in the original U.S. studies.</span>
<span id="cb20-48"><a href="#cb20-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-49"><a href="#cb20-49" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>**Market maturity and investor sophistication.** Vietnam's stock market, with HOSE established in 2000 and HNX in 2005, is still developing. Retail investors dominate trading volume, and institutional infrastructure (analyst coverage, short-selling constraints, information intermediaries) is less developed than in the U.S. This environment may amplify or attenuate the mispricing patterns documented in developed markets.</span>
<span id="cb20-50"><a href="#cb20-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-51"><a href="#cb20-51" aria-hidden="true" tabindex="-1"></a><span class="ss">4.  </span>**Daily price limits.** Both HOSE ($\pm$ 7%) and HNX ($\pm$ 10%) impose daily price limits, which can impede price discovery and create path dependencies in return measurement that have no analogue in the U.S. context.</span>
<span id="cb20-52"><a href="#cb20-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-53"><a href="#cb20-53" aria-hidden="true" tabindex="-1"></a><span class="ss">5.  </span>**Emerging market growth dynamics.** High-growth economies generate different accrual profilesâ€”rapid revenue growth mechanically produces large working capital accruals even absent any managerial manipulation <span class="co">[</span><span class="ot">@fairfield2003accrued</span><span class="co">]</span>.</span>
<span id="cb20-54"><a href="#cb20-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-55"><a href="#cb20-55" aria-hidden="true" tabindex="-1"></a><span class="fu">## Measuring Accruals {#sec-accruals-measuring}</span></span>
<span id="cb20-56"><a href="#cb20-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-57"><a href="#cb20-57" aria-hidden="true" tabindex="-1"></a><span class="fu">### The Balance Sheet Approach</span></span>
<span id="cb20-58"><a href="#cb20-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-59"><a href="#cb20-59" aria-hidden="true" tabindex="-1"></a>The traditional approach to measuring accruals, used in much of the early literature, constructs total accruals from successive balance sheet snapshots. Define the following balance sheet items for firm $i$ in period $t$ (@tbl-accruals-bs-items).</span>
<span id="cb20-60"><a href="#cb20-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-61"><a href="#cb20-61" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> Symbol <span class="pp">|</span> Description <span class="pp">|</span> VAS Equivalent <span class="pp">|</span></span>
<span id="cb20-62"><a href="#cb20-62" aria-hidden="true" tabindex="-1"></a><span class="pp">|-------------------|-------------------------|----------------------------|</span></span>
<span id="cb20-63"><a href="#cb20-63" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> $\Delta CA_{i,t}$ <span class="pp">|</span> Change in current assets <span class="pp">|</span> Thay Ä‘á»•i tÃ i sáº£n ngáº¯n háº¡n <span class="pp">|</span></span>
<span id="cb20-64"><a href="#cb20-64" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> $\Delta Cash_{i,t}$ <span class="pp">|</span> Change in cash and equivalents <span class="pp">|</span> Thay Ä‘á»•i tiá»n vÃ  tÆ°Æ¡ng Ä‘Æ°Æ¡ng tiá»n <span class="pp">|</span></span>
<span id="cb20-65"><a href="#cb20-65" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> $\Delta CL_{i,t}$ <span class="pp">|</span> Change in current liabilities <span class="pp">|</span> Thay Ä‘á»•i ná»£ ngáº¯n háº¡n <span class="pp">|</span></span>
<span id="cb20-66"><a href="#cb20-66" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> $\Delta STD_{i,t}$ <span class="pp">|</span> Change in short-term debt <span class="pp">|</span> Thay Ä‘á»•i vay ngáº¯n háº¡n <span class="pp">|</span></span>
<span id="cb20-67"><a href="#cb20-67" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> $\Delta TP_{i,t}$ <span class="pp">|</span> Change in taxes payable <span class="pp">|</span> Thay Ä‘á»•i thuáº¿ pháº£i ná»™p <span class="pp">|</span></span>
<span id="cb20-68"><a href="#cb20-68" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> $Dep_{i,t}$ <span class="pp">|</span> Depreciation and amortization <span class="pp">|</span> Kháº¥u hao TSCÄ <span class="pp">|</span></span>
<span id="cb20-69"><a href="#cb20-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-70"><a href="#cb20-70" aria-hidden="true" tabindex="-1"></a>: Key balance sheet items for accrual measurement {#tbl-accruals-bs-items}</span>
<span id="cb20-71"><a href="#cb20-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-72"><a href="#cb20-72" aria-hidden="true" tabindex="-1"></a>Total accruals under the balance sheet approach are:</span>
<span id="cb20-73"><a href="#cb20-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-74"><a href="#cb20-74" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb20-75"><a href="#cb20-75" aria-hidden="true" tabindex="-1"></a>ACC^{BS}_{i,t} = (\Delta CA_{i,t} - \Delta Cash_{i,t})</span>
<span id="cb20-76"><a href="#cb20-76" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>(\Delta CL_{i,t} - \Delta STD_{i,t} - \Delta TP_{i,t})</span>
<span id="cb20-77"><a href="#cb20-77" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Dep_{i,t}</span>
<span id="cb20-78"><a href="#cb20-78" aria-hidden="true" tabindex="-1"></a>$$ {#eq-bs-accruals}</span>
<span id="cb20-79"><a href="#cb20-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-80"><a href="#cb20-80" aria-hidden="true" tabindex="-1"></a>The intuition behind @eq-bs-accruals is straightforward. Changes in non-cash current assets (such as accounts receivable and inventory) represent revenues recognized or expenses deferred without corresponding cash flows. Changes in operating current liabilities (excluding debt) capture expenses recognized without cash outflows. Short-term debt and taxes payable are excluded because they relate to financing and tax timing rather than operating accruals. Depreciation is subtracted as a non-cash charge against earnings.</span>
<span id="cb20-81"><a href="#cb20-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-82"><a href="#cb20-82" aria-hidden="true" tabindex="-1"></a>All variables are typically scaled by average total assets to control for firm size:</span>
<span id="cb20-83"><a href="#cb20-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-84"><a href="#cb20-84" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb20-85"><a href="#cb20-85" aria-hidden="true" tabindex="-1"></a>acc_{i,t} = \frac{ACC^{BS}_{i,t}}{(\text{Assets}_{i,t} + \text{Assets}_{i,t-1})/2}</span>
<span id="cb20-86"><a href="#cb20-86" aria-hidden="true" tabindex="-1"></a>$$ {#eq-scaled-accruals}</span>
<span id="cb20-87"><a href="#cb20-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-88"><a href="#cb20-88" aria-hidden="true" tabindex="-1"></a><span class="fu">### The Cash Flow Statement Approach</span></span>
<span id="cb20-89"><a href="#cb20-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-90"><a href="#cb20-90" aria-hidden="true" tabindex="-1"></a>@hribar2002errors demonstrated that the balance sheet approach introduces measurement error because non-operating events, such as mergers, acquisitions, divestitures, and foreign currency translations, affect current asset and liability balances without corresponding earnings impacts. They advocate a simpler and more accurate approach:</span>
<span id="cb20-91"><a href="#cb20-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-92"><a href="#cb20-92" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb20-93"><a href="#cb20-93" aria-hidden="true" tabindex="-1"></a>ACC^{CF}_{i,t} = \text{Earnings}_{i,t} - \text{CFO}_{i,t}</span>
<span id="cb20-94"><a href="#cb20-94" aria-hidden="true" tabindex="-1"></a>$$ {#eq-cf-accruals}</span>
<span id="cb20-95"><a href="#cb20-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-96"><a href="#cb20-96" aria-hidden="true" tabindex="-1"></a>where $\text{CFO}_{i,t}$ is cash flow from operations reported directly on the cash flow statement.</span>
<span id="cb20-97"><a href="#cb20-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-98"><a href="#cb20-98" aria-hidden="true" tabindex="-1"></a><span class="fu">### Vietnamese Context</span></span>
<span id="cb20-99"><a href="#cb20-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-100"><a href="#cb20-100" aria-hidden="true" tabindex="-1"></a>For Vietnamese listed firms, the cash flow statement approach is generally preferable, but practitioners should be aware of several data considerations:</span>
<span id="cb20-101"><a href="#cb20-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-102"><a href="#cb20-102" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Circular 200/2014/TT-BTC** standardizes the chart of accounts and financial statement templates. Cash flow from operations is reported using the *indirect method* by most firms (starting from net income and adjusting for non-cash items), though some use the direct method.</span>
<span id="cb20-103"><a href="#cb20-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-104"><a href="#cb20-104" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**VAS 24** (Cash Flow Statements) governs disclosure. Unlike IFRS, VAS treatment of interest paid and dividends received in the operating section is less flexible, potentially affecting comparability.</span>
<span id="cb20-105"><a href="#cb20-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-106"><a href="#cb20-106" aria-hidden="true" tabindex="-1"></a>For the remainder of this chapter, we use the balance sheet approach, where demonstrated on simulated data (for pedagogical transparency) and the cash flow statement approach on actual firm data where available.</span>
<span id="cb20-107"><a href="#cb20-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-108"><a href="#cb20-108" aria-hidden="true" tabindex="-1"></a><span class="fu">## Simulation Analysis {#sec-accruals-simulation}</span></span>
<span id="cb20-109"><a href="#cb20-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-110"><a href="#cb20-110" aria-hidden="true" tabindex="-1"></a>Before turning to Vietnamese market data, we construct a simulation to build economic intuition for *why* accrual persistence differs from cash flow persistence, and what role estimation error in accrual accounting plays in generating this difference.</span>
<span id="cb20-111"><a href="#cb20-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-112"><a href="#cb20-112" aria-hidden="true" tabindex="-1"></a><span class="fu">### The Model</span></span>
<span id="cb20-113"><a href="#cb20-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-114"><a href="#cb20-114" aria-hidden="true" tabindex="-1"></a>Consider a simplified firm that:</span>
<span id="cb20-115"><a href="#cb20-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-116"><a href="#cb20-116" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Sells goods on credit at a constant gross margin $\mu$</span>
<span id="cb20-117"><a href="#cb20-117" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Follows an AR(1) sales process: $S_t = \bar{S} + \rho(S_{t-1} - \bar{S}) + \varepsilon_t$, where $\varepsilon_t \sim N(0, \sigma^2_S)$</span>
<span id="cb20-118"><a href="#cb20-118" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Collects receivables in the following period, with a true default rate $\delta$</span>
<span id="cb20-119"><a href="#cb20-119" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Records an allowance for doubtful debts as a fraction $\alpha$ of current sales</span>
<span id="cb20-120"><a href="#cb20-120" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Pays dividends equal to 100% of net income</span>
<span id="cb20-121"><a href="#cb20-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-122"><a href="#cb20-122" aria-hidden="true" tabindex="-1"></a>The key parameter of interest is $\alpha$, the managerial estimate of bad debts. When $\alpha = \delta$ (the true default rate), the accounting system is unbiased. When $\alpha \neq \delta$, accruals contain estimation error that affects persistence.</span>
<span id="cb20-123"><a href="#cb20-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-126"><a href="#cb20-126" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb20-127"><a href="#cb20-127" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: sim-function</span></span>
<span id="cb20-128"><a href="#cb20-128" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Simulation function for a single firm"</span></span>
<span id="cb20-129"><a href="#cb20-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-130"><a href="#cb20-130" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> simulate_firm(</span>
<span id="cb20-131"><a href="#cb20-131" aria-hidden="true" tabindex="-1"></a>    alpha: <span class="bu">float</span> <span class="op">=</span> <span class="fl">0.03</span>,</span>
<span id="cb20-132"><a href="#cb20-132" aria-hidden="true" tabindex="-1"></a>    n_years: <span class="bu">int</span> <span class="op">=</span> <span class="dv">20</span>,</span>
<span id="cb20-133"><a href="#cb20-133" aria-hidden="true" tabindex="-1"></a>    delta: <span class="bu">float</span> <span class="op">=</span> <span class="fl">0.03</span>,</span>
<span id="cb20-134"><a href="#cb20-134" aria-hidden="true" tabindex="-1"></a>    gross_margin: <span class="bu">float</span> <span class="op">=</span> <span class="fl">0.80</span>,</span>
<span id="cb20-135"><a href="#cb20-135" aria-hidden="true" tabindex="-1"></a>    mean_sales: <span class="bu">float</span> <span class="op">=</span> <span class="fl">1000.0</span>,</span>
<span id="cb20-136"><a href="#cb20-136" aria-hidden="true" tabindex="-1"></a>    sd_sales: <span class="bu">float</span> <span class="op">=</span> <span class="fl">100.0</span>,</span>
<span id="cb20-137"><a href="#cb20-137" aria-hidden="true" tabindex="-1"></a>    rho: <span class="bu">float</span> <span class="op">=</span> <span class="fl">0.9</span>,</span>
<span id="cb20-138"><a href="#cb20-138" aria-hidden="true" tabindex="-1"></a>    beg_cash: <span class="bu">float</span> <span class="op">=</span> <span class="fl">1500.0</span>,</span>
<span id="cb20-139"><a href="#cb20-139" aria-hidden="true" tabindex="-1"></a>    rng: np.random.Generator <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb20-140"><a href="#cb20-140" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> pd.DataFrame:</span>
<span id="cb20-141"><a href="#cb20-141" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb20-142"><a href="#cb20-142" aria-hidden="true" tabindex="-1"></a><span class="co">    Simulate financial statements for a single firm.</span></span>
<span id="cb20-143"><a href="#cb20-143" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb20-144"><a href="#cb20-144" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters</span></span>
<span id="cb20-145"><a href="#cb20-145" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb20-146"><a href="#cb20-146" aria-hidden="true" tabindex="-1"></a><span class="co">    alpha : float</span></span>
<span id="cb20-147"><a href="#cb20-147" aria-hidden="true" tabindex="-1"></a><span class="co">        Managerial estimate of doubtful debt rate (allowance parameter).</span></span>
<span id="cb20-148"><a href="#cb20-148" aria-hidden="true" tabindex="-1"></a><span class="co">    n_years : int</span></span>
<span id="cb20-149"><a href="#cb20-149" aria-hidden="true" tabindex="-1"></a><span class="co">        Number of years to simulate.</span></span>
<span id="cb20-150"><a href="#cb20-150" aria-hidden="true" tabindex="-1"></a><span class="co">    delta : float</span></span>
<span id="cb20-151"><a href="#cb20-151" aria-hidden="true" tabindex="-1"></a><span class="co">        True economic default rate on receivables.</span></span>
<span id="cb20-152"><a href="#cb20-152" aria-hidden="true" tabindex="-1"></a><span class="co">    gross_margin : float</span></span>
<span id="cb20-153"><a href="#cb20-153" aria-hidden="true" tabindex="-1"></a><span class="co">        Gross margin on sales.</span></span>
<span id="cb20-154"><a href="#cb20-154" aria-hidden="true" tabindex="-1"></a><span class="co">    mean_sales : float</span></span>
<span id="cb20-155"><a href="#cb20-155" aria-hidden="true" tabindex="-1"></a><span class="co">        Long-run mean of the AR(1) sales process.</span></span>
<span id="cb20-156"><a href="#cb20-156" aria-hidden="true" tabindex="-1"></a><span class="co">    sd_sales : float</span></span>
<span id="cb20-157"><a href="#cb20-157" aria-hidden="true" tabindex="-1"></a><span class="co">        Standard deviation of the sales innovation.</span></span>
<span id="cb20-158"><a href="#cb20-158" aria-hidden="true" tabindex="-1"></a><span class="co">    rho : float</span></span>
<span id="cb20-159"><a href="#cb20-159" aria-hidden="true" tabindex="-1"></a><span class="co">        AR(1) persistence parameter for sales.</span></span>
<span id="cb20-160"><a href="#cb20-160" aria-hidden="true" tabindex="-1"></a><span class="co">    beg_cash : float</span></span>
<span id="cb20-161"><a href="#cb20-161" aria-hidden="true" tabindex="-1"></a><span class="co">        Beginning cash balance.</span></span>
<span id="cb20-162"><a href="#cb20-162" aria-hidden="true" tabindex="-1"></a><span class="co">    rng : numpy Generator</span></span>
<span id="cb20-163"><a href="#cb20-163" aria-hidden="true" tabindex="-1"></a><span class="co">        Random number generator for reproducibility.</span></span>
<span id="cb20-164"><a href="#cb20-164" aria-hidden="true" tabindex="-1"></a><span class="co">        </span></span>
<span id="cb20-165"><a href="#cb20-165" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns</span></span>
<span id="cb20-166"><a href="#cb20-166" aria-hidden="true" tabindex="-1"></a><span class="co">    -------</span></span>
<span id="cb20-167"><a href="#cb20-167" aria-hidden="true" tabindex="-1"></a><span class="co">    pd.DataFrame</span></span>
<span id="cb20-168"><a href="#cb20-168" aria-hidden="true" tabindex="-1"></a><span class="co">        Simulated financial statement data.</span></span>
<span id="cb20-169"><a href="#cb20-169" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb20-170"><a href="#cb20-170" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> rng <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb20-171"><a href="#cb20-171" aria-hidden="true" tabindex="-1"></a>        rng <span class="op">=</span> np.random.default_rng(<span class="dv">42</span>)</span>
<span id="cb20-172"><a href="#cb20-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-173"><a href="#cb20-173" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Generate AR(1) sales</span></span>
<span id="cb20-174"><a href="#cb20-174" aria-hidden="true" tabindex="-1"></a>    errors <span class="op">=</span> rng.normal(<span class="dv">0</span>, sd_sales, n_years)</span>
<span id="cb20-175"><a href="#cb20-175" aria-hidden="true" tabindex="-1"></a>    sales <span class="op">=</span> np.zeros(n_years)</span>
<span id="cb20-176"><a href="#cb20-176" aria-hidden="true" tabindex="-1"></a>    sales[<span class="dv">0</span>] <span class="op">=</span> mean_sales <span class="op">+</span> errors[<span class="dv">0</span>]</span>
<span id="cb20-177"><a href="#cb20-177" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> t <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, n_years):</span>
<span id="cb20-178"><a href="#cb20-178" aria-hidden="true" tabindex="-1"></a>        sales[t] <span class="op">=</span> mean_sales <span class="op">+</span> rho <span class="op">*</span> (sales[t <span class="op">-</span> <span class="dv">1</span>] <span class="op">-</span> mean_sales) <span class="op">+</span> errors[t]</span>
<span id="cb20-179"><a href="#cb20-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-180"><a href="#cb20-180" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Allocate arrays</span></span>
<span id="cb20-181"><a href="#cb20-181" aria-hidden="true" tabindex="-1"></a>    cogs <span class="op">=</span> (<span class="dv">1</span> <span class="op">-</span> gross_margin) <span class="op">*</span> sales</span>
<span id="cb20-182"><a href="#cb20-182" aria-hidden="true" tabindex="-1"></a>    ar <span class="op">=</span> sales.copy()                     <span class="co"># all sales on credit</span></span>
<span id="cb20-183"><a href="#cb20-183" aria-hidden="true" tabindex="-1"></a>    allowance <span class="op">=</span> alpha <span class="op">*</span> sales             <span class="co"># allowance for doubtful debts</span></span>
<span id="cb20-184"><a href="#cb20-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-185"><a href="#cb20-185" aria-hidden="true" tabindex="-1"></a>    writeoffs <span class="op">=</span> np.zeros(n_years)</span>
<span id="cb20-186"><a href="#cb20-186" aria-hidden="true" tabindex="-1"></a>    collections <span class="op">=</span> np.zeros(n_years)</span>
<span id="cb20-187"><a href="#cb20-187" aria-hidden="true" tabindex="-1"></a>    bad_debt_exp <span class="op">=</span> np.zeros(n_years)</span>
<span id="cb20-188"><a href="#cb20-188" aria-hidden="true" tabindex="-1"></a>    net_income <span class="op">=</span> np.zeros(n_years)</span>
<span id="cb20-189"><a href="#cb20-189" aria-hidden="true" tabindex="-1"></a>    dividends <span class="op">=</span> np.zeros(n_years)</span>
<span id="cb20-190"><a href="#cb20-190" aria-hidden="true" tabindex="-1"></a>    cash <span class="op">=</span> np.zeros(n_years)</span>
<span id="cb20-191"><a href="#cb20-191" aria-hidden="true" tabindex="-1"></a>    equity <span class="op">=</span> np.zeros(n_years)</span>
<span id="cb20-192"><a href="#cb20-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-193"><a href="#cb20-193" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Year 1</span></span>
<span id="cb20-194"><a href="#cb20-194" aria-hidden="true" tabindex="-1"></a>    bad_debt_exp[<span class="dv">0</span>] <span class="op">=</span> allowance[<span class="dv">0</span>]</span>
<span id="cb20-195"><a href="#cb20-195" aria-hidden="true" tabindex="-1"></a>    net_income[<span class="dv">0</span>] <span class="op">=</span> sales[<span class="dv">0</span>] <span class="op">-</span> cogs[<span class="dv">0</span>] <span class="op">-</span> bad_debt_exp[<span class="dv">0</span>]</span>
<span id="cb20-196"><a href="#cb20-196" aria-hidden="true" tabindex="-1"></a>    dividends[<span class="dv">0</span>] <span class="op">=</span> net_income[<span class="dv">0</span>]</span>
<span id="cb20-197"><a href="#cb20-197" aria-hidden="true" tabindex="-1"></a>    cash[<span class="dv">0</span>] <span class="op">=</span> beg_cash <span class="op">+</span> collections[<span class="dv">0</span>] <span class="op">-</span> cogs[<span class="dv">0</span>] <span class="op">-</span> dividends[<span class="dv">0</span>]</span>
<span id="cb20-198"><a href="#cb20-198" aria-hidden="true" tabindex="-1"></a>    equity[<span class="dv">0</span>] <span class="op">=</span> beg_cash <span class="op">+</span> net_income[<span class="dv">0</span>] <span class="op">-</span> dividends[<span class="dv">0</span>]</span>
<span id="cb20-199"><a href="#cb20-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-200"><a href="#cb20-200" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Years 2 through n_years</span></span>
<span id="cb20-201"><a href="#cb20-201" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> t <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, n_years):</span>
<span id="cb20-202"><a href="#cb20-202" aria-hidden="true" tabindex="-1"></a>        writeoffs[t] <span class="op">=</span> delta <span class="op">*</span> ar[t <span class="op">-</span> <span class="dv">1</span>]</span>
<span id="cb20-203"><a href="#cb20-203" aria-hidden="true" tabindex="-1"></a>        collections[t] <span class="op">=</span> (<span class="dv">1</span> <span class="op">-</span> delta) <span class="op">*</span> ar[t <span class="op">-</span> <span class="dv">1</span>]</span>
<span id="cb20-204"><a href="#cb20-204" aria-hidden="true" tabindex="-1"></a>        bad_debt_exp[t] <span class="op">=</span> allowance[t] <span class="op">-</span> allowance[t <span class="op">-</span> <span class="dv">1</span>] <span class="op">+</span> writeoffs[t]</span>
<span id="cb20-205"><a href="#cb20-205" aria-hidden="true" tabindex="-1"></a>        net_income[t] <span class="op">=</span> sales[t] <span class="op">-</span> cogs[t] <span class="op">-</span> bad_debt_exp[t]</span>
<span id="cb20-206"><a href="#cb20-206" aria-hidden="true" tabindex="-1"></a>        dividends[t] <span class="op">=</span> net_income[t]</span>
<span id="cb20-207"><a href="#cb20-207" aria-hidden="true" tabindex="-1"></a>        cash[t] <span class="op">=</span> cash[t <span class="op">-</span> <span class="dv">1</span>] <span class="op">+</span> collections[t] <span class="op">-</span> cogs[t] <span class="op">-</span> dividends[t]</span>
<span id="cb20-208"><a href="#cb20-208" aria-hidden="true" tabindex="-1"></a>        equity[t] <span class="op">=</span> equity[t <span class="op">-</span> <span class="dv">1</span>] <span class="op">+</span> net_income[t] <span class="op">-</span> dividends[t]</span>
<span id="cb20-209"><a href="#cb20-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-210"><a href="#cb20-210" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pd.DataFrame({</span>
<span id="cb20-211"><a href="#cb20-211" aria-hidden="true" tabindex="-1"></a>        <span class="st">"year"</span>: np.arange(<span class="dv">1</span>, n_years <span class="op">+</span> <span class="dv">1</span>),</span>
<span id="cb20-212"><a href="#cb20-212" aria-hidden="true" tabindex="-1"></a>        <span class="st">"alpha"</span>: alpha,</span>
<span id="cb20-213"><a href="#cb20-213" aria-hidden="true" tabindex="-1"></a>        <span class="st">"sales"</span>: sales,</span>
<span id="cb20-214"><a href="#cb20-214" aria-hidden="true" tabindex="-1"></a>        <span class="st">"cogs"</span>: cogs,</span>
<span id="cb20-215"><a href="#cb20-215" aria-hidden="true" tabindex="-1"></a>        <span class="st">"ar"</span>: ar,</span>
<span id="cb20-216"><a href="#cb20-216" aria-hidden="true" tabindex="-1"></a>        <span class="st">"allowance"</span>: allowance,</span>
<span id="cb20-217"><a href="#cb20-217" aria-hidden="true" tabindex="-1"></a>        <span class="st">"writeoffs"</span>: writeoffs,</span>
<span id="cb20-218"><a href="#cb20-218" aria-hidden="true" tabindex="-1"></a>        <span class="st">"collections"</span>: collections,</span>
<span id="cb20-219"><a href="#cb20-219" aria-hidden="true" tabindex="-1"></a>        <span class="st">"bad_debt_exp"</span>: bad_debt_exp,</span>
<span id="cb20-220"><a href="#cb20-220" aria-hidden="true" tabindex="-1"></a>        <span class="st">"net_income"</span>: net_income,</span>
<span id="cb20-221"><a href="#cb20-221" aria-hidden="true" tabindex="-1"></a>        <span class="st">"dividends"</span>: dividends,</span>
<span id="cb20-222"><a href="#cb20-222" aria-hidden="true" tabindex="-1"></a>        <span class="st">"cash"</span>: cash,</span>
<span id="cb20-223"><a href="#cb20-223" aria-hidden="true" tabindex="-1"></a>        <span class="st">"equity"</span>: equity,</span>
<span id="cb20-224"><a href="#cb20-224" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb20-225"><a href="#cb20-225" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-226"><a href="#cb20-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-227"><a href="#cb20-227" aria-hidden="true" tabindex="-1"></a><span class="fu">### Generating a Single Firm</span></span>
<span id="cb20-228"><a href="#cb20-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-229"><a href="#cb20-229" aria-hidden="true" tabindex="-1"></a>We first generate 1,000 years of data for a single firm with $\alpha = \delta = 0.03$ (unbiased accounting) to visualize the sales process.</span>
<span id="cb20-230"><a href="#cb20-230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-233"><a href="#cb20-233" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb20-234"><a href="#cb20-234" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-sales-sim</span></span>
<span id="cb20-235"><a href="#cb20-235" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Simulated sales for a single firm over 20 years. The blue dashed line shows mean sales. The AR(1) structure creates smooth, persistent fluctuations."</span></span>
<span id="cb20-236"><a href="#cb20-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-237"><a href="#cb20-237" aria-hidden="true" tabindex="-1"></a>rng <span class="op">=</span> np.random.default_rng(<span class="dv">2024</span>)</span>
<span id="cb20-238"><a href="#cb20-238" aria-hidden="true" tabindex="-1"></a>df_long <span class="op">=</span> simulate_firm(alpha<span class="op">=</span><span class="fl">0.03</span>, n_years<span class="op">=</span><span class="dv">1000</span>, rng<span class="op">=</span>rng)</span>
<span id="cb20-239"><a href="#cb20-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-240"><a href="#cb20-240" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb20-241"><a href="#cb20-241" aria-hidden="true" tabindex="-1"></a>subset <span class="op">=</span> df_long.query(<span class="st">"year &lt;= 20"</span>)</span>
<span id="cb20-242"><a href="#cb20-242" aria-hidden="true" tabindex="-1"></a>ax.plot(subset[<span class="st">"year"</span>], subset[<span class="st">"sales"</span>], color<span class="op">=</span><span class="st">"firebrick"</span>, linewidth<span class="op">=</span><span class="fl">1.5</span>)</span>
<span id="cb20-243"><a href="#cb20-243" aria-hidden="true" tabindex="-1"></a>ax.axhline(</span>
<span id="cb20-244"><a href="#cb20-244" aria-hidden="true" tabindex="-1"></a>    df_long[<span class="st">"sales"</span>].mean(), color<span class="op">=</span><span class="st">"steelblue"</span>,</span>
<span id="cb20-245"><a href="#cb20-245" aria-hidden="true" tabindex="-1"></a>    linestyle<span class="op">=</span><span class="st">"--"</span>, linewidth<span class="op">=</span><span class="dv">1</span>, label<span class="op">=</span><span class="st">"Long-run mean"</span></span>
<span id="cb20-246"><a href="#cb20-246" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-247"><a href="#cb20-247" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Year"</span>)</span>
<span id="cb20-248"><a href="#cb20-248" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Sales (millions VND, simulated)"</span>)</span>
<span id="cb20-249"><a href="#cb20-249" aria-hidden="true" tabindex="-1"></a>ax.legend()</span>
<span id="cb20-250"><a href="#cb20-250" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb20-251"><a href="#cb20-251" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb20-252"><a href="#cb20-252" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-253"><a href="#cb20-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-254"><a href="#cb20-254" aria-hidden="true" tabindex="-1"></a><span class="fu">### Cross-Sectional Simulation: Persistence and Estimation Error</span></span>
<span id="cb20-255"><a href="#cb20-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-256"><a href="#cb20-256" aria-hidden="true" tabindex="-1"></a>The central economic insight is that when the managerial estimate $\alpha$ departs from the true rate $\delta$, accruals contain a systematic estimation error that *reduces* the persistence of earnings. To demonstrate this, we simulate 5,000 firms, each with a randomly drawn $\alpha \in <span class="co">[</span><span class="ot">0.01, 0.05</span><span class="co">]</span>$ while keeping the true default rate fixed at $\delta = 0.03$.</span>
<span id="cb20-257"><a href="#cb20-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-258"><a href="#cb20-258" aria-hidden="true" tabindex="-1"></a>For each firm, we estimate earnings persistence as the slope coefficient $\hat{\beta}_1$ from an AR(1) regression of net income:</span>
<span id="cb20-259"><a href="#cb20-259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-260"><a href="#cb20-260" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb20-261"><a href="#cb20-261" aria-hidden="true" tabindex="-1"></a>NI_{i,t} = \beta_0 + \beta_1 NI_{i,t-1} + u_{i,t}</span>
<span id="cb20-262"><a href="#cb20-262" aria-hidden="true" tabindex="-1"></a>$$ {#eq-persistence-reg}</span>
<span id="cb20-263"><a href="#cb20-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-266"><a href="#cb20-266" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb20-267"><a href="#cb20-267" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: sim-cross-section</span></span>
<span id="cb20-268"><a href="#cb20-268" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Cross-sectional simulation of persistence vs. alpha"</span></span>
<span id="cb20-269"><a href="#cb20-269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-270"><a href="#cb20-270" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> estimate_persistence(df: pd.DataFrame) <span class="op">-&gt;</span> <span class="bu">dict</span>:</span>
<span id="cb20-271"><a href="#cb20-271" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Estimate AR(1) persistence of net income for one firm."""</span></span>
<span id="cb20-272"><a href="#cb20-272" aria-hidden="true" tabindex="-1"></a>    temp <span class="op">=</span> df[[<span class="st">"year"</span>, <span class="st">"net_income"</span>]].copy()</span>
<span id="cb20-273"><a href="#cb20-273" aria-hidden="true" tabindex="-1"></a>    temp[<span class="st">"lag_ni"</span>] <span class="op">=</span> temp[<span class="st">"net_income"</span>].shift(<span class="dv">1</span>)</span>
<span id="cb20-274"><a href="#cb20-274" aria-hidden="true" tabindex="-1"></a>    temp <span class="op">=</span> temp.dropna()</span>
<span id="cb20-275"><a href="#cb20-275" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(temp) <span class="op">&lt;</span> <span class="dv">10</span>:</span>
<span id="cb20-276"><a href="#cb20-276" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> {<span class="st">"alpha"</span>: df[<span class="st">"alpha"</span>].iloc[<span class="dv">0</span>], <span class="st">"persistence"</span>: np.nan}</span>
<span id="cb20-277"><a href="#cb20-277" aria-hidden="true" tabindex="-1"></a>    X <span class="op">=</span> sm.add_constant(temp[<span class="st">"lag_ni"</span>])</span>
<span id="cb20-278"><a href="#cb20-278" aria-hidden="true" tabindex="-1"></a>    model <span class="op">=</span> sm.OLS(temp[<span class="st">"net_income"</span>], X).fit()</span>
<span id="cb20-279"><a href="#cb20-279" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {<span class="st">"alpha"</span>: df[<span class="st">"alpha"</span>].iloc[<span class="dv">0</span>], <span class="st">"persistence"</span>: model.params[<span class="st">"lag_ni"</span>]}</span>
<span id="cb20-280"><a href="#cb20-280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-281"><a href="#cb20-281" aria-hidden="true" tabindex="-1"></a>n_firms <span class="op">=</span> <span class="dv">5000</span></span>
<span id="cb20-282"><a href="#cb20-282" aria-hidden="true" tabindex="-1"></a>rng_main <span class="op">=</span> np.random.default_rng(<span class="dv">2024</span>)</span>
<span id="cb20-283"><a href="#cb20-283" aria-hidden="true" tabindex="-1"></a>alphas <span class="op">=</span> rng_main.uniform(<span class="fl">0.01</span>, <span class="fl">0.05</span>, n_firms)</span>
<span id="cb20-284"><a href="#cb20-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-285"><a href="#cb20-285" aria-hidden="true" tabindex="-1"></a>results <span class="op">=</span> []</span>
<span id="cb20-286"><a href="#cb20-286" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i, a <span class="kw">in</span> <span class="bu">enumerate</span>(alphas):</span>
<span id="cb20-287"><a href="#cb20-287" aria-hidden="true" tabindex="-1"></a>    firm_rng <span class="op">=</span> np.random.default_rng(<span class="dv">2024</span> <span class="op">+</span> i)</span>
<span id="cb20-288"><a href="#cb20-288" aria-hidden="true" tabindex="-1"></a>    firm_df <span class="op">=</span> simulate_firm(alpha<span class="op">=</span>a, n_years<span class="op">=</span><span class="dv">200</span>, rng<span class="op">=</span>firm_rng)</span>
<span id="cb20-289"><a href="#cb20-289" aria-hidden="true" tabindex="-1"></a>    results.append(estimate_persistence(firm_df))</span>
<span id="cb20-290"><a href="#cb20-290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-291"><a href="#cb20-291" aria-hidden="true" tabindex="-1"></a>sim_results <span class="op">=</span> pd.DataFrame(results)</span>
<span id="cb20-292"><a href="#cb20-292" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-293"><a href="#cb20-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-296"><a href="#cb20-296" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb20-297"><a href="#cb20-297" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-persistence-alpha</span></span>
<span id="cb20-298"><a href="#cb20-298" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Earnings persistence vs. allowance parameter ($\\alpha$). Persistence peaks near $\\alpha = 0.03$, the true default rate, and declines symmetrically as the accounting estimate deviates from economic reality in either direction."</span></span>
<span id="cb20-299"><a href="#cb20-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-300"><a href="#cb20-300" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb20-301"><a href="#cb20-301" aria-hidden="true" tabindex="-1"></a>ax.scatter(</span>
<span id="cb20-302"><a href="#cb20-302" aria-hidden="true" tabindex="-1"></a>    sim_results[<span class="st">"alpha"</span>], sim_results[<span class="st">"persistence"</span>],</span>
<span id="cb20-303"><a href="#cb20-303" aria-hidden="true" tabindex="-1"></a>    alpha<span class="op">=</span><span class="fl">0.15</span>, s<span class="op">=</span><span class="dv">8</span>, color<span class="op">=</span><span class="st">"steelblue"</span>, edgecolors<span class="op">=</span><span class="st">"none"</span></span>
<span id="cb20-304"><a href="#cb20-304" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-305"><a href="#cb20-305" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="vs">r"Allowance parameter </span><span class="kw">(</span><span class="dv">$</span><span class="ch">\a</span><span class="vs">lpha</span><span class="dv">$</span><span class="kw">)</span><span class="vs">"</span>)</span>
<span id="cb20-306"><a href="#cb20-306" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Estimated earnings persistence"</span>)</span>
<span id="cb20-307"><a href="#cb20-307" aria-hidden="true" tabindex="-1"></a>ax.axvline(<span class="fl">0.03</span>, color<span class="op">=</span><span class="st">"firebrick"</span>, linestyle<span class="op">=</span><span class="st">"--"</span>, linewidth<span class="op">=</span><span class="dv">1</span>, label<span class="op">=</span><span class="vs">r"</span><span class="dv">$\d</span><span class="vs">elta = 0</span><span class="dv">.</span><span class="vs">03</span><span class="dv">$</span><span class="vs"> </span><span class="kw">(</span><span class="vs">true rate</span><span class="kw">)</span><span class="vs">"</span>)</span>
<span id="cb20-308"><a href="#cb20-308" aria-hidden="true" tabindex="-1"></a>ax.legend()</span>
<span id="cb20-309"><a href="#cb20-309" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb20-310"><a href="#cb20-310" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb20-311"><a href="#cb20-311" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-312"><a href="#cb20-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-313"><a href="#cb20-313" aria-hidden="true" tabindex="-1"></a><span class="fu">### Decomposing Persistence by Earnings Component</span></span>
<span id="cb20-314"><a href="#cb20-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-315"><a href="#cb20-315" aria-hidden="true" tabindex="-1"></a>The simulation allows us to verify the core theoretical prediction: cash flow persistence exceeds accrual persistence. We compute operating cash flows and accruals for each simulated firm and estimate component-specific persistence.</span>
<span id="cb20-316"><a href="#cb20-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-319"><a href="#cb20-319" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb20-320"><a href="#cb20-320" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: sim-component-persistence</span></span>
<span id="cb20-321"><a href="#cb20-321" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Component persistence in simulated data"</span></span>
<span id="cb20-322"><a href="#cb20-322" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-323"><a href="#cb20-323" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> component_persistence(df: pd.DataFrame) <span class="op">-&gt;</span> <span class="bu">dict</span>:</span>
<span id="cb20-324"><a href="#cb20-324" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Estimate persistence of NI, CFO, and accruals."""</span></span>
<span id="cb20-325"><a href="#cb20-325" aria-hidden="true" tabindex="-1"></a>    temp <span class="op">=</span> df.copy()</span>
<span id="cb20-326"><a href="#cb20-326" aria-hidden="true" tabindex="-1"></a>    <span class="co"># CFO = collections - COGS (direct method, simplified)</span></span>
<span id="cb20-327"><a href="#cb20-327" aria-hidden="true" tabindex="-1"></a>    temp[<span class="st">"cfo"</span>] <span class="op">=</span> temp[<span class="st">"collections"</span>] <span class="op">-</span> temp[<span class="st">"cogs"</span>]</span>
<span id="cb20-328"><a href="#cb20-328" aria-hidden="true" tabindex="-1"></a>    temp[<span class="st">"acc"</span>] <span class="op">=</span> temp[<span class="st">"net_income"</span>] <span class="op">-</span> temp[<span class="st">"cfo"</span>]</span>
<span id="cb20-329"><a href="#cb20-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-330"><a href="#cb20-330" aria-hidden="true" tabindex="-1"></a>    out <span class="op">=</span> {<span class="st">"alpha"</span>: temp[<span class="st">"alpha"</span>].iloc[<span class="dv">0</span>]}</span>
<span id="cb20-331"><a href="#cb20-331" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> var <span class="kw">in</span> [<span class="st">"net_income"</span>, <span class="st">"cfo"</span>, <span class="st">"acc"</span>]:</span>
<span id="cb20-332"><a href="#cb20-332" aria-hidden="true" tabindex="-1"></a>        t <span class="op">=</span> temp[[<span class="st">"year"</span>, var]].copy()</span>
<span id="cb20-333"><a href="#cb20-333" aria-hidden="true" tabindex="-1"></a>        t[<span class="st">"lag"</span>] <span class="op">=</span> t[var].shift(<span class="dv">1</span>)</span>
<span id="cb20-334"><a href="#cb20-334" aria-hidden="true" tabindex="-1"></a>        t <span class="op">=</span> t.dropna()</span>
<span id="cb20-335"><a href="#cb20-335" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">len</span>(t) <span class="op">&lt;</span> <span class="dv">10</span>:</span>
<span id="cb20-336"><a href="#cb20-336" aria-hidden="true" tabindex="-1"></a>            out[<span class="ss">f"persist_</span><span class="sc">{</span>var<span class="sc">}</span><span class="ss">"</span>] <span class="op">=</span> np.nan</span>
<span id="cb20-337"><a href="#cb20-337" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb20-338"><a href="#cb20-338" aria-hidden="true" tabindex="-1"></a>        X <span class="op">=</span> sm.add_constant(t[<span class="st">"lag"</span>])</span>
<span id="cb20-339"><a href="#cb20-339" aria-hidden="true" tabindex="-1"></a>        model <span class="op">=</span> sm.OLS(t[var], X).fit()</span>
<span id="cb20-340"><a href="#cb20-340" aria-hidden="true" tabindex="-1"></a>        out[<span class="ss">f"persist_</span><span class="sc">{</span>var<span class="sc">}</span><span class="ss">"</span>] <span class="op">=</span> model.params[<span class="st">"lag"</span>]</span>
<span id="cb20-341"><a href="#cb20-341" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> out</span>
<span id="cb20-342"><a href="#cb20-342" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-343"><a href="#cb20-343" aria-hidden="true" tabindex="-1"></a><span class="co"># Run for a subset at alpha = 0.03 (unbiased) and alpha = 0.05 (biased)</span></span>
<span id="cb20-344"><a href="#cb20-344" aria-hidden="true" tabindex="-1"></a>component_results <span class="op">=</span> []</span>
<span id="cb20-345"><a href="#cb20-345" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> a_val <span class="kw">in</span> [<span class="fl">0.01</span>, <span class="fl">0.02</span>, <span class="fl">0.03</span>, <span class="fl">0.04</span>, <span class="fl">0.05</span>]:</span>
<span id="cb20-346"><a href="#cb20-346" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> seed_offset <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">500</span>):</span>
<span id="cb20-347"><a href="#cb20-347" aria-hidden="true" tabindex="-1"></a>        frng <span class="op">=</span> np.random.default_rng(<span class="dv">10000</span> <span class="op">+</span> seed_offset)</span>
<span id="cb20-348"><a href="#cb20-348" aria-hidden="true" tabindex="-1"></a>        fdf <span class="op">=</span> simulate_firm(alpha<span class="op">=</span>a_val, n_years<span class="op">=</span><span class="dv">200</span>, rng<span class="op">=</span>frng)</span>
<span id="cb20-349"><a href="#cb20-349" aria-hidden="true" tabindex="-1"></a>        component_results.append(component_persistence(fdf))</span>
<span id="cb20-350"><a href="#cb20-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-351"><a href="#cb20-351" aria-hidden="true" tabindex="-1"></a>comp_df <span class="op">=</span> pd.DataFrame(component_results)</span>
<span id="cb20-352"><a href="#cb20-352" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-353"><a href="#cb20-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-356"><a href="#cb20-356" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb20-357"><a href="#cb20-357" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-sim-persistence</span></span>
<span id="cb20-358"><a href="#cb20-358" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Mean earnings component persistence by allowance parameter. Cash flow persistence is stable across $\\alpha$ values, while accrual and overall earnings persistence peak when accounting estimates match the true default rate ($\\delta = 0.03$)."</span></span>
<span id="cb20-359"><a href="#cb20-359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-360"><a href="#cb20-360" aria-hidden="true" tabindex="-1"></a>summary <span class="op">=</span> (</span>
<span id="cb20-361"><a href="#cb20-361" aria-hidden="true" tabindex="-1"></a>    comp_df</span>
<span id="cb20-362"><a href="#cb20-362" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">"alpha"</span>)[[<span class="st">"persist_net_income"</span>, <span class="st">"persist_cfo"</span>, <span class="st">"persist_acc"</span>]]</span>
<span id="cb20-363"><a href="#cb20-363" aria-hidden="true" tabindex="-1"></a>    .mean()</span>
<span id="cb20-364"><a href="#cb20-364" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">round</span>(<span class="dv">4</span>)</span>
<span id="cb20-365"><a href="#cb20-365" aria-hidden="true" tabindex="-1"></a>    .rename(columns<span class="op">=</span>{</span>
<span id="cb20-366"><a href="#cb20-366" aria-hidden="true" tabindex="-1"></a>        <span class="st">"persist_net_income"</span>: <span class="st">"Earnings"</span>,</span>
<span id="cb20-367"><a href="#cb20-367" aria-hidden="true" tabindex="-1"></a>        <span class="st">"persist_cfo"</span>: <span class="st">"Cash Flows"</span>,</span>
<span id="cb20-368"><a href="#cb20-368" aria-hidden="true" tabindex="-1"></a>        <span class="st">"persist_acc"</span>: <span class="st">"Accruals"</span>,</span>
<span id="cb20-369"><a href="#cb20-369" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb20-370"><a href="#cb20-370" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-371"><a href="#cb20-371" aria-hidden="true" tabindex="-1"></a>summary.index.name <span class="op">=</span> <span class="st">"Î±"</span></span>
<span id="cb20-372"><a href="#cb20-372" aria-hidden="true" tabindex="-1"></a>summary</span>
<span id="cb20-373"><a href="#cb20-373" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-374"><a href="#cb20-374" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-375"><a href="#cb20-375" aria-hidden="true" tabindex="-1"></a>The simulation confirms a key insight: cash flow persistence is largely invariant to the quality of accrual estimation, whereas accrual persistence, and consequently total earnings persistence, degrades when managerial estimates deviate from economic truth. This provides a structural explanation for the empirical regularity documented in @sloan1996stock: accruals are less persistent *because* they embed estimation error that mean-reverts as the accounting system self-corrects over time.</span>
<span id="cb20-376"><a href="#cb20-376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-377"><a href="#cb20-377" aria-hidden="true" tabindex="-1"></a>::: callout-note</span>
<span id="cb20-378"><a href="#cb20-378" aria-hidden="true" tabindex="-1"></a><span class="fu">## Vietnamese Interpretation</span></span>
<span id="cb20-379"><a href="#cb20-379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-380"><a href="#cb20-380" aria-hidden="true" tabindex="-1"></a>In the Vietnamese context, this mechanism is amplified by several institutional factors. VAS provisions for doubtful debts (Circular 228/2009/TT-BTC, updated by Circular 48/2019/TT-BTC) prescribe specific aging-based percentages rather than allowing full managerial discretion. While this rules-based approach reduces some forms of manipulation, it can *increase* estimation error when the prescribed rates diverge from firm-specific default experiences, particularly relevant for firms in rapidly changing sectors like real estate development or export manufacturing.</span>
<span id="cb20-381"><a href="#cb20-381" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb20-382"><a href="#cb20-382" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-383"><a href="#cb20-383" aria-hidden="true" tabindex="-1"></a><span class="fu">## Earnings Persistence in Vietnamese Data {#sec-accruals-persistence}</span></span>
<span id="cb20-384"><a href="#cb20-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-385"><a href="#cb20-385" aria-hidden="true" tabindex="-1"></a>We now turn to empirical analysis using Vietnamese listed firm data. The data requirements are:</span>
<span id="cb20-386"><a href="#cb20-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-387"><a href="#cb20-387" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Annual financial statements** for firms listed on HOSE and HNX</span>
<span id="cb20-388"><a href="#cb20-388" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Stock return data**: Monthly adjusted closing prices for return computation</span>
<span id="cb20-389"><a href="#cb20-389" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Industry classifications**: VSIC (Vietnam Standard Industrial Classification) codes</span>
<span id="cb20-390"><a href="#cb20-390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-391"><a href="#cb20-391" aria-hidden="true" tabindex="-1"></a><span class="fu">### Data Preparation</span></span>
<span id="cb20-392"><a href="#cb20-392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-393"><a href="#cb20-393" aria-hidden="true" tabindex="-1"></a>The following code constructs the accrual measures from Vietnamese firm financial statements. We demonstrate the workflow assuming data is loaded from a local database or CSV files. Adapt the data loading step to match your source.</span>
<span id="cb20-394"><a href="#cb20-394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-397"><a href="#cb20-397" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb20-398"><a href="#cb20-398" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: data-prep</span></span>
<span id="cb20-399"><a href="#cb20-399" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Construct accrual variables from Vietnamese financial statement data"</span></span>
<span id="cb20-400"><a href="#cb20-400" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb20-401"><a href="#cb20-401" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-402"><a href="#cb20-402" aria-hidden="true" tabindex="-1"></a><span class="co"># â”€â”€â”€ Data Loading (adapt to your source) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span></span>
<span id="cb20-403"><a href="#cb20-403" aria-hidden="true" tabindex="-1"></a><span class="co"># funda = pd.read_parquet("data/vn_annual_financials.parquet")</span></span>
<span id="cb20-404"><a href="#cb20-404" aria-hidden="true" tabindex="-1"></a><span class="co"># prices = pd.read_parquet("data/vn_monthly_prices.parquet")</span></span>
<span id="cb20-405"><a href="#cb20-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-406"><a href="#cb20-406" aria-hidden="true" tabindex="-1"></a><span class="co"># â”€â”€â”€ Variable Construction â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span></span>
<span id="cb20-407"><a href="#cb20-407" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> construct_accruals(funda: pd.DataFrame) <span class="op">-&gt;</span> pd.DataFrame:</span>
<span id="cb20-408"><a href="#cb20-408" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb20-409"><a href="#cb20-409" aria-hidden="true" tabindex="-1"></a><span class="co">    Construct accrual measures from Vietnamese annual financial data.</span></span>
<span id="cb20-410"><a href="#cb20-410" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb20-411"><a href="#cb20-411" aria-hidden="true" tabindex="-1"></a><span class="co">    Expected columns (VAS-aligned):</span></span>
<span id="cb20-412"><a href="#cb20-412" aria-hidden="true" tabindex="-1"></a><span class="co">        ticker, year, datadate,</span></span>
<span id="cb20-413"><a href="#cb20-413" aria-hidden="true" tabindex="-1"></a><span class="co">        act (current assets), lct (current liabilities),</span></span>
<span id="cb20-414"><a href="#cb20-414" aria-hidden="true" tabindex="-1"></a><span class="co">        che (cash &amp; equivalents), dlc (short-term borrowings),</span></span>
<span id="cb20-415"><a href="#cb20-415" aria-hidden="true" tabindex="-1"></a><span class="co">        txp (taxes payable), dp (depreciation &amp; amortization),</span></span>
<span id="cb20-416"><a href="#cb20-416" aria-hidden="true" tabindex="-1"></a><span class="co">        oiadp (operating income after depreciation),</span></span>
<span id="cb20-417"><a href="#cb20-417" aria-hidden="true" tabindex="-1"></a><span class="co">        at (total assets), cfo (cash flow from operations),</span></span>
<span id="cb20-418"><a href="#cb20-418" aria-hidden="true" tabindex="-1"></a><span class="co">        exchange (HOSE=1, HNX=2), vsic2 (2-digit industry code)</span></span>
<span id="cb20-419"><a href="#cb20-419" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb20-420"><a href="#cb20-420" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> funda.sort_values([<span class="st">"ticker"</span>, <span class="st">"year"</span>]).copy()</span>
<span id="cb20-421"><a href="#cb20-421" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-422"><a href="#cb20-422" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Fill missing with zero where economically appropriate</span></span>
<span id="cb20-423"><a href="#cb20-423" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> col <span class="kw">in</span> [<span class="st">"che"</span>, <span class="st">"dlc"</span>, <span class="st">"txp"</span>]:</span>
<span id="cb20-424"><a href="#cb20-424" aria-hidden="true" tabindex="-1"></a>        df[col] <span class="op">=</span> df[col].fillna(<span class="dv">0</span>)</span>
<span id="cb20-425"><a href="#cb20-425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-426"><a href="#cb20-426" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Lagged total assets and average total assets</span></span>
<span id="cb20-427"><a href="#cb20-427" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"lag_at"</span>] <span class="op">=</span> df.groupby(<span class="st">"ticker"</span>)[<span class="st">"at"</span>].shift(<span class="dv">1</span>)</span>
<span id="cb20-428"><a href="#cb20-428" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"avg_at"</span>] <span class="op">=</span> (df[<span class="st">"at"</span>] <span class="op">+</span> df[<span class="st">"lag_at"</span>]) <span class="op">/</span> <span class="dv">2</span></span>
<span id="cb20-429"><a href="#cb20-429" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-430"><a href="#cb20-430" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Balance sheet approach to accruals</span></span>
<span id="cb20-431"><a href="#cb20-431" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> col <span class="kw">in</span> [<span class="st">"act"</span>, <span class="st">"che"</span>, <span class="st">"lct"</span>, <span class="st">"dlc"</span>, <span class="st">"txp"</span>]:</span>
<span id="cb20-432"><a href="#cb20-432" aria-hidden="true" tabindex="-1"></a>        df[<span class="ss">f"d_</span><span class="sc">{</span>col<span class="sc">}</span><span class="ss">"</span>] <span class="op">=</span> df.groupby(<span class="st">"ticker"</span>)[col].diff()</span>
<span id="cb20-433"><a href="#cb20-433" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-434"><a href="#cb20-434" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"acc_bs"</span>] <span class="op">=</span> (</span>
<span id="cb20-435"><a href="#cb20-435" aria-hidden="true" tabindex="-1"></a>        (df[<span class="st">"d_act"</span>] <span class="op">-</span> df[<span class="st">"d_che"</span>])</span>
<span id="cb20-436"><a href="#cb20-436" aria-hidden="true" tabindex="-1"></a>        <span class="op">-</span> (df[<span class="st">"d_lct"</span>] <span class="op">-</span> df[<span class="st">"d_dlc"</span>] <span class="op">-</span> df[<span class="st">"d_txp"</span>])</span>
<span id="cb20-437"><a href="#cb20-437" aria-hidden="true" tabindex="-1"></a>        <span class="op">-</span> df[<span class="st">"dp"</span>]</span>
<span id="cb20-438"><a href="#cb20-438" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb20-439"><a href="#cb20-439" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-440"><a href="#cb20-440" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Scaled variables</span></span>
<span id="cb20-441"><a href="#cb20-441" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"earn"</span>] <span class="op">=</span> df[<span class="st">"oiadp"</span>] <span class="op">/</span> df[<span class="st">"avg_at"</span>]</span>
<span id="cb20-442"><a href="#cb20-442" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"acc"</span>] <span class="op">=</span> df[<span class="st">"acc_bs"</span>] <span class="op">/</span> df[<span class="st">"avg_at"</span>]</span>
<span id="cb20-443"><a href="#cb20-443" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"cfo"</span>] <span class="op">=</span> df[<span class="st">"earn"</span>] <span class="op">-</span> df[<span class="st">"acc"</span>]</span>
<span id="cb20-444"><a href="#cb20-444" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-445"><a href="#cb20-445" aria-hidden="true" tabindex="-1"></a>    <span class="co"># If CFO from cash flow statement is available, prefer it</span></span>
<span id="cb20-446"><a href="#cb20-446" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="st">"cfo_stmt"</span> <span class="kw">in</span> df.columns:</span>
<span id="cb20-447"><a href="#cb20-447" aria-hidden="true" tabindex="-1"></a>        df[<span class="st">"cfo_direct"</span>] <span class="op">=</span> df[<span class="st">"cfo_stmt"</span>] <span class="op">/</span> df[<span class="st">"avg_at"</span>]</span>
<span id="cb20-448"><a href="#cb20-448" aria-hidden="true" tabindex="-1"></a>        df[<span class="st">"acc_cf"</span>] <span class="op">=</span> df[<span class="st">"earn"</span>] <span class="op">-</span> df[<span class="st">"cfo_direct"</span>]</span>
<span id="cb20-449"><a href="#cb20-449" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-450"><a href="#cb20-450" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Lead earnings (next year)</span></span>
<span id="cb20-451"><a href="#cb20-451" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"lead_earn"</span>] <span class="op">=</span> df.groupby(<span class="st">"ticker"</span>)[<span class="st">"earn"</span>].shift(<span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb20-452"><a href="#cb20-452" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-453"><a href="#cb20-453" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Decile ranks (within each year for cross-sectional analysis)</span></span>
<span id="cb20-454"><a href="#cb20-454" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> var <span class="kw">in</span> [<span class="st">"acc"</span>, <span class="st">"earn"</span>, <span class="st">"cfo"</span>]:</span>
<span id="cb20-455"><a href="#cb20-455" aria-hidden="true" tabindex="-1"></a>        df[<span class="ss">f"</span><span class="sc">{</span>var<span class="sc">}</span><span class="ss">_decile"</span>] <span class="op">=</span> (</span>
<span id="cb20-456"><a href="#cb20-456" aria-hidden="true" tabindex="-1"></a>            df.groupby(<span class="st">"year"</span>)[var]</span>
<span id="cb20-457"><a href="#cb20-457" aria-hidden="true" tabindex="-1"></a>            .transform(<span class="kw">lambda</span> x: pd.qcut(x, <span class="dv">10</span>, labels<span class="op">=</span><span class="va">False</span>, duplicates<span class="op">=</span><span class="st">"drop"</span>) <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb20-458"><a href="#cb20-458" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb20-459"><a href="#cb20-459" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"lead_earn_decile"</span>] <span class="op">=</span> (</span>
<span id="cb20-460"><a href="#cb20-460" aria-hidden="true" tabindex="-1"></a>        df.groupby(<span class="st">"year"</span>)[<span class="st">"lead_earn"</span>]</span>
<span id="cb20-461"><a href="#cb20-461" aria-hidden="true" tabindex="-1"></a>        .transform(<span class="kw">lambda</span> x: pd.qcut(x, <span class="dv">10</span>, labels<span class="op">=</span><span class="va">False</span>, duplicates<span class="op">=</span><span class="st">"drop"</span>) <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb20-462"><a href="#cb20-462" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb20-463"><a href="#cb20-463" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-464"><a href="#cb20-464" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Filter</span></span>
<span id="cb20-465"><a href="#cb20-465" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> df.query(<span class="st">"avg_at &gt; 0"</span>).dropna(subset<span class="op">=</span>[<span class="st">"acc"</span>, <span class="st">"earn"</span>, <span class="st">"cfo"</span>, <span class="st">"lead_earn"</span>])</span>
<span id="cb20-466"><a href="#cb20-466" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-467"><a href="#cb20-467" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df</span>
<span id="cb20-468"><a href="#cb20-468" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-469"><a href="#cb20-469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-470"><a href="#cb20-470" aria-hidden="true" tabindex="-1"></a><span class="fu">### Simulated Vietnamese-Style Data for Demonstration</span></span>
<span id="cb20-471"><a href="#cb20-471" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-472"><a href="#cb20-472" aria-hidden="true" tabindex="-1"></a>Since we cannot distribute proprietary data in this chapter, we generate synthetic data that mimics the cross-sectional properties of Vietnamese listed firms. The parameters are calibrated to approximate values observed in the Vietnamese market.</span>
<span id="cb20-473"><a href="#cb20-473" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-476"><a href="#cb20-476" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb20-477"><a href="#cb20-477" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: gen-demo-data</span></span>
<span id="cb20-478"><a href="#cb20-478" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Generate synthetic Vietnamese-style panel data"</span></span>
<span id="cb20-479"><a href="#cb20-479" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-480"><a href="#cb20-480" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> generate_vn_panel(</span>
<span id="cb20-481"><a href="#cb20-481" aria-hidden="true" tabindex="-1"></a>    n_firms: <span class="bu">int</span> <span class="op">=</span> <span class="dv">400</span>,</span>
<span id="cb20-482"><a href="#cb20-482" aria-hidden="true" tabindex="-1"></a>    n_years: <span class="bu">int</span> <span class="op">=</span> <span class="dv">15</span>,</span>
<span id="cb20-483"><a href="#cb20-483" aria-hidden="true" tabindex="-1"></a>    seed: <span class="bu">int</span> <span class="op">=</span> <span class="dv">2024</span>,</span>
<span id="cb20-484"><a href="#cb20-484" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> pd.DataFrame:</span>
<span id="cb20-485"><a href="#cb20-485" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb20-486"><a href="#cb20-486" aria-hidden="true" tabindex="-1"></a><span class="co">    Generate a synthetic panel dataset with properties resembling</span></span>
<span id="cb20-487"><a href="#cb20-487" aria-hidden="true" tabindex="-1"></a><span class="co">    Vietnamese listed firms for demonstration purposes.</span></span>
<span id="cb20-488"><a href="#cb20-488" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb20-489"><a href="#cb20-489" aria-hidden="true" tabindex="-1"></a>    rng <span class="op">=</span> np.random.default_rng(seed)</span>
<span id="cb20-490"><a href="#cb20-490" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-491"><a href="#cb20-491" aria-hidden="true" tabindex="-1"></a>    records <span class="op">=</span> []</span>
<span id="cb20-492"><a href="#cb20-492" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n_firms):</span>
<span id="cb20-493"><a href="#cb20-493" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Firm-specific parameters</span></span>
<span id="cb20-494"><a href="#cb20-494" aria-hidden="true" tabindex="-1"></a>        mean_earn <span class="op">=</span> rng.normal(<span class="fl">0.08</span>, <span class="fl">0.04</span>)      <span class="co"># mean ROA ~8%</span></span>
<span id="cb20-495"><a href="#cb20-495" aria-hidden="true" tabindex="-1"></a>        persist <span class="op">=</span> rng.uniform(<span class="fl">0.3</span>, <span class="fl">0.85</span>)         <span class="co"># earnings persistence</span></span>
<span id="cb20-496"><a href="#cb20-496" aria-hidden="true" tabindex="-1"></a>        acc_share <span class="op">=</span> rng.normal(<span class="fl">0.0</span>, <span class="fl">0.03</span>)        <span class="co"># mean accrual level</span></span>
<span id="cb20-497"><a href="#cb20-497" aria-hidden="true" tabindex="-1"></a>        acc_noise <span class="op">=</span> rng.uniform(<span class="fl">0.02</span>, <span class="fl">0.06</span>)      <span class="co"># accrual volatility</span></span>
<span id="cb20-498"><a href="#cb20-498" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb20-499"><a href="#cb20-499" aria-hidden="true" tabindex="-1"></a>        <span class="co"># SOE indicator (â‰ˆ30% of Vietnamese listed firms)</span></span>
<span id="cb20-500"><a href="#cb20-500" aria-hidden="true" tabindex="-1"></a>        is_soe <span class="op">=</span> <span class="bu">int</span>(rng.random() <span class="op">&lt;</span> <span class="fl">0.30</span>)</span>
<span id="cb20-501"><a href="#cb20-501" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Exchange: HOSE (1) vs HNX (2)</span></span>
<span id="cb20-502"><a href="#cb20-502" aria-hidden="true" tabindex="-1"></a>        exchange <span class="op">=</span> <span class="dv">1</span> <span class="cf">if</span> rng.random() <span class="op">&lt;</span> <span class="fl">0.6</span> <span class="cf">else</span> <span class="dv">2</span></span>
<span id="cb20-503"><a href="#cb20-503" aria-hidden="true" tabindex="-1"></a>        <span class="co"># VSIC 2-digit code</span></span>
<span id="cb20-504"><a href="#cb20-504" aria-hidden="true" tabindex="-1"></a>        vsic2 <span class="op">=</span> rng.choice([<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">25</span>, <span class="dv">41</span>, <span class="dv">46</span>, <span class="dv">47</span>, <span class="dv">52</span>, <span class="dv">62</span>, <span class="dv">64</span>, <span class="dv">68</span>])</span>
<span id="cb20-505"><a href="#cb20-505" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-506"><a href="#cb20-506" aria-hidden="true" tabindex="-1"></a>        earn_t <span class="op">=</span> mean_earn</span>
<span id="cb20-507"><a href="#cb20-507" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> t <span class="kw">in</span> <span class="bu">range</span>(n_years):</span>
<span id="cb20-508"><a href="#cb20-508" aria-hidden="true" tabindex="-1"></a>            year <span class="op">=</span> <span class="dv">2009</span> <span class="op">+</span> t</span>
<span id="cb20-509"><a href="#cb20-509" aria-hidden="true" tabindex="-1"></a>            shock <span class="op">=</span> rng.normal(<span class="dv">0</span>, <span class="fl">0.04</span>)</span>
<span id="cb20-510"><a href="#cb20-510" aria-hidden="true" tabindex="-1"></a>            earn_t <span class="op">=</span> mean_earn <span class="op">+</span> persist <span class="op">*</span> (earn_t <span class="op">-</span> mean_earn) <span class="op">+</span> shock</span>
<span id="cb20-511"><a href="#cb20-511" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-512"><a href="#cb20-512" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Accruals: base + firm-specific noise</span></span>
<span id="cb20-513"><a href="#cb20-513" aria-hidden="true" tabindex="-1"></a>            <span class="co"># SOEs tend to have slightly smoother accruals</span></span>
<span id="cb20-514"><a href="#cb20-514" aria-hidden="true" tabindex="-1"></a>            soe_adj <span class="op">=</span> <span class="op">-</span><span class="fl">0.005</span> <span class="cf">if</span> is_soe <span class="cf">else</span> <span class="fl">0.0</span></span>
<span id="cb20-515"><a href="#cb20-515" aria-hidden="true" tabindex="-1"></a>            acc_t <span class="op">=</span> acc_share <span class="op">+</span> soe_adj <span class="op">+</span> rng.normal(<span class="dv">0</span>, acc_noise)</span>
<span id="cb20-516"><a href="#cb20-516" aria-hidden="true" tabindex="-1"></a>            cfo_t <span class="op">=</span> earn_t <span class="op">-</span> acc_t</span>
<span id="cb20-517"><a href="#cb20-517" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-518"><a href="#cb20-518" aria-hidden="true" tabindex="-1"></a>            records.append({</span>
<span id="cb20-519"><a href="#cb20-519" aria-hidden="true" tabindex="-1"></a>                <span class="st">"ticker"</span>: <span class="ss">f"VN</span><span class="sc">{</span>i<span class="sc">:04d}</span><span class="ss">"</span>,</span>
<span id="cb20-520"><a href="#cb20-520" aria-hidden="true" tabindex="-1"></a>                <span class="st">"year"</span>: year,</span>
<span id="cb20-521"><a href="#cb20-521" aria-hidden="true" tabindex="-1"></a>                <span class="st">"earn"</span>: earn_t,</span>
<span id="cb20-522"><a href="#cb20-522" aria-hidden="true" tabindex="-1"></a>                <span class="st">"acc"</span>: acc_t,</span>
<span id="cb20-523"><a href="#cb20-523" aria-hidden="true" tabindex="-1"></a>                <span class="st">"cfo"</span>: cfo_t,</span>
<span id="cb20-524"><a href="#cb20-524" aria-hidden="true" tabindex="-1"></a>                <span class="st">"is_soe"</span>: is_soe,</span>
<span id="cb20-525"><a href="#cb20-525" aria-hidden="true" tabindex="-1"></a>                <span class="st">"exchange"</span>: exchange,</span>
<span id="cb20-526"><a href="#cb20-526" aria-hidden="true" tabindex="-1"></a>                <span class="st">"vsic2"</span>: vsic2,</span>
<span id="cb20-527"><a href="#cb20-527" aria-hidden="true" tabindex="-1"></a>            })</span>
<span id="cb20-528"><a href="#cb20-528" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-529"><a href="#cb20-529" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> pd.DataFrame(records)</span>
<span id="cb20-530"><a href="#cb20-530" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-531"><a href="#cb20-531" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Lead earnings</span></span>
<span id="cb20-532"><a href="#cb20-532" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> df.sort_values([<span class="st">"ticker"</span>, <span class="st">"year"</span>])</span>
<span id="cb20-533"><a href="#cb20-533" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"lead_earn"</span>] <span class="op">=</span> df.groupby(<span class="st">"ticker"</span>)[<span class="st">"earn"</span>].shift(<span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb20-534"><a href="#cb20-534" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-535"><a href="#cb20-535" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Decile ranks within year</span></span>
<span id="cb20-536"><a href="#cb20-536" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> var <span class="kw">in</span> [<span class="st">"acc"</span>, <span class="st">"earn"</span>, <span class="st">"cfo"</span>]:</span>
<span id="cb20-537"><a href="#cb20-537" aria-hidden="true" tabindex="-1"></a>        df[<span class="ss">f"</span><span class="sc">{</span>var<span class="sc">}</span><span class="ss">_decile"</span>] <span class="op">=</span> (</span>
<span id="cb20-538"><a href="#cb20-538" aria-hidden="true" tabindex="-1"></a>            df.groupby(<span class="st">"year"</span>)[var]</span>
<span id="cb20-539"><a href="#cb20-539" aria-hidden="true" tabindex="-1"></a>            .transform(<span class="kw">lambda</span> x: pd.qcut(</span>
<span id="cb20-540"><a href="#cb20-540" aria-hidden="true" tabindex="-1"></a>                x, <span class="dv">10</span>, labels<span class="op">=</span><span class="va">False</span>, duplicates<span class="op">=</span><span class="st">"drop"</span></span>
<span id="cb20-541"><a href="#cb20-541" aria-hidden="true" tabindex="-1"></a>            ) <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb20-542"><a href="#cb20-542" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb20-543"><a href="#cb20-543" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"lead_earn_decile"</span>] <span class="op">=</span> (</span>
<span id="cb20-544"><a href="#cb20-544" aria-hidden="true" tabindex="-1"></a>        df.groupby(<span class="st">"year"</span>)[<span class="st">"lead_earn"</span>]</span>
<span id="cb20-545"><a href="#cb20-545" aria-hidden="true" tabindex="-1"></a>        .transform(<span class="kw">lambda</span> x: pd.qcut(</span>
<span id="cb20-546"><a href="#cb20-546" aria-hidden="true" tabindex="-1"></a>            x, <span class="dv">10</span>, labels<span class="op">=</span><span class="va">False</span>, duplicates<span class="op">=</span><span class="st">"drop"</span></span>
<span id="cb20-547"><a href="#cb20-547" aria-hidden="true" tabindex="-1"></a>        ) <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb20-548"><a href="#cb20-548" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb20-549"><a href="#cb20-549" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-550"><a href="#cb20-550" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Simulate size-adjusted returns</span></span>
<span id="cb20-551"><a href="#cb20-551" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Returns load on contemporaneous earnings surprise and lagged mispricing</span></span>
<span id="cb20-552"><a href="#cb20-552" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"size_adj_ret"</span>] <span class="op">=</span> (</span>
<span id="cb20-553"><a href="#cb20-553" aria-hidden="true" tabindex="-1"></a>        <span class="fl">1.5</span> <span class="op">*</span> (df[<span class="st">"lead_earn"</span>] <span class="op">-</span> df[<span class="st">"earn"</span>])  <span class="co"># earnings surprise</span></span>
<span id="cb20-554"><a href="#cb20-554" aria-hidden="true" tabindex="-1"></a>        <span class="op">-</span> <span class="fl">0.25</span> <span class="op">*</span> df[<span class="st">"acc"</span>]                     <span class="co"># accrual mispricing</span></span>
<span id="cb20-555"><a href="#cb20-555" aria-hidden="true" tabindex="-1"></a>        <span class="op">+</span> rng.normal(<span class="dv">0</span>, <span class="fl">0.30</span>, <span class="bu">len</span>(df))         <span class="co"># noise</span></span>
<span id="cb20-556"><a href="#cb20-556" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb20-557"><a href="#cb20-557" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-558"><a href="#cb20-558" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> df.dropna(subset<span class="op">=</span>[<span class="st">"lead_earn"</span>, <span class="st">"size_adj_ret"</span>])</span>
<span id="cb20-559"><a href="#cb20-559" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df</span>
<span id="cb20-560"><a href="#cb20-560" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-561"><a href="#cb20-561" aria-hidden="true" tabindex="-1"></a>panel <span class="op">=</span> generate_vn_panel(n_firms<span class="op">=</span><span class="dv">500</span>, n_years<span class="op">=</span><span class="dv">15</span>, seed<span class="op">=</span><span class="dv">2024</span>)</span>
<span id="cb20-562"><a href="#cb20-562" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Panel: </span><span class="sc">{</span>panel<span class="sc">.</span>shape[<span class="dv">0</span>]<span class="sc">:,}</span><span class="ss"> firm-years, "</span></span>
<span id="cb20-563"><a href="#cb20-563" aria-hidden="true" tabindex="-1"></a>      <span class="ss">f"</span><span class="sc">{</span>panel[<span class="st">'ticker'</span>]<span class="sc">.</span>nunique()<span class="sc">}</span><span class="ss"> firms, "</span></span>
<span id="cb20-564"><a href="#cb20-564" aria-hidden="true" tabindex="-1"></a>      <span class="ss">f"</span><span class="sc">{</span>panel[<span class="st">'year'</span>]<span class="sc">.</span>nunique()<span class="sc">}</span><span class="ss"> years"</span>)</span>
<span id="cb20-565"><a href="#cb20-565" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-566"><a href="#cb20-566" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-567"><a href="#cb20-567" aria-hidden="true" tabindex="-1"></a><span class="fu">### Descriptive Statistics by Accrual Decile</span></span>
<span id="cb20-568"><a href="#cb20-568" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-569"><a href="#cb20-569" aria-hidden="true" tabindex="-1"></a>@tbl-desc-decile reports mean values of earnings, accruals, and cash flows by accrual decile. The pattern should mirror the mechanical decomposition: $\text{earn} = \text{acc} + \text{cfo}$.</span>
<span id="cb20-570"><a href="#cb20-570" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-573"><a href="#cb20-573" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb20-574"><a href="#cb20-574" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-desc-decile</span></span>
<span id="cb20-575"><a href="#cb20-575" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Mean earnings, accruals, and cash flows by accrual decile. Firms in the lowest accrual decile have the highest cash flows, while high-accrual firms show compressed or negative cash flowsâ€”a pattern consistent with the accounting identity."</span></span>
<span id="cb20-576"><a href="#cb20-576" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-577"><a href="#cb20-577" aria-hidden="true" tabindex="-1"></a>desc <span class="op">=</span> (</span>
<span id="cb20-578"><a href="#cb20-578" aria-hidden="true" tabindex="-1"></a>    panel</span>
<span id="cb20-579"><a href="#cb20-579" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">"acc_decile"</span>)[[<span class="st">"acc"</span>, <span class="st">"earn"</span>, <span class="st">"cfo"</span>]]</span>
<span id="cb20-580"><a href="#cb20-580" aria-hidden="true" tabindex="-1"></a>    .mean()</span>
<span id="cb20-581"><a href="#cb20-581" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">round</span>(<span class="dv">4</span>)</span>
<span id="cb20-582"><a href="#cb20-582" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-583"><a href="#cb20-583" aria-hidden="true" tabindex="-1"></a>desc.index.name <span class="op">=</span> <span class="st">"Accrual Decile"</span></span>
<span id="cb20-584"><a href="#cb20-584" aria-hidden="true" tabindex="-1"></a>desc.columns <span class="op">=</span> [<span class="st">"Accruals"</span>, <span class="st">"Earnings"</span>, <span class="st">"Cash Flows"</span>]</span>
<span id="cb20-585"><a href="#cb20-585" aria-hidden="true" tabindex="-1"></a>desc</span>
<span id="cb20-586"><a href="#cb20-586" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-587"><a href="#cb20-587" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-588"><a href="#cb20-588" aria-hidden="true" tabindex="-1"></a><span class="fu">### Persistence Regressions</span></span>
<span id="cb20-589"><a href="#cb20-589" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-590"><a href="#cb20-590" aria-hidden="true" tabindex="-1"></a>We estimate the pooled persistence regression analogous to Table 2 of @sloan1996stock. The baseline specification is:</span>
<span id="cb20-591"><a href="#cb20-591" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-592"><a href="#cb20-592" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb20-593"><a href="#cb20-593" aria-hidden="true" tabindex="-1"></a>\text{Earnings}_{i,t+1} = \gamma_0 + \gamma_1 \text{Earnings}_{i,t} + \epsilon_{i,t}</span>
<span id="cb20-594"><a href="#cb20-594" aria-hidden="true" tabindex="-1"></a>$$ {#eq-persist-baseline}</span>
<span id="cb20-595"><a href="#cb20-595" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-596"><a href="#cb20-596" aria-hidden="true" tabindex="-1"></a>followed by the decomposition:</span>
<span id="cb20-597"><a href="#cb20-597" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-598"><a href="#cb20-598" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb20-599"><a href="#cb20-599" aria-hidden="true" tabindex="-1"></a>\text{Earnings}_{i,t+1} = \gamma_0 + \gamma_a \text{Accruals}_{i,t}</span>
<span id="cb20-600"><a href="#cb20-600" aria-hidden="true" tabindex="-1"></a><span class="ss">  + </span>\gamma_c \text{CFO}_{i,t} + \epsilon_{i,t}</span>
<span id="cb20-601"><a href="#cb20-601" aria-hidden="true" tabindex="-1"></a>$$ {#eq-persist-decomp}</span>
<span id="cb20-602"><a href="#cb20-602" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-603"><a href="#cb20-603" aria-hidden="true" tabindex="-1"></a>The hypothesis of differential persistence is $H_0: \gamma_a = \gamma_c$, which we test with a standard $F$-test.</span>
<span id="cb20-604"><a href="#cb20-604" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-607"><a href="#cb20-607" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb20-608"><a href="#cb20-608" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-persistence</span></span>
<span id="cb20-609"><a href="#cb20-609" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Earnings persistence regressions. Column (1) estimates aggregate persistence. Column (2) decomposes earnings into accrual and cash flow components. The coefficient on accruals is significantly lower than on cash flows, confirming differential persistence."</span></span>
<span id="cb20-610"><a href="#cb20-610" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-611"><a href="#cb20-611" aria-hidden="true" tabindex="-1"></a><span class="co"># Column (1): Aggregate persistence</span></span>
<span id="cb20-612"><a href="#cb20-612" aria-hidden="true" tabindex="-1"></a>mod1 <span class="op">=</span> smf.ols(<span class="st">"lead_earn ~ earn"</span>, data<span class="op">=</span>panel).fit()</span>
<span id="cb20-613"><a href="#cb20-613" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-614"><a href="#cb20-614" aria-hidden="true" tabindex="-1"></a><span class="co"># Column (2): Component persistence</span></span>
<span id="cb20-615"><a href="#cb20-615" aria-hidden="true" tabindex="-1"></a>mod2 <span class="op">=</span> smf.ols(<span class="st">"lead_earn ~ acc + cfo"</span>, data<span class="op">=</span>panel).fit()</span>
<span id="cb20-616"><a href="#cb20-616" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-617"><a href="#cb20-617" aria-hidden="true" tabindex="-1"></a><span class="co"># F-test for H0: coef(acc) = coef(cfo)</span></span>
<span id="cb20-618"><a href="#cb20-618" aria-hidden="true" tabindex="-1"></a>f_test <span class="op">=</span> mod2.f_test(<span class="st">"acc = cfo"</span>)</span>
<span id="cb20-619"><a href="#cb20-619" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-620"><a href="#cb20-620" aria-hidden="true" tabindex="-1"></a>results_table <span class="op">=</span> pd.DataFrame({</span>
<span id="cb20-621"><a href="#cb20-621" aria-hidden="true" tabindex="-1"></a>    <span class="st">"(1) Aggregate"</span>: {</span>
<span id="cb20-622"><a href="#cb20-622" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Intercept"</span>: <span class="ss">f"</span><span class="sc">{</span>mod1<span class="sc">.</span>params[<span class="st">'Intercept'</span>]<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>mod1<span class="sc">.</span>bse[<span class="st">'Intercept'</span>]<span class="sc">:.4f}</span><span class="ss">)"</span>,</span>
<span id="cb20-623"><a href="#cb20-623" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Earnings"</span>: <span class="ss">f"</span><span class="sc">{</span>mod1<span class="sc">.</span>params[<span class="st">'earn'</span>]<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>mod1<span class="sc">.</span>bse[<span class="st">'earn'</span>]<span class="sc">:.4f}</span><span class="ss">)"</span>,</span>
<span id="cb20-624"><a href="#cb20-624" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Accruals"</span>: <span class="st">""</span>,</span>
<span id="cb20-625"><a href="#cb20-625" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Cash Flows"</span>: <span class="st">""</span>,</span>
<span id="cb20-626"><a href="#cb20-626" aria-hidden="true" tabindex="-1"></a>        <span class="st">"N"</span>: <span class="ss">f"</span><span class="sc">{</span><span class="bu">int</span>(mod1.nobs)<span class="sc">:,}</span><span class="ss">"</span>,</span>
<span id="cb20-627"><a href="#cb20-627" aria-hidden="true" tabindex="-1"></a>        <span class="st">"RÂ²"</span>: <span class="ss">f"</span><span class="sc">{</span>mod1<span class="sc">.</span>rsquared<span class="sc">:.3f}</span><span class="ss">"</span>,</span>
<span id="cb20-628"><a href="#cb20-628" aria-hidden="true" tabindex="-1"></a>        <span class="st">"F-test (acc=cfo)"</span>: <span class="st">""</span>,</span>
<span id="cb20-629"><a href="#cb20-629" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb20-630"><a href="#cb20-630" aria-hidden="true" tabindex="-1"></a>    <span class="st">"(2) Components"</span>: {</span>
<span id="cb20-631"><a href="#cb20-631" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Intercept"</span>: <span class="ss">f"</span><span class="sc">{</span>mod2<span class="sc">.</span>params[<span class="st">'Intercept'</span>]<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>mod2<span class="sc">.</span>bse[<span class="st">'Intercept'</span>]<span class="sc">:.4f}</span><span class="ss">)"</span>,</span>
<span id="cb20-632"><a href="#cb20-632" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Earnings"</span>: <span class="st">""</span>,</span>
<span id="cb20-633"><a href="#cb20-633" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Accruals"</span>: <span class="ss">f"</span><span class="sc">{</span>mod2<span class="sc">.</span>params[<span class="st">'acc'</span>]<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>mod2<span class="sc">.</span>bse[<span class="st">'acc'</span>]<span class="sc">:.4f}</span><span class="ss">)"</span>,</span>
<span id="cb20-634"><a href="#cb20-634" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Cash Flows"</span>: <span class="ss">f"</span><span class="sc">{</span>mod2<span class="sc">.</span>params[<span class="st">'cfo'</span>]<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>mod2<span class="sc">.</span>bse[<span class="st">'cfo'</span>]<span class="sc">:.4f}</span><span class="ss">)"</span>,</span>
<span id="cb20-635"><a href="#cb20-635" aria-hidden="true" tabindex="-1"></a>        <span class="st">"N"</span>: <span class="ss">f"</span><span class="sc">{</span><span class="bu">int</span>(mod2.nobs)<span class="sc">:,}</span><span class="ss">"</span>,</span>
<span id="cb20-636"><a href="#cb20-636" aria-hidden="true" tabindex="-1"></a>        <span class="st">"RÂ²"</span>: <span class="ss">f"</span><span class="sc">{</span>mod2<span class="sc">.</span>rsquared<span class="sc">:.3f}</span><span class="ss">"</span>,</span>
<span id="cb20-637"><a href="#cb20-637" aria-hidden="true" tabindex="-1"></a>        <span class="st">"F-test (acc=cfo)"</span>: <span class="ss">f"F = </span><span class="sc">{</span><span class="bu">float</span>(f_test.fvalue)<span class="sc">:.2f}</span><span class="ss">, p = </span><span class="sc">{</span><span class="bu">float</span>(f_test.pvalue)<span class="sc">:.4f}</span><span class="ss">"</span>, </span>
<span id="cb20-638"><a href="#cb20-638" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb20-639"><a href="#cb20-639" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb20-640"><a href="#cb20-640" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb20-641"><a href="#cb20-641" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb20-642"><a href="#cb20-642" aria-hidden="true" tabindex="-1"></a>results_table</span>
<span id="cb20-643"><a href="#cb20-643" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-644"><a href="#cb20-644" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-645"><a href="#cb20-645" aria-hidden="true" tabindex="-1"></a><span class="fu">### Industry-Level Persistence</span></span>
<span id="cb20-646"><a href="#cb20-646" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-647"><a href="#cb20-647" aria-hidden="true" tabindex="-1"></a>Market-wide regressions may mask heterogeneity across industries. Vietnamese industry structure is concentrated in manufacturing, real estate, banking, and retail (i.e., sectors with very different accrual profiles). We estimate persistence separately by two-digit VSIC code.</span>
<span id="cb20-648"><a href="#cb20-648" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-651"><a href="#cb20-651" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb20-652"><a href="#cb20-652" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-industry-persistence</span></span>
<span id="cb20-653"><a href="#cb20-653" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Distribution of industry-level persistence coefficients. Each row reports statistics for the distribution of estimated coefficients across 2-digit VSIC industries."</span></span>
<span id="cb20-654"><a href="#cb20-654" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-655"><a href="#cb20-655" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> industry_persistence(df: pd.DataFrame) <span class="op">-&gt;</span> pd.DataFrame:</span>
<span id="cb20-656"><a href="#cb20-656" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Estimate persistence regressions by VSIC 2-digit code."""</span></span>
<span id="cb20-657"><a href="#cb20-657" aria-hidden="true" tabindex="-1"></a>    coefs <span class="op">=</span> []</span>
<span id="cb20-658"><a href="#cb20-658" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> vsic, group <span class="kw">in</span> df.groupby(<span class="st">"vsic2"</span>):</span>
<span id="cb20-659"><a href="#cb20-659" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">len</span>(group) <span class="op">&lt;</span> <span class="dv">30</span>:</span>
<span id="cb20-660"><a href="#cb20-660" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb20-661"><a href="#cb20-661" aria-hidden="true" tabindex="-1"></a>        <span class="cf">try</span>:</span>
<span id="cb20-662"><a href="#cb20-662" aria-hidden="true" tabindex="-1"></a>            mod <span class="op">=</span> smf.ols(<span class="st">"lead_earn ~ acc + cfo"</span>, data<span class="op">=</span>group).fit()</span>
<span id="cb20-663"><a href="#cb20-663" aria-hidden="true" tabindex="-1"></a>            coefs.append({</span>
<span id="cb20-664"><a href="#cb20-664" aria-hidden="true" tabindex="-1"></a>                <span class="st">"vsic2"</span>: vsic,</span>
<span id="cb20-665"><a href="#cb20-665" aria-hidden="true" tabindex="-1"></a>                <span class="st">"intercept"</span>: mod.params[<span class="st">"Intercept"</span>],</span>
<span id="cb20-666"><a href="#cb20-666" aria-hidden="true" tabindex="-1"></a>                <span class="st">"acc"</span>: mod.params[<span class="st">"acc"</span>],</span>
<span id="cb20-667"><a href="#cb20-667" aria-hidden="true" tabindex="-1"></a>                <span class="st">"cfo"</span>: mod.params[<span class="st">"cfo"</span>],</span>
<span id="cb20-668"><a href="#cb20-668" aria-hidden="true" tabindex="-1"></a>            })</span>
<span id="cb20-669"><a href="#cb20-669" aria-hidden="true" tabindex="-1"></a>        <span class="cf">except</span> <span class="pp">Exception</span>:</span>
<span id="cb20-670"><a href="#cb20-670" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb20-671"><a href="#cb20-671" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pd.DataFrame(coefs)</span>
<span id="cb20-672"><a href="#cb20-672" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-673"><a href="#cb20-673" aria-hidden="true" tabindex="-1"></a>ind_coefs <span class="op">=</span> industry_persistence(panel)</span>
<span id="cb20-674"><a href="#cb20-674" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-675"><a href="#cb20-675" aria-hidden="true" tabindex="-1"></a>ind_summary <span class="op">=</span> ind_coefs[[<span class="st">"intercept"</span>, <span class="st">"acc"</span>, <span class="st">"cfo"</span>]].describe().loc[</span>
<span id="cb20-676"><a href="#cb20-676" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"mean"</span>, <span class="st">"25%"</span>, <span class="st">"50%"</span>, <span class="st">"75%"</span>]</span>
<span id="cb20-677"><a href="#cb20-677" aria-hidden="true" tabindex="-1"></a>].<span class="bu">round</span>(<span class="dv">4</span>)</span>
<span id="cb20-678"><a href="#cb20-678" aria-hidden="true" tabindex="-1"></a>ind_summary.index <span class="op">=</span> [<span class="st">"Mean"</span>, <span class="st">"Q1"</span>, <span class="st">"Median"</span>, <span class="st">"Q3"</span>]</span>
<span id="cb20-679"><a href="#cb20-679" aria-hidden="true" tabindex="-1"></a>ind_summary.columns <span class="op">=</span> [<span class="st">"Intercept"</span>, <span class="st">"Accruals (Î³_a)"</span>, <span class="st">"Cash Flows (Î³_c)"</span>]</span>
<span id="cb20-680"><a href="#cb20-680" aria-hidden="true" tabindex="-1"></a>ind_summary</span>
<span id="cb20-681"><a href="#cb20-681" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-682"><a href="#cb20-682" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-683"><a href="#cb20-683" aria-hidden="true" tabindex="-1"></a><span class="fu">### Persistence Visualization</span></span>
<span id="cb20-684"><a href="#cb20-684" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-685"><a href="#cb20-685" aria-hidden="true" tabindex="-1"></a>@fig-persistence-bars compares the accrual and cash flow persistence coefficients across industries, providing a visual test of the differential persistence hypothesis.</span>
<span id="cb20-686"><a href="#cb20-686" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-689"><a href="#cb20-689" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb20-690"><a href="#cb20-690" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-persistence-bars</span></span>
<span id="cb20-691"><a href="#cb20-691" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Accrual vs. cash flow persistence coefficients by VSIC industry. In nearly all industries, cash flow persistence exceeds accrual persistence, consistent with the differential persistence hypothesis."</span></span>
<span id="cb20-692"><a href="#cb20-692" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-693"><a href="#cb20-693" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="bu">len</span>(ind_coefs) <span class="op">&gt;</span> <span class="dv">2</span>:</span>
<span id="cb20-694"><a href="#cb20-694" aria-hidden="true" tabindex="-1"></a>    ind_plot <span class="op">=</span> ind_coefs.sort_values(<span class="st">"cfo"</span>).reset_index(drop<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb20-695"><a href="#cb20-695" aria-hidden="true" tabindex="-1"></a>    fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">5</span>))</span>
<span id="cb20-696"><a href="#cb20-696" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> np.arange(<span class="bu">len</span>(ind_plot))</span>
<span id="cb20-697"><a href="#cb20-697" aria-hidden="true" tabindex="-1"></a>    width <span class="op">=</span> <span class="fl">0.35</span></span>
<span id="cb20-698"><a href="#cb20-698" aria-hidden="true" tabindex="-1"></a>    ax.barh(x <span class="op">-</span> width <span class="op">/</span> <span class="dv">2</span>, ind_plot[<span class="st">"acc"</span>], width, label<span class="op">=</span><span class="st">"Accruals"</span>, color<span class="op">=</span><span class="st">"steelblue"</span>)</span>
<span id="cb20-699"><a href="#cb20-699" aria-hidden="true" tabindex="-1"></a>    ax.barh(x <span class="op">+</span> width <span class="op">/</span> <span class="dv">2</span>, ind_plot[<span class="st">"cfo"</span>], width, label<span class="op">=</span><span class="st">"Cash Flows"</span>, color<span class="op">=</span><span class="st">"firebrick"</span>)</span>
<span id="cb20-700"><a href="#cb20-700" aria-hidden="true" tabindex="-1"></a>    ax.set_yticks(x)</span>
<span id="cb20-701"><a href="#cb20-701" aria-hidden="true" tabindex="-1"></a>    ax.set_yticklabels([<span class="ss">f"VSIC </span><span class="sc">{</span><span class="bu">int</span>(v)<span class="sc">}</span><span class="ss">"</span> <span class="cf">for</span> v <span class="kw">in</span> ind_plot[<span class="st">"vsic2"</span>]])</span>
<span id="cb20-702"><a href="#cb20-702" aria-hidden="true" tabindex="-1"></a>    ax.set_xlabel(<span class="st">"Persistence Coefficient"</span>)</span>
<span id="cb20-703"><a href="#cb20-703" aria-hidden="true" tabindex="-1"></a>    ax.legend()</span>
<span id="cb20-704"><a href="#cb20-704" aria-hidden="true" tabindex="-1"></a>    ax.set_title(<span class="st">"Earnings Component Persistence by Industry"</span>)</span>
<span id="cb20-705"><a href="#cb20-705" aria-hidden="true" tabindex="-1"></a>    plt.tight_layout()</span>
<span id="cb20-706"><a href="#cb20-706" aria-hidden="true" tabindex="-1"></a>    plt.show()</span>
<span id="cb20-707"><a href="#cb20-707" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-708"><a href="#cb20-708" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-709"><a href="#cb20-709" aria-hidden="true" tabindex="-1"></a><span class="fu">## Market Pricing of Earnings Components {#sec-accruals-mispricing}</span></span>
<span id="cb20-710"><a href="#cb20-710" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-711"><a href="#cb20-711" aria-hidden="true" tabindex="-1"></a>The persistence analysis establishes that accruals are less persistent than cash flows. The market efficiency question is whether stock prices *reflect* this difference. If investors naÃ¯vely treat both components as equally persistent, what @sloan1996stock termed "earnings fixation," then a predictable component of future returns should be related to the accrual composition of current earnings.</span>
<span id="cb20-712"><a href="#cb20-712" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-713"><a href="#cb20-713" aria-hidden="true" tabindex="-1"></a><span class="fu">### Theoretical Framework</span></span>
<span id="cb20-714"><a href="#cb20-714" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-715"><a href="#cb20-715" aria-hidden="true" tabindex="-1"></a>Suppose the market prices earnings using:</span>
<span id="cb20-716"><a href="#cb20-716" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-717"><a href="#cb20-717" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb20-718"><a href="#cb20-718" aria-hidden="true" tabindex="-1"></a>P_t = \frac{1}{r} \left<span class="co">[</span><span class="ot"> \hat{\gamma}^* \cdot E_t \right</span><span class="co">]</span></span>
<span id="cb20-719"><a href="#cb20-719" aria-hidden="true" tabindex="-1"></a>$$ {#eq-naive-pricing}</span>
<span id="cb20-720"><a href="#cb20-720" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-721"><a href="#cb20-721" aria-hidden="true" tabindex="-1"></a>where $\hat{\gamma}^*$ is the market's *perceived* persistence of aggregate earnings. Rational pricing requires:</span>
<span id="cb20-722"><a href="#cb20-722" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-723"><a href="#cb20-723" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb20-724"><a href="#cb20-724" aria-hidden="true" tabindex="-1"></a>P_t = \frac{1}{r} \left<span class="co">[</span><span class="ot"> \hat{\gamma}_a \cdot ACC_t + \hat{\gamma}_c \cdot CFO_t \right</span><span class="co">]</span></span>
<span id="cb20-725"><a href="#cb20-725" aria-hidden="true" tabindex="-1"></a>$$ {#eq-rational-pricing}</span>
<span id="cb20-726"><a href="#cb20-726" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-727"><a href="#cb20-727" aria-hidden="true" tabindex="-1"></a>with $\hat{\gamma}_a &lt; \hat{\gamma}_c$. If the market uses @eq-naive-pricing instead of @eq-rational-pricing, then high-accrual firms are *overpriced* (because the market overestimates the persistence of their accrual-heavy earnings) and low-accrual firms are *underpriced*.</span>
<span id="cb20-728"><a href="#cb20-728" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-729"><a href="#cb20-729" aria-hidden="true" tabindex="-1"></a><span class="fu">### The Abelâ€“Mishkin Test</span></span>
<span id="cb20-730"><a href="#cb20-730" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-731"><a href="#cb20-731" aria-hidden="true" tabindex="-1"></a>Testing whether market pricing coefficients match rational forecasting coefficients can be done via the approach of @abel1983optimal, which avoids the complexity of the full @abel1983integrated, @mishkin1983market and @mishkin2007rational nonlinear system. The intuition is simple: if lagged earnings components are mispriced, this should be detectable in a regression of *future abnormal returns* on those components:</span>
<span id="cb20-732"><a href="#cb20-732" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-733"><a href="#cb20-733" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb20-734"><a href="#cb20-734" aria-hidden="true" tabindex="-1"></a>AR_{i,t+1} = \alpha + \beta_a \cdot ACC_{i,t} + \beta_c \cdot CFO_{i,t} + \eta_{i,t}</span>
<span id="cb20-735"><a href="#cb20-735" aria-hidden="true" tabindex="-1"></a>$$ {#eq-abel-mishkin}</span>
<span id="cb20-736"><a href="#cb20-736" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-737"><a href="#cb20-737" aria-hidden="true" tabindex="-1"></a>Under efficient pricing, $\beta_a = \beta_c = 0$: lagged public information should have no predictive power for abnormal returns. A finding of $\beta_a &lt; 0$ implies that the market overprices accruals and subsequently corrects.</span>
<span id="cb20-738"><a href="#cb20-738" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-741"><a href="#cb20-741" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb20-742"><a href="#cb20-742" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-mispricing</span></span>
<span id="cb20-743"><a href="#cb20-743" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Abnormal return regressions. Column (1) regresses size-adjusted returns on lagged accruals and cash flows. Column (2) uses decile ranks. A negative coefficient on accruals indicates that the market overprices the accrual component and corrects in the subsequent period."</span></span>
<span id="cb20-744"><a href="#cb20-744" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-745"><a href="#cb20-745" aria-hidden="true" tabindex="-1"></a><span class="co"># Abel-Mishkin style test</span></span>
<span id="cb20-746"><a href="#cb20-746" aria-hidden="true" tabindex="-1"></a>mod_am1 <span class="op">=</span> smf.ols(<span class="st">"size_adj_ret ~ acc + cfo"</span>, data<span class="op">=</span>panel).fit()</span>
<span id="cb20-747"><a href="#cb20-747" aria-hidden="true" tabindex="-1"></a>mod_am2 <span class="op">=</span> smf.ols(<span class="st">"size_adj_ret ~ acc_decile + cfo_decile"</span>, data<span class="op">=</span>panel).fit()</span>
<span id="cb20-748"><a href="#cb20-748" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-749"><a href="#cb20-749" aria-hidden="true" tabindex="-1"></a>am_table <span class="op">=</span> pd.DataFrame({</span>
<span id="cb20-750"><a href="#cb20-750" aria-hidden="true" tabindex="-1"></a>    <span class="st">"(1) Continuous"</span>: {</span>
<span id="cb20-751"><a href="#cb20-751" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Intercept"</span>: <span class="ss">f"</span><span class="sc">{</span>mod_am1<span class="sc">.</span>params[<span class="st">'Intercept'</span>]<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>mod_am1<span class="sc">.</span>bse[<span class="st">'Intercept'</span>]<span class="sc">:.4f}</span><span class="ss">)"</span>,</span>
<span id="cb20-752"><a href="#cb20-752" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Accruals"</span>: <span class="ss">f"</span><span class="sc">{</span>mod_am1<span class="sc">.</span>params[<span class="st">'acc'</span>]<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>mod_am1<span class="sc">.</span>bse[<span class="st">'acc'</span>]<span class="sc">:.4f}</span><span class="ss">)"</span>,</span>
<span id="cb20-753"><a href="#cb20-753" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Cash Flows"</span>: <span class="ss">f"</span><span class="sc">{</span>mod_am1<span class="sc">.</span>params[<span class="st">'cfo'</span>]<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>mod_am1<span class="sc">.</span>bse[<span class="st">'cfo'</span>]<span class="sc">:.4f}</span><span class="ss">)"</span>,</span>
<span id="cb20-754"><a href="#cb20-754" aria-hidden="true" tabindex="-1"></a>        <span class="st">"N"</span>: <span class="ss">f"</span><span class="sc">{</span><span class="bu">int</span>(mod_am1.nobs)<span class="sc">:,}</span><span class="ss">"</span>,</span>
<span id="cb20-755"><a href="#cb20-755" aria-hidden="true" tabindex="-1"></a>        <span class="st">"RÂ²"</span>: <span class="ss">f"</span><span class="sc">{</span>mod_am1<span class="sc">.</span>rsquared<span class="sc">:.4f}</span><span class="ss">"</span>,</span>
<span id="cb20-756"><a href="#cb20-756" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb20-757"><a href="#cb20-757" aria-hidden="true" tabindex="-1"></a>    <span class="st">"(2) Decile Ranks"</span>: {</span>
<span id="cb20-758"><a href="#cb20-758" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Intercept"</span>: <span class="ss">f"</span><span class="sc">{</span>mod_am2<span class="sc">.</span>params[<span class="st">'Intercept'</span>]<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>mod_am2<span class="sc">.</span>bse[<span class="st">'Intercept'</span>]<span class="sc">:.4f}</span><span class="ss">)"</span>,</span>
<span id="cb20-759"><a href="#cb20-759" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Accruals"</span>: <span class="ss">f"</span><span class="sc">{</span>mod_am2<span class="sc">.</span>params[<span class="st">'acc_decile'</span>]<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>mod_am2<span class="sc">.</span>bse[<span class="st">'acc_decile'</span>]<span class="sc">:.4f}</span><span class="ss">)"</span>,</span>
<span id="cb20-760"><a href="#cb20-760" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Cash Flows"</span>: <span class="ss">f"</span><span class="sc">{</span>mod_am2<span class="sc">.</span>params[<span class="st">'cfo_decile'</span>]<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>mod_am2<span class="sc">.</span>bse[<span class="st">'cfo_decile'</span>]<span class="sc">:.4f}</span><span class="ss">)"</span>,</span>
<span id="cb20-761"><a href="#cb20-761" aria-hidden="true" tabindex="-1"></a>        <span class="st">"N"</span>: <span class="ss">f"</span><span class="sc">{</span><span class="bu">int</span>(mod_am2.nobs)<span class="sc">:,}</span><span class="ss">"</span>,</span>
<span id="cb20-762"><a href="#cb20-762" aria-hidden="true" tabindex="-1"></a>        <span class="st">"RÂ²"</span>: <span class="ss">f"</span><span class="sc">{</span>mod_am2<span class="sc">.</span>rsquared<span class="sc">:.4f}</span><span class="ss">"</span>,</span>
<span id="cb20-763"><a href="#cb20-763" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb20-764"><a href="#cb20-764" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb20-765"><a href="#cb20-765" aria-hidden="true" tabindex="-1"></a>am_table</span>
<span id="cb20-766"><a href="#cb20-766" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-767"><a href="#cb20-767" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-768"><a href="#cb20-768" aria-hidden="true" tabindex="-1"></a><span class="fu">### Interpretation for Vietnam</span></span>
<span id="cb20-769"><a href="#cb20-769" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-770"><a href="#cb20-770" aria-hidden="true" tabindex="-1"></a>The limited attention hypothesis of @hirshleifer2003limited provides a particularly appealing explanation for Vietnamese markets. When retail investors dominate trading, as in Vietnam, where retail participation exceeds 80% of daily turnover, information processing capacity is limited. Investors may anchor on headline earnings without decomposing into accrual and cash flow components. The absence of short-selling mechanisms (Vietnam did not introduce covered short selling until 2024) further impedes the correction of overpricing, potentially allowing the accrual anomaly to persist longer than in developed markets.</span>
<span id="cb20-771"><a href="#cb20-771" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-772"><a href="#cb20-772" aria-hidden="true" tabindex="-1"></a><span class="fu">## The Accrual Anomaly {#sec-accruals-anomaly}</span></span>
<span id="cb20-773"><a href="#cb20-773" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-774"><a href="#cb20-774" aria-hidden="true" tabindex="-1"></a><span class="fu">### Portfolio Returns by Accrual Decile</span></span>
<span id="cb20-775"><a href="#cb20-775" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-776"><a href="#cb20-776" aria-hidden="true" tabindex="-1"></a>Following the portfolio approach of @sloan1996stock, we compute mean size-adjusted returns for each accrual decile. If the market misprices accruals, we expect a monotonically decreasing pattern: low-accrual firms (decile 1) earn positive abnormal returns, while high-accrual firms (decile 10) earn negative abnormal returns.</span>
<span id="cb20-777"><a href="#cb20-777" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-780"><a href="#cb20-780" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb20-781"><a href="#cb20-781" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-anomaly-deciles</span></span>
<span id="cb20-782"><a href="#cb20-782" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: "Mean size-adjusted returns by accrual decile. The hedge portfolio (long decile 1, short decile 10) return and its t-statistic are reported at the bottom."</span></span>
<span id="cb20-783"><a href="#cb20-783" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-784"><a href="#cb20-784" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute annual portfolio returns (equal-weighted within decile-year)</span></span>
<span id="cb20-785"><a href="#cb20-785" aria-hidden="true" tabindex="-1"></a>port_rets <span class="op">=</span> (</span>
<span id="cb20-786"><a href="#cb20-786" aria-hidden="true" tabindex="-1"></a>    panel</span>
<span id="cb20-787"><a href="#cb20-787" aria-hidden="true" tabindex="-1"></a>    .groupby([<span class="st">"year"</span>, <span class="st">"acc_decile"</span>])[<span class="st">"size_adj_ret"</span>]</span>
<span id="cb20-788"><a href="#cb20-788" aria-hidden="true" tabindex="-1"></a>    .mean()</span>
<span id="cb20-789"><a href="#cb20-789" aria-hidden="true" tabindex="-1"></a>    .reset_index()</span>
<span id="cb20-790"><a href="#cb20-790" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-791"><a href="#cb20-791" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-792"><a href="#cb20-792" aria-hidden="true" tabindex="-1"></a><span class="co"># Regression approach: decile dummies (no intercept)</span></span>
<span id="cb20-793"><a href="#cb20-793" aria-hidden="true" tabindex="-1"></a>port_rets[<span class="st">"acc_decile_str"</span>] <span class="op">=</span> <span class="st">"D"</span> <span class="op">+</span> port_rets[<span class="st">"acc_decile"</span>].astype(<span class="bu">str</span>).<span class="bu">str</span>.zfill(<span class="dv">2</span>)</span>
<span id="cb20-794"><a href="#cb20-794" aria-hidden="true" tabindex="-1"></a>mod_port <span class="op">=</span> smf.ols(</span>
<span id="cb20-795"><a href="#cb20-795" aria-hidden="true" tabindex="-1"></a>    <span class="st">"size_adj_ret ~ C(acc_decile, Treatment(reference=0)) - 1"</span>,</span>
<span id="cb20-796"><a href="#cb20-796" aria-hidden="true" tabindex="-1"></a>    data<span class="op">=</span>port_rets.assign(acc_decile<span class="op">=</span>port_rets[<span class="st">"acc_decile"</span>].astype(<span class="st">"category"</span>)),</span>
<span id="cb20-797"><a href="#cb20-797" aria-hidden="true" tabindex="-1"></a>).fit()</span>
<span id="cb20-798"><a href="#cb20-798" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-799"><a href="#cb20-799" aria-hidden="true" tabindex="-1"></a><span class="co"># Mean returns by decile</span></span>
<span id="cb20-800"><a href="#cb20-800" aria-hidden="true" tabindex="-1"></a>decile_means <span class="op">=</span> (</span>
<span id="cb20-801"><a href="#cb20-801" aria-hidden="true" tabindex="-1"></a>    port_rets</span>
<span id="cb20-802"><a href="#cb20-802" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">"acc_decile"</span>)[<span class="st">"size_adj_ret"</span>]</span>
<span id="cb20-803"><a href="#cb20-803" aria-hidden="true" tabindex="-1"></a>    .agg([<span class="st">"mean"</span>, <span class="st">"std"</span>, <span class="st">"count"</span>])</span>
<span id="cb20-804"><a href="#cb20-804" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">round</span>(<span class="dv">4</span>)</span>
<span id="cb20-805"><a href="#cb20-805" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-806"><a href="#cb20-806" aria-hidden="true" tabindex="-1"></a>decile_means[<span class="st">"t_stat"</span>] <span class="op">=</span> (</span>
<span id="cb20-807"><a href="#cb20-807" aria-hidden="true" tabindex="-1"></a>    decile_means[<span class="st">"mean"</span>] <span class="op">/</span> (decile_means[<span class="st">"std"</span>] <span class="op">/</span> np.sqrt(decile_means[<span class="st">"count"</span>]))</span>
<span id="cb20-808"><a href="#cb20-808" aria-hidden="true" tabindex="-1"></a>).<span class="bu">round</span>(<span class="dv">2</span>)</span>
<span id="cb20-809"><a href="#cb20-809" aria-hidden="true" tabindex="-1"></a>decile_means.columns <span class="op">=</span> [<span class="st">"Mean Return"</span>, <span class="st">"Std Dev"</span>, <span class="st">"N Years"</span>, <span class="st">"t-stat"</span>]</span>
<span id="cb20-810"><a href="#cb20-810" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-811"><a href="#cb20-811" aria-hidden="true" tabindex="-1"></a><span class="co"># Hedge portfolio</span></span>
<span id="cb20-812"><a href="#cb20-812" aria-hidden="true" tabindex="-1"></a>hedge_series <span class="op">=</span> (</span>
<span id="cb20-813"><a href="#cb20-813" aria-hidden="true" tabindex="-1"></a>    port_rets.query(<span class="st">"acc_decile == 1"</span>).set_index(<span class="st">"year"</span>)[<span class="st">"size_adj_ret"</span>]</span>
<span id="cb20-814"><a href="#cb20-814" aria-hidden="true" tabindex="-1"></a>    <span class="op">-</span> port_rets.query(<span class="st">"acc_decile == 10"</span>).set_index(<span class="st">"year"</span>)[<span class="st">"size_adj_ret"</span>]</span>
<span id="cb20-815"><a href="#cb20-815" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-816"><a href="#cb20-816" aria-hidden="true" tabindex="-1"></a>hedge_mean <span class="op">=</span> hedge_series.mean()</span>
<span id="cb20-817"><a href="#cb20-817" aria-hidden="true" tabindex="-1"></a>hedge_t <span class="op">=</span> hedge_mean <span class="op">/</span> (hedge_series.std() <span class="op">/</span> np.sqrt(<span class="bu">len</span>(hedge_series)))</span>
<span id="cb20-818"><a href="#cb20-818" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-819"><a href="#cb20-819" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Hedge portfolio (D1 - D10): </span><span class="sc">{</span>hedge_mean<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb20-820"><a href="#cb20-820" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"t-statistic: </span><span class="sc">{</span>hedge_t<span class="sc">:.2f}</span><span class="ss">"</span>)</span>
<span id="cb20-821"><a href="#cb20-821" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb20-822"><a href="#cb20-822" aria-hidden="true" tabindex="-1"></a>decile_means</span>
<span id="cb20-823"><a href="#cb20-823" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-824"><a href="#cb20-824" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-825"><a href="#cb20-825" aria-hidden="true" tabindex="-1"></a><span class="fu">### Visualizing the Anomaly</span></span>
<span id="cb20-826"><a href="#cb20-826" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-829"><a href="#cb20-829" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb20-830"><a href="#cb20-830" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-anomaly-bar</span></span>
<span id="cb20-831"><a href="#cb20-831" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Mean size-adjusted returns by accrual decile. The downward slope from low-accrual to high-accrual deciles is consistent with market overpricing of the accrual component of earnings."</span></span>
<span id="cb20-832"><a href="#cb20-832" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-833"><a href="#cb20-833" aria-hidden="true" tabindex="-1"></a>decile_plot <span class="op">=</span> port_rets.groupby(<span class="st">"acc_decile"</span>)[<span class="st">"size_adj_ret"</span>].mean()</span>
<span id="cb20-834"><a href="#cb20-834" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-835"><a href="#cb20-835" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb20-836"><a href="#cb20-836" aria-hidden="true" tabindex="-1"></a>colors <span class="op">=</span> [<span class="st">"steelblue"</span> <span class="cf">if</span> r <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">else</span> <span class="st">"firebrick"</span> <span class="cf">for</span> r <span class="kw">in</span> decile_plot.values]</span>
<span id="cb20-837"><a href="#cb20-837" aria-hidden="true" tabindex="-1"></a>ax.bar(decile_plot.index, decile_plot.values, color<span class="op">=</span>colors, edgecolor<span class="op">=</span><span class="st">"white"</span>)</span>
<span id="cb20-838"><a href="#cb20-838" aria-hidden="true" tabindex="-1"></a>ax.axhline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"black"</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb20-839"><a href="#cb20-839" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Accrual Decile"</span>)</span>
<span id="cb20-840"><a href="#cb20-840" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Mean Size-Adjusted Return"</span>)</span>
<span id="cb20-841"><a href="#cb20-841" aria-hidden="true" tabindex="-1"></a>ax.set_xticks(<span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">11</span>))</span>
<span id="cb20-842"><a href="#cb20-842" aria-hidden="true" tabindex="-1"></a>ax.yaxis.set_major_formatter(mticker.PercentFormatter(xmax<span class="op">=</span><span class="dv">1</span>, decimals<span class="op">=</span><span class="dv">1</span>))</span>
<span id="cb20-843"><a href="#cb20-843" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb20-844"><a href="#cb20-844" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb20-845"><a href="#cb20-845" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-846"><a href="#cb20-846" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-847"><a href="#cb20-847" aria-hidden="true" tabindex="-1"></a><span class="fu">### Time-Series Stability</span></span>
<span id="cb20-848"><a href="#cb20-848" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-849"><a href="#cb20-849" aria-hidden="true" tabindex="-1"></a>A critical question for any anomaly is whether it persists over time or is concentrated in specific sub-periods. @fig-anomaly-ts plots the hedge portfolio return by year.</span>
<span id="cb20-850"><a href="#cb20-850" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-853"><a href="#cb20-853" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb20-854"><a href="#cb20-854" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-anomaly-ts</span></span>
<span id="cb20-855"><a href="#cb20-855" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Annual hedge portfolio returns (decile 1 minus decile 10) over time. Positive values indicate that low-accrual firms outperformed high-accrual firms. Year-to-year variation is substantial, reflecting the noisy nature of annual return measurement."</span></span>
<span id="cb20-856"><a href="#cb20-856" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-857"><a href="#cb20-857" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb20-858"><a href="#cb20-858" aria-hidden="true" tabindex="-1"></a>ax.bar(hedge_series.index, hedge_series.values,</span>
<span id="cb20-859"><a href="#cb20-859" aria-hidden="true" tabindex="-1"></a>       color<span class="op">=</span>[<span class="st">"steelblue"</span> <span class="cf">if</span> v <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">else</span> <span class="st">"firebrick"</span> <span class="cf">for</span> v <span class="kw">in</span> hedge_series.values],</span>
<span id="cb20-860"><a href="#cb20-860" aria-hidden="true" tabindex="-1"></a>       edgecolor<span class="op">=</span><span class="st">"white"</span>)</span>
<span id="cb20-861"><a href="#cb20-861" aria-hidden="true" tabindex="-1"></a>ax.axhline(hedge_series.mean(), color<span class="op">=</span><span class="st">"black"</span>, linestyle<span class="op">=</span><span class="st">"--"</span>, linewidth<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb20-862"><a href="#cb20-862" aria-hidden="true" tabindex="-1"></a>           label<span class="op">=</span><span class="ss">f"Mean = </span><span class="sc">{</span>hedge_series<span class="sc">.</span>mean()<span class="sc">:.1%}</span><span class="ss">"</span>)</span>
<span id="cb20-863"><a href="#cb20-863" aria-hidden="true" tabindex="-1"></a>ax.axhline(<span class="dv">0</span>, color<span class="op">=</span><span class="st">"black"</span>, linewidth<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb20-864"><a href="#cb20-864" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Year"</span>)</span>
<span id="cb20-865"><a href="#cb20-865" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Hedge Portfolio Return"</span>)</span>
<span id="cb20-866"><a href="#cb20-866" aria-hidden="true" tabindex="-1"></a>ax.yaxis.set_major_formatter(mticker.PercentFormatter(xmax<span class="op">=</span><span class="dv">1</span>, decimals<span class="op">=</span><span class="dv">0</span>))</span>
<span id="cb20-867"><a href="#cb20-867" aria-hidden="true" tabindex="-1"></a>ax.legend()</span>
<span id="cb20-868"><a href="#cb20-868" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb20-869"><a href="#cb20-869" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb20-870"><a href="#cb20-870" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb20-871"><a href="#cb20-871" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-872"><a href="#cb20-872" aria-hidden="true" tabindex="-1"></a><span class="fu">## Discussion and Contemporary Perspectives {#sec-accruals-discussion}</span></span>
<span id="cb20-873"><a href="#cb20-873" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-874"><a href="#cb20-874" aria-hidden="true" tabindex="-1"></a><span class="fu">### Alternative Explanations</span></span>
<span id="cb20-875"><a href="#cb20-875" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-876"><a href="#cb20-876" aria-hidden="true" tabindex="-1"></a>The accrual anomaly has generated an extensive debate in the accounting and finance literature. Several alternative explanations merit consideration in the Vietnamese context:</span>
<span id="cb20-877"><a href="#cb20-877" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-878"><a href="#cb20-878" aria-hidden="true" tabindex="-1"></a>**Risk-based explanations.** @khan2008accruals argues that high-accrual firms may earn lower returns because they are *less risky*, not because they are mispriced. If the CAPM or multi-factor models fail to capture the true risk structure, what appears as an anomaly may simply be compensation for omitted risk factors. This explanation is harder to evaluate in Vietnam given the limited history of factor models calibrated to local data.</span>
<span id="cb20-879"><a href="#cb20-879" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-880"><a href="#cb20-880" aria-hidden="true" tabindex="-1"></a>**Growth and investment.** @fairfield2003accrued show that the low persistence of accruals extends to long-term accruals (capital expenditures), suggesting that the phenomenon reflects diminishing marginal returns to investment rather than earnings manipulation. In Vietnam's high-growth environment, this channel may be particularly important as firms invest aggressively during credit booms.</span>
<span id="cb20-881"><a href="#cb20-881" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-882"><a href="#cb20-882" aria-hidden="true" tabindex="-1"></a>**Data artifacts.** @kraft2006analysis identify sensitivity to outliers and look-ahead bias in the original evidence. Vietnamese financial data, with its shorter history and higher incidence of reporting errors, warrants extra vigilance on these points.</span>
<span id="cb20-883"><a href="#cb20-883" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-884"><a href="#cb20-884" aria-hidden="true" tabindex="-1"></a>**Institutional constraints.** Short-selling restrictions, prevalent in Vietnam until recently, prevent arbitrageurs from correcting overpricing. Combined with high transaction costs and limited institutional investor participation, this creates an environment where mispricing can be sustained even if sophisticated investors identify it.</span>
<span id="cb20-885"><a href="#cb20-885" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-886"><a href="#cb20-886" aria-hidden="true" tabindex="-1"></a><span class="fu">### State-Owned Enterprises and Accrual Quality</span></span>
<span id="cb20-887"><a href="#cb20-887" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-888"><a href="#cb20-888" aria-hidden="true" tabindex="-1"></a>A distinctive feature of Vietnamese markets is the prevalence of SOEs and former SOEs. Several testable hypotheses arise:</span>
<span id="cb20-889"><a href="#cb20-889" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-890"><a href="#cb20-890" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>**Political smoothing:** SOE managers may smooth earnings to meet government targets, generating accruals that differ in nature from those of private firms.</span>
<span id="cb20-891"><a href="#cb20-891" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-892"><a href="#cb20-892" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>**Audit quality:** @khanh2018audit find that audit quality varies systematically with ownership structure in Vietnam. Lower audit quality may allow greater accrual manipulation.</span>
<span id="cb20-893"><a href="#cb20-893" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-894"><a href="#cb20-894" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>**Information environment:** SOEs may have weaker voluntary disclosure, increasing the information asymmetry between accruals and cash flows.</span>
<span id="cb20-895"><a href="#cb20-895" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-896"><a href="#cb20-896" aria-hidden="true" tabindex="-1"></a>These hypotheses suggest that the accrual anomaly may exhibit cross-sectional variation along ownership dimensions unique to Vietnam.</span>
<span id="cb20-897"><a href="#cb20-897" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-898"><a href="#cb20-898" aria-hidden="true" tabindex="-1"></a><span class="fu">### Methodological Considerations</span></span>
<span id="cb20-899"><a href="#cb20-899" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-900"><a href="#cb20-900" aria-hidden="true" tabindex="-1"></a>When implementing this analysis with actual Vietnamese data, several practical issues require attention:</span>
<span id="cb20-901"><a href="#cb20-901" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-902"><a href="#cb20-902" aria-hidden="true" tabindex="-1"></a>**Standard errors.** Pooled OLS standard errors assume independence across firm-years. In practice, both cross-sectional correlation (common shocks within a year) and time-series correlation (firm-level persistence) are present. Clustering standard errors by firm and year (two-way clustering) or using the Fama-MacBeth procedure <span class="co">[</span><span class="ot">@fama1973risk</span><span class="co">]</span> with Newey-West corrections is recommended.</span>
<span id="cb20-903"><a href="#cb20-903" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-904"><a href="#cb20-904" aria-hidden="true" tabindex="-1"></a>**VAS-specific items.** Vietnamese financial statements include items without direct equivalents in Compustat, such as *chi phÃ­ tráº£ trÆ°á»›c* (prepaid expenses reported separately from current assets in some VAS templates). Researchers must map these carefully.</span>
<span id="cb20-905"><a href="#cb20-905" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-906"><a href="#cb20-906" aria-hidden="true" tabindex="-1"></a>**Price limits.** Daily price limits on HOSE ($\pm$ 7%) and HNX ($\pm$ 10%) can truncate return distributions and create serial correlation in measured returns. For return measurement over 12-month windows, this is less problematic but should be documented.</span>
<span id="cb20-907"><a href="#cb20-907" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-908"><a href="#cb20-908" aria-hidden="true" tabindex="-1"></a>**Exchange effects.** HOSE-listed firms tend to be larger and more liquid than HNX-listed firms. Separate analysis by exchange, or inclusion of exchange fixed effects, can help ensure results are not driven by liquidity differences.</span>
<span id="cb20-909"><a href="#cb20-909" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-910"><a href="#cb20-910" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-911"><a href="#cb20-911" aria-hidden="true" tabindex="-1"></a><span class="fu">## Summary</span></span>
<span id="cb20-912"><a href="#cb20-912" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-913"><a href="#cb20-913" aria-hidden="true" tabindex="-1"></a>This chapter examined accrual accounting and its implications for earnings persistence and market efficiency in the Vietnamese context. The key findings are:</span>
<span id="cb20-914"><a href="#cb20-914" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-915"><a href="#cb20-915" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Accruals are the portion of earnings not backed by contemporaneous cash flows. They arise naturally from accrual accounting but also embed estimation errors and managerial discretion.</span>
<span id="cb20-916"><a href="#cb20-916" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Simulation analysis demonstrates that when accounting estimates deviate from economic truth, accrual persistence falls below cash flow persistenceâ€”providing a structural explanation for the empirical regularity.</span>
<span id="cb20-917"><a href="#cb20-917" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Persistence regressions confirm that the accrual component of earnings is less persistent than the cash flow component, a finding that holds across industries.</span>
<span id="cb20-918"><a href="#cb20-918" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Market pricing tests suggest that stock prices in Vietnamese markets may not fully incorporate the differential persistence of earnings components, giving rise to the accrual anomaly.</span>
<span id="cb20-919"><a href="#cb20-919" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-920"><a href="#cb20-920" aria-hidden="true" tabindex="-1"></a>The Vietnamese institutional environment provides rich variation for future research on the interplay between accounting quality, investor sophistication, and market efficiency.</span>
<span id="cb20-921"><a href="#cb20-921" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-922"><a href="#cb20-922" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-923"><a href="#cb20-923" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- ## Exercises</span></span>
<span id="cb20-924"><a href="#cb20-924" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-925"><a href="#cb20-925" aria-hidden="true" tabindex="-1"></a><span class="co">1.  **Verify the accounting identity.** Using the simulated data from @sec-simulation, verify that $\text{Earnings} = \text{Accruals} + \text{CFO}$ holds exactly. Compute the maximum absolute deviation across all firm-years.</span></span>
<span id="cb20-926"><a href="#cb20-926" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-927"><a href="#cb20-927" aria-hidden="true" tabindex="-1"></a><span class="co">2.  **Sensitivity to parameters.** Modify the simulation function to allow $\rho = 0$ (i.i.d. sales). How does this change the persistence of earnings and its components? What does this tell you about the role of the underlying economic process vs. accounting measurement?</span></span>
<span id="cb20-928"><a href="#cb20-928" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-929"><a href="#cb20-929" aria-hidden="true" tabindex="-1"></a><span class="co">3.  **SOE subsample analysis.** Using the synthetic panel, estimate persistence regressions separately for SOE and non-SOE firms. Is there evidence of differential accrual quality by ownership type?</span></span>
<span id="cb20-930"><a href="#cb20-930" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-931"><a href="#cb20-931" aria-hidden="true" tabindex="-1"></a><span class="co">4.  **Fama-MacBeth standard errors.** Re-estimate the persistence regressions using the Fama-MacBeth approach: run cross-sectional regressions year-by-year, then compute time-series means and standard errors of the coefficient estimates. Compare these standard errors to the pooled OLS standard errors.</span></span>
<span id="cb20-932"><a href="#cb20-932" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-933"><a href="#cb20-933" aria-hidden="true" tabindex="-1"></a><span class="co">5.  **Jones model decomposition.** Implement the @jones1991earnings model to separate accruals into "normal" and "abnormal" components. The model specification is: </span></span>
<span id="cb20-934"><a href="#cb20-934" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-935"><a href="#cb20-935" aria-hidden="true" tabindex="-1"></a><span class="co">$$</span></span>
<span id="cb20-936"><a href="#cb20-936" aria-hidden="true" tabindex="-1"></a><span class="co">\frac{ACC_{i,t}}{A_{i,t-1}} = \alpha_1 \frac{1}{A_{i,t-1}}</span></span>
<span id="cb20-937"><a href="#cb20-937" aria-hidden="true" tabindex="-1"></a><span class="co">      + \alpha_2 \frac{\Delta Rev_{i,t}}{A_{i,t-1}}</span></span>
<span id="cb20-938"><a href="#cb20-938" aria-hidden="true" tabindex="-1"></a><span class="co">      + \alpha_3 \frac{PPE_{i,t}}{A_{i,t-1}} + \varepsilon_{i,t}</span></span>
<span id="cb20-939"><a href="#cb20-939" aria-hidden="true" tabindex="-1"></a><span class="co">$$ </span></span>
<span id="cb20-940"><a href="#cb20-940" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-941"><a href="#cb20-941" aria-hidden="true" tabindex="-1"></a><span class="co">Estimate this cross-sectionally by year and industry. Do abnormal accruals (the residual $\hat{\varepsilon}$) predict returns better than total accruals?</span></span>
<span id="cb20-942"><a href="#cb20-942" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-943"><a href="#cb20-943" aria-hidden="true" tabindex="-1"></a><span class="co">6.  **VAS vs. IFRS measurement.** Research three specific areas where VAS differs from IFRS in ways that affect accrual measurement (e.g., revenue recognition, lease accounting, financial instrument classification). For each, explain the direction and likely magnitude of the impact on measured accruals.</span></span>
<span id="cb20-944"><a href="#cb20-944" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-945"><a href="#cb20-945" aria-hidden="true" tabindex="-1"></a><span class="co">7.  **Short-selling constraints.** Vietnam introduced limited short-selling in 2024. Design a difference-in-differences framework to test whether the introduction of short selling affects the magnitude of the accrual anomaly. What are the key identification assumptions? --&gt;</span></span>
</code></pre></div><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p><span id="copyright"></span> Mike. All rights reserved.</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/mikenguyen13/tidy_finance_vn/edit/main/33_accruals.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/mikenguyen13/tidy_finance_vn/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>