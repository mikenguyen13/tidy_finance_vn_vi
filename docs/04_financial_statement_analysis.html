<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>13&nbsp; Financial Statement Analysis – Applying Tidy Finance with Python to Vietnam</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./25_pe_ratio.html" rel="next">
<link href="./14_fama_macbeth.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-b758ccaa5987ceb1b75504551e579abf.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-50a4fa9e9ef121803c2355a2deb1af4d.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark-d8431037eefe704a1e7a103aa5b75ea7.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="site_libs/bootstrap/bootstrap-50a4fa9e9ef121803c2355a2deb1af4d.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js" integrity="sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="13&nbsp; Financial Statement Analysis – Applying Tidy Finance with Python to Vietnam">
<meta property="og:description" content="">
<meta property="og:image" content="https://github.com/mikenguyen13/tidy_finance_vn/04_financial_statement_analysis_files/figure-html/fig-409-output-1.png">
<meta property="og:site_name" content="Applying Tidy Finance with Python to Vietnam">
<meta property="og:image:alt" content="Title: Liquidity ratios for VN30 stocks. The figure shows a grouped bar chart comparing current, quick, and cash ratios across companies.">
<meta property="og:image:height" content="960">
<meta property="og:image:width" content="1344">
<meta name="twitter:title" content="13&nbsp; Financial Statement Analysis – Applying Tidy Finance with Python to Vietnam">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="https://github.com/mikenguyen13/tidy_finance_vn/04_financial_statement_analysis_files/figure-html/fig-409-output-1.png">
<meta name="twitter:image:alt" content="Title: Liquidity ratios for VN30 stocks. The figure shows a grouped bar chart comparing current, quick, and cash ratios across companies.">
<meta name="twitter:image-height" content="960">
<meta name="twitter:image-width" content="1344">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar floating quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./04_financial_statement_analysis.html">Firm Fundamentals, Valuation, and Corporate Signals</a></li><li class="breadcrumb-item"><a href="./04_financial_statement_analysis.html"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Financial Statement Analysis</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Applying Tidy Finance with Python to Vietnam</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/mikenguyen13/tidy_finance_vn" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Vietnam Financial Markets, Institutions, and Data</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00_institutional_background.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Institutional Background and Market Structure of Vietnam’s Equity Market</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06_accessing_and_managing_financial_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Accessing and Managing VN Financial Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07_datacore_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Datacore Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01_working_with_stock_returns.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Constructing and Analyzing Equity Return Series</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16_compound_return.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Compound Returns</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Portfolio Construction, Risk, and Empirical Mechanics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02_modern_portfolio_theory.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Modern Portfolio Theory</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09_univariate_portfolio_sort.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Univariate Portfolio Sorts</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08_beta_estimation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Beta Estimation</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Asset Pricing Models and Cross-Sectional Tests</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_capm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">The Capital Asset Pricing Model</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12_fama_french.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Fama-French Factors</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13_momentum.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Momentum Strategies</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14_fama_macbeth.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Fama-MacBeth Regressions</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Firm Fundamentals, Valuation, and Corporate Signals</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04_financial_statement_analysis.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Financial Statement Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./25_pe_ratio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">P/E Ratio</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./26_valuation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Firm Valuation, Financial Distress, and Company Maturity</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05_discounted_cash_flow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Discounted Cash Flow Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./18_sue.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Standardized Earnings Surprises (SUE)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./19_divop.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Measuring Divergence of Investor Opinion</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Ownership, Market Frictions, and International Exposure</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./30_institutional_ownership.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Institutional Ownership Analytics in Vietnam</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./31_institutional_trade_flow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Institutional Trades, Flows, and Turnover Ratios</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./32_return_gaps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Return Gap: Measuring Unobserved Actions of Fund Managers</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17_event_studies.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Event Studies in Finance</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Advanced Data, Research Design, and Frontiers</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./99_conclusion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Conclusion</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#from-market-prices-to-fundamental-value" id="toc-from-market-prices-to-fundamental-value" class="nav-link active" data-scroll-target="#from-market-prices-to-fundamental-value"><span class="header-section-number">13.1</span> From Market Prices to Fundamental Value</a></li>
  <li><a href="#the-three-financial-statements" id="toc-the-three-financial-statements" class="nav-link" data-scroll-target="#the-three-financial-statements"><span class="header-section-number">13.2</span> The Three Financial Statements</a>
  <ul class="collapse">
  <li><a href="#the-balance-sheet-a-snapshot-of-financial-position" id="toc-the-balance-sheet-a-snapshot-of-financial-position" class="nav-link" data-scroll-target="#the-balance-sheet-a-snapshot-of-financial-position"><span class="header-section-number">13.2.1</span> The Balance Sheet: A Snapshot of Financial Position</a></li>
  <li><a href="#the-income-statement-performance-over-time" id="toc-the-income-statement-performance-over-time" class="nav-link" data-scroll-target="#the-income-statement-performance-over-time"><span class="header-section-number">13.2.2</span> The Income Statement: Performance Over Time</a></li>
  <li><a href="#the-cash-flow-statement-following-the-money" id="toc-the-cash-flow-statement-following-the-money" class="nav-link" data-scroll-target="#the-cash-flow-statement-following-the-money"><span class="header-section-number">13.2.3</span> The Cash Flow Statement: Following the Money</a></li>
  <li><a href="#illustrating-with-fpts-financial-statements" id="toc-illustrating-with-fpts-financial-statements" class="nav-link" data-scroll-target="#illustrating-with-fpts-financial-statements"><span class="header-section-number">13.2.4</span> Illustrating with FPT’s Financial Statements</a></li>
  </ul></li>
  <li><a href="#loading-financial-statement-data" id="toc-loading-financial-statement-data" class="nav-link" data-scroll-target="#loading-financial-statement-data"><span class="header-section-number">13.3</span> Loading Financial Statement Data</a></li>
  <li><a href="#liquidity-ratios-can-the-company-pay-its-bills" id="toc-liquidity-ratios-can-the-company-pay-its-bills" class="nav-link" data-scroll-target="#liquidity-ratios-can-the-company-pay-its-bills"><span class="header-section-number">13.4</span> Liquidity Ratios: Can the Company Pay Its Bills?</a>
  <ul class="collapse">
  <li><a href="#the-current-ratio" id="toc-the-current-ratio" class="nav-link" data-scroll-target="#the-current-ratio"><span class="header-section-number">13.4.1</span> The Current Ratio</a></li>
  <li><a href="#the-quick-ratio" id="toc-the-quick-ratio" class="nav-link" data-scroll-target="#the-quick-ratio"><span class="header-section-number">13.4.2</span> The Quick Ratio</a></li>
  <li><a href="#the-cash-ratio" id="toc-the-cash-ratio" class="nav-link" data-scroll-target="#the-cash-ratio"><span class="header-section-number">13.4.3</span> The Cash Ratio</a></li>
  <li><a href="#calculating-liquidity-ratios" id="toc-calculating-liquidity-ratios" class="nav-link" data-scroll-target="#calculating-liquidity-ratios"><span class="header-section-number">13.4.4</span> Calculating Liquidity Ratios</a></li>
  <li><a href="#cross-sectional-comparison-of-liquidity" id="toc-cross-sectional-comparison-of-liquidity" class="nav-link" data-scroll-target="#cross-sectional-comparison-of-liquidity"><span class="header-section-number">13.4.5</span> Cross-Sectional Comparison of Liquidity</a></li>
  </ul></li>
  <li><a href="#leverage-ratios-how-is-the-company-financed" id="toc-leverage-ratios-how-is-the-company-financed" class="nav-link" data-scroll-target="#leverage-ratios-how-is-the-company-financed"><span class="header-section-number">13.5</span> Leverage Ratios: How Is the Company Financed?</a>
  <ul class="collapse">
  <li><a href="#why-capital-structure-matters" id="toc-why-capital-structure-matters" class="nav-link" data-scroll-target="#why-capital-structure-matters"><span class="header-section-number">13.5.1</span> Why Capital Structure Matters</a></li>
  <li><a href="#debt-to-equity-ratio" id="toc-debt-to-equity-ratio" class="nav-link" data-scroll-target="#debt-to-equity-ratio"><span class="header-section-number">13.5.2</span> Debt-to-Equity Ratio</a></li>
  <li><a href="#debt-to-asset-ratio" id="toc-debt-to-asset-ratio" class="nav-link" data-scroll-target="#debt-to-asset-ratio"><span class="header-section-number">13.5.3</span> Debt-to-Asset Ratio</a></li>
  <li><a href="#interest-coverage-ratio" id="toc-interest-coverage-ratio" class="nav-link" data-scroll-target="#interest-coverage-ratio"><span class="header-section-number">13.5.4</span> Interest Coverage Ratio</a></li>
  <li><a href="#calculating-leverage-ratios" id="toc-calculating-leverage-ratios" class="nav-link" data-scroll-target="#calculating-leverage-ratios"><span class="header-section-number">13.5.5</span> Calculating Leverage Ratios</a></li>
  <li><a href="#leverage-trends-over-time" id="toc-leverage-trends-over-time" class="nav-link" data-scroll-target="#leverage-trends-over-time"><span class="header-section-number">13.5.6</span> Leverage Trends Over Time</a></li>
  <li><a href="#cross-sectional-leverage-comparison" id="toc-cross-sectional-leverage-comparison" class="nav-link" data-scroll-target="#cross-sectional-leverage-comparison"><span class="header-section-number">13.5.7</span> Cross-Sectional Leverage Comparison</a></li>
  <li><a href="#the-leverage-coverage-trade-off" id="toc-the-leverage-coverage-trade-off" class="nav-link" data-scroll-target="#the-leverage-coverage-trade-off"><span class="header-section-number">13.5.8</span> The Leverage-Coverage Trade-off</a></li>
  </ul></li>
  <li><a href="#efficiency-ratios-how-well-are-assets-managed" id="toc-efficiency-ratios-how-well-are-assets-managed" class="nav-link" data-scroll-target="#efficiency-ratios-how-well-are-assets-managed"><span class="header-section-number">13.6</span> Efficiency Ratios: How Well Are Assets Managed?</a>
  <ul class="collapse">
  <li><a href="#asset-turnover" id="toc-asset-turnover" class="nav-link" data-scroll-target="#asset-turnover"><span class="header-section-number">13.6.1</span> Asset Turnover</a></li>
  <li><a href="#inventory-turnover" id="toc-inventory-turnover" class="nav-link" data-scroll-target="#inventory-turnover"><span class="header-section-number">13.6.2</span> Inventory Turnover</a></li>
  <li><a href="#receivables-turnover" id="toc-receivables-turnover" class="nav-link" data-scroll-target="#receivables-turnover"><span class="header-section-number">13.6.3</span> Receivables Turnover</a></li>
  <li><a href="#calculating-efficiency-ratios" id="toc-calculating-efficiency-ratios" class="nav-link" data-scroll-target="#calculating-efficiency-ratios"><span class="header-section-number">13.6.4</span> Calculating Efficiency Ratios</a></li>
  </ul></li>
  <li><a href="#profitability-ratios-is-the-company-making-money" id="toc-profitability-ratios-is-the-company-making-money" class="nav-link" data-scroll-target="#profitability-ratios-is-the-company-making-money"><span class="header-section-number">13.7</span> Profitability Ratios: Is the Company Making Money?</a>
  <ul class="collapse">
  <li><a href="#gross-margin" id="toc-gross-margin" class="nav-link" data-scroll-target="#gross-margin"><span class="header-section-number">13.7.1</span> Gross Margin</a></li>
  <li><a href="#profit-margin" id="toc-profit-margin" class="nav-link" data-scroll-target="#profit-margin"><span class="header-section-number">13.7.2</span> Profit Margin</a></li>
  <li><a href="#return-on-equity-roe" id="toc-return-on-equity-roe" class="nav-link" data-scroll-target="#return-on-equity-roe"><span class="header-section-number">13.7.3</span> Return on Equity (ROE)</a></li>
  <li><a href="#the-dupont-decomposition" id="toc-the-dupont-decomposition" class="nav-link" data-scroll-target="#the-dupont-decomposition"><span class="header-section-number">13.7.4</span> The DuPont Decomposition</a></li>
  <li><a href="#calculating-profitability-ratios" id="toc-calculating-profitability-ratios" class="nav-link" data-scroll-target="#calculating-profitability-ratios"><span class="header-section-number">13.7.5</span> Calculating Profitability Ratios</a></li>
  <li><a href="#gross-margin-trends" id="toc-gross-margin-trends" class="nav-link" data-scroll-target="#gross-margin-trends"><span class="header-section-number">13.7.6</span> Gross Margin Trends</a></li>
  <li><a href="#from-gross-to-net-where-do-profits-go" id="toc-from-gross-to-net-where-do-profits-go" class="nav-link" data-scroll-target="#from-gross-to-net-where-do-profits-go"><span class="header-section-number">13.7.7</span> From Gross to Net: Where Do Profits Go?</a></li>
  </ul></li>
  <li><a href="#combining-financial-ratios-a-holistic-view" id="toc-combining-financial-ratios-a-holistic-view" class="nav-link" data-scroll-target="#combining-financial-ratios-a-holistic-view"><span class="header-section-number">13.8</span> Combining Financial Ratios: A Holistic View</a>
  <ul class="collapse">
  <li><a href="#ranking-companies-across-categories" id="toc-ranking-companies-across-categories" class="nav-link" data-scroll-target="#ranking-companies-across-categories"><span class="header-section-number">13.8.1</span> Ranking Companies Across Categories</a></li>
  </ul></li>
  <li><a href="#financial-ratios-in-asset-pricing" id="toc-financial-ratios-in-asset-pricing" class="nav-link" data-scroll-target="#financial-ratios-in-asset-pricing"><span class="header-section-number">13.9</span> Financial Ratios in Asset Pricing</a>
  <ul class="collapse">
  <li><a href="#the-fama-french-factors" id="toc-the-fama-french-factors" class="nav-link" data-scroll-target="#the-fama-french-factors"><span class="header-section-number">13.9.1</span> The Fama-French Factors</a></li>
  <li><a href="#calculating-fama-french-variables" id="toc-calculating-fama-french-variables" class="nav-link" data-scroll-target="#calculating-fama-french-variables"><span class="header-section-number">13.9.2</span> Calculating Fama-French Variables</a></li>
  <li><a href="#fama-french-factor-rankings" id="toc-fama-french-factor-rankings" class="nav-link" data-scroll-target="#fama-french-factor-rankings"><span class="header-section-number">13.9.3</span> Fama-French Factor Rankings</a></li>
  </ul></li>
  <li><a href="#limitations-and-practical-considerations" id="toc-limitations-and-practical-considerations" class="nav-link" data-scroll-target="#limitations-and-practical-considerations"><span class="header-section-number">13.10</span> Limitations and Practical Considerations</a>
  <ul class="collapse">
  <li><a href="#accounting-discretion" id="toc-accounting-discretion" class="nav-link" data-scroll-target="#accounting-discretion"><span class="header-section-number">13.10.1</span> Accounting Discretion</a></li>
  <li><a href="#industry-comparability" id="toc-industry-comparability" class="nav-link" data-scroll-target="#industry-comparability"><span class="header-section-number">13.10.2</span> Industry Comparability</a></li>
  <li><a href="#point-in-time-limitations" id="toc-point-in-time-limitations" class="nav-link" data-scroll-target="#point-in-time-limitations"><span class="header-section-number">13.10.3</span> Point-in-Time Limitations</a></li>
  <li><a href="#backward-looking-nature" id="toc-backward-looking-nature" class="nav-link" data-scroll-target="#backward-looking-nature"><span class="header-section-number">13.10.4</span> Backward-Looking Nature</a></li>
  <li><a href="#quality-of-earnings" id="toc-quality-of-earnings" class="nav-link" data-scroll-target="#quality-of-earnings"><span class="header-section-number">13.10.5</span> Quality of Earnings</a></li>
  </ul></li>
  <li><a href="#key-takeaways" id="toc-key-takeaways" class="nav-link" data-scroll-target="#key-takeaways"><span class="header-section-number">13.11</span> Key Takeaways</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/mikenguyen13/tidy_finance_vn/edit/main/04_financial_statement_analysis.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/mikenguyen13/tidy_finance_vn/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">


<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./04_financial_statement_analysis.html">Firm Fundamentals, Valuation, and Corporate Signals</a></li><li class="breadcrumb-item"><a href="./04_financial_statement_analysis.html"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Financial Statement Analysis</span></a></li></ol></nav>
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Financial Statement Analysis</span></h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="from-market-prices-to-fundamental-value" class="level2" data-number="13.1">
<h2 data-number="13.1" class="anchored" data-anchor-id="from-market-prices-to-fundamental-value"><span class="header-section-number">13.1</span> From Market Prices to Fundamental Value</h2>
<p>The previous chapters focused on how financial markets price assets in equilibrium. The <a href="./03_capm.html">Capital Asset Pricing Model</a> showed that expected returns depend on systematic risk exposure, while <a href="./02_modern_portfolio_theory.html">Modern Portfolio Theory</a> demonstrated how to construct efficient portfolios. But these frameworks take expected returns and risk as given, they don’t explain where these expectations come from.</p>
<p>Financial statement analysis addresses this gap. By examining a company’s accounting records, investors can form independent assessments of firm value, identify mispriced securities, and understand the economic forces driving business performance. Financial statements provide the primary source of standardized information about a company’s operations, financial position, and cash generation. Their legal requirements and standardized formats make them particularly valuable. Every publicly traded company must file them, creating a level playing field for analysis.</p>
<p>This chapter introduces the three primary financial statements: the balance sheet, income statement, and cash flow statement. We then demonstrate how to transform raw accounting data into meaningful financial ratios that facilitate comparison across companies and over time. These ratios serve multiple purposes: they enable investors to benchmark companies against peers, help creditors assess default risk, and provide inputs for asset pricing models like the Fama-French factors we will encounter in later chapters.</p>
<p>Our analysis combines theoretical frameworks with practical implementation using Vietnamese market data. By the end of this chapter, you will understand how to access financial statements, calculate key ratios across multiple categories, and interpret these metrics in context.</p>
<div id="b45fbf27" class="cell" data-execution_count="2">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> plotnine <span class="im">import</span> <span class="op">*</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> mizani.formatters <span class="im">import</span> percent_format</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> adjustText <span class="im">import</span> adjust_text</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="the-three-financial-statements" class="level2" data-number="13.2">
<h2 data-number="13.2" class="anchored" data-anchor-id="the-three-financial-statements"><span class="header-section-number">13.2</span> The Three Financial Statements</h2>
<p>Before diving into ratios and analysis, we need to understand the three interconnected statements that form the foundation of financial reporting. Each statement answers a different question about the company, and together they provide a comprehensive picture of financial health.</p>
<section id="the-balance-sheet-a-snapshot-of-financial-position" class="level3" data-number="13.2.1">
<h3 data-number="13.2.1" class="anchored" data-anchor-id="the-balance-sheet-a-snapshot-of-financial-position"><span class="header-section-number">13.2.1</span> The Balance Sheet: A Snapshot of Financial Position</h3>
<p>The balance sheet captures a company’s financial position at a specific moment in time, think of it as a photograph rather than a movie. It lists everything the company owns (assets), everything it owes (liabilities), and the residual claim belonging to shareholders (equity). These three components are linked by the fundamental accounting equation:</p>
<p><span class="math display">\[
\text{Assets} = \text{Liabilities} + \text{Equity}
\]</span></p>
<p>This equation is not merely a definition, it reflects a core economic principle. A company’s resources (assets) must be financed from somewhere: either borrowed from creditors (liabilities) or contributed by owners (equity). Every transaction affects both sides equally, maintaining the balance.</p>
<p><strong>Assets</strong> represent resources the company controls that are expected to generate future economic benefits:</p>
<ul>
<li><strong>Current assets</strong> can be converted to cash within one year: cash and equivalents, short-term investments, accounts receivable (money owed by customers), and inventory (raw materials, work-in-progress, and finished goods)</li>
<li><strong>Non-current assets</strong> support operations beyond one year: property, plant, and equipment (PP&amp;E), long-term investments, and intangible assets like patents, trademarks, and goodwill</li>
</ul>
<p><strong>Liabilities</strong> encompass obligations to external parties:</p>
<ul>
<li><strong>Current liabilities</strong> come due within one year: accounts payable (money owed to suppliers), short-term debt, accrued expenses, and the current portion of long-term debt</li>
<li><strong>Non-current liabilities</strong> extend beyond one year: long-term debt, bonds payable, pension obligations, and deferred tax liabilities</li>
</ul>
<p><strong>Shareholders’ equity</strong> represents the owners’ residual claim:</p>
<ul>
<li><strong>Common stock</strong> and additional paid-in capital from share issuance</li>
<li><strong>Retained earnings</strong> (i.e., accumulated profits reinvested rather than distributed as dividends)</li>
<li><strong>Treasury stock</strong>: shares repurchased by the company</li>
</ul>
<p>Understanding these categories is essential for ratio analysis. Current assets and liabilities determine short-term liquidity, while the mix of debt and equity reveals capital structure choices.</p>
</section>
<section id="the-income-statement-performance-over-time" class="level3" data-number="13.2.2">
<h3 data-number="13.2.2" class="anchored" data-anchor-id="the-income-statement-performance-over-time"><span class="header-section-number">13.2.2</span> The Income Statement: Performance Over Time</h3>
<p>While the balance sheet provides a snapshot, the income statement (also called the profit and loss statement, or P&amp;L) measures financial performance over a period (e.g., a quarter or year). It follows a hierarchical structure that progressively captures different levels of profitability:</p>
<p><span class="math display">\[
\text{Revenue} - \text{COGS} = \text{Gross Profit}
\]</span></p>
<p><span class="math display">\[
\text{Gross Profit} - \text{Operating Expenses} = \text{Operating Income (EBIT)}
\]</span></p>
<p><span class="math display">\[
\text{EBIT} - \text{Interest} - \text{Taxes} = \text{Net Income}
\]</span></p>
<p>Each line reveals something different about the business:</p>
<ul>
<li><strong>Revenue (Sales)</strong>: Total income from goods or services sold (i.e., the “top line”)</li>
<li><strong>Cost of Goods Sold (COGS)</strong>: Direct costs of producing what was sold (materials, direct labor, manufacturing overhead)</li>
<li><strong>Gross Profit</strong>: Revenue minus COGS, measuring basic profitability from core operations</li>
<li><strong>Operating Expenses</strong>: Costs of running the business beyond production (selling, general &amp; administrative expenses, research &amp; development)</li>
<li><strong>Operating Income (EBIT)</strong>: Earnings Before Interest and Taxes, measuring profitability from operations before financing decisions and taxes</li>
<li><strong>Interest Expense</strong>: The cost of debt financing</li>
<li><strong>Net Income</strong>: The “bottom line” (i.e., total profit after all expenses)</li>
</ul>
<p>The income statement’s hierarchical structure allows analysts to identify where profitability problems originate. A company with strong gross margins but weak net income might have bloated overhead costs. One with weak gross margins faces fundamental pricing or production challenges.</p>
</section>
<section id="the-cash-flow-statement-following-the-money" class="level3" data-number="13.2.3">
<h3 data-number="13.2.3" class="anchored" data-anchor-id="the-cash-flow-statement-following-the-money"><span class="header-section-number">13.2.3</span> The Cash Flow Statement: Following the Money</h3>
<p>The cash flow statement bridges a critical gap: profitable companies can run out of cash, and unprofitable companies can generate positive cash flow. This happens because accrual accounting (used in the income statement) recognizes revenue when earned and expenses when incurred, not when cash changes hands.</p>
<p>The cash flow statement tracks actual cash movements, divided into three categories:</p>
<ul>
<li><strong>Operating activities</strong>: Cash generated from core business operations. Starts with net income, then adjusts for non-cash items (depreciation, changes in working capital)</li>
<li><strong>Investing activities</strong>: Cash spent on or received from long-term investments (e.g., purchasing equipment, acquiring businesses, selling assets)</li>
<li><strong>Financing activities</strong>: Cash flows from capital structure decisions (e.g., issuing stock, borrowing, repaying debt, paying dividends, buying back shares)</li>
</ul>
<p>A company can show strong net income while burning cash if it’s building inventory, extending generous credit terms, or making large capital expenditures. Conversely, a company reporting losses might generate positive operating cash flow by collecting receivables faster than it pays suppliers.</p>
</section>
<section id="illustrating-with-fpts-financial-statements" class="level3" data-number="13.2.4">
<h3 data-number="13.2.4" class="anchored" data-anchor-id="illustrating-with-fpts-financial-statements"><span class="header-section-number">13.2.4</span> Illustrating with FPT’s Financial Statements</h3>
<p>To see these concepts in practice, let’s examine FPT Corporation’s 2023 financial statements. FPT is one of Vietnam’s largest technology companies, providing IT services, telecommunications, and education.</p>
<div id="42783d86" class="cell" data-execution_count="3">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Placeholder for FPT balance sheet visualization</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co"># In practice, this would display the actual PDF or cleaned data</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co"># from DataCore's acquisition pipeline</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Example structure of what the balance sheet data looks like:</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Assets: Current assets (cash, receivables, inventory) + Non-current assets (PP&amp;E, intangibles)</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Liabilities: Current liabilities (payables, short-term debt) + Non-current liabilities (long-term debt)</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Equity: Common stock + Retained earnings</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>The balance sheet demonstrates the fundamental accounting equation in action. FPT’s assets (e.g., spanning cash, receivables, technology infrastructure, and intangible assets like software) exactly equal the sum of its liabilities and equity.</p>
<div id="4ac3358c" class="cell" data-execution_count="4">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Placeholder for FPT income statement visualization</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Shows the progression from revenue through various profit measures to net income</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>FPT’s income statement reveals how the company transforms revenue into profit. The progression from gross profit through operating income to net income shows the impact of operating expenses, interest costs, and taxes.</p>
<div id="93fd6c9a" class="cell" data-execution_count="5">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Placeholder for FPT cash flow statement visualization</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Reconciles net income with actual cash generation</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>The cash flow statement shows how FPT’s reported profits translate into actual cash. Differences between net income and operating cash flow reveal the impact of working capital management and non-cash expenses.</p>
</section>
</section>
<section id="loading-financial-statement-data" class="level2" data-number="13.3">
<h2 data-number="13.3" class="anchored" data-anchor-id="loading-financial-statement-data"><span class="header-section-number">13.3</span> Loading Financial Statement Data</h2>
<p>We now turn to systematic analysis across multiple companies. We load financial statement data for the VN30 index constituents (i.e., the 30 largest and most liquid stocks on Vietnam’s Ho Chi Minh Stock Exchange).</p>
<div id="59654b31" class="cell" data-execution_count="6">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sqlite3</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>tidy_finance <span class="op">=</span> sqlite3.<span class="ex">connect</span>(database<span class="op">=</span><span class="st">"data/tidy_finance_python.sqlite"</span>)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>comp_vn <span class="op">=</span> pd.read_sql_query(</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    sql<span class="op">=</span><span class="st">"SELECT * FROM comp_vn"</span>,</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    con<span class="op">=</span>tidy_finance,</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    parse_dates<span class="op">=</span>{<span class="st">"datadate"</span>}</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>comp_vn.head(<span class="dv">3</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">symbol</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">total_current_asset</th>
<th data-quarto-table-cell-role="th">ca_fin</th>
<th data-quarto-table-cell-role="th">ca_cce</th>
<th data-quarto-table-cell-role="th">ca_cash</th>
<th data-quarto-table-cell-role="th">ca_cash_inbank</th>
<th data-quarto-table-cell-role="th">ca_cash_attransit</th>
<th data-quarto-table-cell-role="th">ca_cash_equivalent</th>
<th data-quarto-table-cell-role="th">ca_fin_invest</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">xsga</th>
<th data-quarto-table-cell-role="th">xint</th>
<th data-quarto-table-cell-role="th">oancf</th>
<th data-quarto-table-cell-role="th">capx</th>
<th data-quarto-table-cell-role="th">be</th>
<th data-quarto-table-cell-role="th">op</th>
<th data-quarto-table-cell-role="th">at_lag</th>
<th data-quarto-table-cell-role="th">inv</th>
<th data-quarto-table-cell-role="th">total_debt</th>
<th data-quarto-table-cell-role="th">selling_general_and_administrative_expenses</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>AGF</td>
<td>1998</td>
<td>8.845141e+10</td>
<td>None</td>
<td>5.469709e+09</td>
<td>0.000000e+00</td>
<td>None</td>
<td>None</td>
<td>0.0</td>
<td>1.110705e+10</td>
<td>...</td>
<td>1.199765e+10</td>
<td>0.0</td>
<td>NaN</td>
<td>NaN</td>
<td>2.656020e+10</td>
<td>0.711195</td>
<td>NaN</td>
<td>NaN</td>
<td>0.000000e+00</td>
<td>1.990718e+10</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>BBC</td>
<td>1999</td>
<td>5.672574e+10</td>
<td>None</td>
<td>5.354939e+09</td>
<td>5.354939e+09</td>
<td>None</td>
<td>None</td>
<td>0.0</td>
<td>0.000000e+00</td>
<td>...</td>
<td>9.396468e+09</td>
<td>0.0</td>
<td>2.687635e+10</td>
<td>1.097031e+10</td>
<td>3.211410e+10</td>
<td>0.728193</td>
<td>NaN</td>
<td>NaN</td>
<td>1.505529e+09</td>
<td>2.387858e+10</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>AGF</td>
<td>1999</td>
<td>9.558392e+10</td>
<td>None</td>
<td>2.609276e+09</td>
<td>0.000000e+00</td>
<td>None</td>
<td>None</td>
<td>0.0</td>
<td>1.008298e+10</td>
<td>...</td>
<td>1.595913e+10</td>
<td>0.0</td>
<td>1.675607e+10</td>
<td>3.970966e+09</td>
<td>3.576596e+10</td>
<td>0.816972</td>
<td>1.068410e+11</td>
<td>0.090477</td>
<td>0.000000e+00</td>
<td>2.744458e+10</td>
</tr>
</tbody>
</table>

<p>3 rows × 333 columns</p>
</div>
</div>
</div>
<div id="a7b4a148" class="cell" data-execution_count="7">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>vn30_symbols <span class="op">=</span> [</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"ACB"</span>, <span class="st">"BCM"</span>, <span class="st">"BID"</span>, <span class="st">"BVH"</span>, <span class="st">"CTG"</span>, <span class="st">"FPT"</span>, <span class="st">"GAS"</span>, <span class="st">"GVR"</span>, <span class="st">"HDB"</span>, <span class="st">"HPG"</span>,</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"MBB"</span>, <span class="st">"MSN"</span>, <span class="st">"MWG"</span>, <span class="st">"PLX"</span>, <span class="st">"POW"</span>, <span class="st">"SAB"</span>, <span class="st">"SHB"</span>, <span class="st">"SSB"</span>, <span class="st">"STB"</span>, <span class="st">"TCB"</span>,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"TPB"</span>, <span class="st">"VCB"</span>, <span class="st">"VHM"</span>, <span class="st">"VIB"</span>, <span class="st">"VIC"</span>, <span class="st">"VJC"</span>, <span class="st">"VNM"</span>, <span class="st">"VPB"</span>, <span class="st">"VRE"</span>, <span class="st">"EIB"</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>comp_vn30 <span class="op">=</span> comp_vn[comp_vn[<span class="st">"symbol"</span>].isin(vn30_symbols)]</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>comp_vn30.head(<span class="dv">3</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">symbol</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">total_current_asset</th>
<th data-quarto-table-cell-role="th">ca_fin</th>
<th data-quarto-table-cell-role="th">ca_cce</th>
<th data-quarto-table-cell-role="th">ca_cash</th>
<th data-quarto-table-cell-role="th">ca_cash_inbank</th>
<th data-quarto-table-cell-role="th">ca_cash_attransit</th>
<th data-quarto-table-cell-role="th">ca_cash_equivalent</th>
<th data-quarto-table-cell-role="th">ca_fin_invest</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">xsga</th>
<th data-quarto-table-cell-role="th">xint</th>
<th data-quarto-table-cell-role="th">oancf</th>
<th data-quarto-table-cell-role="th">capx</th>
<th data-quarto-table-cell-role="th">be</th>
<th data-quarto-table-cell-role="th">op</th>
<th data-quarto-table-cell-role="th">at_lag</th>
<th data-quarto-table-cell-role="th">inv</th>
<th data-quarto-table-cell-role="th">total_debt</th>
<th data-quarto-table-cell-role="th">selling_general_and_administrative_expenses</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">11</th>
<td>FPT</td>
<td>2002</td>
<td>5.098910e+11</td>
<td>None</td>
<td>1.027470e+11</td>
<td>0.000000e+00</td>
<td>None</td>
<td>None</td>
<td>0.0</td>
<td>0.0</td>
<td>...</td>
<td>4.178100e+10</td>
<td>9.008000e+09</td>
<td>3.203600e+10</td>
<td>2.202800e+10</td>
<td>3.125400e+10</td>
<td>3.293018</td>
<td>NaN</td>
<td>NaN</td>
<td>0.0</td>
<td>1.235850e+11</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">17</th>
<td>VNM</td>
<td>2003</td>
<td>2.101406e+12</td>
<td>None</td>
<td>6.925924e+11</td>
<td>6.925924e+11</td>
<td>None</td>
<td>None</td>
<td>0.0</td>
<td>0.0</td>
<td>...</td>
<td>9.089413e+10</td>
<td>1.698909e+10</td>
<td>NaN</td>
<td>NaN</td>
<td>1.560789e+12</td>
<td>0.663257</td>
<td>NaN</td>
<td>NaN</td>
<td>0.0</td>
<td>5.037799e+11</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">21</th>
<td>FPT</td>
<td>2003</td>
<td>9.171390e+11</td>
<td>None</td>
<td>7.995600e+10</td>
<td>0.000000e+00</td>
<td>None</td>
<td>None</td>
<td>0.0</td>
<td>0.0</td>
<td>...</td>
<td>8.584800e+10</td>
<td>1.286700e+10</td>
<td>-2.905420e+11</td>
<td>3.753300e+10</td>
<td>1.697000e+11</td>
<td>0.940218</td>
<td>5.504080e+11</td>
<td>0.779104</td>
<td>0.0</td>
<td>1.968430e+11</td>
</tr>
</tbody>
</table>

<p>3 rows × 333 columns</p>
</div>
</div>
</div>
<p>This dataset provides the foundation for calculating financial ratios and conducting cross-sectional comparisons. Each row contains balance sheet, income statement, and cash flow items for a company-year observation.</p>
</section>
<section id="liquidity-ratios-can-the-company-pay-its-bills" class="level2" data-number="13.4">
<h2 data-number="13.4" class="anchored" data-anchor-id="liquidity-ratios-can-the-company-pay-its-bills"><span class="header-section-number">13.4</span> Liquidity Ratios: Can the Company Pay Its Bills?</h2>
<p>Liquidity ratios assess a company’s ability to meet short-term obligations. These metrics matter most to creditors, suppliers, and employees who need assurance that the company can pay its bills. They’re calculated using balance sheet items, comparing liquid assets against near-term liabilities.</p>
<section id="the-current-ratio" class="level3" data-number="13.4.1">
<h3 data-number="13.4.1" class="anchored" data-anchor-id="the-current-ratio"><span class="header-section-number">13.4.1</span> The Current Ratio</h3>
<p>The most basic liquidity measure compares all current assets to current liabilities:</p>
<p><span class="math display">\[
\text{Current Ratio} = \frac{\text{Current Assets}}{\text{Current Liabilities}}
\]</span></p>
<p>A ratio above one indicates the company has enough current assets to cover obligations due within one year. However, the interpretation depends heavily on the composition of current assets. A company with current assets tied up in slow-moving inventory is less liquid than one holding cash.</p>
</section>
<section id="the-quick-ratio" class="level3" data-number="13.4.2">
<h3 data-number="13.4.2" class="anchored" data-anchor-id="the-quick-ratio"><span class="header-section-number">13.4.2</span> The Quick Ratio</h3>
<p>The quick ratio (or “acid test”) provides a more stringent measure by excluding inventory:</p>
<p><span class="math display">\[
\text{Quick Ratio} = \frac{\text{Current Assets} - \text{Inventory}}{\text{Current Liabilities}}
\]</span></p>
<p>Why exclude inventory? Inventory is typically the least liquid current asset. It must be sold (potentially at a discount) before generating cash. A company facing a liquidity crisis cannot easily convert raw materials or finished goods into immediate cash. The quick ratio answers: “Can we pay our bills without relying on inventory sales?”</p>
</section>
<section id="the-cash-ratio" class="level3" data-number="13.4.3">
<h3 data-number="13.4.3" class="anchored" data-anchor-id="the-cash-ratio"><span class="header-section-number">13.4.3</span> The Cash Ratio</h3>
<p>The most conservative liquidity measure focuses solely on the most liquid assets:</p>
<p><span class="math display">\[
\text{Cash Ratio} = \frac{\text{Cash and Cash Equivalents}}{\text{Current Liabilities}}
\]</span></p>
<p>While a ratio of one indicates robust liquidity, most companies maintain lower cash ratios to avoid holding excessive non-productive assets. Cash sitting in bank accounts could otherwise be invested in growth opportunities, returned to shareholders, or used to pay down costly debt.</p>
</section>
<section id="calculating-liquidity-ratios" class="level3" data-number="13.4.4">
<h3 data-number="13.4.4" class="anchored" data-anchor-id="calculating-liquidity-ratios"><span class="header-section-number">13.4.4</span> Calculating Liquidity Ratios</h3>
<p>Let’s compute these ratios for our VN30 sample:</p>
<div id="affff45c" class="cell" data-execution_count="8">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>balance_sheet_statements <span class="op">=</span> (comp_vn30</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    .assign(</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>        fiscal_year<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="st">"year"</span>].astype(<span class="bu">int</span>),</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Current Ratio: Current Assets / Current Liabilities</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>        current_ratio<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="st">"act"</span>] <span class="op">/</span> x[<span class="st">"lct"</span>],</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Quick Ratio: (Current Assets - Inventory) / Current Liabilities</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>        quick_ratio<span class="op">=</span><span class="kw">lambda</span> x: (x[<span class="st">"act"</span>] <span class="op">-</span> x[<span class="st">"inv"</span>]) <span class="op">/</span> x[<span class="st">"lct"</span>],</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Cash Ratio: Cash and Equivalents / Current Liabilities</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>        cash_ratio<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="st">"ca_cce"</span>] <span class="op">/</span> x[<span class="st">"lct"</span>],</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>        label<span class="op">=</span><span class="kw">lambda</span> x: np.where(</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>            x[<span class="st">"symbol"</span>].isin(vn30_symbols), x[<span class="st">"symbol"</span>], np.nan</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>balance_sheet_statements.head(<span class="dv">3</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">symbol</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">total_current_asset</th>
<th data-quarto-table-cell-role="th">ca_fin</th>
<th data-quarto-table-cell-role="th">ca_cce</th>
<th data-quarto-table-cell-role="th">ca_cash</th>
<th data-quarto-table-cell-role="th">ca_cash_inbank</th>
<th data-quarto-table-cell-role="th">ca_cash_attransit</th>
<th data-quarto-table-cell-role="th">ca_cash_equivalent</th>
<th data-quarto-table-cell-role="th">ca_fin_invest</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">op</th>
<th data-quarto-table-cell-role="th">at_lag</th>
<th data-quarto-table-cell-role="th">inv</th>
<th data-quarto-table-cell-role="th">total_debt</th>
<th data-quarto-table-cell-role="th">selling_general_and_administrative_expenses</th>
<th data-quarto-table-cell-role="th">fiscal_year</th>
<th data-quarto-table-cell-role="th">current_ratio</th>
<th data-quarto-table-cell-role="th">quick_ratio</th>
<th data-quarto-table-cell-role="th">cash_ratio</th>
<th data-quarto-table-cell-role="th">label</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">11</th>
<td>FPT</td>
<td>2002</td>
<td>5.098910e+11</td>
<td>None</td>
<td>1.027470e+11</td>
<td>0.000000e+00</td>
<td>None</td>
<td>None</td>
<td>0.0</td>
<td>0.0</td>
<td>...</td>
<td>3.293018</td>
<td>NaN</td>
<td>NaN</td>
<td>0.0</td>
<td>1.235850e+11</td>
<td>2002</td>
<td>1.211413</td>
<td>NaN</td>
<td>0.244109</td>
<td>FPT</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">17</th>
<td>VNM</td>
<td>2003</td>
<td>2.101406e+12</td>
<td>None</td>
<td>6.925924e+11</td>
<td>6.925924e+11</td>
<td>None</td>
<td>None</td>
<td>0.0</td>
<td>0.0</td>
<td>...</td>
<td>0.663257</td>
<td>NaN</td>
<td>NaN</td>
<td>0.0</td>
<td>5.037799e+11</td>
<td>2003</td>
<td>2.195772</td>
<td>NaN</td>
<td>0.723694</td>
<td>VNM</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">21</th>
<td>FPT</td>
<td>2003</td>
<td>9.171390e+11</td>
<td>None</td>
<td>7.995600e+10</td>
<td>0.000000e+00</td>
<td>None</td>
<td>None</td>
<td>0.0</td>
<td>0.0</td>
<td>...</td>
<td>0.940218</td>
<td>5.504080e+11</td>
<td>0.779104</td>
<td>0.0</td>
<td>1.968430e+11</td>
<td>2003</td>
<td>1.274633</td>
<td>1.274633</td>
<td>0.111122</td>
<td>FPT</td>
</tr>
</tbody>
</table>

<p>3 rows × 338 columns</p>
</div>
</div>
</div>
</section>
<section id="cross-sectional-comparison-of-liquidity" class="level3" data-number="13.4.5">
<h3 data-number="13.4.5" class="anchored" data-anchor-id="cross-sectional-comparison-of-liquidity"><span class="header-section-number">13.4.5</span> Cross-Sectional Comparison of Liquidity</h3>
<p><a href="#fig-409" class="quarto-xref">Figure&nbsp;<span>13.1</span></a> compares liquidity ratios across companies for the most recent fiscal year. This cross-sectional view reveals how different business models and industries maintain different liquidity profiles.</p>
<div id="cell-fig-409" class="cell" data-execution_count="9">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>liquidity_ratios <span class="op">=</span> (balance_sheet_statements</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    .query(<span class="st">"year == 2023 &amp; label.notna()"</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    .get([<span class="st">"symbol"</span>, <span class="st">"current_ratio"</span>, <span class="st">"quick_ratio"</span>, <span class="st">"cash_ratio"</span>])</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    .melt(id_vars<span class="op">=</span>[<span class="st">"symbol"</span>], var_name<span class="op">=</span><span class="st">"name"</span>, value_name<span class="op">=</span><span class="st">"value"</span>)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    .assign(</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="st">"name"</span>].<span class="bu">str</span>.replace(<span class="st">"_"</span>, <span class="st">" "</span>).<span class="bu">str</span>.title()</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>liquidity_ratios_figure <span class="op">=</span> (</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    ggplot(liquidity_ratios, aes(y<span class="op">=</span><span class="st">"value"</span>, x<span class="op">=</span><span class="st">"name"</span>, fill<span class="op">=</span><span class="st">"symbol"</span>))</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_col(position<span class="op">=</span><span class="st">"dodge"</span>)</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> coord_flip()</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> labs(</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="st">""</span>, y<span class="op">=</span><span class="st">"Ratio Value"</span>, fill<span class="op">=</span><span class="st">""</span>,</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="st">"Liquidity Ratios for VN30 Stocks (2023)"</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>liquidity_ratios_figure.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="fig-409" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Title: Liquidity ratios for VN30 stocks. The figure shows a grouped bar chart comparing current, quick, and cash ratios across companies.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-409-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="04_financial_statement_analysis_files/figure-html/fig-409-output-1.png" alt="Title: Liquidity ratios for VN30 stocks. The figure shows a grouped bar chart comparing current, quick, and cash ratios across companies." width="672" height="480" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-409-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;13.1: Liquidity ratios measure a company’s ability to meet short-term obligations. Higher values indicate greater liquidity, though excessively high ratios may suggest inefficient use of assets.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Several patterns emerge from this comparison. Banks and financial institutions typically show different liquidity profiles than industrial companies due to their unique business models. Companies with high inventory (retailers, manufacturers) often show larger gaps between current and quick ratios.</p>
</section>
</section>
<section id="leverage-ratios-how-is-the-company-financed" class="level2" data-number="13.5">
<h2 data-number="13.5" class="anchored" data-anchor-id="leverage-ratios-how-is-the-company-financed"><span class="header-section-number">13.5</span> Leverage Ratios: How Is the Company Financed?</h2>
<p>Leverage ratios examine a company’s capital structure (i.e., the mix of debt and equity financing). These metrics reveal financial risk and long-term solvency, helping investors understand how much of the company’s operations are funded by borrowed money.</p>
<section id="why-capital-structure-matters" class="level3" data-number="13.5.1">
<h3 data-number="13.5.1" class="anchored" data-anchor-id="why-capital-structure-matters"><span class="header-section-number">13.5.1</span> Why Capital Structure Matters</h3>
<p>A company’s financing choice involves fundamental trade-offs:</p>
<ul>
<li><strong>Debt</strong> offers tax advantages (interest is deductible) and doesn’t dilute ownership, but creates fixed obligations that must be met regardless of business performance</li>
<li><strong>Equity</strong> provides flexibility (no required payments) but dilutes existing shareholders and may be more expensive than debt</li>
</ul>
<p>Companies with high leverage amplify both gains and losses. In good times, shareholders capture more upside because profits aren’t shared with additional equity holders. In bad times, fixed interest payments can push the company toward distress. This is why beta (systematic risk) tends to increase with leverage.</p>
</section>
<section id="debt-to-equity-ratio" class="level3" data-number="13.5.2">
<h3 data-number="13.5.2" class="anchored" data-anchor-id="debt-to-equity-ratio"><span class="header-section-number">13.5.2</span> Debt-to-Equity Ratio</h3>
<p>This ratio indicates how much debt financing the company uses relative to shareholder investment:</p>
<p><span class="math display">\[
\text{Debt-to-Equity} = \frac{\text{Total Debt}}{\text{Total Equity}}
\]</span></p>
<p>A ratio of 1.0 means equal parts debt and equity financing. Higher ratios indicate more aggressive use of leverage, which can enhance returns in good times but increases bankruptcy risk.</p>
</section>
<section id="debt-to-asset-ratio" class="level3" data-number="13.5.3">
<h3 data-number="13.5.3" class="anchored" data-anchor-id="debt-to-asset-ratio"><span class="header-section-number">13.5.3</span> Debt-to-Asset Ratio</h3>
<p>This ratio shows what percentage of assets are financed through debt:</p>
<p><span class="math display">\[
\text{Debt-to-Asset} = \frac{\text{Total Debt}}{\text{Total Assets}}
\]</span></p>
<p>A ratio of 0.5 means half the company’s assets are debt-financed. This metric is bounded between 0 and 1 (assuming positive equity), making it easier to compare across companies than the debt-to-equity ratio.</p>
</section>
<section id="interest-coverage-ratio" class="level3" data-number="13.5.4">
<h3 data-number="13.5.4" class="anchored" data-anchor-id="interest-coverage-ratio"><span class="header-section-number">13.5.4</span> Interest Coverage Ratio</h3>
<p>While the above ratios measure leverage levels, interest coverage assesses the ability to service that debt:</p>
<p><span class="math display">\[
\text{Interest Coverage} = \frac{\text{EBIT}}{\text{Interest Expense}}
\]</span></p>
<p>This ratio answers: “How many times over can current operating profits cover interest obligations?” A ratio below 1.0 means operating income doesn’t cover interest payments, which is a dangerous position. Ratios above 3-5 generally indicate comfortable coverage.</p>
</section>
<section id="calculating-leverage-ratios" class="level3" data-number="13.5.5">
<h3 data-number="13.5.5" class="anchored" data-anchor-id="calculating-leverage-ratios"><span class="header-section-number">13.5.5</span> Calculating Leverage Ratios</h3>
<div id="1c0bfdc9" class="cell" data-execution_count="10">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>balance_sheet_statements <span class="op">=</span> balance_sheet_statements.assign(</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    debt_to_equity<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="st">"total_debt"</span>] <span class="op">/</span> x[<span class="st">"total_equity"</span>],</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    debt_to_asset<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="st">"total_debt"</span>] <span class="op">/</span> x[<span class="st">"at"</span>]</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>income_statements <span class="op">=</span> (comp_vn30</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    .assign(</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>        year<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="st">"year"</span>].astype(<span class="bu">int</span>),</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Handle zero interest expense to avoid infinity</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>        interest_coverage<span class="op">=</span><span class="kw">lambda</span> x: np.where(</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>            x[<span class="st">"cfo_interest_expense"</span>] <span class="op">&gt;</span> <span class="dv">0</span>,</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>            x[<span class="st">"is_net_business_profit"</span>] <span class="op">/</span> x[<span class="st">"cfo_interest_expense"</span>],</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>            np.nan</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>        label<span class="op">=</span><span class="kw">lambda</span> x: np.where(</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>            x[<span class="st">"symbol"</span>].isin(vn30_symbols), x[<span class="st">"symbol"</span>], np.nan</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="leverage-trends-over-time" class="level3" data-number="13.5.6">
<h3 data-number="13.5.6" class="anchored" data-anchor-id="leverage-trends-over-time"><span class="header-section-number">13.5.6</span> Leverage Trends Over Time</h3>
<p><a href="#fig-410" class="quarto-xref">Figure&nbsp;<span>13.2</span></a> tracks how debt-to-asset ratios have evolved over time. Time-series analysis reveals whether companies are becoming more or less leveraged.</p>
<div id="cell-fig-410" class="cell" data-execution_count="11">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>debt_to_asset <span class="op">=</span> balance_sheet_statements.query(<span class="st">"symbol in @vn30_symbols"</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>debt_to_asset_figure <span class="op">=</span> (</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    ggplot(debt_to_asset, aes(x<span class="op">=</span><span class="st">"year"</span>, y<span class="op">=</span><span class="st">"debt_to_asset"</span>, color<span class="op">=</span><span class="st">"symbol"</span>))</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_line(size<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> scale_y_continuous(labels<span class="op">=</span>percent_format())</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> labs(</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="st">""</span>, y<span class="op">=</span><span class="st">"Debt-to-Asset Ratio"</span>, color<span class="op">=</span><span class="st">""</span>,</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="st">"Debt-to-Asset Ratios of VN30 Stocks Over Time"</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>debt_to_asset_figure.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="fig-410" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Title: Debt-to-asset ratios of VN30 stocks over time. The figure shows a line chart with years on the horizontal axis and debt-to-asset ratios on the vertical axis.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-410-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="04_financial_statement_analysis_files/figure-html/fig-410-output-1.png" alt="Title: Debt-to-asset ratios of VN30 stocks over time. The figure shows a line chart with years on the horizontal axis and debt-to-asset ratios on the vertical axis." width="672" height="480" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-410-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;13.2: Debt-to-asset ratios show the proportion of assets financed by debt. Changes over time reflect evolving capital structure strategies and market conditions.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="cross-sectional-leverage-comparison" class="level3" data-number="13.5.7">
<h3 data-number="13.5.7" class="anchored" data-anchor-id="cross-sectional-leverage-comparison"><span class="header-section-number">13.5.7</span> Cross-Sectional Leverage Comparison</h3>
<p><a href="#fig-411" class="quarto-xref">Figure&nbsp;<span>13.3</span></a> provides a snapshot of leverage across all VN30 constituents for the most recent year.</p>
<div id="cell-fig-411" class="cell" data-execution_count="12">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>debt_to_asset_comparison <span class="op">=</span> balance_sheet_statements.query(<span class="st">"year == 2023"</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>debt_to_asset_comparison[<span class="st">"symbol"</span>] <span class="op">=</span> pd.Categorical(</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    debt_to_asset_comparison[<span class="st">"symbol"</span>],</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    categories<span class="op">=</span>debt_to_asset_comparison.sort_values(<span class="st">"debt_to_asset"</span>)[<span class="st">"symbol"</span>],</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    ordered<span class="op">=</span><span class="va">True</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>debt_to_asset_comparison_figure <span class="op">=</span> (</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>    ggplot(</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>        debt_to_asset_comparison,</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>        aes(y<span class="op">=</span><span class="st">"debt_to_asset"</span>, x<span class="op">=</span><span class="st">"symbol"</span>, fill<span class="op">=</span><span class="st">"label"</span>)</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_col()</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> coord_flip()</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> scale_y_continuous(labels<span class="op">=</span>percent_format())</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> labs(</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="st">""</span>, y<span class="op">=</span><span class="st">"Debt-to-Asset Ratio"</span>, fill<span class="op">=</span><span class="st">""</span>,</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="st">"Debt-to-Asset Ratios of VN30 Stocks (2023)"</span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> theme(legend_position<span class="op">=</span><span class="st">"none"</span>)</span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>debt_to_asset_comparison_figure.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="fig-411" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Title: Debt-to-asset ratios of VN30 stocks in 2023. The figure shows a horizontal bar chart with companies sorted by their debt-to-asset ratio.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-411-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="04_financial_statement_analysis_files/figure-html/fig-411-output-1.png" alt="Title: Debt-to-asset ratios of VN30 stocks in 2023. The figure shows a horizontal bar chart with companies sorted by their debt-to-asset ratio." width="672" height="480" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-411-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;13.3: Cross-sectional comparison of debt-to-asset ratios reveals industry patterns and company-specific financing strategies.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="the-leverage-coverage-trade-off" class="level3" data-number="13.5.8">
<h3 data-number="13.5.8" class="anchored" data-anchor-id="the-leverage-coverage-trade-off"><span class="header-section-number">13.5.8</span> The Leverage-Coverage Trade-off</h3>
<p><a href="#fig-412" class="quarto-xref">Figure&nbsp;<span>13.4</span></a> examines the relationship between leverage levels and debt-servicing ability. Companies with higher debt loads should ideally have stronger interest coverage to maintain financial stability.</p>
<div id="cell-fig-412" class="cell" data-execution_count="13">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>interest_coverage <span class="op">=</span> (income_statements</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    .query(<span class="st">"year == 2023"</span>)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    .get([<span class="st">"symbol"</span>, <span class="st">"year"</span>, <span class="st">"interest_coverage"</span>])</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    .merge(balance_sheet_statements, on<span class="op">=</span>[<span class="st">"symbol"</span>, <span class="st">"year"</span>], how<span class="op">=</span><span class="st">"left"</span>)</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>interest_coverage_figure <span class="op">=</span> (</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    ggplot(</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>        interest_coverage,</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>        aes(x<span class="op">=</span><span class="st">"debt_to_asset"</span>, y<span class="op">=</span><span class="st">"interest_coverage"</span>, color<span class="op">=</span><span class="st">"label"</span>)</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_point(size<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_label(</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>        aes(label<span class="op">=</span><span class="st">"label"</span>),</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>        adjust_text<span class="op">=</span>{<span class="st">"arrowprops"</span>: {<span class="st">"arrowstyle"</span>: <span class="st">"-"</span>}}</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> scale_x_continuous(labels<span class="op">=</span>percent_format())</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> labs(</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="st">"Debt-to-Asset Ratio"</span>, y<span class="op">=</span><span class="st">"Interest Coverage Ratio"</span>,</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="st">"Leverage versus Interest Coverage for VN30 Stocks (2023)"</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> theme(legend_position<span class="op">=</span><span class="st">"none"</span>)</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>interest_coverage_figure.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="fig-412" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Title: Debt-to-asset ratios versus interest coverage. The figure shows a scatter plot with debt-to-asset on the horizontal axis and interest coverage on the vertical axis.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-412-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="04_financial_statement_analysis_files/figure-html/fig-412-output-1.png" alt="Title: Debt-to-asset ratios versus interest coverage. The figure shows a scatter plot with debt-to-asset on the horizontal axis and interest coverage on the vertical axis." width="672" height="480" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-412-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;13.4: The relationship between leverage and interest coverage reveals whether companies can comfortably service their debt. High leverage with low coverage indicates elevated financial risk.
</figcaption>
</figure>
</div>
</div>
</div>
<p>The scatter plot reveals important patterns. Companies in the upper-left quadrant (low leverage, high coverage) have conservative financing with ample debt capacity. Those in the lower-right (high leverage, low coverage) face elevated financial risk.</p>
</section>
</section>
<section id="efficiency-ratios-how-well-are-assets-managed" class="level2" data-number="13.6">
<h2 data-number="13.6" class="anchored" data-anchor-id="efficiency-ratios-how-well-are-assets-managed"><span class="header-section-number">13.6</span> Efficiency Ratios: How Well Are Assets Managed?</h2>
<p>Efficiency ratios measure how effectively a company utilizes its assets and manages operations. These metrics help identify whether management is extracting maximum value from the company’s resource base.</p>
<section id="asset-turnover" class="level3" data-number="13.6.1">
<h3 data-number="13.6.1" class="anchored" data-anchor-id="asset-turnover"><span class="header-section-number">13.6.1</span> Asset Turnover</h3>
<p>This ratio measures how efficiently a company uses total assets to generate revenue:</p>
<p><span class="math display">\[
\text{Asset Turnover} = \frac{\text{Revenue}}{\text{Total Assets}}
\]</span></p>
<p>A higher ratio indicates more efficient asset utilization: the company generates more sales per dollar of assets. However, optimal levels vary dramatically across industries. Retailers with minimal fixed assets might achieve turnovers above 2.0, while capital-intensive manufacturers might operate below 0.5.</p>
</section>
<section id="inventory-turnover" class="level3" data-number="13.6.2">
<h3 data-number="13.6.2" class="anchored" data-anchor-id="inventory-turnover"><span class="header-section-number">13.6.2</span> Inventory Turnover</h3>
<p>For companies carrying inventory, this ratio reveals how quickly stock moves through the business:</p>
<p><span class="math display">\[
\text{Inventory Turnover} = \frac{\text{Cost of Goods Sold}}{\text{Inventory}}
\]</span></p>
<p>Higher turnover suggests efficient inventory management (i.e., goods don’t sit on shelves collecting dust). However, extremely high turnover might indicate stockout risks, while very low turnover could signal obsolete inventory or overinvestment in working capital.</p>
<p>We use COGS rather than revenue in the numerator because inventory is recorded at cost, not selling price. Using revenue would overstate turnover for high-margin businesses.</p>
</section>
<section id="receivables-turnover" class="level3" data-number="13.6.3">
<h3 data-number="13.6.3" class="anchored" data-anchor-id="receivables-turnover"><span class="header-section-number">13.6.3</span> Receivables Turnover</h3>
<p>This ratio measures how effectively a company collects payments from customers:</p>
<p><span class="math display">\[
\text{Receivables Turnover} = \frac{\text{Revenue}}{\text{Accounts Receivable}}
\]</span></p>
<p>Higher turnover indicates faster collection (i.e., customers pay promptly). Converting this to “days sales outstanding” (365 / turnover) gives the average collection period in days. Companies must balance collection efficiency against the sales impact of restrictive credit policies.</p>
</section>
<section id="calculating-efficiency-ratios" class="level3" data-number="13.6.4">
<h3 data-number="13.6.4" class="anchored" data-anchor-id="calculating-efficiency-ratios"><span class="header-section-number">13.6.4</span> Calculating Efficiency Ratios</h3>
<div id="45721f94" class="cell" data-execution_count="14">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>combined_statements <span class="op">=</span> (balance_sheet_statements</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    .get([</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>        <span class="st">"symbol"</span>, <span class="st">"year"</span>, <span class="st">"label"</span>, <span class="st">"current_ratio"</span>, <span class="st">"quick_ratio"</span>,</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">"cash_ratio"</span>, <span class="st">"debt_to_equity"</span>, <span class="st">"debt_to_asset"</span>, <span class="st">"total_asset"</span>,</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">"total_equity"</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    ])</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    .merge(</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>        (income_statements</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>            .get([</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>                <span class="st">"symbol"</span>, <span class="st">"year"</span>, <span class="st">"interest_coverage"</span>, <span class="st">"is_revenue"</span>,</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>                <span class="st">"is_cogs"</span>, <span class="st">"selling_general_and_administrative_expenses"</span>,</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>                <span class="st">"is_interest_expense"</span>, <span class="st">"is_gross_profit"</span>, <span class="st">"is_eat"</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>            ])</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>        on<span class="op">=</span>[<span class="st">"symbol"</span>, <span class="st">"year"</span>],</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>        how<span class="op">=</span><span class="st">"left"</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>    .merge(</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>        (comp_vn30</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>            .assign(year<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="st">"year"</span>].astype(<span class="bu">int</span>))</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>            .get([<span class="st">"symbol"</span>, <span class="st">"year"</span>, <span class="st">"ca_total_inventory"</span>, <span class="st">"ca_acc_receiv"</span>])</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>        on<span class="op">=</span>[<span class="st">"symbol"</span>, <span class="st">"year"</span>],</span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>        how<span class="op">=</span><span class="st">"left"</span></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>combined_statements <span class="op">=</span> combined_statements.assign(</span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a>    asset_turnover<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="st">"is_revenue"</span>] <span class="op">/</span> x[<span class="st">"total_asset"</span>],</span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>    inventory_turnover<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="st">"is_cogs"</span>] <span class="op">/</span> x[<span class="st">"ca_total_inventory"</span>],</span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>    receivables_turnover<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="st">"is_revenue"</span>] <span class="op">/</span> x[<span class="st">"ca_acc_receiv"</span>]</span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Efficiency ratios vary dramatically across industries, making peer comparison essential. A grocery store and a shipbuilder will have fundamentally different asset and inventory dynamics.</p>
</section>
</section>
<section id="profitability-ratios-is-the-company-making-money" class="level2" data-number="13.7">
<h2 data-number="13.7" class="anchored" data-anchor-id="profitability-ratios-is-the-company-making-money"><span class="header-section-number">13.7</span> Profitability Ratios: Is the Company Making Money?</h2>
<p>Profitability ratios evaluate how effectively a company converts activity into earnings. These metrics directly measure financial success and are among the most closely watched indicators by investors.</p>
<section id="gross-margin" class="level3" data-number="13.7.1">
<h3 data-number="13.7.1" class="anchored" data-anchor-id="gross-margin"><span class="header-section-number">13.7.1</span> Gross Margin</h3>
<p>The gross margin reveals what percentage of revenue remains after direct production costs:</p>
<p><span class="math display">\[
\text{Gross Margin} = \frac{\text{Gross Profit}}{\text{Revenue}} = \frac{\text{Revenue} - \text{COGS}}{\text{Revenue}}
\]</span></p>
<p>Higher gross margins indicate stronger pricing power, more efficient production, or a favorable product mix. This metric is particularly useful for comparing companies within an industry, as it reveals relative efficiency in core operations before overhead costs.</p>
</section>
<section id="profit-margin" class="level3" data-number="13.7.2">
<h3 data-number="13.7.2" class="anchored" data-anchor-id="profit-margin"><span class="header-section-number">13.7.2</span> Profit Margin</h3>
<p>The profit margin shows what percentage of revenue ultimately becomes net income:</p>
<p><span class="math display">\[
\text{Profit Margin} = \frac{\text{Net Income}}{\text{Revenue}}
\]</span></p>
<p>This comprehensive measure accounts for all costs (e.g., production, operations, interest, and taxes). Higher profit margins suggest effective overall cost management. However, optimal margins vary by industry: software companies routinely achieve 20%+ margins, while grocery stores operate on razor-thin 2-3% margins.</p>
</section>
<section id="return-on-equity-roe" class="level3" data-number="13.7.3">
<h3 data-number="13.7.3" class="anchored" data-anchor-id="return-on-equity-roe"><span class="header-section-number">13.7.3</span> Return on Equity (ROE)</h3>
<p>ROE measures how efficiently a company uses shareholders’ investment to generate profits:</p>
<p><span class="math display">\[
\text{Return on Equity} = \frac{\text{Net Income}}{\text{Total Equity}}
\]</span></p>
<p>This metric directly addresses what shareholders care about: returns on their invested capital. Higher ROE indicates more effective use of equity, though interpretation requires caution. High leverage can artificially inflate ROE by reducing the equity base (e.g., a company financed 90% by debt will show spectacular ROE on modest profits).</p>
</section>
<section id="the-dupont-decomposition" class="level3" data-number="13.7.4">
<h3 data-number="13.7.4" class="anchored" data-anchor-id="the-dupont-decomposition"><span class="header-section-number">13.7.4</span> The DuPont Decomposition</h3>
<p>The DuPont framework decomposes ROE into three components that reveal different aspects of performance:</p>
<p><span class="math display">\[
\text{ROE} = \underbrace{\frac{\text{Net Income}}{\text{Revenue}}}_{\text{Profit Margin}} \times \underbrace{\frac{\text{Revenue}}{\text{Assets}}}_{\text{Asset Turnover}} \times \underbrace{\frac{\text{Assets}}{\text{Equity}}}_{\text{Leverage}}
\]</span></p>
<p>This decomposition shows that high ROE can come from different sources: strong profit margins (pricing power, cost control), efficient asset use (high turnover), or aggressive leverage. Understanding which driver dominates helps assess sustainability. ROE driven by margins is generally more sustainable than ROE driven by leverage.</p>
</section>
<section id="calculating-profitability-ratios" class="level3" data-number="13.7.5">
<h3 data-number="13.7.5" class="anchored" data-anchor-id="calculating-profitability-ratios"><span class="header-section-number">13.7.5</span> Calculating Profitability Ratios</h3>
<div id="d07acbc5" class="cell" data-execution_count="15">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>combined_statements <span class="op">=</span> combined_statements.assign(</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    gross_margin<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="st">"is_gross_profit"</span>] <span class="op">/</span> x[<span class="st">"is_revenue"</span>],</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    profit_margin<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="st">"is_eat"</span>] <span class="op">/</span> x[<span class="st">"is_revenue"</span>],</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    after_tax_roe<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="st">"is_eat"</span>] <span class="op">/</span> x[<span class="st">"total_equity"</span>]</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="gross-margin-trends" class="level3" data-number="13.7.6">
<h3 data-number="13.7.6" class="anchored" data-anchor-id="gross-margin-trends"><span class="header-section-number">13.7.6</span> Gross Margin Trends</h3>
<p><a href="#fig-413" class="quarto-xref">Figure&nbsp;<span>13.5</span></a> tracks gross margin evolution over time, revealing whether companies are maintaining pricing power and production efficiency.</p>
<div id="cell-fig-413" class="cell" data-execution_count="16">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>gross_margins <span class="op">=</span> combined_statements.query(<span class="st">"symbol in @vn30_symbols"</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>gross_margins_figure <span class="op">=</span> (</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    ggplot(gross_margins, aes(x<span class="op">=</span><span class="st">"year"</span>, y<span class="op">=</span><span class="st">"gross_margin"</span>, color<span class="op">=</span><span class="st">"symbol"</span>))</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_line()</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> scale_y_continuous(labels<span class="op">=</span>percent_format())</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> labs(</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="st">""</span>, y<span class="op">=</span><span class="st">"Gross Margin"</span>, color<span class="op">=</span><span class="st">""</span>,</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="st">"Gross Margins for VN30 Stocks (2019-2023)"</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>gross_margins_figure.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="fig-413" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Title: Gross margins for VN30 stocks over time. The figure shows a line chart with years on the horizontal axis and gross margins on the vertical axis.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-413-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="04_financial_statement_analysis_files/figure-html/fig-413-output-1.png" alt="Title: Gross margins for VN30 stocks over time. The figure shows a line chart with years on the horizontal axis and gross margins on the vertical axis." width="672" height="480" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-413-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;13.5: Gross margin trends reveal changes in pricing power and production efficiency. Declining margins may signal increased competition or rising input costs.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="from-gross-to-net-where-do-profits-go" class="level3" data-number="13.7.7">
<h3 data-number="13.7.7" class="anchored" data-anchor-id="from-gross-to-net-where-do-profits-go"><span class="header-section-number">13.7.7</span> From Gross to Net: Where Do Profits Go?</h3>
<p><a href="#fig-414" class="quarto-xref">Figure&nbsp;<span>13.6</span></a> examines the relationship between gross and profit margins. The gap between them reveals the impact of operating expenses, interest, and taxes.</p>
<div id="cell-fig-414" class="cell" data-execution_count="17">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>profit_margins <span class="op">=</span> combined_statements.query(<span class="st">"year == 2023"</span>)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>profit_margins_figure <span class="op">=</span> (</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    ggplot(</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>        profit_margins,</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>        aes(x<span class="op">=</span><span class="st">"gross_margin"</span>, y<span class="op">=</span><span class="st">"profit_margin"</span>, color<span class="op">=</span><span class="st">"label"</span>)</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_point(size<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_label(</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>        aes(label<span class="op">=</span><span class="st">"label"</span>),</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>        adjust_text<span class="op">=</span>{<span class="st">"arrowprops"</span>: {<span class="st">"arrowstyle"</span>: <span class="st">"-"</span>}}</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> scale_x_continuous(labels<span class="op">=</span>percent_format())</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> scale_y_continuous(labels<span class="op">=</span>percent_format())</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> labs(</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="st">"Gross Margin"</span>, y<span class="op">=</span><span class="st">"Profit Margin"</span>,</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="st">"Gross versus Profit Margins for VN30 Stocks (2023)"</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> theme(legend_position<span class="op">=</span><span class="st">"none"</span>)</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>profit_margins_figure.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="fig-414" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Title: Gross versus profit margins for VN30 stocks. The figure shows a scatter plot with gross margins on the horizontal axis and profit margins on the vertical axis.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-414-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="04_financial_statement_analysis_files/figure-html/fig-414-output-1.png" alt="Title: Gross versus profit margins for VN30 stocks. The figure shows a scatter plot with gross margins on the horizontal axis and profit margins on the vertical axis." width="672" height="480" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-414-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;13.6: Comparing gross and profit margins reveals how much of gross profit survives operating expenses, interest, and taxes. Companies far below the diagonal have high overhead relative to gross profit.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Companies along the diagonal convert gross profit to net income efficiently. Those well below the diagonal face high operating costs, interest burdens, or tax rates that erode profitability.</p>
</section>
</section>
<section id="combining-financial-ratios-a-holistic-view" class="level2" data-number="13.8">
<h2 data-number="13.8" class="anchored" data-anchor-id="combining-financial-ratios-a-holistic-view"><span class="header-section-number">13.8</span> Combining Financial Ratios: A Holistic View</h2>
<p>Individual ratios provide specific insights, but combining them offers a more complete picture. A company might excel in profitability while struggling with liquidity, or maintain conservative leverage while underperforming on efficiency.</p>
<section id="ranking-companies-across-categories" class="level3" data-number="13.8.1">
<h3 data-number="13.8.1" class="anchored" data-anchor-id="ranking-companies-across-categories"><span class="header-section-number">13.8.1</span> Ranking Companies Across Categories</h3>
<p><a href="#fig-415" class="quarto-xref">Figure&nbsp;<span>13.7</span></a> compares company rankings across four ratio categories. Rankings closer to 1 indicate better performance within each category, enabling quick identification of relative strengths and weaknesses.</p>
<div id="cell-fig-415" class="cell" data-execution_count="18">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>financial_ratios <span class="op">=</span> (combined_statements</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    .query(<span class="st">"year == 2023"</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">filter</span>(</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>        items<span class="op">=</span>[<span class="st">"symbol"</span>] <span class="op">+</span> [</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>            col <span class="cf">for</span> col <span class="kw">in</span> combined_statements.columns</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="bu">any</span>(x <span class="kw">in</span> col <span class="cf">for</span> x <span class="kw">in</span> [</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>                <span class="st">"ratio"</span>, <span class="st">"margin"</span>, <span class="st">"roe"</span>, <span class="st">"_to_"</span>, <span class="st">"turnover"</span>, <span class="st">"interest_coverage"</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>            ])</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>    .melt(id_vars<span class="op">=</span>[<span class="st">"symbol"</span>], var_name<span class="op">=</span><span class="st">"name"</span>, value_name<span class="op">=</span><span class="st">"value"</span>)</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>    .assign(</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>        <span class="bu">type</span><span class="op">=</span><span class="kw">lambda</span> x: np.select(</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>            [</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>                x[<span class="st">"name"</span>].isin([<span class="st">"current_ratio"</span>, <span class="st">"quick_ratio"</span>, <span class="st">"cash_ratio"</span>]),</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>                x[<span class="st">"name"</span>].isin([<span class="st">"debt_to_equity"</span>, <span class="st">"debt_to_asset"</span>, <span class="st">"interest_coverage"</span>]),</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>                x[<span class="st">"name"</span>].isin([<span class="st">"asset_turnover"</span>, <span class="st">"inventory_turnover"</span>, <span class="st">"receivables_turnover"</span>]),</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>                x[<span class="st">"name"</span>].isin([<span class="st">"gross_margin"</span>, <span class="st">"profit_margin"</span>, <span class="st">"after_tax_roe"</span>]),</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>            ],</span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>            [</span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Liquidity Ratios"</span>,</span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Leverage Ratios"</span>,</span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Efficiency Ratios"</span>,</span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Profitability Ratios"</span></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>            ],</span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>            default<span class="op">=</span><span class="st">"Other"</span></span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>financial_ratios[<span class="st">"rank"</span>] <span class="op">=</span> (financial_ratios</span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>    .sort_values([<span class="st">"type"</span>, <span class="st">"name"</span>, <span class="st">"value"</span>], ascending<span class="op">=</span>[<span class="va">True</span>, <span class="va">True</span>, <span class="va">False</span>])</span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a>    .groupby([<span class="st">"type"</span>, <span class="st">"name"</span>])</span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a>    .cumcount() <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a>final_ranks <span class="op">=</span> (financial_ratios</span>
<span id="cb17-38"><a href="#cb17-38" aria-hidden="true" tabindex="-1"></a>    .groupby([<span class="st">"symbol"</span>, <span class="st">"type"</span>], as_index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb17-39"><a href="#cb17-39" aria-hidden="true" tabindex="-1"></a>    .agg(rank<span class="op">=</span>(<span class="st">"rank"</span>, <span class="st">"mean"</span>))</span>
<span id="cb17-40"><a href="#cb17-40" aria-hidden="true" tabindex="-1"></a>    .query(<span class="st">"symbol in @vn30_symbols"</span>)</span>
<span id="cb17-41"><a href="#cb17-41" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb17-42"><a href="#cb17-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-43"><a href="#cb17-43" aria-hidden="true" tabindex="-1"></a>final_ranks_figure <span class="op">=</span> (</span>
<span id="cb17-44"><a href="#cb17-44" aria-hidden="true" tabindex="-1"></a>    ggplot(final_ranks, aes(x<span class="op">=</span><span class="st">"rank"</span>, y<span class="op">=</span><span class="st">"type"</span>, color<span class="op">=</span><span class="st">"symbol"</span>))</span>
<span id="cb17-45"><a href="#cb17-45" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_point(shape<span class="op">=</span><span class="st">"^"</span>, size<span class="op">=</span><span class="dv">4</span>)</span>
<span id="cb17-46"><a href="#cb17-46" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> labs(</span>
<span id="cb17-47"><a href="#cb17-47" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="st">"Average Rank (Lower is Better)"</span>, y<span class="op">=</span><span class="st">""</span>, color<span class="op">=</span><span class="st">""</span>,</span>
<span id="cb17-48"><a href="#cb17-48" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="st">"Average Rank Across Financial Ratio Categories"</span></span>
<span id="cb17-49"><a href="#cb17-49" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb17-50"><a href="#cb17-50" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> coord_cartesian(xlim<span class="op">=</span>[<span class="dv">1</span>, <span class="dv">30</span>])</span>
<span id="cb17-51"><a href="#cb17-51" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb17-52"><a href="#cb17-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-53"><a href="#cb17-53" aria-hidden="true" tabindex="-1"></a>final_ranks_figure.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="fig-415" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Title: Average rank in financial ratio categories. The figure shows a scatter plot with ranks for companies across liquidity, leverage, efficiency, and profitability categories.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-415-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="04_financial_statement_analysis_files/figure-html/fig-415-output-1.png" alt="Title: Average rank in financial ratio categories. The figure shows a scatter plot with ranks for companies across liquidity, leverage, efficiency, and profitability categories." width="672" height="480" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-415-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;13.7: Ranking companies across multiple ratio categories reveals overall financial profiles. Companies with consistently low ranks across categories demonstrate broad-based financial strength.
</figcaption>
</figure>
</div>
</div>
</div>
<p>The combined view reveals how different business strategies manifest in financial profiles. A company might deliberately accept lower profitability rankings in exchange for stronger liquidity, or use aggressive leverage to boost returns at the cost of financial flexibility.</p>
</section>
</section>
<section id="financial-ratios-in-asset-pricing" class="level2" data-number="13.9">
<h2 data-number="13.9" class="anchored" data-anchor-id="financial-ratios-in-asset-pricing"><span class="header-section-number">13.9</span> Financial Ratios in Asset Pricing</h2>
<p>Beyond evaluating individual companies, financial ratios serve as crucial inputs for asset pricing models. The Fama-French five-factor model, which we explore in detail in <a href="./12_fama_french.html">Fama-French Factors</a>, uses several accounting-based measures to explain cross-sectional variation in stock returns.</p>
<section id="the-fama-french-factors" class="level3" data-number="13.9.1">
<h3 data-number="13.9.1" class="anchored" data-anchor-id="the-fama-french-factors"><span class="header-section-number">13.9.1</span> The Fama-French Factors</h3>
<p>The model incorporates four company characteristics derived from financial statements:</p>
<p><strong>Size</strong> is measured as the logarithm of market capitalization: <span class="math display">\[
\text{Size} = \ln(\text{Market Cap})
\]</span></p>
<p>This captures the empirical finding that smaller firms tend to outperform larger firms on a risk-adjusted basis (i.e., the “size premium”).</p>
<p><strong>Book-to-Market</strong> relates accounting value to market value: <span class="math display">\[
\text{Book-to-Market} = \frac{\text{Book Equity}}{\text{Market Cap}}
\]</span></p>
<p>High book-to-market stocks (“value” stocks) have historically outperformed low book-to-market stocks (“growth” stocks) (i.e., the “value premium”).</p>
<p><strong>Operating Profitability</strong> measures profit generation relative to equity: <span class="math display">\[
\text{Profitability} = \frac{\text{Revenue} - \text{COGS} - \text{SG\&amp;A} - \text{Interest}}{\text{Book Equity}}
\]</span></p>
<p>More profitable firms tend to earn higher returns (i.e., the “profitability premium”).</p>
<p><strong>Investment</strong> captures asset growth: <span class="math display">\[
\text{Investment} = \frac{\text{Total Assets}_t}{\text{Total Assets}_{t-1}} - 1
\]</span> Firms investing aggressively tend to underperform conservative investors (i.e., the “investment premium”).</p>
</section>
<section id="calculating-fama-french-variables" class="level3" data-number="13.9.2">
<h3 data-number="13.9.2" class="anchored" data-anchor-id="calculating-fama-french-variables"><span class="header-section-number">13.9.2</span> Calculating Fama-French Variables</h3>
<div id="c3c80edd" class="cell" data-execution_count="19">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>prices_monthly <span class="op">=</span> pd.read_sql_query(</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    sql<span class="op">=</span><span class="st">"SELECT * FROM prices_monthly"</span>,</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    con<span class="op">=</span>tidy_finance,</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    parse_dates<span class="op">=</span>{<span class="st">"datadate"</span>}</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Use December prices for annual calculations</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>prices_december <span class="op">=</span> (prices_monthly</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>    .assign(date<span class="op">=</span><span class="kw">lambda</span> x: pd.to_datetime(x[<span class="st">"date"</span>]))</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>    .query(<span class="st">"date.dt.month == 12"</span>)</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="b44d094a" class="cell" data-execution_count="20">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>combined_statements_ff <span class="op">=</span> (combined_statements</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    .query(<span class="st">"year == 2023"</span>)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    .merge(prices_december, on<span class="op">=</span>[<span class="st">"symbol"</span>, <span class="st">"year"</span>], how<span class="op">=</span><span class="st">"left"</span>)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    .merge(</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>        (balance_sheet_statements</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>            .query(<span class="st">"year == 2022"</span>)</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>            .get([<span class="st">"symbol"</span>, <span class="st">"total_asset"</span>])</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>            .rename(columns<span class="op">=</span>{<span class="st">"total_asset"</span>: <span class="st">"total_assets_lag"</span>})</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>        on<span class="op">=</span><span class="st">"symbol"</span>,</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>        how<span class="op">=</span><span class="st">"left"</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>    .assign(</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>        size<span class="op">=</span><span class="kw">lambda</span> x: np.log(x[<span class="st">"mktcap"</span>]),</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>        book_to_market<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="st">"total_equity"</span>] <span class="op">/</span> x[<span class="st">"mktcap"</span>],</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>        operating_profitability<span class="op">=</span><span class="kw">lambda</span> x: (</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>            (x[<span class="st">"is_revenue"</span>] <span class="op">-</span> x[<span class="st">"is_cogs"</span>] <span class="op">-</span></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>             x[<span class="st">"selling_general_and_administrative_expenses"</span>] <span class="op">-</span></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>             x[<span class="st">"is_interest_expense"</span>]) <span class="op">/</span> x[<span class="st">"total_equity"</span>]</span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>        investment<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="st">"total_asset"</span>] <span class="op">/</span> x[<span class="st">"total_assets_lag"</span>] <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>combined_statements_ff.head(<span class="dv">3</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">symbol</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">label</th>
<th data-quarto-table-cell-role="th">current_ratio</th>
<th data-quarto-table-cell-role="th">quick_ratio</th>
<th data-quarto-table-cell-role="th">cash_ratio</th>
<th data-quarto-table-cell-role="th">debt_to_equity</th>
<th data-quarto-table-cell-role="th">debt_to_asset</th>
<th data-quarto-table-cell-role="th">total_asset</th>
<th data-quarto-table-cell-role="th">total_equity</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">shrout</th>
<th data-quarto-table-cell-role="th">mktcap</th>
<th data-quarto-table-cell-role="th">mktcap_lag</th>
<th data-quarto-table-cell-role="th">risk_free</th>
<th data-quarto-table-cell-role="th">ret_excess</th>
<th data-quarto-table-cell-role="th">total_assets_lag</th>
<th data-quarto-table-cell-role="th">size</th>
<th data-quarto-table-cell-role="th">book_to_market</th>
<th data-quarto-table-cell-role="th">operating_profitability</th>
<th data-quarto-table-cell-role="th">investment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>POW</td>
<td>2023</td>
<td>POW</td>
<td>1.084255</td>
<td>1.084255</td>
<td>0.315089</td>
<td>0.0</td>
<td>0.0</td>
<td>7.036209e+13</td>
<td>3.411943e+13</td>
<td>...</td>
<td>2.341872e+09</td>
<td>26346.055367</td>
<td>26346.055367</td>
<td>0.003333</td>
<td>-0.003333</td>
<td>5.684324e+13</td>
<td>10.179074</td>
<td>1.295049e+09</td>
<td>0.025539</td>
<td>0.237827</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>HPG</td>
<td>2023</td>
<td>HPG</td>
<td>1.156655</td>
<td>1.156655</td>
<td>0.171324</td>
<td>0.0</td>
<td>0.0</td>
<td>1.877826e+14</td>
<td>1.028364e+14</td>
<td>...</td>
<td>5.814786e+09</td>
<td>162523.260217</td>
<td>154382.560242</td>
<td>0.003333</td>
<td>-0.003333</td>
<td>1.703355e+14</td>
<td>11.998576</td>
<td>6.327489e+08</td>
<td>0.072798</td>
<td>0.102428</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>MWG</td>
<td>2023</td>
<td>MWG</td>
<td>1.688604</td>
<td>1.688604</td>
<td>0.174408</td>
<td>0.0</td>
<td>0.0</td>
<td>6.011124e+13</td>
<td>2.335956e+13</td>
<td>...</td>
<td>1.462941e+09</td>
<td>62613.896064</td>
<td>56323.247628</td>
<td>0.003333</td>
<td>-0.009141</td>
<td>5.583410e+13</td>
<td>11.044743</td>
<td>3.730731e+08</td>
<td>-0.002443</td>
<td>0.076604</td>
</tr>
</tbody>
</table>

<p>3 rows × 65 columns</p>
</div>
</div>
</div>
</section>
<section id="fama-french-factor-rankings" class="level3" data-number="13.9.3">
<h3 data-number="13.9.3" class="anchored" data-anchor-id="fama-french-factor-rankings"><span class="header-section-number">13.9.3</span> Fama-French Factor Rankings</h3>
<p><a href="#fig-416" class="quarto-xref">Figure&nbsp;<span>13.8</span></a> shows how VN30 companies rank on each Fama-French variable, connecting fundamental analysis to asset pricing.</p>
<div id="cell-fig-416" class="cell" data-execution_count="21">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>factors_ranks <span class="op">=</span> (combined_statements_ff</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    .get([<span class="st">"symbol"</span>, <span class="st">"size"</span>, <span class="st">"book_to_market"</span>, <span class="st">"operating_profitability"</span>, <span class="st">"investment"</span>])</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    .rename(columns<span class="op">=</span>{</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">"size"</span>: <span class="st">"Size"</span>,</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">"book_to_market"</span>: <span class="st">"Book-to-Market"</span>,</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">"operating_profitability"</span>: <span class="st">"Profitability"</span>,</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">"investment"</span>: <span class="st">"Investment"</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>    .melt(id_vars<span class="op">=</span>[<span class="st">"symbol"</span>], var_name<span class="op">=</span><span class="st">"name"</span>, value_name<span class="op">=</span><span class="st">"value"</span>)</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>    .assign(</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>        rank<span class="op">=</span><span class="kw">lambda</span> x: (</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>            x.sort_values([<span class="st">"name"</span>, <span class="st">"value"</span>], ascending<span class="op">=</span>[<span class="va">True</span>, <span class="va">False</span>])</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>            .groupby(<span class="st">"name"</span>)</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>            .cumcount() <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>    .query(<span class="st">"symbol in @vn30_symbols"</span>)</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>factors_ranks_figure <span class="op">=</span> (</span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>    ggplot(factors_ranks, aes(x<span class="op">=</span><span class="st">"rank"</span>, y<span class="op">=</span><span class="st">"name"</span>, color<span class="op">=</span><span class="st">"symbol"</span>))</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_point(shape<span class="op">=</span><span class="st">"^"</span>, size<span class="op">=</span><span class="dv">4</span>)</span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> labs(</span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="st">"Rank"</span>, y<span class="op">=</span><span class="st">""</span>, color<span class="op">=</span><span class="st">""</span>,</span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="st">"Rank in Fama-French Variables for VN30 Stocks"</span></span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> coord_cartesian(xlim<span class="op">=</span>[<span class="dv">1</span>, <span class="dv">30</span>])</span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a>factors_ranks_figure.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="fig-416" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Title: Rank in Fama-French variables for VN30 stocks. The figure shows a scatter plot with company ranks for size, book-to-market, profitability, and investment factors.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-416-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="04_financial_statement_analysis_files/figure-html/fig-416-output-1.png" alt="Title: Rank in Fama-French variables for VN30 stocks. The figure shows a scatter plot with company ranks for size, book-to-market, profitability, and investment factors." width="672" height="480" class="figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-416-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;13.8: Rankings on Fama-French variables connect financial statement analysis to asset pricing. According to factor models, smaller, higher book-to-market, more profitable, and lower-investment firms should earn higher expected returns.
</figcaption>
</figure>
</div>
</div>
</div>
<p>These rankings have implications for expected returns according to factor models. A small, high book-to-market, highly profitable company with conservative investment should, in theory, earn higher risk-adjusted returns than its opposite.</p>
</section>
</section>
<section id="limitations-and-practical-considerations" class="level2" data-number="13.10">
<h2 data-number="13.10" class="anchored" data-anchor-id="limitations-and-practical-considerations"><span class="header-section-number">13.10</span> Limitations and Practical Considerations</h2>
<p>While financial ratios provide powerful analytical tools, several limitations deserve attention:</p>
<section id="accounting-discretion" class="level3" data-number="13.10.1">
<h3 data-number="13.10.1" class="anchored" data-anchor-id="accounting-discretion"><span class="header-section-number">13.10.1</span> Accounting Discretion</h3>
<p>Companies have significant discretion in how they apply accounting standards. Revenue recognition timing, depreciation methods, inventory valuation (FIFO vs.&nbsp;LIFO), and capitalization versus expensing decisions all affect reported numbers. Sophisticated analysis requires understanding these choices and their impact.</p>
</section>
<section id="industry-comparability" class="level3" data-number="13.10.2">
<h3 data-number="13.10.2" class="anchored" data-anchor-id="industry-comparability"><span class="header-section-number">13.10.2</span> Industry Comparability</h3>
<p>Ratios vary dramatically across industries. Comparing a bank’s leverage to a retailer’s is meaningless (e.g., banks naturally operate with much higher leverage due to their business model). Always benchmark against industry peers rather than absolute standards.</p>
</section>
<section id="point-in-time-limitations" class="level3" data-number="13.10.3">
<h3 data-number="13.10.3" class="anchored" data-anchor-id="point-in-time-limitations"><span class="header-section-number">13.10.3</span> Point-in-Time Limitations</h3>
<p>Balance sheet ratios capture a single moment, which may not represent typical conditions. Companies often “window dress” by temporarily improving metrics at reporting dates. Trend analysis and quarter-over-quarter comparisons can reveal such practices.</p>
</section>
<section id="backward-looking-nature" class="level3" data-number="13.10.4">
<h3 data-number="13.10.4" class="anchored" data-anchor-id="backward-looking-nature"><span class="header-section-number">13.10.4</span> Backward-Looking Nature</h3>
<p>Financial statements report historical results. Past profitability doesn’t guarantee future performance, especially for companies in rapidly changing industries or facing disruption.</p>
</section>
<section id="quality-of-earnings" class="level3" data-number="13.10.5">
<h3 data-number="13.10.5" class="anchored" data-anchor-id="quality-of-earnings"><span class="header-section-number">13.10.5</span> Quality of Earnings</h3>
<p>Not all profits are created equal. Earnings driven by one-time gains, accounting adjustments, or aggressive revenue recognition may not recur. Cash flow analysis helps assess earnings quality. Profits that don’t convert to cash warrant skepticism.</p>
</section>
</section>
<section id="key-takeaways" class="level2" data-number="13.11">
<h2 data-number="13.11" class="anchored" data-anchor-id="key-takeaways"><span class="header-section-number">13.11</span> Key Takeaways</h2>
<p>This chapter introduced financial statement analysis as a tool for understanding company fundamentals. The main insights are:</p>
<ol type="1">
<li><p><strong>Three statements, three perspectives</strong>: The balance sheet shows financial position at a point in time, the income statement measures performance over a period, and the cash flow statement tracks actual cash movements. Together, they provide a complete picture of financial health.</p></li>
<li><p><strong>Liquidity ratios assess short-term survival</strong>: Current, quick, and cash ratios measure the ability to meet near-term obligations. Higher ratios indicate greater liquidity but may suggest inefficient asset use.</p></li>
<li><p><strong>Leverage ratios reveal capital structure risk</strong>: Debt-to-equity, debt-to-asset, and interest coverage ratios show how the company finances operations and whether it can service its debt. Higher leverage amplifies both returns and risk.</p></li>
<li><p><strong>Efficiency ratios measure management effectiveness</strong>: Asset turnover, inventory turnover, and receivables turnover reveal how well the company converts resources into revenue. Industry context is essential for interpretation.</p></li>
<li><p><strong>Profitability ratios quantify financial success</strong>: Gross margin, profit margin, and ROE measure the ability to generate earnings. The DuPont decomposition reveals whether ROE comes from margins, turnover, or leverage.</p></li>
<li><p><strong>Ratios connect to asset pricing</strong>: Financial statement variables like book-to-market, profitability, and investment form the basis of factor models that explain cross-sectional return differences.</p></li>
<li><p><strong>Context matters for interpretation</strong>: Ratios must be compared against industry peers, tracked over time, and considered alongside qualitative factors. No single ratio tells the complete story.</p></li>
</ol>
<p>Looking ahead, subsequent chapters will explore how these fundamental variables interact with market prices in asset pricing models, and how to construct factor portfolios based on financial statement characteristics.</p>


<!-- -->

</section>

</main> <!-- /main -->
<script>
document.addEventListener("DOMContentLoaded", function () {
  const year = new Date().getFullYear();
  document.getElementById("copyright").textContent = "© " + year;
});
</script>
<script>
(function () {
  const GA_ID = "G-LMDLDJXXSC";   // your real GA4 ID
  const CONSENT_KEY = "cookie_consent_v1";

  function log(msg) {
    console.log("[GA Loader]", msg);
  }

  function loadGtag() {
    if (window.__gtag_loaded__) {
      log("GA already loaded, skipping");
      return;
    }

    log("Loading Google Analytics...");

    window.__gtag_loaded__ = true;

    const script = document.createElement("script");
    script.async = true;
    script.src = "https://www.googletagmanager.com/gtag/js?id=" + encodeURIComponent(GA_ID);

    script.onload = function () {
      log("gtag.js loaded");

      window.dataLayer = window.dataLayer || [];
      function gtag(){ dataLayer.push(arguments); }
      window.gtag = gtag;

      gtag("js", new Date());
      gtag("config", GA_ID, {
        anonymize_ip: true,
        transport_type: "beacon"
      });

      log("GA initialized successfully");
    };

    script.onerror = function () {
      log("FAILED to load gtag.js. Likely blocked by ad blocker or network.");
    };

    document.head.appendChild(script);
  }

  function checkConsentAndLoad() {
    const consent = localStorage.getItem(CONSENT_KEY);
    log("Stored consent value = " + consent);

    if (consent === "accepted") {
      loadGtag();
    } else {
      log("Analytics blocked due to missing or declined consent");
    }
  }

  // Run on page load
  checkConsentAndLoad();

  // Listen for cookie banner decisions
  window.addEventListener("cookie-consent-changed", function (e) {
    log("Consent event received: " + e.detail);
    if (e.detail === "accepted") {
      loadGtag();
    }
  });

})();
</script>
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/github\.com\/mikenguyen13\/tidy_finance_vn");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./14_fama_macbeth.html" class="pagination-link" aria-label="Fama-MacBeth Regressions">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Fama-MacBeth Regressions</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./25_pe_ratio.html" class="pagination-link" aria-label="P/E Ratio">
        <span class="nav-page-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">P/E Ratio</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb21" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> Financial Statement Analysis</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="co">    number-sections: true</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="an">jupyter:</span><span class="co"> python3</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="an">execute:</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="co">  echo: true</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="co">  warning: false</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="co">  message: false</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a><span class="co">  cache: true</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a><span class="fu">## From Market Prices to Fundamental Value</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>The previous chapters focused on how financial markets price assets in equilibrium. The <span class="co">[</span><span class="ot">Capital Asset Pricing Model</span><span class="co">](03_capm.qmd)</span> showed that expected returns depend on systematic risk exposure, while <span class="co">[</span><span class="ot">Modern Portfolio Theory</span><span class="co">](02_modern_portfolio_theory.qmd)</span> demonstrated how to construct efficient portfolios. But these frameworks take expected returns and risk as given, they don't explain where these expectations come from.</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>Financial statement analysis addresses this gap. By examining a company's accounting records, investors can form independent assessments of firm value, identify mispriced securities, and understand the economic forces driving business performance. Financial statements provide the primary source of standardized information about a company's operations, financial position, and cash generation. Their legal requirements and standardized formats make them particularly valuable. Every publicly traded company must file them, creating a level playing field for analysis.</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>This chapter introduces the three primary financial statements: the balance sheet, income statement, and cash flow statement. We then demonstrate how to transform raw accounting data into meaningful financial ratios that facilitate comparison across companies and over time. These ratios serve multiple purposes: they enable investors to benchmark companies against peers, help creditors assess default risk, and provide inputs for asset pricing models like the Fama-French factors we will encounter in later chapters.</span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>Our analysis combines theoretical frameworks with practical implementation using Vietnamese market data. By the end of this chapter, you will understand how to access financial statements, calculate key ratios across multiple categories, and interpret these metrics in context.</span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> plotnine <span class="im">import</span> <span class="op">*</span></span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> mizani.formatters <span class="im">import</span> percent_format</span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> adjustText <span class="im">import</span> adjust_text</span>
<span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-35"><a href="#cb21-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-36"><a href="#cb21-36" aria-hidden="true" tabindex="-1"></a><span class="fu">## The Three Financial Statements</span></span>
<span id="cb21-37"><a href="#cb21-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-38"><a href="#cb21-38" aria-hidden="true" tabindex="-1"></a>Before diving into ratios and analysis, we need to understand the three interconnected statements that form the foundation of financial reporting. Each statement answers a different question about the company, and together they provide a comprehensive picture of financial health.</span>
<span id="cb21-39"><a href="#cb21-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-40"><a href="#cb21-40" aria-hidden="true" tabindex="-1"></a><span class="fu">### The Balance Sheet: A Snapshot of Financial Position</span></span>
<span id="cb21-41"><a href="#cb21-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-42"><a href="#cb21-42" aria-hidden="true" tabindex="-1"></a>The balance sheet captures a company's financial position at a specific moment in time, think of it as a photograph rather than a movie. It lists everything the company owns (assets), everything it owes (liabilities), and the residual claim belonging to shareholders (equity). These three components are linked by the fundamental accounting equation:</span>
<span id="cb21-43"><a href="#cb21-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-44"><a href="#cb21-44" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-45"><a href="#cb21-45" aria-hidden="true" tabindex="-1"></a>\text{Assets} = \text{Liabilities} + \text{Equity}</span>
<span id="cb21-46"><a href="#cb21-46" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-47"><a href="#cb21-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-48"><a href="#cb21-48" aria-hidden="true" tabindex="-1"></a>This equation is not merely a definition, it reflects a core economic principle. A company's resources (assets) must be financed from somewhere: either borrowed from creditors (liabilities) or contributed by owners (equity). Every transaction affects both sides equally, maintaining the balance.</span>
<span id="cb21-49"><a href="#cb21-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-50"><a href="#cb21-50" aria-hidden="true" tabindex="-1"></a>**Assets** represent resources the company controls that are expected to generate future economic benefits:</span>
<span id="cb21-51"><a href="#cb21-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-52"><a href="#cb21-52" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Current assets** can be converted to cash within one year: cash and equivalents, short-term investments, accounts receivable (money owed by customers), and inventory (raw materials, work-in-progress, and finished goods)</span>
<span id="cb21-53"><a href="#cb21-53" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Non-current assets** support operations beyond one year: property, plant, and equipment (PP&amp;E), long-term investments, and intangible assets like patents, trademarks, and goodwill</span>
<span id="cb21-54"><a href="#cb21-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-55"><a href="#cb21-55" aria-hidden="true" tabindex="-1"></a>**Liabilities** encompass obligations to external parties:</span>
<span id="cb21-56"><a href="#cb21-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-57"><a href="#cb21-57" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Current liabilities** come due within one year: accounts payable (money owed to suppliers), short-term debt, accrued expenses, and the current portion of long-term debt</span>
<span id="cb21-58"><a href="#cb21-58" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Non-current liabilities** extend beyond one year: long-term debt, bonds payable, pension obligations, and deferred tax liabilities</span>
<span id="cb21-59"><a href="#cb21-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-60"><a href="#cb21-60" aria-hidden="true" tabindex="-1"></a>**Shareholders' equity** represents the owners' residual claim:</span>
<span id="cb21-61"><a href="#cb21-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-62"><a href="#cb21-62" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Common stock** and additional paid-in capital from share issuance</span>
<span id="cb21-63"><a href="#cb21-63" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Retained earnings** (i.e., accumulated profits reinvested rather than distributed as dividends)</span>
<span id="cb21-64"><a href="#cb21-64" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Treasury stock**: shares repurchased by the company</span>
<span id="cb21-65"><a href="#cb21-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-66"><a href="#cb21-66" aria-hidden="true" tabindex="-1"></a>Understanding these categories is essential for ratio analysis. Current assets and liabilities determine short-term liquidity, while the mix of debt and equity reveals capital structure choices.</span>
<span id="cb21-67"><a href="#cb21-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-68"><a href="#cb21-68" aria-hidden="true" tabindex="-1"></a><span class="fu">### The Income Statement: Performance Over Time</span></span>
<span id="cb21-69"><a href="#cb21-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-70"><a href="#cb21-70" aria-hidden="true" tabindex="-1"></a>While the balance sheet provides a snapshot, the income statement (also called the profit and loss statement, or P&amp;L) measures financial performance over a period (e.g., a quarter or year). It follows a hierarchical structure that progressively captures different levels of profitability:</span>
<span id="cb21-71"><a href="#cb21-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-72"><a href="#cb21-72" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-73"><a href="#cb21-73" aria-hidden="true" tabindex="-1"></a>\text{Revenue} - \text{COGS} = \text{Gross Profit}</span>
<span id="cb21-74"><a href="#cb21-74" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-75"><a href="#cb21-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-76"><a href="#cb21-76" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-77"><a href="#cb21-77" aria-hidden="true" tabindex="-1"></a>\text{Gross Profit} - \text{Operating Expenses} = \text{Operating Income (EBIT)}</span>
<span id="cb21-78"><a href="#cb21-78" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-79"><a href="#cb21-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-80"><a href="#cb21-80" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-81"><a href="#cb21-81" aria-hidden="true" tabindex="-1"></a>\text{EBIT} - \text{Interest} - \text{Taxes} = \text{Net Income}</span>
<span id="cb21-82"><a href="#cb21-82" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-83"><a href="#cb21-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-84"><a href="#cb21-84" aria-hidden="true" tabindex="-1"></a>Each line reveals something different about the business:</span>
<span id="cb21-85"><a href="#cb21-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-86"><a href="#cb21-86" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Revenue (Sales)**: Total income from goods or services sold (i.e., the "top line")</span>
<span id="cb21-87"><a href="#cb21-87" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Cost of Goods Sold (COGS)**: Direct costs of producing what was sold (materials, direct labor, manufacturing overhead)</span>
<span id="cb21-88"><a href="#cb21-88" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Gross Profit**: Revenue minus COGS, measuring basic profitability from core operations</span>
<span id="cb21-89"><a href="#cb21-89" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Operating Expenses**: Costs of running the business beyond production (selling, general &amp; administrative expenses, research &amp; development)</span>
<span id="cb21-90"><a href="#cb21-90" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Operating Income (EBIT)**: Earnings Before Interest and Taxes, measuring profitability from operations before financing decisions and taxes</span>
<span id="cb21-91"><a href="#cb21-91" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Interest Expense**: The cost of debt financing</span>
<span id="cb21-92"><a href="#cb21-92" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Net Income**: The "bottom line" (i.e., total profit after all expenses)</span>
<span id="cb21-93"><a href="#cb21-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-94"><a href="#cb21-94" aria-hidden="true" tabindex="-1"></a>The income statement's hierarchical structure allows analysts to identify where profitability problems originate. A company with strong gross margins but weak net income might have bloated overhead costs. One with weak gross margins faces fundamental pricing or production challenges.</span>
<span id="cb21-95"><a href="#cb21-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-96"><a href="#cb21-96" aria-hidden="true" tabindex="-1"></a><span class="fu">### The Cash Flow Statement: Following the Money</span></span>
<span id="cb21-97"><a href="#cb21-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-98"><a href="#cb21-98" aria-hidden="true" tabindex="-1"></a>The cash flow statement bridges a critical gap: profitable companies can run out of cash, and unprofitable companies can generate positive cash flow. This happens because accrual accounting (used in the income statement) recognizes revenue when earned and expenses when incurred, not when cash changes hands.</span>
<span id="cb21-99"><a href="#cb21-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-100"><a href="#cb21-100" aria-hidden="true" tabindex="-1"></a>The cash flow statement tracks actual cash movements, divided into three categories:</span>
<span id="cb21-101"><a href="#cb21-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-102"><a href="#cb21-102" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Operating activities**: Cash generated from core business operations. Starts with net income, then adjusts for non-cash items (depreciation, changes in working capital)</span>
<span id="cb21-103"><a href="#cb21-103" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Investing activities**: Cash spent on or received from long-term investments (e.g., purchasing equipment, acquiring businesses, selling assets)</span>
<span id="cb21-104"><a href="#cb21-104" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Financing activities**: Cash flows from capital structure decisions (e.g., issuing stock, borrowing, repaying debt, paying dividends, buying back shares)</span>
<span id="cb21-105"><a href="#cb21-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-106"><a href="#cb21-106" aria-hidden="true" tabindex="-1"></a>A company can show strong net income while burning cash if it's building inventory, extending generous credit terms, or making large capital expenditures. Conversely, a company reporting losses might generate positive operating cash flow by collecting receivables faster than it pays suppliers.</span>
<span id="cb21-107"><a href="#cb21-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-108"><a href="#cb21-108" aria-hidden="true" tabindex="-1"></a><span class="fu">### Illustrating with FPT's Financial Statements</span></span>
<span id="cb21-109"><a href="#cb21-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-110"><a href="#cb21-110" aria-hidden="true" tabindex="-1"></a>To see these concepts in practice, let's examine FPT Corporation's 2023 financial statements. FPT is one of Vietnam's largest technology companies, providing IT services, telecommunications, and education.</span>
<span id="cb21-111"><a href="#cb21-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-114"><a href="#cb21-114" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb21-115"><a href="#cb21-115" aria-hidden="true" tabindex="-1"></a><span class="co"># Placeholder for FPT balance sheet visualization</span></span>
<span id="cb21-116"><a href="#cb21-116" aria-hidden="true" tabindex="-1"></a><span class="co"># In practice, this would display the actual PDF or cleaned data</span></span>
<span id="cb21-117"><a href="#cb21-117" aria-hidden="true" tabindex="-1"></a><span class="co"># from DataCore's acquisition pipeline</span></span>
<span id="cb21-118"><a href="#cb21-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-119"><a href="#cb21-119" aria-hidden="true" tabindex="-1"></a><span class="co"># Example structure of what the balance sheet data looks like:</span></span>
<span id="cb21-120"><a href="#cb21-120" aria-hidden="true" tabindex="-1"></a><span class="co"># Assets: Current assets (cash, receivables, inventory) + Non-current assets (PP&amp;E, intangibles)</span></span>
<span id="cb21-121"><a href="#cb21-121" aria-hidden="true" tabindex="-1"></a><span class="co"># Liabilities: Current liabilities (payables, short-term debt) + Non-current liabilities (long-term debt)</span></span>
<span id="cb21-122"><a href="#cb21-122" aria-hidden="true" tabindex="-1"></a><span class="co"># Equity: Common stock + Retained earnings</span></span>
<span id="cb21-123"><a href="#cb21-123" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-124"><a href="#cb21-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-125"><a href="#cb21-125" aria-hidden="true" tabindex="-1"></a>The balance sheet demonstrates the fundamental accounting equation in action. FPT's assets (e.g., spanning cash, receivables, technology infrastructure, and intangible assets like software) exactly equal the sum of its liabilities and equity.</span>
<span id="cb21-126"><a href="#cb21-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-129"><a href="#cb21-129" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb21-130"><a href="#cb21-130" aria-hidden="true" tabindex="-1"></a><span class="co"># Placeholder for FPT income statement visualization</span></span>
<span id="cb21-131"><a href="#cb21-131" aria-hidden="true" tabindex="-1"></a><span class="co"># Shows the progression from revenue through various profit measures to net income</span></span>
<span id="cb21-132"><a href="#cb21-132" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-133"><a href="#cb21-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-134"><a href="#cb21-134" aria-hidden="true" tabindex="-1"></a>FPT's income statement reveals how the company transforms revenue into profit. The progression from gross profit through operating income to net income shows the impact of operating expenses, interest costs, and taxes.</span>
<span id="cb21-135"><a href="#cb21-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-138"><a href="#cb21-138" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb21-139"><a href="#cb21-139" aria-hidden="true" tabindex="-1"></a><span class="co"># Placeholder for FPT cash flow statement visualization</span></span>
<span id="cb21-140"><a href="#cb21-140" aria-hidden="true" tabindex="-1"></a><span class="co"># Reconciles net income with actual cash generation</span></span>
<span id="cb21-141"><a href="#cb21-141" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-142"><a href="#cb21-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-143"><a href="#cb21-143" aria-hidden="true" tabindex="-1"></a>The cash flow statement shows how FPT's reported profits translate into actual cash. Differences between net income and operating cash flow reveal the impact of working capital management and non-cash expenses.</span>
<span id="cb21-144"><a href="#cb21-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-145"><a href="#cb21-145" aria-hidden="true" tabindex="-1"></a><span class="fu">## Loading Financial Statement Data</span></span>
<span id="cb21-146"><a href="#cb21-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-147"><a href="#cb21-147" aria-hidden="true" tabindex="-1"></a>We now turn to systematic analysis across multiple companies. We load financial statement data for the VN30 index constituents (i.e., the 30 largest and most liquid stocks on Vietnam's Ho Chi Minh Stock Exchange).</span>
<span id="cb21-148"><a href="#cb21-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-151"><a href="#cb21-151" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb21-152"><a href="#cb21-152" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sqlite3</span>
<span id="cb21-153"><a href="#cb21-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-154"><a href="#cb21-154" aria-hidden="true" tabindex="-1"></a>tidy_finance <span class="op">=</span> sqlite3.<span class="ex">connect</span>(database<span class="op">=</span><span class="st">"data/tidy_finance_python.sqlite"</span>)</span>
<span id="cb21-155"><a href="#cb21-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-156"><a href="#cb21-156" aria-hidden="true" tabindex="-1"></a>comp_vn <span class="op">=</span> pd.read_sql_query(</span>
<span id="cb21-157"><a href="#cb21-157" aria-hidden="true" tabindex="-1"></a>    sql<span class="op">=</span><span class="st">"SELECT * FROM comp_vn"</span>,</span>
<span id="cb21-158"><a href="#cb21-158" aria-hidden="true" tabindex="-1"></a>    con<span class="op">=</span>tidy_finance,</span>
<span id="cb21-159"><a href="#cb21-159" aria-hidden="true" tabindex="-1"></a>    parse_dates<span class="op">=</span>{<span class="st">"datadate"</span>}</span>
<span id="cb21-160"><a href="#cb21-160" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-161"><a href="#cb21-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-162"><a href="#cb21-162" aria-hidden="true" tabindex="-1"></a>comp_vn.head(<span class="dv">3</span>)</span>
<span id="cb21-163"><a href="#cb21-163" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-164"><a href="#cb21-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-167"><a href="#cb21-167" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb21-168"><a href="#cb21-168" aria-hidden="true" tabindex="-1"></a>vn30_symbols <span class="op">=</span> [</span>
<span id="cb21-169"><a href="#cb21-169" aria-hidden="true" tabindex="-1"></a>    <span class="st">"ACB"</span>, <span class="st">"BCM"</span>, <span class="st">"BID"</span>, <span class="st">"BVH"</span>, <span class="st">"CTG"</span>, <span class="st">"FPT"</span>, <span class="st">"GAS"</span>, <span class="st">"GVR"</span>, <span class="st">"HDB"</span>, <span class="st">"HPG"</span>,</span>
<span id="cb21-170"><a href="#cb21-170" aria-hidden="true" tabindex="-1"></a>    <span class="st">"MBB"</span>, <span class="st">"MSN"</span>, <span class="st">"MWG"</span>, <span class="st">"PLX"</span>, <span class="st">"POW"</span>, <span class="st">"SAB"</span>, <span class="st">"SHB"</span>, <span class="st">"SSB"</span>, <span class="st">"STB"</span>, <span class="st">"TCB"</span>,</span>
<span id="cb21-171"><a href="#cb21-171" aria-hidden="true" tabindex="-1"></a>    <span class="st">"TPB"</span>, <span class="st">"VCB"</span>, <span class="st">"VHM"</span>, <span class="st">"VIB"</span>, <span class="st">"VIC"</span>, <span class="st">"VJC"</span>, <span class="st">"VNM"</span>, <span class="st">"VPB"</span>, <span class="st">"VRE"</span>, <span class="st">"EIB"</span></span>
<span id="cb21-172"><a href="#cb21-172" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb21-173"><a href="#cb21-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-174"><a href="#cb21-174" aria-hidden="true" tabindex="-1"></a>comp_vn30 <span class="op">=</span> comp_vn[comp_vn[<span class="st">"symbol"</span>].isin(vn30_symbols)]</span>
<span id="cb21-175"><a href="#cb21-175" aria-hidden="true" tabindex="-1"></a>comp_vn30.head(<span class="dv">3</span>)</span>
<span id="cb21-176"><a href="#cb21-176" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-177"><a href="#cb21-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-178"><a href="#cb21-178" aria-hidden="true" tabindex="-1"></a>This dataset provides the foundation for calculating financial ratios and conducting cross-sectional comparisons. Each row contains balance sheet, income statement, and cash flow items for a company-year observation.</span>
<span id="cb21-179"><a href="#cb21-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-180"><a href="#cb21-180" aria-hidden="true" tabindex="-1"></a><span class="fu">## Liquidity Ratios: Can the Company Pay Its Bills?</span></span>
<span id="cb21-181"><a href="#cb21-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-182"><a href="#cb21-182" aria-hidden="true" tabindex="-1"></a>Liquidity ratios assess a company's ability to meet short-term obligations. These metrics matter most to creditors, suppliers, and employees who need assurance that the company can pay its bills. They're calculated using balance sheet items, comparing liquid assets against near-term liabilities.</span>
<span id="cb21-183"><a href="#cb21-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-184"><a href="#cb21-184" aria-hidden="true" tabindex="-1"></a><span class="fu">### The Current Ratio</span></span>
<span id="cb21-185"><a href="#cb21-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-186"><a href="#cb21-186" aria-hidden="true" tabindex="-1"></a>The most basic liquidity measure compares all current assets to current liabilities:</span>
<span id="cb21-187"><a href="#cb21-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-188"><a href="#cb21-188" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-189"><a href="#cb21-189" aria-hidden="true" tabindex="-1"></a>\text{Current Ratio} = \frac{\text{Current Assets}}{\text{Current Liabilities}}</span>
<span id="cb21-190"><a href="#cb21-190" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-191"><a href="#cb21-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-192"><a href="#cb21-192" aria-hidden="true" tabindex="-1"></a>A ratio above one indicates the company has enough current assets to cover obligations due within one year. However, the interpretation depends heavily on the composition of current assets. A company with current assets tied up in slow-moving inventory is less liquid than one holding cash.</span>
<span id="cb21-193"><a href="#cb21-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-194"><a href="#cb21-194" aria-hidden="true" tabindex="-1"></a><span class="fu">### The Quick Ratio</span></span>
<span id="cb21-195"><a href="#cb21-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-196"><a href="#cb21-196" aria-hidden="true" tabindex="-1"></a>The quick ratio (or "acid test") provides a more stringent measure by excluding inventory:</span>
<span id="cb21-197"><a href="#cb21-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-198"><a href="#cb21-198" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-199"><a href="#cb21-199" aria-hidden="true" tabindex="-1"></a>\text{Quick Ratio} = \frac{\text{Current Assets} - \text{Inventory}}{\text{Current Liabilities}}</span>
<span id="cb21-200"><a href="#cb21-200" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-201"><a href="#cb21-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-202"><a href="#cb21-202" aria-hidden="true" tabindex="-1"></a>Why exclude inventory? Inventory is typically the least liquid current asset. It must be sold (potentially at a discount) before generating cash. A company facing a liquidity crisis cannot easily convert raw materials or finished goods into immediate cash. The quick ratio answers: "Can we pay our bills without relying on inventory sales?"</span>
<span id="cb21-203"><a href="#cb21-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-204"><a href="#cb21-204" aria-hidden="true" tabindex="-1"></a><span class="fu">### The Cash Ratio</span></span>
<span id="cb21-205"><a href="#cb21-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-206"><a href="#cb21-206" aria-hidden="true" tabindex="-1"></a>The most conservative liquidity measure focuses solely on the most liquid assets:</span>
<span id="cb21-207"><a href="#cb21-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-208"><a href="#cb21-208" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-209"><a href="#cb21-209" aria-hidden="true" tabindex="-1"></a>\text{Cash Ratio} = \frac{\text{Cash and Cash Equivalents}}{\text{Current Liabilities}}</span>
<span id="cb21-210"><a href="#cb21-210" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-211"><a href="#cb21-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-212"><a href="#cb21-212" aria-hidden="true" tabindex="-1"></a>While a ratio of one indicates robust liquidity, most companies maintain lower cash ratios to avoid holding excessive non-productive assets. Cash sitting in bank accounts could otherwise be invested in growth opportunities, returned to shareholders, or used to pay down costly debt.</span>
<span id="cb21-213"><a href="#cb21-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-214"><a href="#cb21-214" aria-hidden="true" tabindex="-1"></a><span class="fu">### Calculating Liquidity Ratios</span></span>
<span id="cb21-215"><a href="#cb21-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-216"><a href="#cb21-216" aria-hidden="true" tabindex="-1"></a>Let's compute these ratios for our VN30 sample:</span>
<span id="cb21-217"><a href="#cb21-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-220"><a href="#cb21-220" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb21-221"><a href="#cb21-221" aria-hidden="true" tabindex="-1"></a>balance_sheet_statements <span class="op">=</span> (comp_vn30</span>
<span id="cb21-222"><a href="#cb21-222" aria-hidden="true" tabindex="-1"></a>    .assign(</span>
<span id="cb21-223"><a href="#cb21-223" aria-hidden="true" tabindex="-1"></a>        fiscal_year<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="st">"year"</span>].astype(<span class="bu">int</span>),</span>
<span id="cb21-224"><a href="#cb21-224" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb21-225"><a href="#cb21-225" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Current Ratio: Current Assets / Current Liabilities</span></span>
<span id="cb21-226"><a href="#cb21-226" aria-hidden="true" tabindex="-1"></a>        current_ratio<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="st">"act"</span>] <span class="op">/</span> x[<span class="st">"lct"</span>],</span>
<span id="cb21-227"><a href="#cb21-227" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb21-228"><a href="#cb21-228" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Quick Ratio: (Current Assets - Inventory) / Current Liabilities</span></span>
<span id="cb21-229"><a href="#cb21-229" aria-hidden="true" tabindex="-1"></a>        quick_ratio<span class="op">=</span><span class="kw">lambda</span> x: (x[<span class="st">"act"</span>] <span class="op">-</span> x[<span class="st">"inv"</span>]) <span class="op">/</span> x[<span class="st">"lct"</span>],</span>
<span id="cb21-230"><a href="#cb21-230" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb21-231"><a href="#cb21-231" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Cash Ratio: Cash and Equivalents / Current Liabilities</span></span>
<span id="cb21-232"><a href="#cb21-232" aria-hidden="true" tabindex="-1"></a>        cash_ratio<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="st">"ca_cce"</span>] <span class="op">/</span> x[<span class="st">"lct"</span>],</span>
<span id="cb21-233"><a href="#cb21-233" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb21-234"><a href="#cb21-234" aria-hidden="true" tabindex="-1"></a>        label<span class="op">=</span><span class="kw">lambda</span> x: np.where(</span>
<span id="cb21-235"><a href="#cb21-235" aria-hidden="true" tabindex="-1"></a>            x[<span class="st">"symbol"</span>].isin(vn30_symbols), x[<span class="st">"symbol"</span>], np.nan</span>
<span id="cb21-236"><a href="#cb21-236" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb21-237"><a href="#cb21-237" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-238"><a href="#cb21-238" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-239"><a href="#cb21-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-240"><a href="#cb21-240" aria-hidden="true" tabindex="-1"></a>balance_sheet_statements.head(<span class="dv">3</span>)</span>
<span id="cb21-241"><a href="#cb21-241" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-242"><a href="#cb21-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-243"><a href="#cb21-243" aria-hidden="true" tabindex="-1"></a><span class="fu">### Cross-Sectional Comparison of Liquidity</span></span>
<span id="cb21-244"><a href="#cb21-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-245"><a href="#cb21-245" aria-hidden="true" tabindex="-1"></a>@fig-409 compares liquidity ratios across companies for the most recent fiscal year. This cross-sectional view reveals how different business models and industries maintain different liquidity profiles.</span>
<span id="cb21-246"><a href="#cb21-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-249"><a href="#cb21-249" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb21-250"><a href="#cb21-250" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-409</span></span>
<span id="cb21-251"><a href="#cb21-251" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Liquidity ratios measure a company's ability to meet short-term obligations. Higher values indicate greater liquidity, though excessively high ratios may suggest inefficient use of assets."</span></span>
<span id="cb21-252"><a href="#cb21-252" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-alt: "Title: Liquidity ratios for VN30 stocks. The figure shows a grouped bar chart comparing current, quick, and cash ratios across companies."</span></span>
<span id="cb21-253"><a href="#cb21-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-254"><a href="#cb21-254" aria-hidden="true" tabindex="-1"></a>liquidity_ratios <span class="op">=</span> (balance_sheet_statements</span>
<span id="cb21-255"><a href="#cb21-255" aria-hidden="true" tabindex="-1"></a>    .query(<span class="st">"year == 2023 &amp; label.notna()"</span>)</span>
<span id="cb21-256"><a href="#cb21-256" aria-hidden="true" tabindex="-1"></a>    .get([<span class="st">"symbol"</span>, <span class="st">"current_ratio"</span>, <span class="st">"quick_ratio"</span>, <span class="st">"cash_ratio"</span>])</span>
<span id="cb21-257"><a href="#cb21-257" aria-hidden="true" tabindex="-1"></a>    .melt(id_vars<span class="op">=</span>[<span class="st">"symbol"</span>], var_name<span class="op">=</span><span class="st">"name"</span>, value_name<span class="op">=</span><span class="st">"value"</span>)</span>
<span id="cb21-258"><a href="#cb21-258" aria-hidden="true" tabindex="-1"></a>    .assign(</span>
<span id="cb21-259"><a href="#cb21-259" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="st">"name"</span>].<span class="bu">str</span>.replace(<span class="st">"_"</span>, <span class="st">" "</span>).<span class="bu">str</span>.title()</span>
<span id="cb21-260"><a href="#cb21-260" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-261"><a href="#cb21-261" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-262"><a href="#cb21-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-263"><a href="#cb21-263" aria-hidden="true" tabindex="-1"></a>liquidity_ratios_figure <span class="op">=</span> (</span>
<span id="cb21-264"><a href="#cb21-264" aria-hidden="true" tabindex="-1"></a>    ggplot(liquidity_ratios, aes(y<span class="op">=</span><span class="st">"value"</span>, x<span class="op">=</span><span class="st">"name"</span>, fill<span class="op">=</span><span class="st">"symbol"</span>))</span>
<span id="cb21-265"><a href="#cb21-265" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_col(position<span class="op">=</span><span class="st">"dodge"</span>)</span>
<span id="cb21-266"><a href="#cb21-266" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> coord_flip()</span>
<span id="cb21-267"><a href="#cb21-267" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> labs(</span>
<span id="cb21-268"><a href="#cb21-268" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="st">""</span>, y<span class="op">=</span><span class="st">"Ratio Value"</span>, fill<span class="op">=</span><span class="st">""</span>,</span>
<span id="cb21-269"><a href="#cb21-269" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="st">"Liquidity Ratios for VN30 Stocks (2023)"</span></span>
<span id="cb21-270"><a href="#cb21-270" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-271"><a href="#cb21-271" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-272"><a href="#cb21-272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-273"><a href="#cb21-273" aria-hidden="true" tabindex="-1"></a>liquidity_ratios_figure.show()</span>
<span id="cb21-274"><a href="#cb21-274" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-275"><a href="#cb21-275" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-276"><a href="#cb21-276" aria-hidden="true" tabindex="-1"></a>Several patterns emerge from this comparison. Banks and financial institutions typically show different liquidity profiles than industrial companies due to their unique business models. Companies with high inventory (retailers, manufacturers) often show larger gaps between current and quick ratios.</span>
<span id="cb21-277"><a href="#cb21-277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-278"><a href="#cb21-278" aria-hidden="true" tabindex="-1"></a><span class="fu">## Leverage Ratios: How Is the Company Financed?</span></span>
<span id="cb21-279"><a href="#cb21-279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-280"><a href="#cb21-280" aria-hidden="true" tabindex="-1"></a>Leverage ratios examine a company's capital structure (i.e., the mix of debt and equity financing). These metrics reveal financial risk and long-term solvency, helping investors understand how much of the company's operations are funded by borrowed money.</span>
<span id="cb21-281"><a href="#cb21-281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-282"><a href="#cb21-282" aria-hidden="true" tabindex="-1"></a><span class="fu">### Why Capital Structure Matters</span></span>
<span id="cb21-283"><a href="#cb21-283" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-284"><a href="#cb21-284" aria-hidden="true" tabindex="-1"></a>A company's financing choice involves fundamental trade-offs:</span>
<span id="cb21-285"><a href="#cb21-285" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-286"><a href="#cb21-286" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Debt** offers tax advantages (interest is deductible) and doesn't dilute ownership, but creates fixed obligations that must be met regardless of business performance</span>
<span id="cb21-287"><a href="#cb21-287" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Equity** provides flexibility (no required payments) but dilutes existing shareholders and may be more expensive than debt</span>
<span id="cb21-288"><a href="#cb21-288" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-289"><a href="#cb21-289" aria-hidden="true" tabindex="-1"></a>Companies with high leverage amplify both gains and losses. In good times, shareholders capture more upside because profits aren't shared with additional equity holders. In bad times, fixed interest payments can push the company toward distress. This is why beta (systematic risk) tends to increase with leverage.</span>
<span id="cb21-290"><a href="#cb21-290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-291"><a href="#cb21-291" aria-hidden="true" tabindex="-1"></a><span class="fu">### Debt-to-Equity Ratio</span></span>
<span id="cb21-292"><a href="#cb21-292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-293"><a href="#cb21-293" aria-hidden="true" tabindex="-1"></a>This ratio indicates how much debt financing the company uses relative to shareholder investment:</span>
<span id="cb21-294"><a href="#cb21-294" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-295"><a href="#cb21-295" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-296"><a href="#cb21-296" aria-hidden="true" tabindex="-1"></a>\text{Debt-to-Equity} = \frac{\text{Total Debt}}{\text{Total Equity}}</span>
<span id="cb21-297"><a href="#cb21-297" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-298"><a href="#cb21-298" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-299"><a href="#cb21-299" aria-hidden="true" tabindex="-1"></a>A ratio of 1.0 means equal parts debt and equity financing. Higher ratios indicate more aggressive use of leverage, which can enhance returns in good times but increases bankruptcy risk.</span>
<span id="cb21-300"><a href="#cb21-300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-301"><a href="#cb21-301" aria-hidden="true" tabindex="-1"></a><span class="fu">### Debt-to-Asset Ratio</span></span>
<span id="cb21-302"><a href="#cb21-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-303"><a href="#cb21-303" aria-hidden="true" tabindex="-1"></a>This ratio shows what percentage of assets are financed through debt:</span>
<span id="cb21-304"><a href="#cb21-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-305"><a href="#cb21-305" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-306"><a href="#cb21-306" aria-hidden="true" tabindex="-1"></a>\text{Debt-to-Asset} = \frac{\text{Total Debt}}{\text{Total Assets}}</span>
<span id="cb21-307"><a href="#cb21-307" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-308"><a href="#cb21-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-309"><a href="#cb21-309" aria-hidden="true" tabindex="-1"></a>A ratio of 0.5 means half the company's assets are debt-financed. This metric is bounded between 0 and 1 (assuming positive equity), making it easier to compare across companies than the debt-to-equity ratio.</span>
<span id="cb21-310"><a href="#cb21-310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-311"><a href="#cb21-311" aria-hidden="true" tabindex="-1"></a><span class="fu">### Interest Coverage Ratio</span></span>
<span id="cb21-312"><a href="#cb21-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-313"><a href="#cb21-313" aria-hidden="true" tabindex="-1"></a>While the above ratios measure leverage levels, interest coverage assesses the ability to service that debt:</span>
<span id="cb21-314"><a href="#cb21-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-315"><a href="#cb21-315" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-316"><a href="#cb21-316" aria-hidden="true" tabindex="-1"></a>\text{Interest Coverage} = \frac{\text{EBIT}}{\text{Interest Expense}}</span>
<span id="cb21-317"><a href="#cb21-317" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-318"><a href="#cb21-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-319"><a href="#cb21-319" aria-hidden="true" tabindex="-1"></a>This ratio answers: "How many times over can current operating profits cover interest obligations?" A ratio below 1.0 means operating income doesn't cover interest payments, which is a dangerous position. Ratios above 3-5 generally indicate comfortable coverage.</span>
<span id="cb21-320"><a href="#cb21-320" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-321"><a href="#cb21-321" aria-hidden="true" tabindex="-1"></a><span class="fu">### Calculating Leverage Ratios</span></span>
<span id="cb21-322"><a href="#cb21-322" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-325"><a href="#cb21-325" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb21-326"><a href="#cb21-326" aria-hidden="true" tabindex="-1"></a>balance_sheet_statements <span class="op">=</span> balance_sheet_statements.assign(</span>
<span id="cb21-327"><a href="#cb21-327" aria-hidden="true" tabindex="-1"></a>    debt_to_equity<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="st">"total_debt"</span>] <span class="op">/</span> x[<span class="st">"total_equity"</span>],</span>
<span id="cb21-328"><a href="#cb21-328" aria-hidden="true" tabindex="-1"></a>    debt_to_asset<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="st">"total_debt"</span>] <span class="op">/</span> x[<span class="st">"at"</span>]</span>
<span id="cb21-329"><a href="#cb21-329" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-330"><a href="#cb21-330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-331"><a href="#cb21-331" aria-hidden="true" tabindex="-1"></a>income_statements <span class="op">=</span> (comp_vn30</span>
<span id="cb21-332"><a href="#cb21-332" aria-hidden="true" tabindex="-1"></a>    .assign(</span>
<span id="cb21-333"><a href="#cb21-333" aria-hidden="true" tabindex="-1"></a>        year<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="st">"year"</span>].astype(<span class="bu">int</span>),</span>
<span id="cb21-334"><a href="#cb21-334" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Handle zero interest expense to avoid infinity</span></span>
<span id="cb21-335"><a href="#cb21-335" aria-hidden="true" tabindex="-1"></a>        interest_coverage<span class="op">=</span><span class="kw">lambda</span> x: np.where(</span>
<span id="cb21-336"><a href="#cb21-336" aria-hidden="true" tabindex="-1"></a>            x[<span class="st">"cfo_interest_expense"</span>] <span class="op">&gt;</span> <span class="dv">0</span>,</span>
<span id="cb21-337"><a href="#cb21-337" aria-hidden="true" tabindex="-1"></a>            x[<span class="st">"is_net_business_profit"</span>] <span class="op">/</span> x[<span class="st">"cfo_interest_expense"</span>],</span>
<span id="cb21-338"><a href="#cb21-338" aria-hidden="true" tabindex="-1"></a>            np.nan</span>
<span id="cb21-339"><a href="#cb21-339" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb21-340"><a href="#cb21-340" aria-hidden="true" tabindex="-1"></a>        label<span class="op">=</span><span class="kw">lambda</span> x: np.where(</span>
<span id="cb21-341"><a href="#cb21-341" aria-hidden="true" tabindex="-1"></a>            x[<span class="st">"symbol"</span>].isin(vn30_symbols), x[<span class="st">"symbol"</span>], np.nan</span>
<span id="cb21-342"><a href="#cb21-342" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb21-343"><a href="#cb21-343" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-344"><a href="#cb21-344" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-345"><a href="#cb21-345" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-346"><a href="#cb21-346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-347"><a href="#cb21-347" aria-hidden="true" tabindex="-1"></a><span class="fu">### Leverage Trends Over Time</span></span>
<span id="cb21-348"><a href="#cb21-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-349"><a href="#cb21-349" aria-hidden="true" tabindex="-1"></a>@fig-410 tracks how debt-to-asset ratios have evolved over time. Time-series analysis reveals whether companies are becoming more or less leveraged.</span>
<span id="cb21-350"><a href="#cb21-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-353"><a href="#cb21-353" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb21-354"><a href="#cb21-354" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-410</span></span>
<span id="cb21-355"><a href="#cb21-355" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Debt-to-asset ratios show the proportion of assets financed by debt. Changes over time reflect evolving capital structure strategies and market conditions."</span></span>
<span id="cb21-356"><a href="#cb21-356" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-alt: "Title: Debt-to-asset ratios of VN30 stocks over time. The figure shows a line chart with years on the horizontal axis and debt-to-asset ratios on the vertical axis."</span></span>
<span id="cb21-357"><a href="#cb21-357" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-358"><a href="#cb21-358" aria-hidden="true" tabindex="-1"></a>debt_to_asset <span class="op">=</span> balance_sheet_statements.query(<span class="st">"symbol in @vn30_symbols"</span>)</span>
<span id="cb21-359"><a href="#cb21-359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-360"><a href="#cb21-360" aria-hidden="true" tabindex="-1"></a>debt_to_asset_figure <span class="op">=</span> (</span>
<span id="cb21-361"><a href="#cb21-361" aria-hidden="true" tabindex="-1"></a>    ggplot(debt_to_asset, aes(x<span class="op">=</span><span class="st">"year"</span>, y<span class="op">=</span><span class="st">"debt_to_asset"</span>, color<span class="op">=</span><span class="st">"symbol"</span>))</span>
<span id="cb21-362"><a href="#cb21-362" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_line(size<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb21-363"><a href="#cb21-363" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> scale_y_continuous(labels<span class="op">=</span>percent_format())</span>
<span id="cb21-364"><a href="#cb21-364" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> labs(</span>
<span id="cb21-365"><a href="#cb21-365" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="st">""</span>, y<span class="op">=</span><span class="st">"Debt-to-Asset Ratio"</span>, color<span class="op">=</span><span class="st">""</span>,</span>
<span id="cb21-366"><a href="#cb21-366" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="st">"Debt-to-Asset Ratios of VN30 Stocks Over Time"</span></span>
<span id="cb21-367"><a href="#cb21-367" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-368"><a href="#cb21-368" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-369"><a href="#cb21-369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-370"><a href="#cb21-370" aria-hidden="true" tabindex="-1"></a>debt_to_asset_figure.show()</span>
<span id="cb21-371"><a href="#cb21-371" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-372"><a href="#cb21-372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-373"><a href="#cb21-373" aria-hidden="true" tabindex="-1"></a><span class="fu">### Cross-Sectional Leverage Comparison</span></span>
<span id="cb21-374"><a href="#cb21-374" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-375"><a href="#cb21-375" aria-hidden="true" tabindex="-1"></a>@fig-411 provides a snapshot of leverage across all VN30 constituents for the most recent year.</span>
<span id="cb21-376"><a href="#cb21-376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-379"><a href="#cb21-379" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb21-380"><a href="#cb21-380" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-411</span></span>
<span id="cb21-381"><a href="#cb21-381" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Cross-sectional comparison of debt-to-asset ratios reveals industry patterns and company-specific financing strategies."</span></span>
<span id="cb21-382"><a href="#cb21-382" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-alt: "Title: Debt-to-asset ratios of VN30 stocks in 2023. The figure shows a horizontal bar chart with companies sorted by their debt-to-asset ratio."</span></span>
<span id="cb21-383"><a href="#cb21-383" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-384"><a href="#cb21-384" aria-hidden="true" tabindex="-1"></a>debt_to_asset_comparison <span class="op">=</span> balance_sheet_statements.query(<span class="st">"year == 2023"</span>)</span>
<span id="cb21-385"><a href="#cb21-385" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-386"><a href="#cb21-386" aria-hidden="true" tabindex="-1"></a>debt_to_asset_comparison[<span class="st">"symbol"</span>] <span class="op">=</span> pd.Categorical(</span>
<span id="cb21-387"><a href="#cb21-387" aria-hidden="true" tabindex="-1"></a>    debt_to_asset_comparison[<span class="st">"symbol"</span>],</span>
<span id="cb21-388"><a href="#cb21-388" aria-hidden="true" tabindex="-1"></a>    categories<span class="op">=</span>debt_to_asset_comparison.sort_values(<span class="st">"debt_to_asset"</span>)[<span class="st">"symbol"</span>],</span>
<span id="cb21-389"><a href="#cb21-389" aria-hidden="true" tabindex="-1"></a>    ordered<span class="op">=</span><span class="va">True</span></span>
<span id="cb21-390"><a href="#cb21-390" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-391"><a href="#cb21-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-392"><a href="#cb21-392" aria-hidden="true" tabindex="-1"></a>debt_to_asset_comparison_figure <span class="op">=</span> (</span>
<span id="cb21-393"><a href="#cb21-393" aria-hidden="true" tabindex="-1"></a>    ggplot(</span>
<span id="cb21-394"><a href="#cb21-394" aria-hidden="true" tabindex="-1"></a>        debt_to_asset_comparison,</span>
<span id="cb21-395"><a href="#cb21-395" aria-hidden="true" tabindex="-1"></a>        aes(y<span class="op">=</span><span class="st">"debt_to_asset"</span>, x<span class="op">=</span><span class="st">"symbol"</span>, fill<span class="op">=</span><span class="st">"label"</span>)</span>
<span id="cb21-396"><a href="#cb21-396" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-397"><a href="#cb21-397" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_col()</span>
<span id="cb21-398"><a href="#cb21-398" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> coord_flip()</span>
<span id="cb21-399"><a href="#cb21-399" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> scale_y_continuous(labels<span class="op">=</span>percent_format())</span>
<span id="cb21-400"><a href="#cb21-400" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> labs(</span>
<span id="cb21-401"><a href="#cb21-401" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="st">""</span>, y<span class="op">=</span><span class="st">"Debt-to-Asset Ratio"</span>, fill<span class="op">=</span><span class="st">""</span>,</span>
<span id="cb21-402"><a href="#cb21-402" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="st">"Debt-to-Asset Ratios of VN30 Stocks (2023)"</span></span>
<span id="cb21-403"><a href="#cb21-403" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-404"><a href="#cb21-404" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> theme(legend_position<span class="op">=</span><span class="st">"none"</span>)</span>
<span id="cb21-405"><a href="#cb21-405" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-406"><a href="#cb21-406" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-407"><a href="#cb21-407" aria-hidden="true" tabindex="-1"></a>debt_to_asset_comparison_figure.show()</span>
<span id="cb21-408"><a href="#cb21-408" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-409"><a href="#cb21-409" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-410"><a href="#cb21-410" aria-hidden="true" tabindex="-1"></a><span class="fu">### The Leverage-Coverage Trade-off</span></span>
<span id="cb21-411"><a href="#cb21-411" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-412"><a href="#cb21-412" aria-hidden="true" tabindex="-1"></a>@fig-412 examines the relationship between leverage levels and debt-servicing ability. Companies with higher debt loads should ideally have stronger interest coverage to maintain financial stability.</span>
<span id="cb21-413"><a href="#cb21-413" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-416"><a href="#cb21-416" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb21-417"><a href="#cb21-417" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-412</span></span>
<span id="cb21-418"><a href="#cb21-418" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "The relationship between leverage and interest coverage reveals whether companies can comfortably service their debt. High leverage with low coverage indicates elevated financial risk."</span></span>
<span id="cb21-419"><a href="#cb21-419" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-alt: "Title: Debt-to-asset ratios versus interest coverage. The figure shows a scatter plot with debt-to-asset on the horizontal axis and interest coverage on the vertical axis."</span></span>
<span id="cb21-420"><a href="#cb21-420" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-421"><a href="#cb21-421" aria-hidden="true" tabindex="-1"></a>interest_coverage <span class="op">=</span> (income_statements</span>
<span id="cb21-422"><a href="#cb21-422" aria-hidden="true" tabindex="-1"></a>    .query(<span class="st">"year == 2023"</span>)</span>
<span id="cb21-423"><a href="#cb21-423" aria-hidden="true" tabindex="-1"></a>    .get([<span class="st">"symbol"</span>, <span class="st">"year"</span>, <span class="st">"interest_coverage"</span>])</span>
<span id="cb21-424"><a href="#cb21-424" aria-hidden="true" tabindex="-1"></a>    .merge(balance_sheet_statements, on<span class="op">=</span>[<span class="st">"symbol"</span>, <span class="st">"year"</span>], how<span class="op">=</span><span class="st">"left"</span>)</span>
<span id="cb21-425"><a href="#cb21-425" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-426"><a href="#cb21-426" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-427"><a href="#cb21-427" aria-hidden="true" tabindex="-1"></a>interest_coverage_figure <span class="op">=</span> (</span>
<span id="cb21-428"><a href="#cb21-428" aria-hidden="true" tabindex="-1"></a>    ggplot(</span>
<span id="cb21-429"><a href="#cb21-429" aria-hidden="true" tabindex="-1"></a>        interest_coverage,</span>
<span id="cb21-430"><a href="#cb21-430" aria-hidden="true" tabindex="-1"></a>        aes(x<span class="op">=</span><span class="st">"debt_to_asset"</span>, y<span class="op">=</span><span class="st">"interest_coverage"</span>, color<span class="op">=</span><span class="st">"label"</span>)</span>
<span id="cb21-431"><a href="#cb21-431" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-432"><a href="#cb21-432" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_point(size<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb21-433"><a href="#cb21-433" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_label(</span>
<span id="cb21-434"><a href="#cb21-434" aria-hidden="true" tabindex="-1"></a>        aes(label<span class="op">=</span><span class="st">"label"</span>),</span>
<span id="cb21-435"><a href="#cb21-435" aria-hidden="true" tabindex="-1"></a>        adjust_text<span class="op">=</span>{<span class="st">"arrowprops"</span>: {<span class="st">"arrowstyle"</span>: <span class="st">"-"</span>}}</span>
<span id="cb21-436"><a href="#cb21-436" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-437"><a href="#cb21-437" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> scale_x_continuous(labels<span class="op">=</span>percent_format())</span>
<span id="cb21-438"><a href="#cb21-438" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> labs(</span>
<span id="cb21-439"><a href="#cb21-439" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="st">"Debt-to-Asset Ratio"</span>, y<span class="op">=</span><span class="st">"Interest Coverage Ratio"</span>,</span>
<span id="cb21-440"><a href="#cb21-440" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="st">"Leverage versus Interest Coverage for VN30 Stocks (2023)"</span></span>
<span id="cb21-441"><a href="#cb21-441" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-442"><a href="#cb21-442" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> theme(legend_position<span class="op">=</span><span class="st">"none"</span>)</span>
<span id="cb21-443"><a href="#cb21-443" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-444"><a href="#cb21-444" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-445"><a href="#cb21-445" aria-hidden="true" tabindex="-1"></a>interest_coverage_figure.show()</span>
<span id="cb21-446"><a href="#cb21-446" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-447"><a href="#cb21-447" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-448"><a href="#cb21-448" aria-hidden="true" tabindex="-1"></a>The scatter plot reveals important patterns. Companies in the upper-left quadrant (low leverage, high coverage) have conservative financing with ample debt capacity. Those in the lower-right (high leverage, low coverage) face elevated financial risk.</span>
<span id="cb21-449"><a href="#cb21-449" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-450"><a href="#cb21-450" aria-hidden="true" tabindex="-1"></a><span class="fu">## Efficiency Ratios: How Well Are Assets Managed?</span></span>
<span id="cb21-451"><a href="#cb21-451" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-452"><a href="#cb21-452" aria-hidden="true" tabindex="-1"></a>Efficiency ratios measure how effectively a company utilizes its assets and manages operations. These metrics help identify whether management is extracting maximum value from the company's resource base.</span>
<span id="cb21-453"><a href="#cb21-453" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-454"><a href="#cb21-454" aria-hidden="true" tabindex="-1"></a><span class="fu">### Asset Turnover</span></span>
<span id="cb21-455"><a href="#cb21-455" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-456"><a href="#cb21-456" aria-hidden="true" tabindex="-1"></a>This ratio measures how efficiently a company uses total assets to generate revenue:</span>
<span id="cb21-457"><a href="#cb21-457" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-458"><a href="#cb21-458" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-459"><a href="#cb21-459" aria-hidden="true" tabindex="-1"></a>\text{Asset Turnover} = \frac{\text{Revenue}}{\text{Total Assets}}</span>
<span id="cb21-460"><a href="#cb21-460" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-461"><a href="#cb21-461" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-462"><a href="#cb21-462" aria-hidden="true" tabindex="-1"></a>A higher ratio indicates more efficient asset utilization: the company generates more sales per dollar of assets. However, optimal levels vary dramatically across industries. Retailers with minimal fixed assets might achieve turnovers above 2.0, while capital-intensive manufacturers might operate below 0.5.</span>
<span id="cb21-463"><a href="#cb21-463" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-464"><a href="#cb21-464" aria-hidden="true" tabindex="-1"></a><span class="fu">### Inventory Turnover</span></span>
<span id="cb21-465"><a href="#cb21-465" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-466"><a href="#cb21-466" aria-hidden="true" tabindex="-1"></a>For companies carrying inventory, this ratio reveals how quickly stock moves through the business:</span>
<span id="cb21-467"><a href="#cb21-467" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-468"><a href="#cb21-468" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-469"><a href="#cb21-469" aria-hidden="true" tabindex="-1"></a>\text{Inventory Turnover} = \frac{\text{Cost of Goods Sold}}{\text{Inventory}}</span>
<span id="cb21-470"><a href="#cb21-470" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-471"><a href="#cb21-471" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-472"><a href="#cb21-472" aria-hidden="true" tabindex="-1"></a>Higher turnover suggests efficient inventory management (i.e., goods don't sit on shelves collecting dust). However, extremely high turnover might indicate stockout risks, while very low turnover could signal obsolete inventory or overinvestment in working capital.</span>
<span id="cb21-473"><a href="#cb21-473" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-474"><a href="#cb21-474" aria-hidden="true" tabindex="-1"></a>We use COGS rather than revenue in the numerator because inventory is recorded at cost, not selling price. Using revenue would overstate turnover for high-margin businesses.</span>
<span id="cb21-475"><a href="#cb21-475" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-476"><a href="#cb21-476" aria-hidden="true" tabindex="-1"></a><span class="fu">### Receivables Turnover</span></span>
<span id="cb21-477"><a href="#cb21-477" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-478"><a href="#cb21-478" aria-hidden="true" tabindex="-1"></a>This ratio measures how effectively a company collects payments from customers:</span>
<span id="cb21-479"><a href="#cb21-479" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-480"><a href="#cb21-480" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-481"><a href="#cb21-481" aria-hidden="true" tabindex="-1"></a>\text{Receivables Turnover} = \frac{\text{Revenue}}{\text{Accounts Receivable}}</span>
<span id="cb21-482"><a href="#cb21-482" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-483"><a href="#cb21-483" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-484"><a href="#cb21-484" aria-hidden="true" tabindex="-1"></a>Higher turnover indicates faster collection (i.e., customers pay promptly). Converting this to "days sales outstanding" (365 / turnover) gives the average collection period in days. Companies must balance collection efficiency against the sales impact of restrictive credit policies.</span>
<span id="cb21-485"><a href="#cb21-485" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-486"><a href="#cb21-486" aria-hidden="true" tabindex="-1"></a><span class="fu">### Calculating Efficiency Ratios</span></span>
<span id="cb21-487"><a href="#cb21-487" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-490"><a href="#cb21-490" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb21-491"><a href="#cb21-491" aria-hidden="true" tabindex="-1"></a>combined_statements <span class="op">=</span> (balance_sheet_statements</span>
<span id="cb21-492"><a href="#cb21-492" aria-hidden="true" tabindex="-1"></a>    .get([</span>
<span id="cb21-493"><a href="#cb21-493" aria-hidden="true" tabindex="-1"></a>        <span class="st">"symbol"</span>, <span class="st">"year"</span>, <span class="st">"label"</span>, <span class="st">"current_ratio"</span>, <span class="st">"quick_ratio"</span>,</span>
<span id="cb21-494"><a href="#cb21-494" aria-hidden="true" tabindex="-1"></a>        <span class="st">"cash_ratio"</span>, <span class="st">"debt_to_equity"</span>, <span class="st">"debt_to_asset"</span>, <span class="st">"total_asset"</span>,</span>
<span id="cb21-495"><a href="#cb21-495" aria-hidden="true" tabindex="-1"></a>        <span class="st">"total_equity"</span></span>
<span id="cb21-496"><a href="#cb21-496" aria-hidden="true" tabindex="-1"></a>    ])</span>
<span id="cb21-497"><a href="#cb21-497" aria-hidden="true" tabindex="-1"></a>    .merge(</span>
<span id="cb21-498"><a href="#cb21-498" aria-hidden="true" tabindex="-1"></a>        (income_statements</span>
<span id="cb21-499"><a href="#cb21-499" aria-hidden="true" tabindex="-1"></a>            .get([</span>
<span id="cb21-500"><a href="#cb21-500" aria-hidden="true" tabindex="-1"></a>                <span class="st">"symbol"</span>, <span class="st">"year"</span>, <span class="st">"interest_coverage"</span>, <span class="st">"is_revenue"</span>,</span>
<span id="cb21-501"><a href="#cb21-501" aria-hidden="true" tabindex="-1"></a>                <span class="st">"is_cogs"</span>, <span class="st">"selling_general_and_administrative_expenses"</span>,</span>
<span id="cb21-502"><a href="#cb21-502" aria-hidden="true" tabindex="-1"></a>                <span class="st">"is_interest_expense"</span>, <span class="st">"is_gross_profit"</span>, <span class="st">"is_eat"</span></span>
<span id="cb21-503"><a href="#cb21-503" aria-hidden="true" tabindex="-1"></a>            ])</span>
<span id="cb21-504"><a href="#cb21-504" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb21-505"><a href="#cb21-505" aria-hidden="true" tabindex="-1"></a>        on<span class="op">=</span>[<span class="st">"symbol"</span>, <span class="st">"year"</span>],</span>
<span id="cb21-506"><a href="#cb21-506" aria-hidden="true" tabindex="-1"></a>        how<span class="op">=</span><span class="st">"left"</span></span>
<span id="cb21-507"><a href="#cb21-507" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-508"><a href="#cb21-508" aria-hidden="true" tabindex="-1"></a>    .merge(</span>
<span id="cb21-509"><a href="#cb21-509" aria-hidden="true" tabindex="-1"></a>        (comp_vn30</span>
<span id="cb21-510"><a href="#cb21-510" aria-hidden="true" tabindex="-1"></a>            .assign(year<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="st">"year"</span>].astype(<span class="bu">int</span>))</span>
<span id="cb21-511"><a href="#cb21-511" aria-hidden="true" tabindex="-1"></a>            .get([<span class="st">"symbol"</span>, <span class="st">"year"</span>, <span class="st">"ca_total_inventory"</span>, <span class="st">"ca_acc_receiv"</span>])</span>
<span id="cb21-512"><a href="#cb21-512" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb21-513"><a href="#cb21-513" aria-hidden="true" tabindex="-1"></a>        on<span class="op">=</span>[<span class="st">"symbol"</span>, <span class="st">"year"</span>],</span>
<span id="cb21-514"><a href="#cb21-514" aria-hidden="true" tabindex="-1"></a>        how<span class="op">=</span><span class="st">"left"</span></span>
<span id="cb21-515"><a href="#cb21-515" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-516"><a href="#cb21-516" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-517"><a href="#cb21-517" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-518"><a href="#cb21-518" aria-hidden="true" tabindex="-1"></a>combined_statements <span class="op">=</span> combined_statements.assign(</span>
<span id="cb21-519"><a href="#cb21-519" aria-hidden="true" tabindex="-1"></a>    asset_turnover<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="st">"is_revenue"</span>] <span class="op">/</span> x[<span class="st">"total_asset"</span>],</span>
<span id="cb21-520"><a href="#cb21-520" aria-hidden="true" tabindex="-1"></a>    inventory_turnover<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="st">"is_cogs"</span>] <span class="op">/</span> x[<span class="st">"ca_total_inventory"</span>],</span>
<span id="cb21-521"><a href="#cb21-521" aria-hidden="true" tabindex="-1"></a>    receivables_turnover<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="st">"is_revenue"</span>] <span class="op">/</span> x[<span class="st">"ca_acc_receiv"</span>]</span>
<span id="cb21-522"><a href="#cb21-522" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-523"><a href="#cb21-523" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-524"><a href="#cb21-524" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-525"><a href="#cb21-525" aria-hidden="true" tabindex="-1"></a>Efficiency ratios vary dramatically across industries, making peer comparison essential. A grocery store and a shipbuilder will have fundamentally different asset and inventory dynamics.</span>
<span id="cb21-526"><a href="#cb21-526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-527"><a href="#cb21-527" aria-hidden="true" tabindex="-1"></a><span class="fu">## Profitability Ratios: Is the Company Making Money?</span></span>
<span id="cb21-528"><a href="#cb21-528" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-529"><a href="#cb21-529" aria-hidden="true" tabindex="-1"></a>Profitability ratios evaluate how effectively a company converts activity into earnings. These metrics directly measure financial success and are among the most closely watched indicators by investors.</span>
<span id="cb21-530"><a href="#cb21-530" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-531"><a href="#cb21-531" aria-hidden="true" tabindex="-1"></a><span class="fu">### Gross Margin</span></span>
<span id="cb21-532"><a href="#cb21-532" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-533"><a href="#cb21-533" aria-hidden="true" tabindex="-1"></a>The gross margin reveals what percentage of revenue remains after direct production costs:</span>
<span id="cb21-534"><a href="#cb21-534" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-535"><a href="#cb21-535" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-536"><a href="#cb21-536" aria-hidden="true" tabindex="-1"></a>\text{Gross Margin} = \frac{\text{Gross Profit}}{\text{Revenue}} = \frac{\text{Revenue} - \text{COGS}}{\text{Revenue}}</span>
<span id="cb21-537"><a href="#cb21-537" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-538"><a href="#cb21-538" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-539"><a href="#cb21-539" aria-hidden="true" tabindex="-1"></a>Higher gross margins indicate stronger pricing power, more efficient production, or a favorable product mix. This metric is particularly useful for comparing companies within an industry, as it reveals relative efficiency in core operations before overhead costs.</span>
<span id="cb21-540"><a href="#cb21-540" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-541"><a href="#cb21-541" aria-hidden="true" tabindex="-1"></a><span class="fu">### Profit Margin</span></span>
<span id="cb21-542"><a href="#cb21-542" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-543"><a href="#cb21-543" aria-hidden="true" tabindex="-1"></a>The profit margin shows what percentage of revenue ultimately becomes net income:</span>
<span id="cb21-544"><a href="#cb21-544" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-545"><a href="#cb21-545" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-546"><a href="#cb21-546" aria-hidden="true" tabindex="-1"></a>\text{Profit Margin} = \frac{\text{Net Income}}{\text{Revenue}}</span>
<span id="cb21-547"><a href="#cb21-547" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-548"><a href="#cb21-548" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-549"><a href="#cb21-549" aria-hidden="true" tabindex="-1"></a>This comprehensive measure accounts for all costs (e.g., production, operations, interest, and taxes). Higher profit margins suggest effective overall cost management. However, optimal margins vary by industry: software companies routinely achieve 20%+ margins, while grocery stores operate on razor-thin 2-3% margins.</span>
<span id="cb21-550"><a href="#cb21-550" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-551"><a href="#cb21-551" aria-hidden="true" tabindex="-1"></a><span class="fu">### Return on Equity (ROE)</span></span>
<span id="cb21-552"><a href="#cb21-552" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-553"><a href="#cb21-553" aria-hidden="true" tabindex="-1"></a>ROE measures how efficiently a company uses shareholders' investment to generate profits:</span>
<span id="cb21-554"><a href="#cb21-554" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-555"><a href="#cb21-555" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-556"><a href="#cb21-556" aria-hidden="true" tabindex="-1"></a>\text{Return on Equity} = \frac{\text{Net Income}}{\text{Total Equity}}</span>
<span id="cb21-557"><a href="#cb21-557" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-558"><a href="#cb21-558" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-559"><a href="#cb21-559" aria-hidden="true" tabindex="-1"></a>This metric directly addresses what shareholders care about: returns on their invested capital. Higher ROE indicates more effective use of equity, though interpretation requires caution. High leverage can artificially inflate ROE by reducing the equity base (e.g., a company financed 90% by debt will show spectacular ROE on modest profits).</span>
<span id="cb21-560"><a href="#cb21-560" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-561"><a href="#cb21-561" aria-hidden="true" tabindex="-1"></a><span class="fu">### The DuPont Decomposition</span></span>
<span id="cb21-562"><a href="#cb21-562" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-563"><a href="#cb21-563" aria-hidden="true" tabindex="-1"></a>The DuPont framework decomposes ROE into three components that reveal different aspects of performance:</span>
<span id="cb21-564"><a href="#cb21-564" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-565"><a href="#cb21-565" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-566"><a href="#cb21-566" aria-hidden="true" tabindex="-1"></a>\text{ROE} = \underbrace{\frac{\text{Net Income}}{\text{Revenue}}}_{\text{Profit Margin}} \times \underbrace{\frac{\text{Revenue}}{\text{Assets}}}_{\text{Asset Turnover}} \times \underbrace{\frac{\text{Assets}}{\text{Equity}}}_{\text{Leverage}}</span>
<span id="cb21-567"><a href="#cb21-567" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-568"><a href="#cb21-568" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-569"><a href="#cb21-569" aria-hidden="true" tabindex="-1"></a>This decomposition shows that high ROE can come from different sources: strong profit margins (pricing power, cost control), efficient asset use (high turnover), or aggressive leverage. Understanding which driver dominates helps assess sustainability. ROE driven by margins is generally more sustainable than ROE driven by leverage.</span>
<span id="cb21-570"><a href="#cb21-570" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-571"><a href="#cb21-571" aria-hidden="true" tabindex="-1"></a><span class="fu">### Calculating Profitability Ratios</span></span>
<span id="cb21-572"><a href="#cb21-572" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-575"><a href="#cb21-575" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb21-576"><a href="#cb21-576" aria-hidden="true" tabindex="-1"></a>combined_statements <span class="op">=</span> combined_statements.assign(</span>
<span id="cb21-577"><a href="#cb21-577" aria-hidden="true" tabindex="-1"></a>    gross_margin<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="st">"is_gross_profit"</span>] <span class="op">/</span> x[<span class="st">"is_revenue"</span>],</span>
<span id="cb21-578"><a href="#cb21-578" aria-hidden="true" tabindex="-1"></a>    profit_margin<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="st">"is_eat"</span>] <span class="op">/</span> x[<span class="st">"is_revenue"</span>],</span>
<span id="cb21-579"><a href="#cb21-579" aria-hidden="true" tabindex="-1"></a>    after_tax_roe<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="st">"is_eat"</span>] <span class="op">/</span> x[<span class="st">"total_equity"</span>]</span>
<span id="cb21-580"><a href="#cb21-580" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-581"><a href="#cb21-581" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-582"><a href="#cb21-582" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-583"><a href="#cb21-583" aria-hidden="true" tabindex="-1"></a><span class="fu">### Gross Margin Trends</span></span>
<span id="cb21-584"><a href="#cb21-584" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-585"><a href="#cb21-585" aria-hidden="true" tabindex="-1"></a>@fig-413 tracks gross margin evolution over time, revealing whether companies are maintaining pricing power and production efficiency.</span>
<span id="cb21-586"><a href="#cb21-586" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-589"><a href="#cb21-589" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb21-590"><a href="#cb21-590" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-413</span></span>
<span id="cb21-591"><a href="#cb21-591" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Gross margin trends reveal changes in pricing power and production efficiency. Declining margins may signal increased competition or rising input costs."</span></span>
<span id="cb21-592"><a href="#cb21-592" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-alt: "Title: Gross margins for VN30 stocks over time. The figure shows a line chart with years on the horizontal axis and gross margins on the vertical axis."</span></span>
<span id="cb21-593"><a href="#cb21-593" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-594"><a href="#cb21-594" aria-hidden="true" tabindex="-1"></a>gross_margins <span class="op">=</span> combined_statements.query(<span class="st">"symbol in @vn30_symbols"</span>)</span>
<span id="cb21-595"><a href="#cb21-595" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-596"><a href="#cb21-596" aria-hidden="true" tabindex="-1"></a>gross_margins_figure <span class="op">=</span> (</span>
<span id="cb21-597"><a href="#cb21-597" aria-hidden="true" tabindex="-1"></a>    ggplot(gross_margins, aes(x<span class="op">=</span><span class="st">"year"</span>, y<span class="op">=</span><span class="st">"gross_margin"</span>, color<span class="op">=</span><span class="st">"symbol"</span>))</span>
<span id="cb21-598"><a href="#cb21-598" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_line()</span>
<span id="cb21-599"><a href="#cb21-599" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> scale_y_continuous(labels<span class="op">=</span>percent_format())</span>
<span id="cb21-600"><a href="#cb21-600" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> labs(</span>
<span id="cb21-601"><a href="#cb21-601" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="st">""</span>, y<span class="op">=</span><span class="st">"Gross Margin"</span>, color<span class="op">=</span><span class="st">""</span>,</span>
<span id="cb21-602"><a href="#cb21-602" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="st">"Gross Margins for VN30 Stocks (2019-2023)"</span></span>
<span id="cb21-603"><a href="#cb21-603" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-604"><a href="#cb21-604" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-605"><a href="#cb21-605" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-606"><a href="#cb21-606" aria-hidden="true" tabindex="-1"></a>gross_margins_figure.show()</span>
<span id="cb21-607"><a href="#cb21-607" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-608"><a href="#cb21-608" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-609"><a href="#cb21-609" aria-hidden="true" tabindex="-1"></a><span class="fu">### From Gross to Net: Where Do Profits Go?</span></span>
<span id="cb21-610"><a href="#cb21-610" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-611"><a href="#cb21-611" aria-hidden="true" tabindex="-1"></a>@fig-414 examines the relationship between gross and profit margins. The gap between them reveals the impact of operating expenses, interest, and taxes.</span>
<span id="cb21-612"><a href="#cb21-612" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-615"><a href="#cb21-615" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb21-616"><a href="#cb21-616" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-414</span></span>
<span id="cb21-617"><a href="#cb21-617" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Comparing gross and profit margins reveals how much of gross profit survives operating expenses, interest, and taxes. Companies far below the diagonal have high overhead relative to gross profit."</span></span>
<span id="cb21-618"><a href="#cb21-618" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-alt: "Title: Gross versus profit margins for VN30 stocks. The figure shows a scatter plot with gross margins on the horizontal axis and profit margins on the vertical axis."</span></span>
<span id="cb21-619"><a href="#cb21-619" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-620"><a href="#cb21-620" aria-hidden="true" tabindex="-1"></a>profit_margins <span class="op">=</span> combined_statements.query(<span class="st">"year == 2023"</span>)</span>
<span id="cb21-621"><a href="#cb21-621" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-622"><a href="#cb21-622" aria-hidden="true" tabindex="-1"></a>profit_margins_figure <span class="op">=</span> (</span>
<span id="cb21-623"><a href="#cb21-623" aria-hidden="true" tabindex="-1"></a>    ggplot(</span>
<span id="cb21-624"><a href="#cb21-624" aria-hidden="true" tabindex="-1"></a>        profit_margins,</span>
<span id="cb21-625"><a href="#cb21-625" aria-hidden="true" tabindex="-1"></a>        aes(x<span class="op">=</span><span class="st">"gross_margin"</span>, y<span class="op">=</span><span class="st">"profit_margin"</span>, color<span class="op">=</span><span class="st">"label"</span>)</span>
<span id="cb21-626"><a href="#cb21-626" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-627"><a href="#cb21-627" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_point(size<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb21-628"><a href="#cb21-628" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_label(</span>
<span id="cb21-629"><a href="#cb21-629" aria-hidden="true" tabindex="-1"></a>        aes(label<span class="op">=</span><span class="st">"label"</span>),</span>
<span id="cb21-630"><a href="#cb21-630" aria-hidden="true" tabindex="-1"></a>        adjust_text<span class="op">=</span>{<span class="st">"arrowprops"</span>: {<span class="st">"arrowstyle"</span>: <span class="st">"-"</span>}}</span>
<span id="cb21-631"><a href="#cb21-631" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-632"><a href="#cb21-632" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> scale_x_continuous(labels<span class="op">=</span>percent_format())</span>
<span id="cb21-633"><a href="#cb21-633" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> scale_y_continuous(labels<span class="op">=</span>percent_format())</span>
<span id="cb21-634"><a href="#cb21-634" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> labs(</span>
<span id="cb21-635"><a href="#cb21-635" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="st">"Gross Margin"</span>, y<span class="op">=</span><span class="st">"Profit Margin"</span>,</span>
<span id="cb21-636"><a href="#cb21-636" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="st">"Gross versus Profit Margins for VN30 Stocks (2023)"</span></span>
<span id="cb21-637"><a href="#cb21-637" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-638"><a href="#cb21-638" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> theme(legend_position<span class="op">=</span><span class="st">"none"</span>)</span>
<span id="cb21-639"><a href="#cb21-639" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-640"><a href="#cb21-640" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-641"><a href="#cb21-641" aria-hidden="true" tabindex="-1"></a>profit_margins_figure.show()</span>
<span id="cb21-642"><a href="#cb21-642" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-643"><a href="#cb21-643" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-644"><a href="#cb21-644" aria-hidden="true" tabindex="-1"></a>Companies along the diagonal convert gross profit to net income efficiently. Those well below the diagonal face high operating costs, interest burdens, or tax rates that erode profitability.</span>
<span id="cb21-645"><a href="#cb21-645" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-646"><a href="#cb21-646" aria-hidden="true" tabindex="-1"></a><span class="fu">## Combining Financial Ratios: A Holistic View</span></span>
<span id="cb21-647"><a href="#cb21-647" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-648"><a href="#cb21-648" aria-hidden="true" tabindex="-1"></a>Individual ratios provide specific insights, but combining them offers a more complete picture. A company might excel in profitability while struggling with liquidity, or maintain conservative leverage while underperforming on efficiency.</span>
<span id="cb21-649"><a href="#cb21-649" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-650"><a href="#cb21-650" aria-hidden="true" tabindex="-1"></a><span class="fu">### Ranking Companies Across Categories</span></span>
<span id="cb21-651"><a href="#cb21-651" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-652"><a href="#cb21-652" aria-hidden="true" tabindex="-1"></a>@fig-415 compares company rankings across four ratio categories. Rankings closer to 1 indicate better performance within each category, enabling quick identification of relative strengths and weaknesses.</span>
<span id="cb21-653"><a href="#cb21-653" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-656"><a href="#cb21-656" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb21-657"><a href="#cb21-657" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-415</span></span>
<span id="cb21-658"><a href="#cb21-658" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Ranking companies across multiple ratio categories reveals overall financial profiles. Companies with consistently low ranks across categories demonstrate broad-based financial strength."</span></span>
<span id="cb21-659"><a href="#cb21-659" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-alt: "Title: Average rank in financial ratio categories. The figure shows a scatter plot with ranks for companies across liquidity, leverage, efficiency, and profitability categories."</span></span>
<span id="cb21-660"><a href="#cb21-660" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-661"><a href="#cb21-661" aria-hidden="true" tabindex="-1"></a>financial_ratios <span class="op">=</span> (combined_statements</span>
<span id="cb21-662"><a href="#cb21-662" aria-hidden="true" tabindex="-1"></a>    .query(<span class="st">"year == 2023"</span>)</span>
<span id="cb21-663"><a href="#cb21-663" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">filter</span>(</span>
<span id="cb21-664"><a href="#cb21-664" aria-hidden="true" tabindex="-1"></a>        items<span class="op">=</span>[<span class="st">"symbol"</span>] <span class="op">+</span> [</span>
<span id="cb21-665"><a href="#cb21-665" aria-hidden="true" tabindex="-1"></a>            col <span class="cf">for</span> col <span class="kw">in</span> combined_statements.columns</span>
<span id="cb21-666"><a href="#cb21-666" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="bu">any</span>(x <span class="kw">in</span> col <span class="cf">for</span> x <span class="kw">in</span> [</span>
<span id="cb21-667"><a href="#cb21-667" aria-hidden="true" tabindex="-1"></a>                <span class="st">"ratio"</span>, <span class="st">"margin"</span>, <span class="st">"roe"</span>, <span class="st">"_to_"</span>, <span class="st">"turnover"</span>, <span class="st">"interest_coverage"</span></span>
<span id="cb21-668"><a href="#cb21-668" aria-hidden="true" tabindex="-1"></a>            ])</span>
<span id="cb21-669"><a href="#cb21-669" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb21-670"><a href="#cb21-670" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-671"><a href="#cb21-671" aria-hidden="true" tabindex="-1"></a>    .melt(id_vars<span class="op">=</span>[<span class="st">"symbol"</span>], var_name<span class="op">=</span><span class="st">"name"</span>, value_name<span class="op">=</span><span class="st">"value"</span>)</span>
<span id="cb21-672"><a href="#cb21-672" aria-hidden="true" tabindex="-1"></a>    .assign(</span>
<span id="cb21-673"><a href="#cb21-673" aria-hidden="true" tabindex="-1"></a>        <span class="bu">type</span><span class="op">=</span><span class="kw">lambda</span> x: np.select(</span>
<span id="cb21-674"><a href="#cb21-674" aria-hidden="true" tabindex="-1"></a>            [</span>
<span id="cb21-675"><a href="#cb21-675" aria-hidden="true" tabindex="-1"></a>                x[<span class="st">"name"</span>].isin([<span class="st">"current_ratio"</span>, <span class="st">"quick_ratio"</span>, <span class="st">"cash_ratio"</span>]),</span>
<span id="cb21-676"><a href="#cb21-676" aria-hidden="true" tabindex="-1"></a>                x[<span class="st">"name"</span>].isin([<span class="st">"debt_to_equity"</span>, <span class="st">"debt_to_asset"</span>, <span class="st">"interest_coverage"</span>]),</span>
<span id="cb21-677"><a href="#cb21-677" aria-hidden="true" tabindex="-1"></a>                x[<span class="st">"name"</span>].isin([<span class="st">"asset_turnover"</span>, <span class="st">"inventory_turnover"</span>, <span class="st">"receivables_turnover"</span>]),</span>
<span id="cb21-678"><a href="#cb21-678" aria-hidden="true" tabindex="-1"></a>                x[<span class="st">"name"</span>].isin([<span class="st">"gross_margin"</span>, <span class="st">"profit_margin"</span>, <span class="st">"after_tax_roe"</span>]),</span>
<span id="cb21-679"><a href="#cb21-679" aria-hidden="true" tabindex="-1"></a>            ],</span>
<span id="cb21-680"><a href="#cb21-680" aria-hidden="true" tabindex="-1"></a>            [</span>
<span id="cb21-681"><a href="#cb21-681" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Liquidity Ratios"</span>,</span>
<span id="cb21-682"><a href="#cb21-682" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Leverage Ratios"</span>,</span>
<span id="cb21-683"><a href="#cb21-683" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Efficiency Ratios"</span>,</span>
<span id="cb21-684"><a href="#cb21-684" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Profitability Ratios"</span></span>
<span id="cb21-685"><a href="#cb21-685" aria-hidden="true" tabindex="-1"></a>            ],</span>
<span id="cb21-686"><a href="#cb21-686" aria-hidden="true" tabindex="-1"></a>            default<span class="op">=</span><span class="st">"Other"</span></span>
<span id="cb21-687"><a href="#cb21-687" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb21-688"><a href="#cb21-688" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-689"><a href="#cb21-689" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-690"><a href="#cb21-690" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-691"><a href="#cb21-691" aria-hidden="true" tabindex="-1"></a>financial_ratios[<span class="st">"rank"</span>] <span class="op">=</span> (financial_ratios</span>
<span id="cb21-692"><a href="#cb21-692" aria-hidden="true" tabindex="-1"></a>    .sort_values([<span class="st">"type"</span>, <span class="st">"name"</span>, <span class="st">"value"</span>], ascending<span class="op">=</span>[<span class="va">True</span>, <span class="va">True</span>, <span class="va">False</span>])</span>
<span id="cb21-693"><a href="#cb21-693" aria-hidden="true" tabindex="-1"></a>    .groupby([<span class="st">"type"</span>, <span class="st">"name"</span>])</span>
<span id="cb21-694"><a href="#cb21-694" aria-hidden="true" tabindex="-1"></a>    .cumcount() <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb21-695"><a href="#cb21-695" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-696"><a href="#cb21-696" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-697"><a href="#cb21-697" aria-hidden="true" tabindex="-1"></a>final_ranks <span class="op">=</span> (financial_ratios</span>
<span id="cb21-698"><a href="#cb21-698" aria-hidden="true" tabindex="-1"></a>    .groupby([<span class="st">"symbol"</span>, <span class="st">"type"</span>], as_index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb21-699"><a href="#cb21-699" aria-hidden="true" tabindex="-1"></a>    .agg(rank<span class="op">=</span>(<span class="st">"rank"</span>, <span class="st">"mean"</span>))</span>
<span id="cb21-700"><a href="#cb21-700" aria-hidden="true" tabindex="-1"></a>    .query(<span class="st">"symbol in @vn30_symbols"</span>)</span>
<span id="cb21-701"><a href="#cb21-701" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-702"><a href="#cb21-702" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-703"><a href="#cb21-703" aria-hidden="true" tabindex="-1"></a>final_ranks_figure <span class="op">=</span> (</span>
<span id="cb21-704"><a href="#cb21-704" aria-hidden="true" tabindex="-1"></a>    ggplot(final_ranks, aes(x<span class="op">=</span><span class="st">"rank"</span>, y<span class="op">=</span><span class="st">"type"</span>, color<span class="op">=</span><span class="st">"symbol"</span>))</span>
<span id="cb21-705"><a href="#cb21-705" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_point(shape<span class="op">=</span><span class="st">"^"</span>, size<span class="op">=</span><span class="dv">4</span>)</span>
<span id="cb21-706"><a href="#cb21-706" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> labs(</span>
<span id="cb21-707"><a href="#cb21-707" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="st">"Average Rank (Lower is Better)"</span>, y<span class="op">=</span><span class="st">""</span>, color<span class="op">=</span><span class="st">""</span>,</span>
<span id="cb21-708"><a href="#cb21-708" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="st">"Average Rank Across Financial Ratio Categories"</span></span>
<span id="cb21-709"><a href="#cb21-709" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-710"><a href="#cb21-710" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> coord_cartesian(xlim<span class="op">=</span>[<span class="dv">1</span>, <span class="dv">30</span>])</span>
<span id="cb21-711"><a href="#cb21-711" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-712"><a href="#cb21-712" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-713"><a href="#cb21-713" aria-hidden="true" tabindex="-1"></a>final_ranks_figure.show()</span>
<span id="cb21-714"><a href="#cb21-714" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-715"><a href="#cb21-715" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-716"><a href="#cb21-716" aria-hidden="true" tabindex="-1"></a>The combined view reveals how different business strategies manifest in financial profiles. A company might deliberately accept lower profitability rankings in exchange for stronger liquidity, or use aggressive leverage to boost returns at the cost of financial flexibility.</span>
<span id="cb21-717"><a href="#cb21-717" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-718"><a href="#cb21-718" aria-hidden="true" tabindex="-1"></a><span class="fu">## Financial Ratios in Asset Pricing</span></span>
<span id="cb21-719"><a href="#cb21-719" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-720"><a href="#cb21-720" aria-hidden="true" tabindex="-1"></a>Beyond evaluating individual companies, financial ratios serve as crucial inputs for asset pricing models. The Fama-French five-factor model, which we explore in detail in <span class="co">[</span><span class="ot">Fama-French Factors</span><span class="co">](12_fama_french.qmd)</span>, uses several accounting-based measures to explain cross-sectional variation in stock returns.</span>
<span id="cb21-721"><a href="#cb21-721" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-722"><a href="#cb21-722" aria-hidden="true" tabindex="-1"></a><span class="fu">### The Fama-French Factors</span></span>
<span id="cb21-723"><a href="#cb21-723" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-724"><a href="#cb21-724" aria-hidden="true" tabindex="-1"></a>The model incorporates four company characteristics derived from financial statements:</span>
<span id="cb21-725"><a href="#cb21-725" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-726"><a href="#cb21-726" aria-hidden="true" tabindex="-1"></a>**Size** is measured as the logarithm of market capitalization:</span>
<span id="cb21-727"><a href="#cb21-727" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-728"><a href="#cb21-728" aria-hidden="true" tabindex="-1"></a>\text{Size} = \ln(\text{Market Cap})</span>
<span id="cb21-729"><a href="#cb21-729" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-730"><a href="#cb21-730" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-731"><a href="#cb21-731" aria-hidden="true" tabindex="-1"></a>This captures the empirical finding that smaller firms tend to outperform larger firms on a risk-adjusted basis (i.e., the "size premium").</span>
<span id="cb21-732"><a href="#cb21-732" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-733"><a href="#cb21-733" aria-hidden="true" tabindex="-1"></a>**Book-to-Market** relates accounting value to market value:</span>
<span id="cb21-734"><a href="#cb21-734" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-735"><a href="#cb21-735" aria-hidden="true" tabindex="-1"></a>\text{Book-to-Market} = \frac{\text{Book Equity}}{\text{Market Cap}}</span>
<span id="cb21-736"><a href="#cb21-736" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-737"><a href="#cb21-737" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-738"><a href="#cb21-738" aria-hidden="true" tabindex="-1"></a>High book-to-market stocks ("value" stocks) have historically outperformed low book-to-market stocks ("growth" stocks) (i.e., the "value premium").</span>
<span id="cb21-739"><a href="#cb21-739" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-740"><a href="#cb21-740" aria-hidden="true" tabindex="-1"></a>**Operating Profitability** measures profit generation relative to equity:</span>
<span id="cb21-741"><a href="#cb21-741" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-742"><a href="#cb21-742" aria-hidden="true" tabindex="-1"></a>\text{Profitability} = \frac{\text{Revenue} - \text{COGS} - \text{SG<span class="sc">\&amp;</span>A} - \text{Interest}}{\text{Book Equity}}</span>
<span id="cb21-743"><a href="#cb21-743" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-744"><a href="#cb21-744" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-745"><a href="#cb21-745" aria-hidden="true" tabindex="-1"></a>More profitable firms tend to earn higher returns (i.e., the "profitability premium").</span>
<span id="cb21-746"><a href="#cb21-746" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-747"><a href="#cb21-747" aria-hidden="true" tabindex="-1"></a>**Investment** captures asset growth:</span>
<span id="cb21-748"><a href="#cb21-748" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-749"><a href="#cb21-749" aria-hidden="true" tabindex="-1"></a>\text{Investment} = \frac{\text{Total Assets}_t}{\text{Total Assets}_{t-1}} - 1</span>
<span id="cb21-750"><a href="#cb21-750" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb21-751"><a href="#cb21-751" aria-hidden="true" tabindex="-1"></a>Firms investing aggressively tend to underperform conservative investors (i.e., the "investment premium").</span>
<span id="cb21-752"><a href="#cb21-752" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-753"><a href="#cb21-753" aria-hidden="true" tabindex="-1"></a><span class="fu">### Calculating Fama-French Variables</span></span>
<span id="cb21-754"><a href="#cb21-754" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-757"><a href="#cb21-757" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb21-758"><a href="#cb21-758" aria-hidden="true" tabindex="-1"></a>prices_monthly <span class="op">=</span> pd.read_sql_query(</span>
<span id="cb21-759"><a href="#cb21-759" aria-hidden="true" tabindex="-1"></a>    sql<span class="op">=</span><span class="st">"SELECT * FROM prices_monthly"</span>,</span>
<span id="cb21-760"><a href="#cb21-760" aria-hidden="true" tabindex="-1"></a>    con<span class="op">=</span>tidy_finance,</span>
<span id="cb21-761"><a href="#cb21-761" aria-hidden="true" tabindex="-1"></a>    parse_dates<span class="op">=</span>{<span class="st">"datadate"</span>}</span>
<span id="cb21-762"><a href="#cb21-762" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-763"><a href="#cb21-763" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-764"><a href="#cb21-764" aria-hidden="true" tabindex="-1"></a><span class="co"># Use December prices for annual calculations</span></span>
<span id="cb21-765"><a href="#cb21-765" aria-hidden="true" tabindex="-1"></a>prices_december <span class="op">=</span> (prices_monthly</span>
<span id="cb21-766"><a href="#cb21-766" aria-hidden="true" tabindex="-1"></a>    .assign(date<span class="op">=</span><span class="kw">lambda</span> x: pd.to_datetime(x[<span class="st">"date"</span>]))</span>
<span id="cb21-767"><a href="#cb21-767" aria-hidden="true" tabindex="-1"></a>    .query(<span class="st">"date.dt.month == 12"</span>)</span>
<span id="cb21-768"><a href="#cb21-768" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-769"><a href="#cb21-769" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-770"><a href="#cb21-770" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-773"><a href="#cb21-773" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb21-774"><a href="#cb21-774" aria-hidden="true" tabindex="-1"></a>combined_statements_ff <span class="op">=</span> (combined_statements</span>
<span id="cb21-775"><a href="#cb21-775" aria-hidden="true" tabindex="-1"></a>    .query(<span class="st">"year == 2023"</span>)</span>
<span id="cb21-776"><a href="#cb21-776" aria-hidden="true" tabindex="-1"></a>    .merge(prices_december, on<span class="op">=</span>[<span class="st">"symbol"</span>, <span class="st">"year"</span>], how<span class="op">=</span><span class="st">"left"</span>)</span>
<span id="cb21-777"><a href="#cb21-777" aria-hidden="true" tabindex="-1"></a>    .merge(</span>
<span id="cb21-778"><a href="#cb21-778" aria-hidden="true" tabindex="-1"></a>        (balance_sheet_statements</span>
<span id="cb21-779"><a href="#cb21-779" aria-hidden="true" tabindex="-1"></a>            .query(<span class="st">"year == 2022"</span>)</span>
<span id="cb21-780"><a href="#cb21-780" aria-hidden="true" tabindex="-1"></a>            .get([<span class="st">"symbol"</span>, <span class="st">"total_asset"</span>])</span>
<span id="cb21-781"><a href="#cb21-781" aria-hidden="true" tabindex="-1"></a>            .rename(columns<span class="op">=</span>{<span class="st">"total_asset"</span>: <span class="st">"total_assets_lag"</span>})</span>
<span id="cb21-782"><a href="#cb21-782" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb21-783"><a href="#cb21-783" aria-hidden="true" tabindex="-1"></a>        on<span class="op">=</span><span class="st">"symbol"</span>,</span>
<span id="cb21-784"><a href="#cb21-784" aria-hidden="true" tabindex="-1"></a>        how<span class="op">=</span><span class="st">"left"</span></span>
<span id="cb21-785"><a href="#cb21-785" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-786"><a href="#cb21-786" aria-hidden="true" tabindex="-1"></a>    .assign(</span>
<span id="cb21-787"><a href="#cb21-787" aria-hidden="true" tabindex="-1"></a>        size<span class="op">=</span><span class="kw">lambda</span> x: np.log(x[<span class="st">"mktcap"</span>]),</span>
<span id="cb21-788"><a href="#cb21-788" aria-hidden="true" tabindex="-1"></a>        book_to_market<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="st">"total_equity"</span>] <span class="op">/</span> x[<span class="st">"mktcap"</span>],</span>
<span id="cb21-789"><a href="#cb21-789" aria-hidden="true" tabindex="-1"></a>        operating_profitability<span class="op">=</span><span class="kw">lambda</span> x: (</span>
<span id="cb21-790"><a href="#cb21-790" aria-hidden="true" tabindex="-1"></a>            (x[<span class="st">"is_revenue"</span>] <span class="op">-</span> x[<span class="st">"is_cogs"</span>] <span class="op">-</span></span>
<span id="cb21-791"><a href="#cb21-791" aria-hidden="true" tabindex="-1"></a>             x[<span class="st">"selling_general_and_administrative_expenses"</span>] <span class="op">-</span></span>
<span id="cb21-792"><a href="#cb21-792" aria-hidden="true" tabindex="-1"></a>             x[<span class="st">"is_interest_expense"</span>]) <span class="op">/</span> x[<span class="st">"total_equity"</span>]</span>
<span id="cb21-793"><a href="#cb21-793" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb21-794"><a href="#cb21-794" aria-hidden="true" tabindex="-1"></a>        investment<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="st">"total_asset"</span>] <span class="op">/</span> x[<span class="st">"total_assets_lag"</span>] <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb21-795"><a href="#cb21-795" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-796"><a href="#cb21-796" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-797"><a href="#cb21-797" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-798"><a href="#cb21-798" aria-hidden="true" tabindex="-1"></a>combined_statements_ff.head(<span class="dv">3</span>)</span>
<span id="cb21-799"><a href="#cb21-799" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-800"><a href="#cb21-800" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-801"><a href="#cb21-801" aria-hidden="true" tabindex="-1"></a><span class="fu">### Fama-French Factor Rankings</span></span>
<span id="cb21-802"><a href="#cb21-802" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-803"><a href="#cb21-803" aria-hidden="true" tabindex="-1"></a>@fig-416 shows how VN30 companies rank on each Fama-French variable, connecting fundamental analysis to asset pricing.</span>
<span id="cb21-804"><a href="#cb21-804" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-807"><a href="#cb21-807" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb21-808"><a href="#cb21-808" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-416</span></span>
<span id="cb21-809"><a href="#cb21-809" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Rankings on Fama-French variables connect financial statement analysis to asset pricing. According to factor models, smaller, higher book-to-market, more profitable, and lower-investment firms should earn higher expected returns."</span></span>
<span id="cb21-810"><a href="#cb21-810" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-alt: "Title: Rank in Fama-French variables for VN30 stocks. The figure shows a scatter plot with company ranks for size, book-to-market, profitability, and investment factors."</span></span>
<span id="cb21-811"><a href="#cb21-811" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-812"><a href="#cb21-812" aria-hidden="true" tabindex="-1"></a>factors_ranks <span class="op">=</span> (combined_statements_ff</span>
<span id="cb21-813"><a href="#cb21-813" aria-hidden="true" tabindex="-1"></a>    .get([<span class="st">"symbol"</span>, <span class="st">"size"</span>, <span class="st">"book_to_market"</span>, <span class="st">"operating_profitability"</span>, <span class="st">"investment"</span>])</span>
<span id="cb21-814"><a href="#cb21-814" aria-hidden="true" tabindex="-1"></a>    .rename(columns<span class="op">=</span>{</span>
<span id="cb21-815"><a href="#cb21-815" aria-hidden="true" tabindex="-1"></a>        <span class="st">"size"</span>: <span class="st">"Size"</span>,</span>
<span id="cb21-816"><a href="#cb21-816" aria-hidden="true" tabindex="-1"></a>        <span class="st">"book_to_market"</span>: <span class="st">"Book-to-Market"</span>,</span>
<span id="cb21-817"><a href="#cb21-817" aria-hidden="true" tabindex="-1"></a>        <span class="st">"operating_profitability"</span>: <span class="st">"Profitability"</span>,</span>
<span id="cb21-818"><a href="#cb21-818" aria-hidden="true" tabindex="-1"></a>        <span class="st">"investment"</span>: <span class="st">"Investment"</span></span>
<span id="cb21-819"><a href="#cb21-819" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb21-820"><a href="#cb21-820" aria-hidden="true" tabindex="-1"></a>    .melt(id_vars<span class="op">=</span>[<span class="st">"symbol"</span>], var_name<span class="op">=</span><span class="st">"name"</span>, value_name<span class="op">=</span><span class="st">"value"</span>)</span>
<span id="cb21-821"><a href="#cb21-821" aria-hidden="true" tabindex="-1"></a>    .assign(</span>
<span id="cb21-822"><a href="#cb21-822" aria-hidden="true" tabindex="-1"></a>        rank<span class="op">=</span><span class="kw">lambda</span> x: (</span>
<span id="cb21-823"><a href="#cb21-823" aria-hidden="true" tabindex="-1"></a>            x.sort_values([<span class="st">"name"</span>, <span class="st">"value"</span>], ascending<span class="op">=</span>[<span class="va">True</span>, <span class="va">False</span>])</span>
<span id="cb21-824"><a href="#cb21-824" aria-hidden="true" tabindex="-1"></a>            .groupby(<span class="st">"name"</span>)</span>
<span id="cb21-825"><a href="#cb21-825" aria-hidden="true" tabindex="-1"></a>            .cumcount() <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb21-826"><a href="#cb21-826" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb21-827"><a href="#cb21-827" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-828"><a href="#cb21-828" aria-hidden="true" tabindex="-1"></a>    .query(<span class="st">"symbol in @vn30_symbols"</span>)</span>
<span id="cb21-829"><a href="#cb21-829" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-830"><a href="#cb21-830" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-831"><a href="#cb21-831" aria-hidden="true" tabindex="-1"></a>factors_ranks_figure <span class="op">=</span> (</span>
<span id="cb21-832"><a href="#cb21-832" aria-hidden="true" tabindex="-1"></a>    ggplot(factors_ranks, aes(x<span class="op">=</span><span class="st">"rank"</span>, y<span class="op">=</span><span class="st">"name"</span>, color<span class="op">=</span><span class="st">"symbol"</span>))</span>
<span id="cb21-833"><a href="#cb21-833" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> geom_point(shape<span class="op">=</span><span class="st">"^"</span>, size<span class="op">=</span><span class="dv">4</span>)</span>
<span id="cb21-834"><a href="#cb21-834" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> labs(</span>
<span id="cb21-835"><a href="#cb21-835" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="st">"Rank"</span>, y<span class="op">=</span><span class="st">""</span>, color<span class="op">=</span><span class="st">""</span>,</span>
<span id="cb21-836"><a href="#cb21-836" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="st">"Rank in Fama-French Variables for VN30 Stocks"</span></span>
<span id="cb21-837"><a href="#cb21-837" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-838"><a href="#cb21-838" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> coord_cartesian(xlim<span class="op">=</span>[<span class="dv">1</span>, <span class="dv">30</span>])</span>
<span id="cb21-839"><a href="#cb21-839" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-840"><a href="#cb21-840" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-841"><a href="#cb21-841" aria-hidden="true" tabindex="-1"></a>factors_ranks_figure.show()</span>
<span id="cb21-842"><a href="#cb21-842" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb21-843"><a href="#cb21-843" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-844"><a href="#cb21-844" aria-hidden="true" tabindex="-1"></a>These rankings have implications for expected returns according to factor models. A small, high book-to-market, highly profitable company with conservative investment should, in theory, earn higher risk-adjusted returns than its opposite.</span>
<span id="cb21-845"><a href="#cb21-845" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-846"><a href="#cb21-846" aria-hidden="true" tabindex="-1"></a><span class="fu">## Limitations and Practical Considerations</span></span>
<span id="cb21-847"><a href="#cb21-847" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-848"><a href="#cb21-848" aria-hidden="true" tabindex="-1"></a>While financial ratios provide powerful analytical tools, several limitations deserve attention:</span>
<span id="cb21-849"><a href="#cb21-849" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-850"><a href="#cb21-850" aria-hidden="true" tabindex="-1"></a><span class="fu">### Accounting Discretion</span></span>
<span id="cb21-851"><a href="#cb21-851" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-852"><a href="#cb21-852" aria-hidden="true" tabindex="-1"></a>Companies have significant discretion in how they apply accounting standards. Revenue recognition timing, depreciation methods, inventory valuation (FIFO vs. LIFO), and capitalization versus expensing decisions all affect reported numbers. Sophisticated analysis requires understanding these choices and their impact.</span>
<span id="cb21-853"><a href="#cb21-853" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-854"><a href="#cb21-854" aria-hidden="true" tabindex="-1"></a><span class="fu">### Industry Comparability</span></span>
<span id="cb21-855"><a href="#cb21-855" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-856"><a href="#cb21-856" aria-hidden="true" tabindex="-1"></a>Ratios vary dramatically across industries. Comparing a bank's leverage to a retailer's is meaningless (e.g., banks naturally operate with much higher leverage due to their business model). Always benchmark against industry peers rather than absolute standards.</span>
<span id="cb21-857"><a href="#cb21-857" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-858"><a href="#cb21-858" aria-hidden="true" tabindex="-1"></a><span class="fu">### Point-in-Time Limitations</span></span>
<span id="cb21-859"><a href="#cb21-859" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-860"><a href="#cb21-860" aria-hidden="true" tabindex="-1"></a>Balance sheet ratios capture a single moment, which may not represent typical conditions. Companies often "window dress" by temporarily improving metrics at reporting dates. Trend analysis and quarter-over-quarter comparisons can reveal such practices.</span>
<span id="cb21-861"><a href="#cb21-861" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-862"><a href="#cb21-862" aria-hidden="true" tabindex="-1"></a><span class="fu">### Backward-Looking Nature</span></span>
<span id="cb21-863"><a href="#cb21-863" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-864"><a href="#cb21-864" aria-hidden="true" tabindex="-1"></a>Financial statements report historical results. Past profitability doesn't guarantee future performance, especially for companies in rapidly changing industries or facing disruption.</span>
<span id="cb21-865"><a href="#cb21-865" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-866"><a href="#cb21-866" aria-hidden="true" tabindex="-1"></a><span class="fu">### Quality of Earnings</span></span>
<span id="cb21-867"><a href="#cb21-867" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-868"><a href="#cb21-868" aria-hidden="true" tabindex="-1"></a>Not all profits are created equal. Earnings driven by one-time gains, accounting adjustments, or aggressive revenue recognition may not recur. Cash flow analysis helps assess earnings quality. Profits that don't convert to cash warrant skepticism.</span>
<span id="cb21-869"><a href="#cb21-869" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-870"><a href="#cb21-870" aria-hidden="true" tabindex="-1"></a><span class="fu">## Key Takeaways</span></span>
<span id="cb21-871"><a href="#cb21-871" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-872"><a href="#cb21-872" aria-hidden="true" tabindex="-1"></a>This chapter introduced financial statement analysis as a tool for understanding company fundamentals. The main insights are:</span>
<span id="cb21-873"><a href="#cb21-873" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-874"><a href="#cb21-874" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>**Three statements, three perspectives**: The balance sheet shows financial position at a point in time, the income statement measures performance over a period, and the cash flow statement tracks actual cash movements. Together, they provide a complete picture of financial health.</span>
<span id="cb21-875"><a href="#cb21-875" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-876"><a href="#cb21-876" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>**Liquidity ratios assess short-term survival**: Current, quick, and cash ratios measure the ability to meet near-term obligations. Higher ratios indicate greater liquidity but may suggest inefficient asset use.</span>
<span id="cb21-877"><a href="#cb21-877" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-878"><a href="#cb21-878" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>**Leverage ratios reveal capital structure risk**: Debt-to-equity, debt-to-asset, and interest coverage ratios show how the company finances operations and whether it can service its debt. Higher leverage amplifies both returns and risk.</span>
<span id="cb21-879"><a href="#cb21-879" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-880"><a href="#cb21-880" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>**Efficiency ratios measure management effectiveness**: Asset turnover, inventory turnover, and receivables turnover reveal how well the company converts resources into revenue. Industry context is essential for interpretation.</span>
<span id="cb21-881"><a href="#cb21-881" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-882"><a href="#cb21-882" aria-hidden="true" tabindex="-1"></a><span class="ss">5. </span>**Profitability ratios quantify financial success**: Gross margin, profit margin, and ROE measure the ability to generate earnings. The DuPont decomposition reveals whether ROE comes from margins, turnover, or leverage.</span>
<span id="cb21-883"><a href="#cb21-883" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-884"><a href="#cb21-884" aria-hidden="true" tabindex="-1"></a><span class="ss">6. </span>**Ratios connect to asset pricing**: Financial statement variables like book-to-market, profitability, and investment form the basis of factor models that explain cross-sectional return differences.</span>
<span id="cb21-885"><a href="#cb21-885" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-886"><a href="#cb21-886" aria-hidden="true" tabindex="-1"></a><span class="ss">7. </span>**Context matters for interpretation**: Ratios must be compared against industry peers, tracked over time, and considered alongside qualitative factors. No single ratio tells the complete story.</span>
<span id="cb21-887"><a href="#cb21-887" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-888"><a href="#cb21-888" aria-hidden="true" tabindex="-1"></a>Looking ahead, subsequent chapters will explore how these fundamental variables interact with market prices in asset pricing models, and how to construct factor portfolios based on financial statement characteristics.</span>
</code></pre></div><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p><span id="copyright"></span> Mike. All rights reserved.</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/mikenguyen13/tidy_finance_vn/edit/main/04_financial_statement_analysis.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/mikenguyen13/tidy_finance_vn/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>